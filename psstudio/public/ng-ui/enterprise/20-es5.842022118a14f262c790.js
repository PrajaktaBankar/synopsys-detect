!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{SZvS:function(t,r,i){"use strict";i.r(r),i.d(r,"FeatureRepoModule",(function(){return fe}));var n,c=i("PCNd"),o=i("3Pt+"),s=i("+0xr"),u=i("XNiG"),b=i("1G5W"),l=i("fXoL"),f=i("5eHb"),d=i("mLz/"),m=i("/mf7"),h=i("0IaG"),p=i("AytR"),S=i("tk/3"),g=((n=function(){function t(a){e(this,t),this._http=a,this.serverBaseUrl=p.a.serverBaseUrl,this.formData=new FormData}return a(t,[{key:"getAllFeatures",value:function(e){return this._http.get("".concat(this.serverBaseUrl,"/api/projects/").concat(e,"/feature_repo/share_features"))}},{key:"deleteFeature",value:function(e,t){return this._http.put("".concat(this.serverBaseUrl,"/api/projects/").concat(e,"/feature_repo/share_features"),t)}},{key:"shareFeature",value:function(e,t,a){return this._http.post("".concat(this.serverBaseUrl,"/api/projects/").concat(e,"/feature_repo/share_features/share?type=").concat(t),a)}}]),t}()).\u0275fac=function(e){return new(e||n)(l.Xb(S.b))},n.\u0275prov=l.Jb({token:n,factory:n.\u0275fac,providedIn:"root"}),n),v=i("dNgK"),T=i("Wp6s"),F=i("NFeN"),y=i("ofXK"),k=i("kmnG"),I=i("qFsG"),w=i("Dh3D"),K=i("M9IT"),_=i("/3uh"),B=i("bTqV"),C=i("d3UM"),D=i("FKr1"),N=i("A5z7"),O=["featurePaginator"],A=["featureSort"];function R(e,t){1&e&&(l.Tb(0,"h4",9),l.Kc(1," You don't have any feature yet. "),l.Sb())}function j(e,t){1&e&&l.Ob(0,"app-progress-spinner",30)}function L(e,t){1&e&&l.Ob(0,"th",31)}function x(e,t){if(1&e&&(l.Tb(0,"td",32),l.Kc(1),l.Sb()),2&e){var a=t.index;l.Bb(1),l.Mc(" ",a+1," ")}}function $(e,t){1&e&&(l.Tb(0,"th",33),l.Kc(1,"Name"),l.Sb())}function M(e,t){if(1&e&&(l.Tb(0,"td",32),l.Kc(1),l.Sb()),2&e){var a=t.$implicit;l.Bb(1),l.Mc(" ",a.name," ")}}function E(e,t){1&e&&(l.Tb(0,"th",33),l.Kc(1,"Shared"),l.Sb())}function U(e,t){if(1&e&&(l.Tb(0,"td",32),l.Kc(1),l.Sb()),2&e){var a=t.$implicit;l.Bb(1),l.Mc(" ",a.isShared," ")}}function q(e,t){1&e&&(l.Tb(0,"th",33),l.Kc(1,"Created At"),l.Sb())}function z(e,t){if(1&e&&(l.Tb(0,"td",32),l.Kc(1),l.fc(2,"date"),l.Sb()),2&e){var a=t.$implicit;l.Bb(1),l.Mc(" ",l.hc(2,1,a.createdAt,"medium")," ")}}function G(e,t){1&e&&(l.Tb(0,"th",31),l.Kc(1,"Actions"),l.Sb())}function H(e,t){if(1&e){var a=l.Ub();l.Tb(0,"td",32),l.Tb(1,"div",34),l.Tb(2,"button",35),l.ac("click",(function(){l.wc(a);var e=t.$implicit,r=l.ec(2),i=l.tc(14);return r.openInfoDialog(e,i)})),l.Ob(3,"i",36),l.Sb(),l.Tb(4,"button",35),l.ac("click",(function(){l.wc(a);var e=t.$implicit,r=l.ec(2),i=l.tc(12);return r.openFormDialog(e,i)})),l.Ob(5,"i",37),l.Sb(),l.Tb(6,"button",38),l.ac("click",(function(){l.wc(a);var e=t.$implicit;return l.ec(2).deleteHandler(e)})),l.Ob(7,"i",39),l.Sb(),l.Sb(),l.Sb()}}function P(e,t){1&e&&l.Ob(0,"tr",40)}function Q(e,t){1&e&&l.Ob(0,"tr",41)}function W(e,t){if(1&e&&(l.Tb(0,"td",44),l.Kc(1),l.Sb()),2&e){l.ec(2);var a=l.tc(6);l.Bb(1),l.Mc(' No data matching the filter "',a.value,'" ')}}function J(e,t){1&e&&(l.Tb(0,"td",44),l.Kc(1,"No data available in table"),l.Sb())}function X(e,t){if(1&e&&(l.Tb(0,"tr",42),l.Ic(1,W,2,1,"td",43),l.Ic(2,J,2,0,"td",43),l.Sb()),2&e){l.ec();var a=l.tc(6);l.Bb(1),l.kc("ngIf",""!=a.value),l.Bb(1),l.kc("ngIf",""==a.value)}}function Y(e,t){if(1&e){var a=l.Ub();l.Tb(0,"mat-card",10),l.Tb(1,"mat-card-content"),l.Tb(2,"mat-form-field",11),l.Tb(3,"mat-label"),l.Kc(4,"Search"),l.Sb(),l.Tb(5,"input",12,13),l.ac("keyup",(function(e){return l.wc(a),l.ec().applyFilter(e)})),l.Sb(),l.Sb(),l.Ic(7,j,1,0,"app-progress-spinner",14),l.Tb(8,"table",15,16),l.Rb(10,17),l.Ic(11,L,1,0,"th",18),l.Ic(12,x,2,1,"td",19),l.Qb(),l.Rb(13,20),l.Ic(14,$,2,0,"th",21),l.Ic(15,M,2,1,"td",19),l.Qb(),l.Rb(16,22),l.Ic(17,E,2,0,"th",21),l.Ic(18,U,2,1,"td",19),l.Qb(),l.Rb(19,23),l.Ic(20,q,2,0,"th",21),l.Ic(21,z,3,4,"td",19),l.Qb(),l.Rb(22,24),l.Ic(23,G,2,0,"th",18),l.Ic(24,H,8,0,"td",19),l.Qb(),l.Ic(25,P,1,0,"tr",25),l.Ic(26,Q,1,0,"tr",26),l.Ic(27,X,3,2,"tr",27),l.Sb(),l.Ob(28,"mat-paginator",28,29),l.Sb(),l.Sb()}if(2&e){var r=l.ec();l.Bb(7),l.kc("ngIf",r.showSpinner),l.Bb(1),l.kc("dataSource",r.dataSource),l.Bb(17),l.kc("matHeaderRowDef",r.displayedColumns),l.Bb(1),l.kc("matRowDefColumns",r.displayedColumns),l.Bb(2),l.kc("pageSizeOptions",r.pageSizeOptions)}}function V(e,t){if(1&e&&(l.Tb(0,"mat-option",59),l.Kc(1),l.Sb()),2&e){var a=t.$implicit;l.kc("value",a._id),l.Bb(1),l.Lc(a.name)}}function Z(e,t){1&e&&(l.Tb(0,"mat-error"),l.Kc(1,"Feature is required."),l.Sb())}function ee(e,t){1&e&&(l.Tb(0,"mat-error"),l.Kc(1,"Email id is required."),l.Sb())}function te(e,t){1&e&&(l.Tb(0,"mat-error"),l.Kc(1,"Invalid email id."),l.Sb())}function ae(e,t){if(1&e){var a=l.Ub();l.Tb(0,"h2",45),l.Kc(1,"Share a Feature"),l.Sb(),l.Tb(2,"mat-dialog-content",46),l.Tb(3,"form",47),l.Tb(4,"div",48),l.Tb(5,"div",49),l.Tb(6,"mat-form-field",50),l.Tb(7,"mat-label"),l.Kc(8,"Select feature(s) to share"),l.Sb(),l.Tb(9,"mat-select",51),l.Ic(10,V,2,2,"mat-option",52),l.Sb(),l.Ic(11,Z,2,0,"mat-error",53),l.Sb(),l.Sb(),l.Sb(),l.Tb(12,"div",48),l.Tb(13,"div",49),l.Tb(14,"mat-form-field",50),l.Tb(15,"mat-label",54),l.Kc(16,"Email"),l.Sb(),l.Ob(17,"input",55),l.Ic(18,ee,2,0,"mat-error",53),l.Ic(19,te,2,0,"mat-error",53),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Tb(20,"mat-dialog-actions",56),l.Tb(21,"button",57),l.ac("click",(function(){return l.wc(a),l.ec().sharingForm.reset()})),l.Kc(22,"Cancel"),l.Sb(),l.Tb(23,"button",58),l.ac("click",(function(){l.wc(a);var e=l.ec();return e.onSubmitShare(e.sharingForm.value)})),l.Kc(24," Share "),l.Sb(),l.Sb()}if(2&e){var r=l.ec();l.Bb(3),l.kc("formGroup",r.sharingForm),l.Bb(7),l.kc("ngForOf",r.featuresArray),l.Bb(1),l.kc("ngIf",r.sharingForm.get("sharedFeatures").hasError("required")&&(r.sharingForm.get("sharedFeatures").dirty||r.sharingForm.get("sharedFeatures").touched)),l.Bb(7),l.kc("ngIf",r.sharingForm.get("email").hasError("required")&&(r.sharingForm.get("email").dirty||r.sharingForm.get("email").touched)),l.Bb(1),l.kc("ngIf",r.sharingForm.get("email").hasError("email")),l.Bb(4),l.kc("disabled",r.sharingForm.invalid)}}function re(e,t){if(1&e&&(l.Tb(0,"div"),l.Tb(1,"h3"),l.Tb(2,"b"),l.Kc(3,"Description :"),l.Sb(),l.Kc(4),l.Sb(),l.Tb(5,"mat-chip-list"),l.Tb(6,"mat-chip"),l.Kc(7),l.Sb(),l.Sb(),l.Sb()),2&e){var a=l.ec(2);l.Bb(4),l.Mc(" ",a.selectedFeature.description,""),l.Bb(3),l.Lc(a.selectedFeature.functionDefinition)}}function ie(e,t){if(1&e&&(l.Tb(0,"tr"),l.Tb(1,"td"),l.Kc(2),l.Sb(),l.Tb(3,"td"),l.Kc(4),l.Sb(),l.Tb(5,"td"),l.Kc(6),l.Sb(),l.Sb()),2&e){var a=t.$implicit;l.Bb(2),l.Lc(a.colName),l.Bb(2),l.Lc(a.dataType),l.Bb(2),l.Lc(a.aggregateStrategy)}}function ne(e,t){if(1&e&&(l.Tb(0,"div"),l.Tb(1,"h3"),l.Kc(2,"Shared features details"),l.Sb(),l.Tb(3,"table",62),l.Tb(4,"thead"),l.Tb(5,"tr"),l.Tb(6,"th"),l.Kc(7,"Feature name"),l.Sb(),l.Tb(8,"th"),l.Kc(9,"Data type"),l.Sb(),l.Tb(10,"th"),l.Kc(11,"Aggregation strategy"),l.Sb(),l.Sb(),l.Sb(),l.Tb(12,"tbody"),l.Ic(13,ie,7,3,"tr",63),l.Sb(),l.Sb(),l.Tb(14,"h3"),l.Tb(15,"b"),l.Kc(16,"Shared index columns :"),l.Sb(),l.Kc(17),l.Sb(),l.Sb()),2&e){var a=l.ec(2);l.Bb(13),l.kc("ngForOf",a.selectedFeature.sharedFeaturesList),l.Bb(4),l.Lc(a.selectedFeature.sharedIndex.toString())}}function ce(e,t){if(1&e&&(l.Tb(0,"h2",45),l.Kc(1),l.Sb(),l.Tb(2,"mat-dialog-content",60),l.Tb(3,"h3"),l.Tb(4,"b"),l.Kc(5,"Feature Name :"),l.Sb(),l.Kc(6),l.Sb(),l.Ic(7,re,8,2,"div",53),l.Ic(8,ne,18,2,"div",53),l.Sb(),l.Tb(9,"mat-dialog-actions",56),l.Tb(10,"button",61),l.Kc(11,"Ok"),l.Sb(),l.Sb()),2&e){var a=l.ec();l.Bb(1),l.Mc(" ","function"===a.selectedFeature.type?"Function":"Feature"," Details "),l.Bb(5),l.Mc(" ",a.selectedFeature.name,""),l.Bb(1),l.kc("ngIf","function"===a.selectedFeature.type),l.Bb(1),l.kc("ngIf","feature"===a.selectedFeature.type)}}var oe,se,ue=i("GUC0"),be=((oe=function(){function t(a,r,i,n,c,b,l){e(this,t),this._toaster=a,this._localStorage=r,this._spinner=i,this._dialog=n,this._feature=c,this._fb=b,this._snackBar=l,this.dataSource=new s.p,this.pageSizeOptions=[10,15,20],this.displayedColumns=[],this.unsubscribe$=new u.b,this.showSpinner=!1,this.project=this._localStorage.getItem("project"),this.displayedColumns=["srNo","featureName","shared","createdAt","actions"],this.sharingForm=this._fb.group({sharedFeatures:["",o.I.required],email:["",[o.I.required,o.I.email]]})}return a(t,[{key:"paginator",set:function(e){this.dataSource.paginator=e}},{key:"sort",set:function(e){this.dataSource.sort=e}},{key:"ngOnInit",value:function(){this._spinner.showSpinner(),this.getFeaturesList()}},{key:"getFeaturesList",value:function(){var e=this;this._feature.getAllFeatures(this.project._id).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(t){e._spinner.stopSpinner(),t?(e.featuresArray=t,e.dataSource.data=t,e.dataSource._updateChangeSubscription(),e.dataSource.paginator=e.paginator,e.dataSource.sort=e.sort):e._toaster.error("Sorry! Cannot fetch features.","Features")}),(function(t){e._spinner.stopSpinner(),e._toaster.error("Server Error","Features")}))}},{key:"onSubmitShare",value:function(e){var t=this;this._feature.shareFeature(this.project._id,this.selectedFeature.type,e).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(e){e?(t.getFeaturesList(),t._toaster.success("Feature(s) shared successfully.","Features")):t._toaster.error("Sorry! Cannot shiare features.","Features")}),(function(e){t._toaster.error("Server Error","Features")}))}},{key:"openFormDialog",value:function(e,t){this.selectedFeature=e,this._dialog.open(t,{minWidth:"50vw",maxWidth:"50vw"})}},{key:"openInfoDialog",value:function(e,t){this.selectedFeature=e,this._dialog.open(t,{minWidth:"50vw",maxWidth:"50vw"})}},{key:"deleteHandler",value:function(e){var t=this;e.isShared?this._snackBar.open("Shared feature cannot be deleted.","OK",{horizontalPosition:"right",verticalPosition:"bottom"}):ue({title:"Are you sure?",text:"You will not be able to recover this file!",icon:"warning",buttons:{cancel:{text:"Cancel",value:null,visible:!0,className:""},confirm:{text:"Yes, delete it!",value:!0,visible:!0,className:"bg-danger"}}}).then((function(a){a&&(t.showSpinner=!0,t._feature.deleteFeature(t.project._id,e).subscribe((function(a){a?(t.featuresArray=t.featuresArray.filter((function(t){return t._id!==e._id})),t.dataSource.data=t.featuresArray,t.dataSource._updateChangeSubscription(),t._toaster.success(e.name+" deleted successfully.","Feature Repo")):t._toaster.error("Sorry! Cannot delete the feature.","Feature Repo"),t.showSpinner=!1}),(function(e){t.showSpinner=!1,t._toaster.error("Server Error","Feature Repo")})))}))}},{key:"applyFilter",value:function(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}]),t}()).\u0275fac=function(e){return new(e||oe)(l.Nb(f.c),l.Nb(d.a),l.Nb(m.a),l.Nb(h.c),l.Nb(g),l.Nb(o.h),l.Nb(v.c))},oe.\u0275cmp=l.Hb({type:oe,selectors:[["app-feature-repo"]],viewQuery:function(e,t){var a;1&e&&(l.Oc(O,!0),l.Oc(A,!0)),2&e&&(l.sc(a=l.bc())&&(t.paginator=a.first),l.sc(a=l.bc())&&(t.sort=a.first))},decls:15,vars:2,consts:[[1,"fluid-container"],[1,"heading"],["mat-card-avatar",""],[1,"folder-icon"],[1,"heading-title"],["class","text-center mt-5 font-weight-normal",4,"ngIf"],["class","features-listing mt-5 p-4",4,"ngIf"],["shareFormTemplate",""],["infoTemplate",""],[1,"text-center","mt-5","font-weight-normal"],[1,"features-listing","mt-5","p-4"],[1,"search-input"],["matInput","",3,"keyup"],["input",""],["class","spinner",4,"ngIf"],["mat-table","","matSort","","matSortActive","createdAt","matSortDirection","desc","matSortDisableClear","",1,"mt-2",3,"dataSource"],["featureSort","matSort"],["matColumnDef","srNo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","featureName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","shared"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mt-2",3,"pageSizeOptions"],["featurePaginator",""],[1,"spinner"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[1,"action-buttons","d-flex"],["mat-icon-button","",3,"click"],[1,"fas","fa-info-circle"],[1,"fas","fa-share-alt"],["mat-icon-button","",1,"delete-button",3,"click"],[1,"fa","fa-trash"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["class","mat-cell","colspan","4",4,"ngIf"],["colspan","4",1,"mat-cell"],["mat-dialog-title",""],[1,"mat-typography","mt-4"],["role","form","name","sharingForm",1,"form-validate",3,"formGroup"],[1,"row"],[1,"col-md-12","form-group"],["appearance","outline"],["formControlName","sharedFeatures","multiple",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["for","email"],["matInput","","type","email","name","email","formControlName","email","id","configName","placeholder","Enter email id","autocomplete","","required",""],[1,"justify-content-end","m-auto"],["mat-stroked-button","","mat-dialog-close","",3,"click"],["mat-flat-button","","mat-dialog-close","","type","submit",1,"btn-primary",3,"disabled","click"],[3,"value"],[1,"mat-typography",2,"overflow","unset"],["mat-stroked-button","","mat-dialog-close",""],[1,"table","table-bordered","table-hover"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(l.Tb(0,"div",0),l.Tb(1,"mat-card",1),l.Tb(2,"mat-card-header"),l.Tb(3,"div",2),l.Tb(4,"mat-icon",3),l.Kc(5,"summarize"),l.Sb(),l.Sb(),l.Tb(6,"mat-card-title"),l.Tb(7,"h3",4),l.Kc(8,"Features"),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Ic(9,R,2,0,"h4",5),l.Ic(10,Y,30,5,"mat-card",6),l.Sb(),l.Ic(11,ae,25,6,"ng-template",null,7,l.Jc),l.Ic(13,ce,12,4,"ng-template",null,8,l.Jc)),2&e&&(l.Bb(9),l.kc("ngIf",!t.dataSource.data.length),l.Bb(1),l.kc("ngIf",t.dataSource.data.length))},directives:[T.a,T.f,T.c,F.a,T.m,y.t,T.d,k.c,k.g,I.b,s.o,w.a,s.c,s.i,s.b,s.k,s.n,s.l,K.a,_.a,s.h,s.a,w.b,B.b,s.j,s.m,h.j,h.g,o.K,o.v,o.m,C.a,o.u,o.k,y.s,o.d,o.F,h.d,h.e,D.o,k.b,N.d,N.a],pipes:[y.f],styles:[""]}),oe),le=i("tyNb"),fe=((se=function t(){e(this,t)}).\u0275mod=l.Lb({type:se}),se.\u0275inj=l.Kb({factory:function(e){return new(e||se)},imports:[[y.c,c.a,le.i.forChild([{path:"",component:be}])]]}),se)}}])}();
//# sourceMappingURL=20-es5.842022118a14f262c790.js.map