{"version":3,"sources":["webpack:///node_modules/ngx-csv/ngx-csv.js","webpack:///src/assets/data/advance-algorithms.ts","webpack:///src/app/routes/models/forms-dialog-handler/forms-dialog-handler.component.html","webpack:///src/app/routes/models/forms-dialog-handler/forms-dialog-handler.component.ts","webpack:///src/app/routes/models/quick-prediction/quick-prediction.component.html","webpack:///src/app/routes/models/quick-prediction/quick-prediction.component.ts","webpack:///src/app/routes/models/pipeline/pipeline-expansion/pipeline-expansion.component.html","webpack:///src/app/routes/models/pipeline/pipeline-expansion/pipeline-expansion.component.ts","webpack:///src/app/routes/models/pipeline/pipeline.component.html","webpack:///src/app/routes/models/pipeline/pipeline.component.ts","webpack:///src/app/routes/models/expansion-graphs/expansion-graphs.component.html","webpack:///src/app/routes/models/expansion-graphs/expansion-graphs.component.ts","webpack:///src/app/routes/models/predictive-expansion/predictive-expansion.component.html","webpack:///src/app/routes/models/predictive-expansion/predictive-expansion.component.ts","webpack:///src/app/routes/models/timeseries-expansion/timeseries-expansion.component.html","webpack:///src/app/routes/models/timeseries-expansion/timeseries-expansion.component.ts","webpack:///src/app/routes/models/cluster-expansion/cluster-expansion.component.html","webpack:///src/app/routes/models/cluster-expansion/cluster-expansion.component.ts","webpack:///src/app/routes/models/models.component.html","webpack:///src/app/routes/models/models.component.ts","webpack:///src/app/routes/models/models.module.ts"],"names":["Object","defineProperty","exports","value","CsvConfigConsts","EOL","BOM","DEFAULT_FIELD_SEPARATOR","DEFAULT_DECIMAL_SEPARATOR","DEFAULT_QUOTE","DEFAULT_SHOW_TITLE","DEFAULT_TITLE","DEFAULT_FILENAME","DEFAULT_SHOW_LABELS","DEFAULT_USE_BOM","DEFAULT_HEADER","DEFAULT_NO_DOWNLOAD","DEFAULT_REMOVE_EMPTY_VALUES","ConfigDefaults","filename","fieldSeparator","quoteStrings","decimalseparator","showLabels","showTitle","title","useBom","headers","noDownload","removeEmptyValues","ngxCsv","DataJSON","options","this","csv","config","data","JSON","parse","_options","target","from","source","_i","arguments","length","symbols","to","toObject","s","key","hasOwnProperty","call","getOwnPropertySymbols","i","propIsEnumerable","generateCsv","prototype","getHeaders","getBody","blob","Blob","navigator","msSaveBlob","replace","encodeURI","link","document","createElement","href","URL","createObjectURL","setAttribute","download","body","appendChild","click","removeChild","console","log","_this","row","reduce","headerRow","header","slice","index","formartData","isFloat","toLocaleString","toString","indexOf","getCsv","input","isFinite","Boolean","propertyIsEnumerable","val","TypeError","ADV_ALGORITHMS_FORM_FIELDS","algoName","fields","type","name","label","required","gs_data","bo_data","validators","select_options","option_label","placeholder_text","isBOSupported","radio_btns","radio_label","swal","FormsDialogHandlerComponent","dialogData","_modelsDialogRef","_localStorage","_toaster","_data","_dataDrift","_spinner","_snackBar","_training","_utils","fb","unsubscribe$","Subject","hideMssqlSourceType","hidePgsqlSourceType","hideMysqlSourceType","hideSelectConnection","showDriftAnalysis","isImported","disableBO","appType","environment","allowedSettingsOption","retrainType","sourceType","backGround","foreGround","mergeDataset","dataSetsList","driftConfigList","dataConnectionsArray","hideSubmitBtn","isMultilabel","disableBagging","disableBoosting","disableRandomSearch","hptForm","group","showSpinner","ALGORITHMS_ARRAY","getAlgorithms","filter","item","status","user","getItem","project","modelInfo","training","trainingInfo","edaInfo","originalFileWithEdaDetails","setRestrictions","dialogHeading","initializeRetrainData","initializeTuningData","stopSpinner","iteration","genModelName","models","modelMetaData","dataSets","getAllProjectDatas","_id","pipe","takeUntil","toPromise","catch","e","error","message","filesList","fileSource","baseTrainingFile","find","originalFileId","retrainSourceType","selectedModelName","algoType","algorithm","split","retrainObj","algorithms","trainingId","modelId","projectId","modelTuning","modelFile","modelPath","sampling","useGPU","dataSetInfo","trainings","edaId","logTransformationColumns","scalarValue","dataGroupId","getAllSettings","push","algo","timeseriesAlgo","modelTuningOption","algoSplit","algorithmName","includes","dynamicFormFieldsAdvAlgo","getAdvAlgoFormFields","hptPreference","charAt","toUpperCase","formFields","forEach","defaultFieldVal","dbFormVal","dynamicFormFields","getHptFormFields","map","filterFormFields","tuningOption","baggingBoosting","isError","open","horizontalPosition","verticalPosition","isGridSearchSupported","splitAlgo","obj","parseFloat","reqObj","pId","indepVariable","projectType","trainPipeFilePath","transformedDatasetPath","startModelTuning","subscribe","res","info","closeModal","err","fieldsArray","createFormAndAddValidation","selectedDataset","selectedConnection","getAllConnections","edaSummary","query","retrainingFileId","connectionSettings","connection","connectionName","database","databaseName","databaseConnectionId","dataConnId","selectedDataSet","retrainingDataFilename","fileSchema","startReTraining","modelErrorCount","stdThreshold","reportName","inputFeature","incomingFileId","driftConfig","incomingFilepath","incomingSchema","colName","dataType","startDriftAnalysis","advAlgoName","checkAdvTrainingAlreadyDone","a","dynamicFormAdvAlgoFields","formAdvAlgoFeilds","advAlgoReqObject","algoname","modelFilePath","hyperParams","selection","hyperParam","advAlgoSelected","tempObj","isFound","text","icon","className","advAlgoOptions","degree","startAdvTraining","found","model","toLowerCase","customValue","field","stringify","close","psFeatures","allowedFeaturesList","controls","control","validatorsToAdd","entries","min","Number","requiredTrue","email","minLength","maxLength","undefined","get","setValidators","pattern","updateValueAndValidity","String","nullValidator","max","addControl","next","unsubscribe","QuickPredictionComponent","_textAnalysis","_models","_socket","_snackbar","_window","_dialog","$win","$","window","predMode","toggleView","fileUploadControl","quickPredformData","taFeatureConfig","quickPredUIMetaData","predictionPreviewData","allowedModelOptions","fileEncoding","initQuickPredictionSocket","allowedPSFileUploadSize","graphSupported","isDeleted","initializeQuickPrediction","originalFileDetails","getMyFileData","currentModelMeta","taExperimentId","taExperiment","getTaExperiment","dataset","selectedModel","predictionResult","mode","notebookInputFileName","notebookInputFileDetails","getQuickPredictionFormData","modelToPredict","qpFormData","qpData","notebookInputFileId","depVariable","itemExist","fileToUpload","modelName","scalerObj","reTrainFileId","predictionUploadResult","fileUploadPrediction","projectDetails","predictionFile","performPrediction","show","keys","predictionData","doPrediction","dataId","experimentId","minWidth","maxWidth","rowId","afterClosed","arrayData","some","inputFile","ext","pop","size","serverBaseUrl","event","api","setDomLayout","gridApi","refreshCells","force","setColumnDefs","gridOptions","columnDefs","setRowData","rowData","listen","predictionFileMetaData","generatePreviewTable","firstRecord","headerName","headerHeight","defaultColDef","resizable","success","removeListener","Window","onChangeDataset","selectPredMode","PipelineExpansionComponent","taskData","columnList","method","shape","selectedTask","pipelineDetails","Array","isArray","PipelineComponent","pipelineTask","timelineAlt","showPipelineDetails","element","taskName","parent","afOperation","afOperations","transformer","j","step","metaInfo","fileName","indexPath","samplingType","samplingPercentage","operation","predictiveModelingInfo","clusteringInfo","getPipelineDetails","resp","ExpansionGraphsComponent","dev","activeTabName","modelData","holdout","scoringMetrics","tab","PredictiveExpansionComponent","_colors","updateTrainingModels","pieOptions1","animate","duration","enabled","barColor","byName","trackColor","scaleColor","lineWidth","lineCap","showGraphs","regressionMetrics","classificationMetrics","validationStrategy","technique","nSplit","badgeText","Name","graphListSupported","initCvSocket","metrics","metric","cvData","metricdata","string","getAlgorithmSupported","performHoldOut","emit","runCv","performScoring","textLabel","respData","showGraphsSection","Plotly","TimeseriesExpansionComponent","_eda","showTextError","selectedTimeseriesGroup","selectedTimeseriesGroupForecast","losses","csvData","colNameOtherThanX","isMultipleTimeseries","getTimeseriesGroup","startDate","Date","now","toISOString","endDate","uniqueForecastDiv","uniqueEvaluateDiv","timeseriesGoupList","allowedGroupList","frequency","resampling","resamplingMethod","descriptiveStatistics","timeseriesInfo","datetimeIndex","calculateFrequency","parentPipelineFilename","tasks","currentPipelineFilename","timeseriesIds","nSteps","evaluateGraph","graphDiv","getElementById","deleteTraces","graphContent","layout","xaxis","linecolor","yaxis","plot","preprocessedFilepath","moment","format","forecastModelPath","getForecastGraph","template","xanchor","y","x","yanchor","gridcolor","zerolinecolor","showgrid","prepareGraphData","graphData","transposedData","colNames","d","xdataForCsv","ydataForCsv","sort","Set","forecast","k","sDate","eDate","isAfter","afterDismissed","date","setDate","getDate","evaluateForecast","getForecast","$event","blur","ClusterExpansionComponent","_sanitizer","_changeDetectorRef","dataSource","featuresArray","viewScatterPlot","editMode","selectedFeature","clusteringFeatures","showUpdateButton","viewType","cardColor","hideHeatMap","hideSummary","settingActive","featureList","selectedCluster","checkIsNumber","paginator","analysisInfo","detectChanges","obs","connect","clusteringGraphType","featureImp","uniqueGraphDiv","heatMapDiv","clusterErrorType","indepVar","plotHeatMap","plotDecisionTreePlot","plotFeatureImp","dataItem","purge","X","Y","sortArryOFObjects","featureImportance","importance","orientation","autosize","automargin","showSnackBar","analysisObj","clusterId","clusterName","tempFeature","selectedFeatures","trainPipeFileName","rootFileName","graphType","visualiseGraph","newPlot","openEdaReport","updateModel","analysisMap","clusterHeatMap","clusterStats","clusterDecisionTree","treeModelOutput","decisionTreeImage","bypassSecurityTrustResourceUrl","editedItem","test","isNaN","clusterTemplate","Data","dialogRef","width","edaReportData","moduleName","maxHeight","afterOpened","any","button","snackBarRef","items","b","disconnect","stopPropagation","ModelsComponent","_router","selectedTrainingControl","values","filterSortOrder","color","downloadToolkitDiameter","psType","downloadFile","deployPsType","hostlist","showTrainingSpinner","erroCount","totalAlgos","trainingList","filtersArray","forcastHtmlData","isMulticlass","isAdvanceAlgoSupport","initTrainingSocket","initDataDriftSocket","initCpuLoadSocket","getTrainingsList","getTrainingList","previousTraining","setValue","setFilterList","showSelectedTrainingModels","createdAt","sortAndRankModels","problemType","genClusteringFeatures","classNames","supportedGraphList","selectedTraining","getModelsList","getOriginalFileDetails","getNotebookInputFileDetails","fileWithEda","getChildDataSets","rejectedGroupList","getTimeseriesList","isAdvanceAlgoSupported","trainingData","decomposition","components","numericFeatures","uploadScoringUrl","initModels","modelSupported","aa","pilot","bb","overallScore","scoringDataTemplate","uploadScoringData","buttons","cancel","visible","confirm","then","isConfirm","deleteTraining","deleteModel","openFormDialog","deployModelTemplate","platform","selectedHost","listHost","deployPsTypeflag","deployFileId","deployObj","findAlgoType","fileId","notebooks","deployReqObj","Host","rejectedGroupTemplate","resDeployfile","deployModelService","modelDeployed","deployModelPost","preDeployModel","getHostList","list","downloadPsType","downloadFileId","downloadAlgoType","downloadNotebooks","downloadNotebookInputFileId","downloadTraining","downloadModelInfo","downloadPlatform","downloadProject","downloadModelFile","getAllChildDatasets","selectedTrainingId","sortedModel","autoGenerationData","getPipelineTask","description","preview","task","dataCollection","eda","pipelineTasks","tempAFoperations","autoFGenOp","pipelineData","fill","order","id","queryForUrl","url","trainingType","navigateByUrl","cpuLoad","ModelsModule","withComponents","forChild","path","component"],"mappings":"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","file":"x","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar CsvConfigConsts = (function () {\r\n    function CsvConfigConsts() {\r\n    }\r\n    CsvConfigConsts.EOL = \"\\r\\n\";\r\n    CsvConfigConsts.BOM = \"\\ufeff\";\r\n    CsvConfigConsts.DEFAULT_FIELD_SEPARATOR = ',';\r\n    CsvConfigConsts.DEFAULT_DECIMAL_SEPARATOR = '.';\r\n    CsvConfigConsts.DEFAULT_QUOTE = '\"';\r\n    CsvConfigConsts.DEFAULT_SHOW_TITLE = false;\r\n    CsvConfigConsts.DEFAULT_TITLE = 'My Report';\r\n    CsvConfigConsts.DEFAULT_FILENAME = 'mycsv.csv';\r\n    CsvConfigConsts.DEFAULT_SHOW_LABELS = false;\r\n    CsvConfigConsts.DEFAULT_USE_BOM = true;\r\n    CsvConfigConsts.DEFAULT_HEADER = [];\r\n    CsvConfigConsts.DEFAULT_NO_DOWNLOAD = false;\r\n    CsvConfigConsts.DEFAULT_REMOVE_EMPTY_VALUES = false;\r\n    return CsvConfigConsts;\r\n}());\r\nexports.CsvConfigConsts = CsvConfigConsts;\r\nexports.ConfigDefaults = {\r\n    filename: CsvConfigConsts.DEFAULT_FILENAME,\r\n    fieldSeparator: CsvConfigConsts.DEFAULT_FIELD_SEPARATOR,\r\n    quoteStrings: CsvConfigConsts.DEFAULT_QUOTE,\r\n    decimalseparator: CsvConfigConsts.DEFAULT_DECIMAL_SEPARATOR,\r\n    showLabels: CsvConfigConsts.DEFAULT_SHOW_LABELS,\r\n    showTitle: CsvConfigConsts.DEFAULT_SHOW_TITLE,\r\n    title: CsvConfigConsts.DEFAULT_TITLE,\r\n    useBom: CsvConfigConsts.DEFAULT_USE_BOM,\r\n    headers: CsvConfigConsts.DEFAULT_HEADER,\r\n    noDownload: CsvConfigConsts.DEFAULT_NO_DOWNLOAD,\r\n    removeEmptyValues: CsvConfigConsts.DEFAULT_REMOVE_EMPTY_VALUES\r\n};\r\nvar ngxCsv = (function () {\r\n    function ngxCsv(DataJSON, filename, options) {\r\n        this.csv = \"\";\r\n        var config = options || {};\r\n        this.data = typeof DataJSON != 'object' ? JSON.parse(DataJSON) : DataJSON;\r\n        this._options = objectAssign({}, exports.ConfigDefaults, config);\r\n        if (this._options.filename) {\r\n            this._options.filename = filename;\r\n        }\r\n        this.generateCsv();\r\n    }\r\n    /**\r\n     * Generate and Download Csv\r\n     */\r\n    ngxCsv.prototype.generateCsv = function () {\r\n        if (this._options.useBom) {\r\n            this.csv += CsvConfigConsts.BOM;\r\n        }\r\n        if (this._options.showTitle) {\r\n            this.csv += this._options.title + '\\r\\n\\n';\r\n        }\r\n        this.getHeaders();\r\n        this.getBody();\r\n        if (this.csv == '') {\r\n            console.log(\"Invalid data\");\r\n            return;\r\n        }\r\n        if (this._options.noDownload) {\r\n            return this.csv;\r\n        }\r\n        var blob = new Blob([this.csv], { \"type\": \"text/csv;charset=utf8;\" });\r\n        if (navigator.msSaveBlob) {\r\n            var filename = this._options.filename.replace(/ /g, \"_\") + \".csv\";\r\n            navigator.msSaveBlob(blob, filename);\r\n        }\r\n        else {\r\n            var uri = 'data:attachment/csv;charset=utf-8,' + encodeURI(this.csv);\r\n            var link = document.createElement(\"a\");\r\n            link.href = URL.createObjectURL(blob);\r\n            link.setAttribute('visibility', 'hidden');\r\n            link.download = this._options.filename.replace(/ /g, \"_\") + \".csv\";\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            document.body.removeChild(link);\r\n        }\r\n    };\r\n    /**\r\n     * Create Headers\r\n     */\r\n    ngxCsv.prototype.getHeaders = function () {\r\n        var _this = this;\r\n        if (this._options.headers.length > 0) {\r\n            var headers = this._options.headers;\r\n            var row = headers.reduce(function (headerRow, header) {\r\n                return headerRow + header + _this._options.fieldSeparator;\r\n            }, '');\r\n            row = row.slice(0, -1);\r\n            this.csv += row + CsvConfigConsts.EOL;\r\n        }\r\n    };\r\n    /**\r\n     * Create Body\r\n     */\r\n    ngxCsv.prototype.getBody = function () {\r\n        for (var i = 0; i < this.data.length; i++) {\r\n            var row = \"\";\r\n            for (var index in this.data[i]) {\r\n                row += this.formartData(this.data[i][index]) + this._options.fieldSeparator;\r\n            }\r\n            row = row.slice(0, -1);\r\n            this.csv += row + CsvConfigConsts.EOL;\r\n        }\r\n    };\r\n    /**\r\n     * Format Data\r\n     * @param {any} data\r\n     */\r\n    ngxCsv.prototype.formartData = function (data) {\r\n        if (this._options.removeEmptyValues && !data) {\r\n            return \"\";\r\n        }\r\n        if (this._options.decimalseparator === 'locale' && ngxCsv.isFloat(data)) {\r\n            return data.toLocaleString();\r\n        }\r\n        if (this._options.decimalseparator !== '.' && ngxCsv.isFloat(data)) {\r\n            return data.toString().replace('.', this._options.decimalseparator);\r\n        }\r\n        if (typeof data === 'string') {\r\n            data = data.replace(/\"/g, '\"\"');\r\n            if (this._options.quoteStrings || data.indexOf(',') > -1 || data.indexOf('\\n') > -1 || data.indexOf('\\r') > -1) {\r\n                data = this._options.quoteStrings + data + this._options.quoteStrings;\r\n            }\r\n            return data;\r\n        }\r\n        if (typeof data === 'boolean') {\r\n            return data ? 'TRUE' : 'FALSE';\r\n        }\r\n        return data;\r\n    };\r\n    /**\r\n     * Get CSV String\r\n     */\r\n    ngxCsv.prototype.getCsv = function () {\r\n        return this.csv;\r\n    };\r\n    /**\r\n     * Check if is Float\r\n     * @param {any} input\r\n     */\r\n    ngxCsv.isFloat = function (input) {\r\n        return +input === input && (!isFinite(input) || Boolean(input % 1));\r\n    };\r\n    return ngxCsv;\r\n}());\r\nexports.ngxCsv = ngxCsv;\r\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\r\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\r\n/**\r\n * Convet to Object\r\n * @param {any} val\r\n */\r\nfunction toObject(val) {\r\n    if (val === null || val === undefined) {\r\n        throw new TypeError('Object.assign cannot be called with null or undefined');\r\n    }\r\n    return Object(val);\r\n}\r\n/**\r\n * Assign data  to new Object\r\n * @param {any}   target\r\n * @param {any[]} ...source\r\n */\r\nfunction objectAssign(target) {\r\n    var source = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        source[_i - 1] = arguments[_i];\r\n    }\r\n    var from;\r\n    var to = toObject(target);\r\n    var symbols;\r\n    for (var s = 1; s < arguments.length; s++) {\r\n        from = Object(arguments[s]);\r\n        for (var key in from) {\r\n            if (hasOwnProperty.call(from, key)) {\r\n                to[key] = from[key];\r\n            }\r\n        }\r\n        if (Object.getOwnPropertySymbols) {\r\n            symbols = Object.getOwnPropertySymbols(from);\r\n            for (var i = 0; i < symbols.length; i++) {\r\n                if (propIsEnumerable.call(from, symbols[i])) {\r\n                    to[symbols[i]] = from[symbols[i]];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return to;\r\n}\r\n//# sourceMappingURL=ngx-csv.js.map","export const ADV_ALGORITHMS_FORM_FIELDS: Array<any> = [\n  {\n    algoName: 'Boosting-Regression',\n    fields: [\n      {\n        type: 'number',\n        name: 'n_estimators',\n        label: 'n_estimators',\n        required: false,\n        data: 50,\n        gs_data: '50,100,500',\n        bo_data: '50,500',\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'number',\n        name: 'learning_rate',\n        label: 'learning_rate',\n        required: false,\n        data: 1.0,\n        gs_data: '0.01, 0.1,1.0',\n        bo_data: '0.01,1.0',\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'select',\n        name: 'loss',\n        label: 'loss',\n        required: true,\n        data: 'linear',\n        gs_data: ['linear', 'square', 'exponential'],\n        select_options: [\n          { option_label: 'linear', value: 'linear' },\n          { option_label: 'square', value: 'square' },\n          { option_label: 'exponential', value: 'exponential' },\n        ],\n        placeholder_text: 'Select loss',\n        validators: {\n          \"required\": true\n        }\n      },\n    ],\n    isBOSupported: true,\n  },\n  {\n    algoName: 'Boosting-Classification',\n    fields: [\n      {\n        type: 'number',\n        name: 'n_estimators',\n        label: 'n_estimators',\n        required: false,\n        data: 50,\n        gs_data: '50,100,500',\n        bo_data: '50,500',\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'number',\n        name: 'learning_rate',\n        label: 'learning_rate',\n        required: false,\n        data: 1.0,\n        gs_data: '0.01, 0.1,1.0',\n        bo_data: '0.01,1.0',\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'select',\n        name: 'algorithm',\n        label: 'algorithm',\n        required: true,\n        data: 'SAMME.R',\n        gs_data: ['SAMME.R'],\n        select_options: [\n          { option_label: 'SAMME.R', value: 'SAMME.R' },\n          { option_label: 'SAMME', value: 'SAMME' },\n        ],\n        placeholder_text: 'Select loss',\n        validators: {\n          \"required\": true\n        }\n      },\n    ],\n    isBOSupported: true,\n  },\n  {\n    algoName: 'Bagging-Regression',\n    fields: [\n      {\n        type: 'number',\n        name: 'n_estimators',\n        label: 'n_estimators',\n        required: false,\n        data: 10,\n        gs_data: '10,50,100',\n        bo_data: '10,100',\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'number',\n        name: 'max_samples',\n        label: 'max_samples',\n        required: false,\n        data: 1.0,\n        gs_data: '0.5,0.7,1.0',\n        bo_data: '0.5,1.0',\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'number',\n        name: 'max_features',\n        label: 'max_features',\n        required: false,\n        data: 1.0,\n        gs_data: '0.5,0.7,1.0',\n        bo_data: '0.5,1.0',\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'radio',\n        name: 'bootstrap',\n        label: 'bootstrap',\n        required: false,\n        data: true,\n        radio_btns: [\n          { radio_label: 'true', value: true },\n          { radio_label: 'false', value: false },\n        ],\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'radio',\n        name: 'bootstrap_features',\n        label: 'bootstrap_features',\n        required: false,\n        data: false,\n        radio_btns: [\n          { radio_label: 'true', value: true },\n          { radio_label: 'false', value: false },\n        ],\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'radio',\n        name: 'oob_score',\n        label: 'oob_score',\n        required: false,\n        data: false,\n        radio_btns: [\n          { radio_label: 'true', value: true },\n          { radio_label: 'false', value: false },\n        ],\n        validators: {\n          \"required\": true\n        }\n      },\n    ],\n    isBOSupported: true,\n  },\n  {\n    algoName: 'Bagging-Classification',\n    fields: [\n      {\n        type: 'number',\n        name: 'n_estimators',\n        label: 'n_estimators',\n        required: false,\n        data: 10,\n        gs_data: '10,50,100',\n        bo_data: '10,100',\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'number',\n        name: 'max_samples',\n        label: 'max_samples',\n        required: false,\n        data: 1.0,\n        gs_data: '0.5,0.7,1.0',\n        bo_data: '0.5,1.0',\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'number',\n        name: 'max_features',\n        label: 'max_features',\n        required: false,\n        data: 1.0,\n        gs_data: '0.5,0.7,1.0',\n        bo_data: '0.5,1.0',\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'radio',\n        name: 'bootstrap',\n        label: 'bootstrap',\n        required: false,\n        data: true,\n        radio_btns: [\n          { radio_label: 'true', value: true },\n          { radio_label: 'false', value: false },\n        ],\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'radio',\n        name: 'bootstrap_features',\n        label: 'bootstrap_features',\n        required: false,\n        data: false,\n        radio_btns: [\n          { radio_label: 'true', value: true },\n          { radio_label: 'false', value: false },\n        ],\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'radio',\n        name: 'oob_score',\n        label: 'oob_score',\n        required: false,\n        data: false,\n        radio_btns: [\n          { radio_label: 'true', value: true },\n          { radio_label: 'false', value: false },\n        ],\n        validators: {\n          \"required\": true\n        }\n      },\n    ],\n    isBOSupported: true,\n  },\n  {\n    algoName: 'GridSearchCV-Regression',\n    fields: [\n      {\n        type: 'select',\n        name: 'scoring',\n        label: 'scoring',\n        required: true,\n        data: 'None',\n        gs_data: [\n          'explained_variance',\n          'neg_mean_absolute_error',\n          'neg_mean_squared_error',\n          'neg_mean_squared_log_error',\n          'neg_median_absolute_error',\n        ],\n        select_options: [\n          { option_label: 'explained_variance', value: 'explained_variance' },\n          { option_label: 'None', value: 'None' },\n          { option_label: 'neg_mean_absolute_error', value: 'neg_mean_absolute_error' },\n          { option_label: 'neg_mean_squared_error', value: 'neg_mean_squared_error' },\n          { option_label: 'neg_mean_squared_log_error', value: 'neg_mean_squared_log_error' },\n          { option_label: 'neg_median_absolute_error', value: 'neg_median_absolute_error' },\n          { option_label: 'r2', value: 'r2' },\n        ],\n        placeholder_text: 'Select loss',\n        validators: {\n          \"required\": true\n        }\n      },\n      { type: 'text', name: 'fit_params', label: 'fit_params', required: false, data: 'None',validators: {\n        \"required\": true\n      } },\n      {\n        type: 'radio',\n        name: 'iid',\n        label: 'iid',\n        required: false,\n        data: true,\n        radio_btns: [\n          { radio_label: 'true', value: true },\n          { radio_label: 'false', value: false },\n        ],\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'radio',\n        name: 'refit',\n        label: 'refit',\n        required: false,\n        data: true,\n        radio_btns: [\n          { radio_label: 'true', value: true },\n          { radio_label: 'false', value: false },\n        ],\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'text',\n        name: 'error_score',\n        label: 'error_score',\n        required: false,\n        data: 'raise-deprecating',\n        validators: {\n          \"required\": true\n        }\n      },\n      { type: 'number', name: 'verbose', label: 'verbose', required: false, data: 0,validators: {\n        \"required\": true\n      } },\n      {\n        type: 'radio',\n        name: 'return_train_score',\n        label: 'return_train_score',\n        required: false,\n        data: true,\n        radio_btns: [\n          { radio_label: 'true', value: true },\n          { radio_label: 'false', value: false },\n        ],\n        validators: {\n          \"required\": true\n        }\n      },\n    ],\n    isBOSupported: true,\n  },\n  {\n    algoName: 'GridSearchCV-Classification',\n    fields: [\n      {\n        type: 'select',\n        name: 'scoring',\n        label: 'scoring',\n        required: true,\n        data: 'None',\n        gs_data: ['None', 'accuracy', 'f1', 'precision', 'recall'],\n        select_options: [\n          { option_label: 'None', value: 'None' },\n          { option_label: 'accuracy', value: 'accuracy' },\n          { option_label: 'f1', value: 'f1' },\n          { option_label: 'precision', value: 'precision' },\n          { option_label: 'recall', value: 'recall' },\n        ],\n        placeholder_text: 'Select loss',\n        validators: {\n          \"required\": true\n        }\n      },\n      { type: 'text', name: 'fit_params', label: 'fit_params', required: false, data: 'None' },\n      {\n        type: 'radio',\n        name: 'iid',\n        label: 'iid',\n        required: false,\n        data: true,\n        radio_btns: [\n          { radio_label: 'true', value: true },\n          { radio_label: 'false', value: false },\n        ],\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'radio',\n        name: 'refit',\n        label: 'refit',\n        required: false,\n        data: true,\n        radio_btns: [\n          { radio_label: 'true', value: true },\n          { radio_label: 'false', value: false },\n        ],\n        validators: {\n          \"required\": true\n        }\n      },\n      {\n        type: 'text',\n        name: 'error_score',\n        label: 'error_score',\n        required: false,\n        data: 'raise-deprecating',\n        validators: {\n          \"required\": true\n        }\n      },\n      { type: 'number', name: 'verbose', label: 'verbose', required: false, data: 0,validators: {\n        \"required\": true\n      } },\n      {\n        type: 'radio',\n        name: 'return_train_score',\n        label: 'return_train_score',\n        required: false,\n        data: true,\n        radio_btns: [\n          { radio_label: 'true', value: true },\n          { radio_label: 'false', value: false },\n        ],\n        validators: {\n          \"required\": true\n        }\n      },\n    ],\n    isBOSupported: true,\n  },\n];\n","<h2 mat-dialog-title>\n  {{ dialogHeading }}\n</h2>\n<!-- BODY (RETRAIN) -->\n<mat-dialog-content *ngIf=\"dialogData.type === 'retrain'\" class=\"mat-typography\">\n  <!-- RADIO (retrain type) -->\n  <div *ngIf=\"!project?.useGPU\" class=\"row\">\n    <div class=\"col-md-12 form-group\">\n      <mat-label id=\"retrain-type\">Select retrain type</mat-label>\n      <mat-radio-group aria-labelledby=\"retrain-type\" id=\"retrain-type\" class=\"radio-group flex-row\"\n        [(ngModel)]=\"retrainType\" (change)=\"changeRetrainType(retrainType)\">\n        <mat-radio-button class=\"ml-3\" value=\"refit\">Fitting data using pipeline</mat-radio-button>\n        <mat-radio-button class=\"ml-3\" value=\"transform\">Transforming data using pipeline</mat-radio-button>\n      </mat-radio-group>\n    </div>\n  </div>\n  <!-- RADIO (data source) -->\n  <div *ngIf=\"!project?.useGPU\" class=\"row\">\n    <div class=\"col-md-12 form-group\">\n      <mat-label id=\"retrain-type\">Select data source</mat-label>\n      <mat-radio-group aria-labelledby=\"retrain-type\" id=\"retrain-type\" class=\"radio-group flex-row\"\n        [(ngModel)]=\"sourceType\" (change)=\"changeSourceType(sourceType)\">\n        <mat-radio-button class=\"ml-3\" value=\"file\">File</mat-radio-button>\n        <span [hidden]=\"\n            retrainType === 'transform' &&\n            baseTrainingFile?.fileSource !== 'mssql' &&\n            baseTrainingFile?.fileSource !== 'postgresql' &&\n            baseTrainingFile?.fileSource !== 'mysql'\n          \">\n          <mat-radio-button [hidden]=\"hideMssqlSourceType\" class=\"ml-3\" value=\"mssql\">MS SQL</mat-radio-button>\n          <mat-radio-button [hidden]=\"hideMysqlSourceType\" class=\"ml-3\" value=\"mysql\">MySQL</mat-radio-button>\n          <mat-radio-button [hidden]=\"hidePgsqlSourceType\" class=\"ml-3\" value=\"postgresql\">PostgreSQL</mat-radio-button>\n        </span>\n      </mat-radio-group>\n    </div>\n  </div>\n  <!-- SELECT (dataset) -->\n  <div *ngIf=\"sourceType === 'file'\" class=\"row\">\n    <div class=\"col-md-12 form-group\">\n      <mat-form-field appearance=\"outline\">\n        <mat-label>Select dataset</mat-label>\n        <mat-select [(ngModel)]=\"selectedDataset\" (selectionChange)=\"hideSubmitBtn = false\" required #dataset=\"ngModel\">\n          <mat-option *ngFor=\"let dataset of dataSetsList\" [value]=\"dataset._id\">{{ dataset.name | dropFileExtension:\n            dataset.name }}</mat-option>\n        </mat-select>\n        <mat-error *ngIf=\"dataset.invalid || dataset.touched\">Dataset is required.</mat-error>\n      </mat-form-field>\n    </div>\n  </div>\n  <!-- SELECT (data connection) -->\n  <div *ngIf=\"\n      retrainType === 'refit' &&\n      (sourceType === 'mssql' ||\n        sourceType === 'mysql' ||\n        sourceType === 'postgresql')\n    \" [hidden]=\"hideSelectConnection\" class=\"row\">\n    <div class=\"col-md-12 form-group\">\n      <mat-form-field appearance=\"outline\">\n        <mat-label>Select data connection</mat-label>\n        <mat-select [(ngModel)]=\"selectedConnection\" (selectionChange)=\"hideSubmitBtn = false\" required\n          #dataconnection=\"ngModel\">\n          <mat-option *ngFor=\"let conn of dataConnectionsArray\" [value]=\"conn\">{{ conn.connectionName }}</mat-option>\n        </mat-select>\n        <mat-error *ngIf=\"dataconnection.invalid || dataconnection.touched\">Data connection is required.</mat-error>\n      </mat-form-field>\n    </div>\n  </div>\n  <!-- INPUT (query) -->\n  <div *ngIf=\"\n      retrainType !== 'transform' &&\n      (baseTrainingFile?.fileSource !== 'mssql' ||\n        baseTrainingFile?.fileSource !== 'postgresql' ||\n        baseTrainingFile?.fileSource !== 'mysql') &&\n      (sourceType === 'mssql' ||\n        sourceType === 'mysql' ||\n        sourceType === 'postgresql')\n    \" [hidden]=\"\n      retrainType === 'transform' &&\n      (baseTrainingFile?.fileSource === 'mssql' ||\n        baseTrainingFile?.fileSource === 'postgresql' ||\n        baseTrainingFile?.fileSource === 'mysql') &&\n      (sourceType === 'mssql' ||\n        sourceType === 'mysql' ||\n        sourceType === 'postgresql')\n    \" class=\"row\">\n    <div class=\"col-md-12\">\n      <mat-form-field appearance=\"outline\">\n        <mat-label>Write SQL query</mat-label>\n        <textarea [(ngModel)]=\"query\" matInput placeholder=\"Enter SELECT query\"></textarea>\n      </mat-form-field>\n    </div>\n  </div>\n  <!-- CHECKBOX (merge) -->\n  <mat-checkbox class=\"\" [(ngModel)]=\"mergeDataset\">Merge dataset</mat-checkbox>\n  <!-- HYPERLINK (drift analysis) -->\n  <p class=\"my-3\">\n    <a href=\"#\" (click)=\"showDriftAnalysis = !showDriftAnalysis\">Drift Analysis?</a>\n  </p>\n  <!-- INPUT (report name) -->\n  <div *ngIf=\"showDriftAnalysis\" class=\"row\">\n    <div class=\"col-md-12\">\n      <mat-form-field appearance=\"outline\">\n        <mat-label>Drift report name</mat-label>\n        <input matInput placeholder=\"Enter the name\" [(ngModel)]=\"reportName\" />\n      </mat-form-field>\n    </div>\n  </div>\n  <!-- SELECT (drift config) -->\n  <div *ngIf=\"showDriftAnalysis\" class=\"row\">\n    <div class=\"col-md-12 form-group\">\n      <mat-form-field appearance=\"outline\">\n        <mat-label>Select drift configuration</mat-label>\n        <mat-select [(ngModel)]=\"driftConfig\" required #driftconfig=\"ngModel\">\n          <mat-option *ngFor=\"let config of driftConfigList\" [value]=\"config\">{{\n            config.configName\n            }}</mat-option>\n        </mat-select>\n        <mat-error *ngIf=\"driftconfig.invalid || driftconfig.touched\">Drift configuration is required.</mat-error>\n      </mat-form-field>\n    </div>\n  </div>\n</mat-dialog-content>\n\n<!-- BODY (MODEL TUNING) -->\n<mat-dialog-content *ngIf=\"dialogData.type === 'tuning'\" class=\"mat-typography\">\n  <!-- CHIP (model name) -->\n  <mat-chip-list>\n    <mat-chip>{{ modelInfo?.modelMetaData?.algoName }}</mat-chip>\n  </mat-chip-list>\n  <!-- RADIO (HPT options) -->\n  <div class=\"row mt-4\">\n    <div class=\"col-md-12 form-group\">\n      <mat-label id=\"retrain-type\">Select model tuning method</mat-label>\n      <mat-radio-group aria-labelledby=\"retrain-type\" id=\"retrain-type\" class=\"radio-group flex-row\"\n        [(ngModel)]=\"modelTuningOption\" (change)=\"onTuningOptionChanged('secondTime')\">\n        <!-- 'secondTime' this is the label for checking if the user visits parameter tuning for the first time or for secondTime. -->\n        <mat-radio-button class=\"ml-3\" value=\"hpt\">Parameter Tuning</mat-radio-button>\n        <mat-radio-button class=\"ml-3\" value=\"gridSearch\" *ngIf=\"!disableRandomSearch\">\n          Random Search</mat-radio-button>\n        <mat-radio-button [hidden]=\"disableBO && isImported\" class=\"ml-3\" [disabled]=\"\n              appType === 'saas' &&\n              !user?.roles?.includes('super_admin') &&\n              !user?.roles?.includes('admin')\n            \" value=\"bayesianOptimization\" *ngIf=\"isMultilabel == false\">\n          <span matBadge [matBadgeIcon]=\"'ENT'\" matBadgeOverlap=\"false\">Bayesian Optimization</span>\n        </mat-radio-button>\n      </mat-radio-group>\n    </div>\n  </div>\n  <!-- LABEL (not supported) \n    [isGridSearchSupported] this key is added only for the linear regression. -->\n  <h4 *ngIf=\"\n      (modelInfo?.modelMetaData?.algoName === 'Gaussian NB Classification' ||\n        modelInfo?.modelMetaData?.algoName === 'Linear Regression') &&\n      modelTuningOption === 'gridSearch' &&\n      !formFields?.isGridSearchSupported\n    \" class=\"text-center text-muted\">\n    Random Search is not supported for this model.\n  </h4>\n  <!-- LABEL (not supported) -->\n  <h4 *ngIf=\"\n      modelTuningOption === 'bayesianOptimization' && !formFields?.isBOSupported\n    \" class=\"text-center text-muted\">\n    Bayesian Optimization is not supported for this model.\n  </h4>\n  <div [hidden]=\"\n      modelTuningOption === 'bayesianOptimization' && !formFields?.isBOSupported\n    \">\n    <!-- TABLE -->\n    <table *ngIf=\"\n        modelInfo?.modelMetaData?.bestParams[modelTuningOption] &&\n        modelInfo?.modelMetaData?.bestParams[modelTuningOption].length\n      \" class=\"table table-bordered mx-auto w-75 mt-2\">\n      <caption>\n        {{\n        modelTuningOption === \"hpt\" ? \"Params\" : \"Best params\"\n        }}\n        used in last model tuning\n      </caption>\n      <thead class=\"thead-dark bg-primary\">\n        <tr>\n          <td>Parameter</td>\n          <td>Value</td>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"\n            let param of modelInfo?.modelMetaData?.bestParams[modelTuningOption]\n          \">\n          <td>{{ param.name }}</td>\n          <td>{{ param.data === null || param.data === undefined ? 'None' : param.data }}</td>\n        </tr>\n      </tbody>\n    </table>\n    <!-- DYNAMIC FORM -->\n    <div [hidden]=\"\n        ((modelInfo?.modelMetaData?.algoName === 'Gaussian NB Classification' ||\n          modelInfo?.modelMetaData?.algoName === 'Linear Regression') &&\n          modelTuningOption === 'gridSearch' &&\n          !formFields.isGridSearchSupported) ||\n        (modelTuningOption === 'bayesianOptimization' &&\n          !formFields.isBOSupported)\n      \" class=\"row mt-4\" [formGroup]=\"hptForm\">\n      <br />\n      <div *ngFor=\"let field of formFields?.fields\" class=\"col-md-6\">\n        <!-- HPT -->\n        <div *ngIf=\"modelTuningOption === 'hpt'\">\n          <!-- NUMBER & TEXT-->\n          <mat-form-field *ngIf=\"field?.type === 'number' || field?.type === 'text'\" appearance=\"outline\">\n            <mat-label>{{ field?.label }}</mat-label>\n            <input matInput [type]=\"field?.type\" [placeholder]=\"field?.placeholder_text\" [name]=\"field.name\"\n              [(ngModel)]=\"field.data\" [formControlName]=\"field?.name\" />\n          </mat-form-field>\n          <!-- SELECT -->\n          <mat-form-field *ngIf=\"field?.type === 'select'\" appearance=\"outline\">\n            <mat-label>{{\n              field.placeholder_text ? field.placeholder_text : field.name\n              }}</mat-label>\n            <mat-select [(ngModel)]=\"field.data\" [formControlName]=\"field?.name\">\n              <mat-option *ngFor=\"let opt of field.select_options\" [value]=\"opt.value\">{{ opt.option_label }}\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n          <!-- dynamic errors based on the errs returned by the formcontrols. -->\n          <!-- hptForm.invalid && (hptForm.dirty || hptForm.touched) -->\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.required\">\n            This field is required.\n          </mat-error>\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.minLength\">\n            No of characters are less than minimum length.\n          </mat-error>\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.min\">\n            Value is less than minimum.\n          </mat-error>\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.max\">\n            Value is greater than maximum.\n          </mat-error>\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.maxLength\">\n            No of characters are more than maximum length.\n          </mat-error>\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.pattern\">\n            Value type is not proper.\n          </mat-error>\n        </div>\n        <!-- GRID SEARCH -->\n        <div *ngIf=\"modelTuningOption === 'gridSearch'\">\n          <!-- NUMBER & TEXT-->\n          <mat-form-field [hidden]=\"\n              field.disable &&\n              (formFields.algoName ===\n                'Artificial Neural Network Classification' ||\n                formFields.algoName === 'Artificial Neural Network Regression')\n            \" *ngIf=\"field?.type === 'number' || field?.type === 'text'\" appearance=\"outline\">\n            <mat-label>{{ field.label }}</mat-label>\n            <input matInput type=\"text\" [placeholder]=\"field.placeholder_text\" [name]=\"field.name\"\n              [(ngModel)]=\"field.data\" [formControlName]=\"field?.name\" />\n            <!-- (input)=\"bindGridSearch($event.target.value, field)\" -->\n          </mat-form-field>\n          <!-- SELECT -->\n          <mat-form-field *ngIf=\"field?.type === 'select'\" appearance=\"outline\">\n            <mat-label>{{\n              field.placeholder_text ? field.placeholder_text : field.name\n              }}</mat-label>\n            <mat-select (change)=\"bindGridSearch($event.value, field)\" [(ngModel)]=\"field.data\"\n              [formControlName]=\"field?.name\" multiple>\n              <mat-option *ngFor=\"let opt of field.select_options\" [value]=\"opt.value\">{{ opt.option_label }}\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n          <!-- dynamic errors based on the errs returned by the formcontrols. -->\n          <!-- hptForm.invalid && (hptForm.dirty || hptForm.touched) -->\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.required\">\n            This field is required.\n          </mat-error>\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.minLength\">\n            No of characters are less than minimum length.\n          </mat-error>\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.min\">\n            Value is less than minimum.\n          </mat-error>\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.max\">\n            Value is greater than maximum.\n          </mat-error>\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.maxLength\">\n            No of characters are more than maximum length.\n          </mat-error>\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.pattern\">\n            Value type is not proper.\n          </mat-error>\n        </div>\n        <!-- BAYESIAN OPT -->\n        <div *ngIf=\"modelTuningOption === 'bayesianOptimization' && field.bo_data\">\n          <mat-form-field [hidden]=\"\n              field.disable &&\n              (formFields.algoName ===\n                'Artificial Neural Network Classification' ||\n                formFields.algoName === 'Artificial Neural Network Regression')\n            \" appearance=\"outline\">\n            <mat-label>{{ field.label }}</mat-label>\n            <input matInput type=\"text\" [placeholder]=\"field.placeholder_text\" [name]=\"field.name\"\n              [(ngModel)]=\"field.data\" [formControlName]=\"field?.name\" />\n            <!-- (input)=\"bindBayesianOpt($event.target.value, field)\"  -->\n          </mat-form-field>\n          <!-- dynamic errors based on the errs returned by the formcontrols. -->\n          <!-- hptForm.invalid && (hptForm.dirty || hptForm.touched) -->\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.required\">\n            This field is required.\n          </mat-error>\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.minLength\">\n            No of characters are less than minimum length.\n          </mat-error>\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.min\">\n            Value is less than minimum.\n          </mat-error>\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.max\">\n            Value is greater than maximum.\n          </mat-error>\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.maxLength\">\n            No of characters are more than maximum length.\n          </mat-error>\n          <mat-error *ngIf=\"hptForm.get(field?.name).errors?.pattern\">\n            Value type is not proper.\n          </mat-error>\n        </div>\n        <!--RADIO-->\n        <div *ngIf=\"\n            field?.type === 'radio' &&\n            modelTuningOption !== 'bayesianOptimization'\n          \" [hidden]=\"\n            field.disable &&\n            (formFields.algoName ===\n              'Artificial Neural Network Classification' ||\n              formFields.algoName === 'Artificial Neural Network Regression')\n          \">\n          <label class=\"ml-2\" id=\"dynamic-radio\">{{ field.label }}</label>\n          <mat-radio-group class=\"d-flex mt-2\" [(ngModel)]=\"field.data\" [formControlName]=\"field?.name\">\n            <mat-radio-button aria-labelledby=\"dynamic-radio\" class=\"ml-4\" *ngFor=\"let radio of field.radio_btns\"\n              [value]=\"radio.value\">{{ radio.radio_label }}</mat-radio-button>\n          </mat-radio-group>\n        </div>\n      </div>\n    </div>\n  </div>\n</mat-dialog-content>\n\n<!-- BODY (ADV ALGO) -->\n<mat-dialog-content *ngIf=\"dialogData.type === 'advAlgo'\" class=\"mat-typography\">\n  <!-- RADIO (types) -->\n  <div class=\"row mt-2\">\n    <div class=\"col-md-12 form-group\">\n      <mat-label id=\"retrain-type\">Select method</mat-label>\n      <mat-radio-group aria-labelledby=\"retrain-type\" id=\"retrain-type\" class=\"radio-group flex-row\"\n        [(ngModel)]=\"advAlgoSelected\" (change)=\"onAdvAlgoSelectionChange(advAlgoSelected)\">\n        <mat-radio-button class=\"ml-3\" value=\"bagging\" [matTooltip]=\"_utils.getTootip('bagging')\"\n          [disabled]=\"disableBagging === true\">Bagging\n        </mat-radio-button>\n        <mat-radio-button *ngIf=\"modelInfo?.modelMetaData?.algoName !== 'KNN Classification'\" class=\"ml-3\"\n          value=\"boosting\" [matTooltip]=\"_utils.getTootip('boosting')\" [disabled]=\"disableBoosting === true\">Boosting\n        </mat-radio-button>\n      </mat-radio-group>\n      <mat-hint *ngIf=\"advAlgoSelected === 'gridSearchCV'\">\n        Note: Base algorithm default hyper parameters will be taken, you can\n        change if you need.\n      </mat-hint>\n    </div>\n  </div>\n  <h4 *ngIf=\"advAlgoSelected && formAdvAlgoFeilds?.fields\">Hyper Parameters</h4>\n  <!-- DYNAMIC FORM -->\n  <div class=\"row\" *ngIf=\"advAlgoSelected && formAdvAlgoFeilds?.fields\">\n    <div class=\"col-md-6\" *ngFor=\"let field of formAdvAlgoFeilds?.fields\">\n      <!-- NUMBER & TEXT-->\n      <mat-form-field *ngIf=\"field.type === 'number' || field.type === 'text'\" appearance=\"outline\">\n        <mat-label>{{ field.label }}</mat-label>\n        <input matInput [type]=\"field.type\" [placeholder]=\"field.placeholder_text\" [name]=\"field.name\"\n          [(ngModel)]=\"field.data\" />\n      </mat-form-field>\n      <!-- SELECT -->\n      <mat-form-field *ngIf=\"field?.type === 'select'\" appearance=\"outline\">\n        <mat-label>{{\n          field.placeholder_text ? field.placeholder_text : field.name\n          }}</mat-label>\n        <mat-select [(ngModel)]=\"field.data\">\n          <mat-option *ngFor=\"let opt of field?.select_options\" [value]=\"opt.value\">{{ opt.option_label }}</mat-option>\n        </mat-select>\n      </mat-form-field>\n      <!--RADIO-->\n      <div *ngIf=\"field?.type === 'radio'\">\n        <label class=\"ml-2\" id=\"dynamic-radio\">{{ field.label }}</label>\n        <mat-radio-group class=\"d-flex mt-2\" [(ngModel)]=\"field.data\">\n          <mat-radio-button aria-labelledby=\"dynamic-radio\" class=\"ml-4\" *ngFor=\"let radio of field.radio_btns\"\n            [value]=\"radio.value\">{{ radio.radio_label }}</mat-radio-button>\n        </mat-radio-group>\n      </div>\n    </div>\n  </div>\n</mat-dialog-content>\n\n<!-- Dialog buttons -->\n<mat-dialog-actions class=\"justify-content-end mt-3 mb-auto\">\n  <button mat-stroked-button class=\"{{ dialogData.type === 'retrain' && !driftConfig ? '' : 'mr-auto' }}\"\n    (click)=\"closeModal()\">\n    Cancel\n  </button>\n  <!-- DRIFT ANALYSIS -->\n  <button *ngIf=\"\n      dialogData.type === 'retrain' &&\n      driftConfig &&\n      selectedDataset &&\n      showDriftAnalysis\n    \" mat-stroked-button type=\"submit\" (click)=\"doDataDriftAnalysis()\">\n    Do Drift Analysis\n  </button>\n  <!-- SUBMIT (RETRAIN) -->\n  <button *ngIf=\"dialogData.type === 'retrain'\" [disabled]=\"\n      hideSubmitBtn || (showDriftAnalysis && !reportName && !driftConfig)\n    \" mat-flat-button class=\"btn-primary\" type=\"submit\" (click)=\"startRetraining()\">\n    Submit\n  </button>\n  <!-- RESET (TUNING) -->\n  <button (click)=\"resetHptValues(formFields?.algoName)\" *ngIf=\"dialogData?.type === 'tuning'\" mat-stroked-button\n    type=\"submit\">\n    Reset\n  </button>\n  <!-- SUBMIT (TUNING) -->\n  <button [disabled]=\"\n      ((modelInfo?.modelMetaData?.algoName === 'Gaussian NB Classification' ||\n        modelInfo?.modelMetaData?.algoName === 'Linear Regression') &&\n        modelTuningOption === 'gridSearch' &&\n        !formFields?.isGridSearchSupported) ||\n      (modelTuningOption === 'bayesianOptimization' &&\n        !formFields?.isBOSupported) || this.hptForm.invalid\n    \" *ngIf=\"dialogData?.type === 'tuning'\" mat-flat-button class=\"btn-primary\" type=\"submit\"\n    (click)=\"saveHPTPreference(formFields)\">\n    Submit\n  </button>\n  <!-- SAVE HP (ADV ALGO) -->\n  <button (click)=\"saveHyperParam(advAlgoSelected)\" *ngIf=\"dialogData?.type === 'advAlgo' && formAdvAlgoFeilds?.fields\"\n    mat-stroked-button type=\"submit\">\n    Save HP\n  </button>\n  <!-- SUBMIT (ADV ALGO) -->\n  <button [disabled]=\"!formAdvAlgoFeilds?.fields\" *ngIf=\"dialogData?.type === 'advAlgo'\" mat-flat-button\n    class=\"btn-primary\" type=\"submit\" (click)=\"startAdvTraining()\">\n    Submit\n  </button>\n</mat-dialog-actions>","import { UtilsService } from './../../../shared/utils.service';\nimport { ADV_ALGORITHMS_FORM_FIELDS } from './../../../../assets/data/advance-algorithms';\nimport { HPT_FORM_FIELDS } from './../../../../assets/data/hpt-form-fields';\nimport { TrainingService } from './../../training/training.service';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { SpinnerService } from './../../../shared/spinner.service';\nimport { DataDriftService } from './../../data-drift/data-drift.service';\nimport { DataService } from './../../data/data.service';\nimport { ModelsComponent } from './../models.component';\nimport { Component, Inject, OnInit, OnDestroy } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { LocalStorageService } from 'src/app/shared/local-storage.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { environment } from 'src/environments/environment';\n\nconst swal = require('sweetalert');\n@Component({\n  selector: 'app-forms-dialog-handler',\n  templateUrl: './forms-dialog-handler.component.html',\n  styleUrls: ['./forms-dialog-handler.component.scss'],\n})\nexport class FormsDialogHandlerComponent implements OnInit, OnDestroy {\n  /** Form group instance */\n  retrainForm: FormGroup;\n\n  /** Usubscription subject */\n  unsubscribe$ = new Subject<boolean>();\n\n  ALGORITHMS_ARRAY: Array<any>;\n  /** Flags */\n  hideMssqlSourceType: boolean = false;\n  hidePgsqlSourceType: boolean = false;\n  hideMysqlSourceType: boolean = false;\n  hideSelectConnection: boolean = false;\n  showDriftAnalysis: boolean = false;\n  isImported: boolean = false;\n  disableBO: boolean = false;\n  appType: string = environment.appType;\n  allowedSettingsOption: Array<any> = null;\n  /** Variables with default values */\n  retrainType: string = 'refit';\n  sourceType: string = 'file';\n  backGround: string = '#ffffff';\n  foreGround: string = '#08509d';\n  mergeDataset: boolean = false;\n\n  dialogHeading: string;\n  project: any;\n  baseTrainingFile: any;\n  iteration: string;\n  dataSetsList: Array<any> = [];\n  retrainSourceType: any;\n  modelInfo: any;\n  training: any;\n  selectedModelName: string;\n  retrainObj: any;\n  driftConfigList: Array<any> = [];\n  dataConnectionsArray: Array<any> = [];\n  selectedDataset: any;\n  selectedConnection: any;\n  query: string;\n  reportName: string;\n  driftConfig: any;\n  modelErrorCount: number;\n  algoType: string;\n  modelTuningOption: string;\n  algorithmName: any;\n  algorithm: any;\n  formFields: any;\n  advAlgoSelected: any;\n  formAdvAlgoFeilds: any;\n  advAlgoReqObject: any;\n  hyperParam: any;\n  hideSubmitBtn: boolean = true;\n  edaInfo: any;\n  isMultilabel: boolean = false;\n  user: any;\n  disableBagging: Boolean = false;\n  disableBoosting: Boolean = false;\n  disableRandomSearch: Boolean = false;\n  // formgroup for hpt forms.\n  hptForm: FormGroup = this.fb.group({});\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public dialogData: any,\n    private _modelsDialogRef: MatDialogRef<ModelsComponent>,\n    private _localStorage: LocalStorageService,\n    private _toaster: ToastrService,\n    private _data: DataService,\n    private _dataDrift: DataDriftService,\n    private _spinner: SpinnerService,\n    private _snackBar: MatSnackBar,\n    private _training: TrainingService,\n    public _utils: UtilsService,\n    private fb: FormBuilder\n  ) { }\n\n  /**\n   * Initializes all the required data\n   */\n  async ngOnInit(): Promise<any> {\n    this._spinner.showSpinner();\n    this.ALGORITHMS_ARRAY = await this._utils.getAlgorithms();\n    this.ALGORITHMS_ARRAY.filter((item) => {\n      if (\n        (item.name == 'Bagging Classifier' || item.name == 'Bagging Regressor') &&\n        item.status === false\n      ) {\n        this.disableBagging = true;\n      } else if (\n        (item.name == 'Boosting Classifier' || item.name == 'Boosting Regressor') &&\n        item.status === false\n      ) {\n        this.disableBoosting = true;\n      }\n      return item;\n    });\n\n    this.user = this._localStorage.getItem('user');\n    this.project = this._localStorage.getItem('project');\n    this.modelInfo = this.dialogData.modelInfo;\n    this.training = this.dialogData.trainingInfo;\n    this.edaInfo = this.dialogData.originalFileWithEdaDetails;\n    this.isMultilabel = this.training.isMultilabel;\n    this.setRestrictions();\n    switch (this.dialogData.type) {\n      case 'retrain':\n        this.dialogHeading = 'Retrain Model';\n        await this.initializeRetrainData();\n        break;\n      case 'tuning':\n        this.dialogHeading = 'Model Tuning (HPT)';\n        this.initializeTuningData();\n        break;\n      case 'advAlgo':\n        this.dialogHeading = 'Advance Algorithms';\n        this._spinner.stopSpinner();\n        break;\n    }\n  }\n\n  /**\n   * Initializes all the required data for retrain\n   */\n  async initializeRetrainData(): Promise<any> {\n    this.iteration = `Retraining- ${this.genModelName(\n      this.training.models,\n      this.modelInfo.modelMetaData.algoName\n    )}`;\n    // API call - fetches list of all the files associated with a project\n    let dataSets: any = await this._data\n      .getAllProjectDatas(this.project._id)\n      .pipe(takeUntil(this.unsubscribe$))\n      .toPromise()\n      .catch((e: Error) => {\n        this._toaster.error(`Error - ${e.message}`, 'Models');\n        this._spinner.stopSpinner();\n      });\n    this.dataSetsList = dataSets[0].filesList.filter((item) => {\n      return item.fileSource !== 'upload_retrained' && !item.hasOwnProperty('taExperimentId');\n    });\n    this.dataSetsList = this.dataSetsList.filter((item) => {\n      return item.fileSource !== 'notebook';\n    });\n    this.baseTrainingFile = this.dataSetsList.find(\n      (item) => item._id === this.training.originalFileId\n    );\n    this.retrainSourceType = this.modelInfo.retrainSourceType;\n    this.modelInfo.retrainSourceType\n      ? (this.baseTrainingFile.fileSource = this.modelInfo.retrainSourceType)\n      : '';\n    this.selectedModelName = `${this.training.name} - ${this.modelInfo.modelMetaData.algoName}`;\n    this.algoType = this.ALGORITHMS_ARRAY.filter(\n      (algorithm: any) => algorithm.name === this.modelInfo.modelMetaData.algoName.split('-')[0]\n    )[0]?.type;\n    // API parsing object\n    this.retrainObj = {\n      algoType: this.algoType,\n      algorithms: [this.modelInfo.modelMetaData.algoName],\n      trainingId: this.training._id,\n      modelId: this.modelInfo._id,\n      projectId: this.training.projectId,\n      modelTuning: this.modelInfo.modelMetaData.modelTuning,\n      modelFile: this.modelInfo.modelMetaData.modelPath,\n      sampling: this.training.sampling,\n      useGPU: this.project.useGPU,\n      iteration: this.iteration,\n      dataSetInfo: this.dialogData.trainings[0].edaId.dataSetInfo,\n      logTransformationColumns: this.dialogData.trainings[0].logTransformationColumns,\n      scalarValue: this.dialogData.trainings[0].scalarValue,\n      dataGroupId: this.edaInfo.dataGroupId,\n    };\n    // API call - triggers API tp fetch all drift configurations for particular project\n    let driftConfig: any = await this._dataDrift\n      .getAllSettings(this.project._id)\n      .pipe(takeUntil(this.unsubscribe$))\n      .toPromise()\n      .catch((e: Error) => {\n        this._toaster.error(`Error - ${e.message}`, 'Models');\n        this._spinner.stopSpinner();\n      });\n    driftConfig.filter((item: any) => {\n      if (this.algoType === 'regression') {\n        item.algoType === 'regression' ? this.driftConfigList.push(item) : '';\n      } else {\n        item.algoType === 'classification' ? this.driftConfigList.push(item) : '';\n      }\n    });\n    // ! Below block of code is not used anywhere in this module - this.daMetrics\n    //  if (algoType == 'regression') {\n    //    this.daMetrics = daRegressionMetrics;\n    //  } else {\n    //    this.daMetrics =\n    //      TrainingService.findAlgo(modelInfo.modelMetaData.algoName.split('-')[0])['driftMetrics'] ||\n    //      [];\n    //  }\n    this._spinner.stopSpinner();\n  }\n\n  /**\n   * Initializes all the required data for model tuning\n   */\n  initializeTuningData(): void {\n    (this.project.isImported && this.modelInfo.modelMetaData.isMultilabel) ||\n      this.modelInfo.modelMetaData.isMultilabel\n      ? (this.isImported = true)\n      : (this.isImported = false);\n    let algo = this.modelInfo.modelMetaData.algoName.split('-');\n    let timeseriesAlgo = algo.find(item => item === 'Prophet');\n    if (timeseriesAlgo === 'Prophet') {\n      this.disableRandomSearch = true;\n    } else {\n      this.disableRandomSearch = false;\n    }\n    this.iteration = `Tuning-${this.genModelName(\n      this.training.models,\n      this.modelInfo.modelMetaData.algoName\n    )}`;\n    ((algo === 'XGBoost Classification' || algo === 'LightGBM Classification') &&\n      this.training.isMultilabel) ||\n      this.project.type === 'timeseries'\n      ? (this.disableBO = true)\n      : (this.disableBO = false);\n\n    // ! originalHpt is not used anywhere in the tuning operation\n    // this.originalHpt = angular.copy(this.training.hptPreference);\n\n    // ! retrainStatus is not used any where in whole models module\n    // this.retrainStatus = modelInfo.modelMetaData.status;\n\n    // Split algoname with delimeter '-' to check it is an advance or normal algo.\n    this.modelTuningOption = this.modelInfo.modelMetaData.modelTuning || 'hpt';\n    // console.log('this is hpt option value : ', this.modelTuningOption);\n    let algoSplit = this.modelInfo.modelMetaData.algoName.split('-');\n    this.algorithmName = algoSplit[0];\n    this.algorithm = this.ALGORITHMS_ARRAY.filter(\n      (algorithm: any) => algorithm.name === this.modelInfo.modelMetaData.algoName.split('-')[0]\n    )[0];\n    this.algoType = this.algorithm.type;\n    if (\n      this.modelInfo.modelMetaData.algoName.includes('Boosting') ||\n      this.modelInfo.modelMetaData.algoName.includes('Bagging')\n    ) {\n      const dynamicFormFieldsAdvAlgo = this.getAdvAlgoFormFields();\n      if (this.modelInfo.hptPreference) {\n        this.modelTuningOption = this.modelInfo.modelMetaData.modelTuning || 'hpt';\n        this.modelInfo.hptPreference.algoName = this.modelInfo.modelMetaData.algoName;\n        if (this.modelInfo.modelMetaData.algoName.includes('Tuning')) {\n          let algoName: string = `${algoSplit[1].charAt(0).toUpperCase()}${algoSplit[1].slice(\n            1\n          )}-${this.algorithm.type.charAt(0).toUpperCase()}${this.algorithm.type.slice(1)}`;\n          // setting up the db hpt values to the dynamic form fields.\n          this.formFields = dynamicFormFieldsAdvAlgo.filter(\n            (algo: any) => algo.algoName === algoName\n          )[0];\n          this.formFields?.fields.forEach((defaultFieldVal) => {\n            this.modelInfo?.hptPreference?.fields.forEach((dbFormVal) => {\n              if (defaultFieldVal.name === dbFormVal.name) {\n                defaultFieldVal.data = dbFormVal.data;\n              }\n            });\n          });\n        } else {\n          this.formFields = this.modelInfo.hptPreference;\n        }\n      } else {\n        let algoName: string = `${algoSplit[1].charAt(0).toUpperCase()}${algoSplit[1].slice(\n          1\n        )}-${this.algorithm.type.charAt(0).toUpperCase()}${this.algorithm.type.slice(1)}`;\n        this.formFields = dynamicFormFieldsAdvAlgo.filter(\n          (algo: any) => algo.algoName === algoName\n        )[0];\n      }\n    } else {\n      const dynamicFormFields = this.getHptFormFields();\n      let algoName: string = this.modelInfo.modelMetaData.algoName.split('-')[0];\n      if (this.modelInfo.hptPreference) {\n        // Get previously trained data and set it to formFields\n        this.modelTuningOption = this.modelInfo.modelMetaData.modelTuning || 'hpt';\n        // console.log('this is hpt option value inside the else if : ', this.modelTuningOption);\n        this.modelInfo.hptPreference.algoName = this.modelInfo.modelMetaData.algoName;\n        // setting up the db hpt values to the dynamic form fields.\n        this.formFields = dynamicFormFields.filter((algo: any) => algo.algoName === algoName)[0];\n        this.formFields?.fields.map((defaultFieldVal) => {\n          this.modelInfo?.hptPreference?.fields.map((dbFormVal) => {\n            if (defaultFieldVal.name === dbFormVal.name) {\n              defaultFieldVal.data = dbFormVal.data;\n            }\n          });\n        });\n        // console.log('this is after mapping dynamic form field filtered for setting db hpt values : ', this.formFields);\n      } else {\n        this.formFields = dynamicFormFields.filter((algo: any) => algo.algoName === algoName)[0];\n      }\n    }\n    this.filterFormFields(this.formFields.fields);\n    this._spinner.stopSpinner();\n  }\n\n  /**\n   * Initialize default values when tuning option is changed\n   * @param val - this is the label passed from the html code, which is used to check if user visit the parameter tuning first time or second time.\n   */\n  onTuningOptionChanged(val?: string): void {\n    this._spinner.showSpinner();\n    // For bagging,boosting hyper params are different different\n    var tuningOption = this.modelInfo.modelMetaData.modelTuning || 'hpt';\n    var baggingBoosting = null;\n    if (this.modelInfo.modelMetaData.algoName.includes('Boosting')) {\n      baggingBoosting = 'Boosting';\n    } else if (this.modelInfo.modelMetaData.algoName.includes('Bagging')) {\n      baggingBoosting = 'Bagging';\n    }\n    if (baggingBoosting) {\n      const dynamicFormFieldsAdvAlgo = this.getAdvAlgoFormFields();\n      if (this.modelInfo.hptPreference && this.modelTuningOption === tuningOption) {\n        this.modelTuningOption = this.modelInfo.modelMetaData.modelTuning || 'hpt';\n        this.modelInfo.hptPreference.algoName = this.modelInfo.modelMetaData.algoName;\n        // this.formFields = this.modelInfo.hptPreference;\n        if (this.modelInfo.modelMetaData.algoName.includes('Tuning')) {\n          let algoName: string = `${baggingBoosting}-${this.algorithm.type\n            .charAt(0)\n            .toUpperCase()}${this.algorithm.type.slice(1)}`;\n          // setting up the db hpt values to the dynamic form fields.\n          this.formFields = dynamicFormFieldsAdvAlgo.filter(\n            (algo: any) => algo.algoName === algoName\n          )[0];\n          this.formFields?.fields.forEach((defaultFieldVal) => {\n            this.modelInfo?.hptPreference?.fields.forEach((dbFormVal) => {\n              if (defaultFieldVal.name === dbFormVal.name) {\n                defaultFieldVal.data = dbFormVal.data;\n              }\n            });\n          });\n        } else {\n          this.formFields = this.modelInfo.hptPreference;\n        }\n      } else {\n        let algoName: string = `${baggingBoosting}-${this.algorithm.type\n          .charAt(0)\n          .toUpperCase()}${this.algorithm.type.slice(1)}`;\n        this.formFields = dynamicFormFieldsAdvAlgo.filter(\n          (algo: any) => algo.algoName === algoName\n        )[0];\n      }\n    } else {\n      const dynamicFormFields = this.getHptFormFields();\n      if (this.modelInfo.hptPreference && this.modelTuningOption === tuningOption) {\n        this.modelInfo.hptPreference.algoName = this.algorithmName;\n        // this.formFields = this.modelInfo.hptPreference;\n        // setting up the db hpt values to the dynamic form fields.\n        this.formFields = dynamicFormFields.filter(\n          (algo: any) => algo.algoName === this.algorithmName\n        )[0];\n        // console.log('this is dynamic form field filtered for setting db hpt values : ', this.formFields);\n        this.modelInfo?.hptPreference?.fields.map((dbFormVal) => {\n          this.formFields?.fields.map((defaultFieldVal) => {\n            if (defaultFieldVal.name === dbFormVal.name) {\n              defaultFieldVal.data = dbFormVal.data;\n              if(dbFormVal.gs_data){\n                defaultFieldVal.gs_data = dbFormVal.gs_data;\n              }\n            }\n          });\n        });\n        // console.log('this is after mapping dynamic form field filtered for setting db hpt values : ', this.formFields);\n      } else {\n        this.formFields = dynamicFormFields.filter(\n          (algo: any) => algo.algoName === this.algorithmName\n        )[0];\n      }\n    }\n    this.filterFormFields(this.formFields.fields, val);\n  }\n\n  /**\n   *\n   * Function to save hyper parameter tuning preferences\n   * @param hptPreference\n   */\n  saveHPTPreference(hptPreference: any): void {\n    this._spinner.showSpinner();\n    let isError: boolean = false;\n    if (this.modelTuningOption === 'bayesianOptimization' && !this.formFields.isBOSupported) {\n      this._snackBar.open('Bayesian Optimization is not supported for this model', 'OK', {\n        horizontalPosition: 'right',\n        verticalPosition: 'bottom',\n      });\n      isError = true;\n    }\n    if (\n      (this.modelInfo.modelMetaData.algoName === 'Gaussian NB Classification' ||\n        this.modelInfo.modelMetaData.algoName === 'Linear Regression') &&\n      this.modelTuningOption === 'gridSearch' &&\n      !this.formFields.isGridSearchSupported\n    ) {\n      this._snackBar.open('Random Search is not supported for this model', 'OK', {\n        horizontalPosition: 'right',\n        verticalPosition: 'bottom',\n      });\n      isError = true;\n    }\n    hptPreference.algoName = `${this.modelInfo.modelMetaData.algoName}-${this.iteration}`;\n    hptPreference.modelTuningOption = this.modelTuningOption;\n    let splitAlgo: any = this.modelInfo.modelMetaData.algoName.split('-');\n    if (splitAlgo[1] === 'GridSearchCV') {\n      const dynamicFormFields: Array<any> = this.getHptFormFields();\n      let formFields: any = dynamicFormFields.filter(\n        (algo: any) => algo.algoName === splitAlgo[0]\n      )[0];\n      hptPreference.fields.forEach((data: any, i: any) => {\n        if (data.name === 'param_grid') {\n          hptPreference.fields[i] = formFields;\n        } else {\n          let t = {\n            name: 'param_grid',\n            label: 'param_grid',\n            data: formFields,\n          };\n          hptPreference.fields.push(t);\n        }\n      });\n    }\n    // Converts the HPT form data values into integer, if type is integer.\n    if (this.modelTuningOption === 'hpt') {\n      hptPreference.fields = hptPreference.fields.map((obj: any) => {\n        if (obj.type === 'number' && typeof obj.data === 'string') {\n          obj.data = parseFloat(obj.data);\n        }\n        return obj;\n      });\n    }\n    let reqObj: any = {\n      trainingId: this.training._id,\n      modelId: this.modelInfo._id,\n      pId: this.training.projectId,\n      hptPreference: hptPreference,\n      algoType: this.algorithm.type,\n      indepVariable: this.training.indepVariable,\n      foreGround: this.foreGround,\n      backGround: this.backGround,\n      modelTuning: this.modelTuningOption,\n      projectType: this.project.type,\n      trainPipeFilePath: this.modelInfo.trainPipeFilePath,\n      transformedDatasetPath: this.modelInfo.transformedDatasetPath,\n      logTransformationColumns: this.dialogData.trainings[0].logTransformationColumns,\n      scalarValue: this.dialogData.trainings[0].scalarValue,\n    };\n    if (this.modelInfo.hasOwnProperty('edaId') && this.modelInfo.edaId !== null) {\n      reqObj.edaId = this.modelInfo.edaId;\n    } else {\n      reqObj.edaId = this.training.edaId;\n    }\n    // API call\n    if (!isError) {\n      this._training\n        .startModelTuning(this.training._id, this.modelInfo._id, reqObj)\n        .pipe(takeUntil(this.unsubscribe$))\n        .subscribe(\n          (res) => {\n            if (res) {\n              this._spinner.stopSpinner();\n              this._toaster.info('Model tuning started, please wait', 'Models');\n              this.closeModal({ type: 'tuning', algorithms: res.algorithms });\n            } else {\n              this._toaster.error('Cannot start the model tuning', 'Models');\n              this._spinner.stopSpinner();\n            }\n          },\n          (err) => {\n            this._toaster.error(`Server Error - ${err.message}.`, 'Models');\n            this._spinner.stopSpinner();\n          }\n        );\n    }\n  }\n\n  /**\n   * Function to reset model tuning option values\n   * @param algorith name of the algorithm\n   * @param modelTuningOption selected model tuning option value\n   */\n  resetHptValues(algorithm: string): void {\n    if (algorithm.includes('Boosting') || algorithm.includes('Bagging')) {\n      const dynamicFormFields: Array<any> = this.getHptFormFields();\n      let base: string = algorithm.includes('Boosting') ? 'Boosting' : 'Bagging';\n      let algoName: string = `${base}-${this.algoType.charAt(0).toUpperCase()}${this.algoType.slice(\n        1\n      )}`;\n      this.formFields = dynamicFormFields.filter((algo: any) => algo.algoName === algoName)[0];\n    } else {\n      const dynamicFormFields: Array<any> = this.getHptFormFields();\n      this.formFields = dynamicFormFields.filter(\n        (algo: any) => algo.algoName === algorithm.split('-')[0]\n      )[0];\n    }\n    this.filterFormFields(this.formFields.fields);\n  }\n\n  /**\n   * Filters the required fields in the dynamic form\n   * @param fieldsArray\n   * @param val - this is the label passed from the html code, which is used to check if user visit the parameter tuning first time or second time.\n   */\n  filterFormFields(fieldsArray: Array<any>, val?: string): void {\n    if (this.modelTuningOption === 'bayesianOptimization') {\n      this.formFields.fields = fieldsArray\n        .filter((item: any) => (item.bo_data ? item : null))\n        .map((item: any) => {\n          if (item.bo_data) {\n            item.data = item.bo_data;\n          }\n          return item;\n        });\n    } else if (this.modelTuningOption === 'gridSearch') {\n      this.formFields.fields = fieldsArray\n        .filter((item: any) => (item.gs_data ? item : null))\n        .map((item: any) => {\n          if (item.gs_data) {\n            item.data = item.gs_data;\n          }\n          return item;\n        });\n    }\n    this.createFormAndAddValidation(this.formFields?.fields, val, this.formFields?.algoName);\n  }\n\n  /**\n   * Function to toggle hide/show different fields in the retrain form, when retrain type is changed\n   * @param {*} type fit/transform\n   */\n  changeRetrainType(type: string): void {\n    if (type === 'transform') {\n      this.baseTrainingFile.fileSource === 'mssql'\n        ? ((this.hideMysqlSourceType = true), (this.hidePgsqlSourceType = true))\n        : '';\n      this.baseTrainingFile.fileSource === 'mysql'\n        ? ((this.hideMssqlSourceType = true), (this.hidePgsqlSourceType = true))\n        : '';\n      this.baseTrainingFile.fileSource === 'postgresql'\n        ? ((this.hideMysqlSourceType = true), (this.hideMssqlSourceType = true))\n        : '';\n    } else {\n      this.hideMysqlSourceType = false;\n      this.hideMssqlSourceType = false;\n      this.hidePgsqlSourceType = false;\n    }\n  }\n\n  /**\n   * Function to fetch connections list for selected data source type\n   * @param {*} type data source name - mysql, postgresql, mssql, file\n   */\n  changeSourceType(type: any): void {\n    this.baseTrainingFile.fileSource === type\n      ? (this.hideSelectConnection = true)\n      : (this.hideSelectConnection = false);\n    if ((type === 'file' || this.sourceType === 'file') && !this.selectedDataset) {\n      this.hideSubmitBtn = true;\n    } else {\n      this.hideSubmitBtn = false;\n    }\n    if ((type !== 'file' || this.sourceType !== 'file') && !this.selectedConnection) {\n      this.hideSubmitBtn = true;\n    } else {\n      this.hideSubmitBtn = false;\n    }\n    // API call\n    this._data\n      .getAllConnections(this.project._id, type)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res) => {\n          this.dataConnectionsArray = res;\n        },\n        (err: Error) => {\n          this._toaster.error(`Error - ${err.message}.`, 'Models');\n          this._spinner.stopSpinner();\n        }\n      );\n  }\n\n  /**\n   * Starts the retraining by triggering API on retrain button clicked\n   */\n  startRetraining() {\n    this._spinner.showSpinner();\n    let isError: boolean = false;\n    this.driftConfigList = [];\n    this.retrainObj.sourceType = this.sourceType;\n    this.retrainObj.mergeDataset = this.mergeDataset;\n    if (this.dialogData.originalFileWithEdaDetails) {\n      this.retrainObj.edaSummary = this.dialogData.trainings[0].edaId.edaSummary;\n    } else {\n      this.retrainObj.edaSummary = null;\n    }\n    if (!this.project.useGPU) {\n      this.retrainObj.retrainType = this.retrainType;\n    }\n    if (\n      this.sourceType === 'mssql' ||\n      this.sourceType === 'mysql' ||\n      this.sourceType === 'postgresql'\n    ) {\n      if (this.retrainType !== 'transform') {\n        let foudDangerKeys =\n          this.query?.includes('delete') ||\n          this.query?.includes('insert') ||\n          this.query?.includes('update');\n        if (foudDangerKeys) {\n          this._snackBar.open('Only SELECT query is allowed', 'OK', {\n            horizontalPosition: 'right',\n            verticalPosition: 'bottom',\n          });\n          isError = true;\n        }\n        //original file used for training\n        this.retrainObj.retrainingFileId = this.training.originalFileId;\n        this.retrainObj.connectionSettings = {};\n        this.retrainObj.connectionSettings.query = this.query;\n        if (this.selectedConnection) {\n          this.retrainObj.connectionSettings.connection = {};\n          this.retrainObj.connectionSettings.connectionName =\n            this.selectedConnection.connectionName;\n          this.retrainObj.connectionSettings.dataGroupId = this.selectedConnection.dataGroupId;\n          this.retrainObj.connectionSettings.database = this.selectedConnection.databaseName;\n          this.retrainObj.connectionSettings.source = this.selectedConnection.source;\n          this.retrainObj.connectionSettings.connection =\n            this.selectedConnection.databaseConnectionId;\n          this.retrainObj.connectionSettings.dataConnId = this.selectedConnection._id;\n        }\n      }\n    } else {\n      let selectedDataSet = this.dataSetsList.find((item) => item._id === this.selectedDataset);\n      if (selectedDataSet) {\n        this.retrainObj.retrainingDataFilename = selectedDataSet.name;\n        this.retrainObj.fileSchema = selectedDataSet.fileSchema;\n        this.retrainObj.retrainingFileId = selectedDataSet._id ? selectedDataSet._id : null;\n      }\n    }\n    this.retrainObj.filename = this.dialogData.originalFileWithEdaDetails.filename;\n    this.retrainObj.dataSetInfo = this.dialogData.trainings[0].edaId.dataSetInfo;\n    // API call\n    if (!isError) {\n      this._training\n        .startReTraining(this.training._id, this.modelInfo._id, this.retrainObj)\n        .pipe(takeUntil(this.unsubscribe$))\n        .subscribe(\n          (res) => {\n            if (res) {\n              this.modelErrorCount = 0;\n              this._toaster.info('Retraining started, please wait', 'Models');\n              this.closeModal({ type: 'retrain', algorithms: res.algorithms });\n            } else {\n              this._toaster.error('Cannot start the retraining', 'Models');\n              this._spinner.stopSpinner();\n            }\n          },\n          (err: Error) => {\n            this._toaster.error(`Server Error - ${err.message}.`, 'Models');\n            this._spinner.stopSpinner();\n          }\n        );\n    }\n  }\n\n  /**\n   * Does drift analysis and generates drift report by triggering API, on \"Do drift analysis\" button click\n   */\n  doDataDriftAnalysis(): void {\n    this._spinner.showSpinner();\n    let reqObj: any = {\n      algoType: this.algoType,\n      type: 'summary',\n      stdThreshold: this.project.stdThreshold || 3,\n      reportName: this.reportName,\n      inputFeature: null,\n      incomingFileId: this.selectedDataset,\n      driftConfig: this.driftConfig ? this.driftConfig : null,\n    };\n    if (this.modelInfo.edaId !== null) {\n      reqObj.edaId = this.modelInfo.edaId;\n    } else {\n      reqObj.edaId = this.training.edaId._id;\n    }\n    let selectedDataSet: any = this.dataSetsList.find((item) => item._id === this.selectedDataset);\n    reqObj.incomingFilepath = selectedDataSet.name;\n    reqObj.incomingSchema = selectedDataSet.fileSchema.map((item: any) => {\n      let obj: any = { colName: item.colName, dataType: item.dataType };\n      return obj;\n    });\n    // API call\n    this._dataDrift\n      .startDriftAnalysis(this.training._id, this.modelInfo._id, reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res) => {\n          if (res) {\n            this._toaster.info('Drift analysis started, please wait', 'Models');\n            this.closeModal();\n          } else {\n            this._toaster.error('Cannot perform drift analysis', 'Models');\n            this._spinner.stopSpinner();\n          }\n        },\n        (err: Error) => {\n          this._toaster.error(`Server Error - ${err.message}.`, 'Models');\n          this._spinner.stopSpinner();\n        }\n      );\n  }\n\n  /**\n   * Function called when advance algo type options are changed - Bagging/Boosting\n   * @param {*} advAlgoName selected algo name\n   */\n  onAdvAlgoSelectionChange(advAlgoName: string): void {\n    // Checks whether adv algo is performed already or not\n    let isAlreadyDone: boolean = this.checkAdvTrainingAlreadyDone(\n      advAlgoName,\n      this.modelInfo.modelMetaData.algoName,\n      this.training\n    );\n    if (!isAlreadyDone) {\n      this.algoType = this.ALGORITHMS_ARRAY.filter(\n        (a: any) => a.name === this.modelInfo.modelMetaData.algoName.split('-')[0]\n      )[0]?.type;\n      const dynamicFormAdvAlgoFields = this.getAdvAlgoFormFields();\n      let algo = `${advAlgoName.charAt(0).toUpperCase()}${advAlgoName.slice(1)}-${this.algoType\n        .charAt(0)\n        .toUpperCase()}${this.algoType.slice(1)}`;\n      if (\n        this.modelInfo.modelMetaData.algoName === 'Ridge Classification' ||\n        this.modelInfo.modelMetaData.algoName === 'Ridge Classification with Cross Validation'\n      ) {\n        this.formAdvAlgoFeilds = dynamicFormAdvAlgoFields.filter(\n          (a: any) => a.algoName === algo\n        )[0];\n        this.formAdvAlgoFeilds.fields = this.formAdvAlgoFeilds.fields.map((item: any) => {\n          if (item.type === 'select') {\n            item.select_options = [{ option_label: 'SAMME', value: 'SAMME' }];\n            item.data = 'SAMME';\n          }\n          return item;\n        });\n      } else {\n        this.formAdvAlgoFeilds = dynamicFormAdvAlgoFields.filter(\n          (a: any) => a.algoName === algo\n        )[0];\n      }\n      let algoName: string = `${this.modelInfo.modelMetaData.algoName}-${advAlgoName\n        .charAt(0)\n        .toUpperCase()}${advAlgoName.slice(1)}`;\n      if (advAlgoName === 'gridSearchCV') {\n        const dynamicFormFields = this.getHptFormFields();\n        let formFields = dynamicFormFields.filter(\n          (a: any) => a.algoName === this.modelInfo.modelMetaData.algoName\n        )[0];\n        this.advAlgoReqObject = {\n          algoname: algoName,\n          modelFilePath: this.modelInfo.modelMetaData.modelPath,\n          hyperParams: formFields,\n        };\n      } else {\n        this.advAlgoReqObject = {\n          algoname: algoName,\n          modelFilePath: this.modelInfo.modelMetaData.modelPath,\n          hyperParams: null,\n        };\n      }\n    }\n  }\n\n  /**\n   * Function is called for save HP button, which saves the hyper params value\n   * @param {*} selection\n   */\n  saveHyperParam(selection: string): void {\n    this.hyperParam = this.formAdvAlgoFeilds;\n    let formFields: Array<any> = [];\n    let algoName: string = `${this.modelInfo.modelMetaData.algoName}-${this.advAlgoSelected\n      .charAt(0)\n      .toUpperCase()}${this.advAlgoSelected.slice(1)}`;\n    if (selection === 'gridSearchCV') {\n      if (this.formFields && this.formFields.algoName === this.modelInfo.modelMetaData.algoName) {\n        formFields = this.formFields;\n      } else {\n        const dynamicFormFeilds: Array<any> = this.getHptFormFields();\n        formFields = dynamicFormFeilds.filter(\n          (a: any) => a.algoName === this.modelInfo.modelMetaData.algoName\n        )[0];\n      }\n      let tempObj: any = {\n        name: 'param_grid',\n        label: 'param_grid',\n        required: true,\n        data: formFields,\n      };\n      let isFound: boolean = false;\n      this.hyperParam.fields.forEach((data: any, i: any) => {\n        if (data.name === 'param_grid') {\n          this.hyperParam.fields[i] = tempObj;\n          isFound = true;\n        }\n      });\n      isFound ? '' : this.hyperParam.fields.push(tempObj);\n      this.advAlgoReqObject = {\n        algoname: algoName,\n        modelFilePath: this.modelInfo.modelMetaData.modelPath,\n        hyperParams: this.hyperParam,\n      };\n    } else {\n      this.advAlgoReqObject = {\n        algoname: algoName,\n        modelFilePath: this.modelInfo.modelMetaData.modelPath,\n        hyperParams: this.hyperParam,\n      };\n    }\n    // Converts the HPT form data string values into integer, if type is integer.\n    this.hyperParam.fields = this.hyperParam.fields.map((obj: any) => {\n      if (obj.type === 'number' && typeof obj.data === 'string') {\n        obj.data = parseFloat(obj.data);\n      }\n      return obj;\n    });\n    swal({\n      title: 'HPT Preference',\n      text: `Preference saved successfully!`,\n      icon: 'success',\n      className: 'custom-alert',\n    });\n  }\n\n  /**\n   * Starts the advance training execution\n   */\n  startAdvTraining(): void {\n    this._spinner.showSpinner();\n    if (!this.hyperParam?.length) {\n      let algoName: string = `${this.modelInfo.modelMetaData.algoName}-${this.advAlgoSelected\n        .charAt(0)\n        .toUpperCase()}${this.advAlgoSelected.slice(1)}`;\n      this.advAlgoReqObject = {\n        algoname: algoName,\n        modelFilePath: this.modelInfo.modelMetaData.modelPath,\n        hyperParams: this.formAdvAlgoFeilds,\n      };\n    }\n    // Converts the HPT form data string values into integer, if type is integer.\n    this.advAlgoReqObject.hyperParams.fields = this.advAlgoReqObject.hyperParams.fields.map(\n      (obj: any) => {\n        if (obj.type === 'number' && typeof obj.data === 'string') {\n          obj.data = parseFloat(obj.data);\n        }\n        return obj;\n      }\n    );\n    let reqObj: any = {\n      advAlgoOptions: this.advAlgoReqObject,\n      transformedDatasetPath: this.modelInfo.transformedDatasetPath,\n      algoType: this.algoType,\n      backGround: this.backGround,\n      foreGround: this.foreGround,\n      degree: this.modelInfo.modelMetaData.degree ? this.modelInfo.modelMetaData.degree : 2,\n      logTransformationColumns: this.dialogData.trainings[0].logTransformationColumns,\n      scalarValue: this.dialogData.trainings[0].scalarValue,\n    };\n    if (this.modelInfo.edaId !== null) {\n      reqObj.edaId = this.modelInfo.edaId;\n    } else {\n      reqObj.edaId = this.training.edaId;\n    }\n    // API call\n    this._training\n      .startAdvTraining(this.training._id, this.modelInfo._id, reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res) => {\n          if (res) {\n            this.modelErrorCount = 0;\n            this._toaster.info('Advance algorithm training started, please wait', 'Models');\n            this.closeModal({ type: 'advAlgo', algorithms: res.algorithms });\n          } else {\n            this._toaster.error('Cannot start the advance algorithm training', 'Models');\n            this._spinner.stopSpinner();\n          }\n        },\n        (err: Error) => {\n          this._toaster.error(`Server Error - ${err.message}.`, 'Models');\n          this._spinner.stopSpinner();\n        }\n      );\n  }\n\n  /**\n   * Checks whether advance training is already done or not\n   * @param {*} selection\n   * @param {*} algoName\n   * @param {*} training\n   */\n  checkAdvTrainingAlreadyDone(selection: string, algoName: string, training: any): boolean {\n    let found: boolean = false;\n    training.models.forEach((model: any) => {\n      if (model.modelMetaData.algoName.toLowerCase() === `${algoName}-${selection}`.toLowerCase()) {\n        found = true;\n        this._snackBar.open(`Already performed ${selection} for this model`, 'OK', {\n          horizontalPosition: 'right',\n          verticalPosition: 'bottom',\n        });\n        this.formAdvAlgoFeilds = [];\n      }\n    });\n    return found;\n  }\n\n  /**\n   * Disables the Boosting option for some algos\n   */\n  disableForAlgos(): boolean {\n    let algo: any = this.modelInfo.modelMetaData.algoName.split('-')[0];\n    let index: number = ['KNN Classification', 'Nearest Centroid Classification'].indexOf(algo);\n    return index !== -1 ? false : true;\n  }\n\n  /**\n   * Generates the model name and returns it\n   * @param {*} models\n   * @param {*} algoName\n   */\n  genModelName(models: any, algoName: any): any {\n    return models.filter((model: any) => model.modelMetaData.algoName.includes(algoName)).length;\n  }\n\n  /**\n   * Returns the form data to be shown if grid search is selected\n   * Eg: For grid search we need to show \"gs_data\" values as default in the form,\n   * but while submiting we need to send \"data\" value\n   * @returns\n   */\n  bindGridSearch(customValue: string, field: any): any {\n    if (customValue) {\n      field.data = customValue;\n    } else {\n      field.data = field.gs_data;\n    }\n    return field.data;\n  }\n\n  /**\n   * Returns the form data to be shown if bayesian optimization is selected\n   * Eg: For grid search we need to show \"bo_data\" values as default in the form,\n   * but while submiting we need to send \"data\" value\n   * @param field\n   * @returns\n   */\n  bindBayesianOpt(customValue: string, field: any): any {\n    if (customValue) {\n      field.data = customValue;\n    } else {\n      field.data = field.bo_data;\n    }\n    return field.data;\n  }\n\n  /**\n   * Retursn the original HPT form fields array\n   * @returns\n   */\n  getHptFormFields(): Array<any> {\n    return JSON.parse(JSON.stringify(HPT_FORM_FIELDS));\n  }\n\n  /**\n   * Returns the original adv algo form fields array\n   * @returns\n   */\n  getAdvAlgoFormFields(): Array<any> {\n    return JSON.parse(JSON.stringify(ADV_ALGORITHMS_FORM_FIELDS));\n  }\n\n  /**\n   * Closes the current opened dialog\n   */\n  closeModal(data?: any): void {\n    this._modelsDialogRef.close(data);\n  }\n\n  /**\n   * function to add restrictions to the project types.\n   */\n  setRestrictions(): void {\n    this.allowedSettingsOption = this.user?.psFeatures?.allowedFeaturesList || [];\n  }\n\n  /**\n   * function to create form controls and then attach the validators.\n   * @param val - this is the label passed from the html code, \n   * which is used to check if user visit the parameter tuning first time or second time.\n  */\n  createFormAndAddValidation(controls: any, val?: string, algoName?: string): void {\n    for (const control of controls) {\n      const validatorsToAdd = [];\n      for (const [key, value] of Object.entries(control.validators)) {\n        switch (key) {\n          case 'min':\n            validatorsToAdd.push(Validators.min(Number(value)));\n            break;\n          case 'required':\n            if (value) {\n              validatorsToAdd.push(Validators.required);\n            }\n            break;\n          case 'requiredTrue':\n            if (value) {\n              validatorsToAdd.push(Validators.requiredTrue);\n            }\n            break;\n          case 'email':\n            if (value) {\n              validatorsToAdd.push(Validators.email);\n            }\n            break;\n          case 'minLength':\n            validatorsToAdd.push(Validators.minLength(Number(value)));\n            break;\n          case 'maxLength':\n            validatorsToAdd.push(Validators.maxLength(Number(value)));\n            break;\n          case 'pattern':\n            if (this.modelTuningOption === 'bayesianOptimization' && control.bo_data) {\n              if(( algoName === 'Random Forest Regression' && (control.name === 'max_depth' || control.name === 'max_leaf_nodes')) || \n                 ( algoName === 'Polynomial Regression' && control.name === 'degree') ||\n                 ( algoName === 'Ridge Regression' && control.name === 'max_iter') ||\n                 ( algoName === 'Lasso Regression' && control.name === 'max_iter') || \n                 ( algoName === 'Passive Regression' && control.name === 'tol') ||\n                 ( algoName === 'LassoLARS Regression' && control.name === 'eps') ||\n                 ( algoName === 'MLP Classification' && (control.name === 'hidden_layer_sizes' || control.name === 'epsilon' || control.name === 'max_iter')) ||\n                 ( algoName === 'Logistic Regression' && control.name === 'C') ||\n                 ( algoName === 'nuSV Regression' && (control.name === 'C' || control.name === 'degree')) || \n                 ( algoName === 'SGD Regression' && (control.name === 'epsilon' || control.name === 'l1_ratio' || control.name === 'alpha')) ||\n                 ( algoName === 'XGBoost Regression' && (control.name === 'max_depth' || control.name === 'n_estimators' || control.name === 'scale_pos_weight')) || \n                 ( algoName === 'LightGBM Regression' && (control.name === 'max_depth' || control.name === 'num_leaves' || control.name === 'n_estimators')) ||\n                 ( algoName === 'Decision Tree Classification' && control.name === 'max_leaf_nodes') || \n                 ( algoName === 'Random Forest Classification' && control.name === 'max_depth') || \n                 ( algoName === 'Ridge Classification' && control.name === 'max_iter') || \n                 ( algoName === 'Ridge Classification with Cross Validation' && control.name === 'cv') || \n                 ( algoName === 'Logistic Regression with Cross Validation' && (control.name === 'cv' || control.name === 'Cs')) || \n                 ( algoName === 'Passive Aggressive Classification' && (control.name === 'max_iter' || control.name === 'tol')) ||\n                 ( algoName === 'XGBoost Classification' && (control.name === 'max_depth' || control.name === 'n_estimators' || control.name === 'subsample')) || \n                 ( algoName === 'SVM Classification' && (control.name === 'C' || control.name === 'gamma')) ||\n                 ( algoName === 'LightGBM Classification' && (control.name === 'max_depth' || control.name === 'num_leaves' || control.name === 'n_estimators')) ||\n                 ( algoName === 'Extra Tree Classification' && (control.name === 'max_depth' || control.name === 'min_samples_split' || control.name === 'min_samples_leaf' || control.name === 'max_leaf_nodes' || control.name === 'min_impurity_decrease')) || \n                 ( algoName === 'Ensemble Extra Trees Classification' && (control.name === 'max_depth' || control.name === 'n_estimators' || control.name === 'max_features' || control.name === 'min_samples_split' || control.name === 'min_samples_leaf' || control.name === 'max_leaf_nodes' || control.name === 'min_impurity_decrease')))  {\n                if(this.hptForm.get(control.name) !== undefined && this.hptForm.get(control.name) !== null) {\n                  this.hptForm.get(control.name).setValidators([Validators.required, Validators.pattern(/^([0-9]+(\\.[0-9]+)*(,[0-9]+(\\.[0-9]+)*){1})$/)]);\n                  this.hptForm.updateValueAndValidity();\n                } else {\n                  validatorsToAdd.push(Validators.pattern(/^([0-9]+(\\.[0-9]+)*(,[0-9]+(\\.[0-9]+)*){1})$/));\n                }\n              } else {\n                if(this.hptForm.get(control.name) !== undefined && this.hptForm.get(control.name) !== null) {\n                  let val = String(value).replace(/[\\*]/g, '?');\n                  this.hptForm.get(control.name).setValidators([Validators.required, Validators.pattern(String(val))]);\n                  this.hptForm.updateValueAndValidity();\n                } else {\n                  validatorsToAdd.push(Validators.pattern(String(value).replace(/[\\*]/g, '?')));\n                }\n              }\n            } else if (this.modelTuningOption === 'gridSearch' && control.gs_data) {\n              if(this.hptForm.get(control.name) !== undefined && this.hptForm.get(control.name) !== null) {\n                this.hptForm.get(control.name).setValidators([Validators.required, Validators.pattern(String(value))]);\n                this.hptForm.updateValueAndValidity();\n              } else {\n                validatorsToAdd.push(Validators.pattern(String(value)));\n              }\n            } else {\n              validatorsToAdd.push(Validators.pattern(String(value)));\n            }\n            break;\n          case 'nullValidator':\n            if (value) {\n              validatorsToAdd.push(Validators.nullValidator);\n            }\n            break;\n          default:\n            if (this.appType === 'saas' && key === 'saasMax' && value) {\n              validatorsToAdd.push(Validators.max(Number(value)));\n            } else if (this.appType === 'enterprise' && key === 'entMax' && value) {\n              validatorsToAdd.push(Validators.max(Number(value)));\n            }\n            break;\n        }\n      }\n      if (this.modelTuningOption == 'hpt' && val === 'secondTime' && this.hptForm.get(control.name) !== undefined && this.hptForm.get(control.name) !== null) {\n        this.hptForm.get(control.name).setValidators(validatorsToAdd);\n        this.hptForm.updateValueAndValidity();\n      } else {\n        this.hptForm.addControl(control.name, this.fb.control(control.data, validatorsToAdd));\n      }\n    }\n    this._spinner.stopSpinner();\n  }\n\n  /**\n   * Perform operations when the module is destroyed\n   */\n  ngOnDestroy() {\n    this.unsubscribe$.next(false);\n    this.unsubscribe$.unsubscribe();\n  }\n}\n","<!-- HEADER (title) -->\n<h2 mat-dialog-title>Quick Prediction</h2>\n<!-- BODY -->\n<mat-dialog-content>\n  <!-- SELECT (model) -->\n  <div class=\"row mt-3\">\n    <div class=\"col-md-12 form-group\">\n      <mat-form-field appearance=\"outline\" class=\"w-50\">\n        <mat-label>Select a model</mat-label>\n        <mat-select [(ngModel)]=\"modelToPredict\" required #model=\"ngModel\"\n          (selectionChange)=\"onChangeDataset($event.value)\">\n          <mat-option *ngFor=\"let model of models\" [value]=\"model\">\n            {{ dialogData.trainings[0].name }}\n            - {{ model.modelMetaData.algoName }}</mat-option>\n        </mat-select>\n        <mat-error *ngIf=\"model.invalid || model.touched\">Model is required.</mat-error>\n      </mat-form-field>\n    </div>\n  </div>\n  <div class=\"d-flex align-items-center justify-content-between\">\n    <!-- TOGGLE BUTTONS (upload and keyboard) -->\n    <mat-button-toggle-group [disabled]=\"!modelToPredict\" class=\"mt-2\" [(ngModel)]=\"predMode\"\n      (change)=\"selectPredMode(predMode)\">\n      <mat-button-toggle value=\"file_upload\">\n        <mat-icon>file_upload</mat-icon>\n      </mat-button-toggle>\n      <mat-button-toggle value=\"input_form\" [hidden]=\"selectedModel == 'Agglomerative'\">\n        <mat-icon>keyboard</mat-icon>\n      </mat-button-toggle>\n    </mat-button-toggle-group>\n    <!-- BUTTON (refresh form data)  -->\n    <button class=\"text-primary\" mat-button *ngIf=\"predMode === 'input_form'\" (click)=\"selectPredMode('input_form')\">\n      Refresh Form\n      <mat-icon class=\"ml-2\">autorenew</mat-icon>\n    </button>\n  </div>\n  <!-- FILE UPLOAD -->\n  <mat-form-field appearance=\"outline\" *ngIf=\"predMode === 'file_upload'\" class=\"mt-3\">\n    <mat-label>Select encoding</mat-label>\n    <mat-select [(ngModel)]=\"fileEncoding\" required>\n      <mat-option value=\"utf_8\">utf_8</mat-option>\n      <mat-option value=\"latin_1\">latin_1</mat-option>\n    </mat-select>\n  </mat-form-field>\n  <div *ngIf=\"predMode === 'file_upload'\" class=\"mt-1\">\n    <input class=\"mb-2\" type=\"file\" name=\"file\" accept=\".csv\"\n      (change)=\"handleFileInput($event.target.files,fileEncoding)\" /><br />\n    <mat-hint class=\"mt-2\">Only .csv file is allowed.</mat-hint>\n  </div>\n  <!-- INPUT FORM -->\n  <div *ngIf=\"predMode === 'input_form'\" class=\"row mt-3\">\n    <div class=\"col-md-3\" *ngFor=\"let field of quickPredUIMetaData\">\n      <mat-form-field appearance=\"outline\">\n        <mat-label>{{ field.colName }}</mat-label>\n        <input matInput type=\"{{\n            field.dataType === 'Integer' ||\n            field.dataType === 'Decimal'\n              ? 'number'\n              : 'text'\n          }}\" [placeholder]=\"field.colName\" [name]=\"field.name\" [(ngModel)]=\"quickPredformData[field.colName]\" />\n      </mat-form-field>\n    </div>\n  </div>\n  <!-- PREDICTION RESULT -->\n  <div *ngIf=\"predictionResult?.predictionFileMetaData && predictionPreviewData.length\" class=\"mt-4\">\n    <mat-divider></mat-divider>\n    <div class=\"d-flex justify-content-between align-items-center mt-4\">\n      <!-- DOWNLOAD -->\n      <h6 class=\"m-0\">\n        <a href=\"#\" (click)=\"downloadPredictedFile()\">Download</a> the prediction result.\n      </h6>\n      <!-- INPUT -->\n      <mat-form-field *ngIf=\"predMode === 'file_upload' && project.type !== 'clustering'\" appearance=\"standard\"\n        class=\"ml-auto mr-4\" style=\"width: 20% !important\">\n        <mat-label>Record No.</mat-label>\n        <input matInput type=\"number\" placeholder=\"Enter number\" [(ngModel)]=\"rowId\" />\n      </mat-form-field>\n      <!-- BUTTON (lime report) -->\n      <button *ngIf=\"project.type !== 'clustering' && modelToPredict.graphSupported.limeReport === true\"\n        mat-stroked-button (click)=\"openGraphDialog('limeReport', modelToPredict, predMode)\"\n        [disabled]=\"appType === 'saas' && !user?.roles?.includes('super_admin') && !user?.roles?.includes('admin') && user?.planType === 'basic' && !allowedModelOptions.includes('limeReport')\">\n        <span matBadge [matBadgeIcon]=\"allowedModelOptions.includes('limeReport') ? '' : 'PRO'\" matBadgeOverlap=false\n          [ngClass]=\"(appType === 'enterprise') || (appType === 'saas' &&  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) || allowedModelOptions.includes('limeReport') ? '' : 'text-muted disable-Btn'\">\n          <mat-icon class=\"mr-2\">show_chart</mat-icon>Lime Report\n        </span>\n      </button>\n    </div>\n    <!-- DATA GRID TABLE -->\n    <!-- <div class=\"mt-3\">\n      <table class=\"table w-100 table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td *ngFor=\"let data of predictionPreviewData[0] | keyvalue\" class=\"bold\">\n              {{ data.key }}\n            </td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of  predictionPreviewData\">\n            <td *ngFor=\"let item of tdata | keyvalue\">{{ item.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div> -->\n    <ag-grid-angular *ngIf=\"predictionPreviewData.length\" #agGrid id=\"myGrid\" class=\"ag-angle my-4\"\n      [gridOptions]=\"gridOptions\" (gridReady)=\"gridReady($event)\">\n    </ag-grid-angular>\n  </div>\n</mat-dialog-content>\n<!-- FOOTER (buttons) -->\n<mat-dialog-actions class=\"justify-content-end mt-4 mb-auto\">\n  <!-- CANCEL -->\n  <button class=\"{{ predMode === 'input_form' ? 'mr-auto' : '' }}\" mat-stroked-button mat-dialog-close>\n    Cancel\n  </button>\n  <!-- RESET -->\n  <button *ngIf=\"predMode === 'input_form'\" (click)=\"quickPredformData = {}\" mat-stroked-button>\n    Clear\n  </button>\n  <!-- SUBMIT -->\n  <button [disabled]=\"!modelToPredict\" (click)=\"doPrediction()\" mat-flat-button class=\"btn-primary\" type=\"submit\">\n    Predict\n  </button>\n</mat-dialog-actions>","import { FormControl } from '@angular/forms';\nimport { environment } from 'src/environments/environment';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { SocketIoService } from 'src/app/core/socket-io.service';\nimport { ModelsService } from './../models.service';\nimport { DataService } from './../../data/data.service';\nimport { SpinnerService } from './../../../shared/spinner.service';\nimport { LocalStorageService } from './../../../shared/local-storage.service';\nimport { Component, Inject, OnDestroy, OnInit, OnChanges } from '@angular/core';\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { TextAnalysisService } from '../../text-analysis/text-analysis.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { ModelsComponent } from '../models.component';\nimport { GridApi, GridOptions } from 'ag-grid-community';\nimport { GraphsDialogHandlerComponent } from '../graphs-dialog-handler/graphs-dialog-handler.component';\nimport { UtilsService } from 'src/app/shared/utils.service';\n\ndeclare var $: any;\n@Component({\n  selector: 'app-quick-prediction',\n  templateUrl: './quick-prediction.component.html',\n  styleUrls: ['./quick-prediction.component.scss'],\n})\nexport class QuickPredictionComponent implements OnInit, OnDestroy, OnChanges {\n  /** Usubscription subject */\n  unsubscribe$ = new Subject<boolean>();\n\n  /** Angular grid settings */\n  gridOptions: GridOptions;\n  $win = $(window);\n  gridApi: GridApi;\n  /** Variables with default values */\n  predMode: string = 'file_upload';\n  toggleView: boolean = false;\n  fileToUpload: any;\n\n  fileUploadControl = new FormControl('');\n  fileEncoding: any;\n  project: any;\n  modelToPredict: any;\n  predictionResult: any;\n  originalFileDetails: any;\n  quickPredformData: any = {};\n  taFeatureConfig: Array<any> = [];\n  quickPredUIMetaData: Array<any> = [];\n  predictionPreviewData: Array<any> = [];\n  predictionUploadResult: any;\n  rowId: number;\n  //configure it to change the file size - this is in mb.\n  allowedPSFileUploadSize: number;\n  // restriction variables\n  appType: string = environment.appType;\n  allowedModelOptions: Array<any> = null;\n  user: any;\n  gridColumnApi: any;\n  selectedModel: any;\n  models: any;\n  ALGORITHMS_ARRAY: Array<any>;\n\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public dialogData: any,\n    private _data: DataService,\n    private _textAnalysis: TextAnalysisService,\n    private _localStorage: LocalStorageService,\n    private _toaster: ToastrService,\n    private _spinner: SpinnerService,\n    private _modelsDialogRef: MatDialogRef<ModelsComponent>,\n    private _models: ModelsService,\n    private _socket: SocketIoService,\n    private _snackbar: MatSnackBar,\n    private _window: Window,\n    private _dialog: MatDialog,\n    private _utils: UtilsService\n  ) {}\n\n  async ngOnInit(): Promise<any> {\n    this._spinner.showSpinner();\n    this.ALGORITHMS_ARRAY = await this._utils.getAlgorithms();\n    this.fileEncoding = 'utf_8';\n    this.initQuickPredictionSocket();\n    this.project = this._localStorage.getItem('project');\n    //fetching the restriction details from localstorage user.\n    this.user = this._localStorage.getItem('user');\n    this.allowedPSFileUploadSize = this.user?.psFeatures?.allowedPSFileUploadSize || 50;\n    this.models = this.dialogData.trainings[0].models;\n    this.models = this.models.filter((item) => {\n      console.log(\"m item\",item)\n      return item?.graphSupported?.status === true && item?.graphSupported?.isDeleted === false;\n    });\n    console.log(this.models)\n    this.allowedModelOptions = this.user?.psFeatures?.allowedFeaturesList || [];\n    await this.initializeQuickPrediction();\n  }\n\n  ngOnChanges() {}\n\n  /**\n   * Initializes the quick prediction required data\n   */\n  async initializeQuickPrediction(): Promise<any> {\n    // this.predictionStarted = false;\n    // API call\n    this.originalFileDetails = await this.getMyFileData(\n      this.project._id,\n      this.dialogData.currentModelMeta.originalFileId\n    ).catch((e: any) => {\n      this._toaster.error('Could not fetch required information for Quick Prediction.', 'Models');\n      this._spinner.stopSpinner();\n      this.closeModal();\n    });\n    if (this.originalFileDetails?.taExperimentId) {\n      // If original file has features generated using textanalysis, fetch and keep in local variable.\n      // Later exclude these new features in qp form\n      let taExperiment: any = await this.getTaExperiment(\n        this.originalFileDetails.taExperimentId\n      ).catch((e: any) => {\n        this._toaster.error(`Error : ${e.error.message}`, 'Models');\n        this._spinner.stopSpinner();\n      });\n      this.taFeatureConfig = taExperiment.taFeatureConfig || [];\n    }\n    this._spinner.stopSpinner();\n  }\n\n  onChangeDataset(dataset) {\n    this.selectedModel = dataset.modelMetaData.algoName;\n    this.predMode = 'file_upload';\n    this.predictionResult = null;\n    this.quickPredUIMetaData = [];\n  }\n  /**\n   * Function to toggle/select the quick prediction mode using any one option\n   * @param {*} mode file upload/input form\n   */\n  selectPredMode(mode: string): void {\n    this.predictionPreviewData = [];\n    this.predictionResult = null;\n    this.quickPredUIMetaData = [];\n    if (mode === 'input_form') {\n      this._spinner.showSpinner();\n      let reqObj: any = {\n        indepVariable: this.dialogData.trainings[0].indepVariable,\n        notebookInputFileName: this.dialogData.notebookInputFileDetails\n          ? this.dialogData.notebookInputFileDetails.filename\n          : '',\n      };\n      // Add ta details if taFeatureConfig is present\n      if (this.taFeatureConfig.length) {\n        reqObj['taFeatureConfig'] = this.taFeatureConfig;\n        reqObj['textAnalysisOutFilePath'] = this.originalFileDetails.filename;\n      }\n      // API call\n      this._models\n        .getQuickPredictionFormData(\n          this.dialogData.trainings[0]._id,\n          this.modelToPredict._id,\n          this.project.type,\n          reqObj\n        )\n        .pipe(takeUntil(this.unsubscribe$))\n        .subscribe(\n          (res) => {\n            if (res) {\n              let formArray: Array<any> = res.qpFormData;\n              formArray.forEach((qpData: any) => {\n                if (this.originalFileDetails.notebookInputFileId || this.taFeatureConfig.length) {\n                  if (this.dialogData.trainings[0].depVariable !== qpData.colName) {\n                    this.quickPredUIMetaData.push({\n                      colName: qpData.colName,\n                      dataType: qpData.dataType,\n                      value: qpData.value,\n                    });\n                  }\n                } else {\n                  if (this.itemExist(this.dialogData.trainings[0].indepVariable, qpData.colName)) {\n                    this.quickPredUIMetaData.push({\n                      colName: qpData.colName,\n                      dataType: qpData.dataType,\n                      value: qpData.value,\n                    });\n                  }\n                }\n                this.quickPredUIMetaData.forEach((item) => {\n                  this.quickPredformData[item.colName] = item.value;\n                });\n              });\n              this._spinner.stopSpinner();\n            } else {\n              this._toaster.error('Sorry! Cannot fetch the QP form data.', 'Models');\n              this._spinner.stopSpinner();\n            }\n          },\n          (err: any) => {\n            this._spinner.stopSpinner();\n            this._toaster.error(`Server Error - ${err.error.message}`, 'Models');\n          }\n        );\n    } else {\n      this.fileToUpload = '';\n    }\n  }\n\n  /**\n   * Generates the quick prediction by triggering API calls\n   */\n  async doPrediction(): Promise<any> {\n    // this.predictionStarted = true;\n    this.predictionResult = null;\n    let reqObj: any;\n    let algoName = this.modelToPredict.modelMetaData.algoName.split('-')[0];\n    let algoType: any = this.ALGORITHMS_ARRAY.filter((a: any) => a.name === algoName)[0]?.type;\n    // this.predictionFile = null;\n    reqObj = {\n      modelFilePath: this.modelToPredict.modelMetaData.modelPath,\n      algoName: algoName,\n      algoType: algoType,\n      modelName: `${this.dialogData.trainings[0].name} - ${algoName}`,\n      modelId: this.modelToPredict._id,\n      trainingId: this.dialogData.trainings[0]._id,\n      isMultilabel: this.modelToPredict.modelMetaData.isMultilabel,\n      scalerObj: this.dialogData.trainings[0].scalerObj,\n      reTrainFileId: this.modelToPredict.modelMetaData.reTrainFileId,\n    };\n    if (this.modelToPredict.hasOwnProperty('edaId') && this.modelToPredict.edaId !== null) {\n      reqObj.edaId = this.modelToPredict.edaId;\n    } else {\n      reqObj.edaId = this.dialogData.trainings[0].edaId._id;\n    }\n    if (this.dialogData.trainings[0].logTransformationColumns) {\n      reqObj.logTransformationColumns = this.dialogData.trainings[0].logTransformationColumns;\n      reqObj.scalarValue = this.dialogData.trainings[0].scalarValue;\n    }\n    if (this.predMode == 'file_upload') {\n      if (this.fileToUpload) {\n        this._spinner.showSpinner();\n        this.predictionUploadResult = await this._models\n          .fileUploadPrediction(this.fileToUpload, this.project._id, this.fileEncoding)\n          .pipe(takeUntil(this.unsubscribe$))\n          .toPromise()\n          .catch((e: any) => {\n            this._toaster.error(`Server Error - ${e.error.message}.`, 'Models');\n            this._spinner.stopSpinner();\n          });\n        if (this.predictionUploadResult.projectDetails) {\n          reqObj.predictionFile = this.predictionUploadResult.projectDetails;\n          // API call\n          this.performPrediction(reqObj);\n        } else {\n          this._toaster.show('Sorry! Cannot proceed with the uploaded file.', 'Models');\n          this._spinner.stopSpinner();\n        }\n      } else {\n        this._snackbar.open('Please select a .csv file for prediction', 'OK', {\n          horizontalPosition: 'right',\n          verticalPosition: 'bottom',\n        });\n        this._spinner.stopSpinner();\n      }\n    } else {\n      if (Object.keys(this.quickPredformData).length) {\n        this._spinner.showSpinner();\n        this.quickPredUIMetaData.forEach((data) => {\n          this.quickPredformData[data.colName] = this.quickPredformData.hasOwnProperty(data.colName)\n            ? this.quickPredformData[data.colName]\n            : null;\n        });\n        if (this.quickPredformData['undefined']) {\n          delete this.quickPredformData['undefined'];\n        }\n        reqObj.predictionData = this.quickPredformData;\n        // API call\n        this.performPrediction(reqObj);\n      } else {\n        // this.predictionStarted = false;\n        this._snackbar.open('Please input data for prediction.', 'OK', {\n          horizontalPosition: 'right',\n          verticalPosition: 'bottom',\n        });\n        this._spinner.stopSpinner();\n      }\n    }\n  }\n\n  /**\n   * Calls the quick prediction API to execute\n   * @param reqObj\n   */\n  performPrediction(reqObj: any): void {\n    this._models\n      .doPrediction(this.dialogData.trainings[0]._id, this.modelToPredict._id, reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res) => {\n          if (res) {\n            this._toaster.info('Quick prediction started...', 'Models');\n          } else {\n            this._toaster.info('Sorry! Cannot execute the quick prediction.', 'Models');\n            this._spinner.stopSpinner();\n          }\n        },\n        (err: any) => {\n          this._toaster.info(`Server Error - ${err.error.message}`, 'Models');\n          this._spinner.stopSpinner();\n        }\n      );\n  }\n\n  /**\n   * Fetchs my file details\n   * @param projectId\n   * @param dataId\n   */\n  getMyFileData(projectId: string, dataId: string): Promise<any> {\n    return this._data\n      .getMyFileData(projectId, dataId)\n      .pipe(takeUntil(this.unsubscribe$))\n      .toPromise();\n  }\n\n  /**\n   * Fetchs text-analysis experiments\n   * @param projectId\n   * @param originalFileId\n   */\n  getTaExperiment(experimentId: string): Promise<any> {\n    return this._textAnalysis\n      .taExperiment(experimentId)\n      .pipe(takeUntil(this.unsubscribe$))\n      .toPromise();\n  }\n\n  /**\n   * Handles the dynamic graph dialog as per the type and opens it\n   * @param type\n   * @param trainingInfo\n   * @param modelInfo\n   */\n  openGraphDialog(type: string, modelInfo: any, predMode: string): void {\n    this._dialog\n      .open(GraphsDialogHandlerComponent, {\n        minWidth: '50vw',\n        maxWidth: '50vw',\n        data: {\n          type: type,\n          modelInfo: modelInfo,\n          predMode: predMode,\n          trainings: this.dialogData.trainings,\n          rowId: this.rowId,\n          predictionFile: this.predictionUploadResult?.projectDetails,\n          quickPredformData: this.quickPredformData,\n          originalFileWithEdaDetails: this.dialogData.originalFileWithEdaDetails,\n        },\n      })\n      .afterClosed()\n      .subscribe((data) => {});\n  }\n\n  /**\n   * Filters the array and returns the item if exists\n   * @param {*} arrayData input array\n   * @param {*} item item to be searched\n   */\n  itemExist(arrayData: any, item: any): any {\n    return arrayData.some((data: any) => {\n      return data.colName === item;\n    });\n  }\n\n  /**\n   * Stores the file data to be uploaded into the variable\n   * @param inputFile files object\n   */\n  handleFileInput(inputFile: any, fileEncoding) {\n    const ext = inputFile[0].name.split('.').pop();\n    if (inputFile && ['csv'].includes(ext)) {\n      if (inputFile[0].size < this.allowedPSFileUploadSize * 1024 * 1024) {\n        this.fileToUpload = inputFile[0];\n      } else {\n        this._snackbar.open(\n          'File size should be less than ' + this.allowedPSFileUploadSize + 'Mb.',\n          'OK',\n          {\n            horizontalPosition: 'right',\n            verticalPosition: 'bottom',\n          }\n        );\n      }\n    } else {\n      this.fileToUpload = '';\n      this._snackbar.open(`.${ext} file type is not supported`, 'OK');\n    }\n  }\n\n  /**\n   * Downloads the quick prediction result\n   */\n  downloadPredictedFile(): void {\n    this._window.open(\n      `${environment.serverBaseUrl}/api/prediction/${this.predictionResult._id}/download`,\n      '_blank'\n    );\n  }\n\n  /**\n   * Called when ng-grid is rendered in dom\n   * @param event\n   */\n  gridReady(event: any) {\n    event.api.setDomLayout('autoHeight');\n    this.gridApi = event.api;\n    this.gridApi.refreshCells({ force: true });\n    this.gridApi.setColumnDefs(this.gridOptions.columnDefs);\n    this.gridApi.setRowData(this.gridOptions.rowData);\n  }\n\n  /**\n   * Closes the current opened dialog\n   */\n  closeModal(data?: any): void {\n    this._modelsDialogRef.close(data);\n  }\n\n  /**\n   * SOCKET - Listen for prediction result when prediction is completed\n   */\n  initQuickPredictionSocket() {\n    this._socket.listen('predictionCompleted').subscribe(\n      (data: any) => {\n        if (data.status == 'failed') {\n          this._toaster.error(data.data.message, 'Models');\n          // this.predictionStarted = false;\n          this.predictionUploadResult = null;\n          this._spinner.stopSpinner();\n        }\n        if (data.predictionFileMetaData) {\n          this.predictionResult = data;\n          // this.predictionStarted = false;\n          // API call\n          this._models\n            .generatePreviewTable(this.predictionResult._id)\n            .pipe(takeUntil(this.unsubscribe$))\n            .subscribe(\n              (res) => {\n                if (res) {\n                  this.predictionPreviewData = [];\n                  let columnDefs: Array<any> = [];\n                  let firstRecord = res[0];\n                  for (let key in firstRecord) {\n                    if (firstRecord.hasOwnProperty(key)) {\n                      columnDefs.push({\n                        headerName: key,\n                        field: key,\n                        minWidth: 120,\n                      });\n                    }\n                  }\n                  this.predictionPreviewData = [...res];\n                  this.gridOptions = {\n                    headerHeight: 40,\n                    columnDefs: columnDefs,\n                    rowData: res,\n                    defaultColDef: { resizable: true },\n                  };\n                  this._toaster.success('Quick prediction completed successfully', 'Models');\n                  this._spinner.stopSpinner();\n                } else {\n                  this._spinner.stopSpinner();\n                  this._toaster.error('Cannot preview the prediction result', 'Models');\n                }\n              },\n              (err: any) => {\n                this._spinner.stopSpinner();\n                this._toaster.error(`Server Error - ${err.error.message}`, 'Models');\n              }\n            );\n        }\n      },\n      (err: any) => {\n        this._spinner.stopSpinner();\n        this._toaster.error(`Socket Error - ${err.error.message}`, 'Models');\n      }\n    );\n  }\n\n  /**\n   * Perform operations when the module is destroyed\n   */\n  ngOnDestroy() {\n    this._socket.removeListener('predictionCompleted');\n    this.unsubscribe$.next(false);\n    this.unsubscribe$.unsubscribe();\n  }\n}\n","<div *ngIf=\"selectedTask\">\n  <!-- {{taskData|json}} -->\n  <div *ngIf=\"selectedTask == 'eda_imputation'\">\n    <div class=\"\">\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Feature</td>\n            <td class=\"bold\">Missing</td>\n            <td class=\"bold\">Data Type</td>\n            <td class=\"bold\">Imputation Strategy</td>\n            <td *ngIf=\"project.type != 'timeseries'\" class=\"bold\">Imputed Value</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of taskData.eda_imputation\">\n            <td>{{ tdata.colName }}</td>\n            <td>{{ tdata.missing }}</td>\n            <td>{{ tdata.dataType }}</td>\n            <td>{{ tdata.imputationStrategy }}</td>\n            <td *ngIf=\"project.type !== 'timeseries'\">\n              <span>\n                <table class=\"table table-bordered\" *ngIf=\"isArrayData(tdata.fillValue)\">\n                  <tbody>\n                    <tr *ngFor=\"let fVal of tdata.fillValue; let i = index\">\n                      <td>{{ fVal.name }}</td>\n                      <td>\n                        {{ fVal['value']['name'] + ':' + fVal['value']['value'] }}\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n                <span *ngIf=\"!isArrayData(tdata.fillValue)\">{{ tdata.fillValue }}</span>\n              </span>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div *ngIf=\"selectedTask == 'eda_outlier'\">\n    <div class=\"\">\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Feature</td>\n            <td class=\"bold\">Outlier Detection Strategy</td>\n            <td class=\"bold\">Outlier Correction Strategy</td>\n            <td class=\"bold\">Outlier Count</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of taskData.eda_outlier\">\n            <td>{{ tdata.colName }}</td>\n            <td>{{ tdata.outlierDetectionStrategy }}</td>\n            <td>{{ tdata.outlierCorrectionStrategy }}</td>\n            <td>{{ tdata.outlierCount }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div *ngIf=\"selectedTask == 'auto_feature_generate'\">\n    <div *ngIf=\"taskData.auto_feature_generate?.length\">\n      <label for=\"\" class=\"control-label\">Preview data</label>\n      <table class=\"table table-responsive table-bordered\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td *ngFor=\"let item of taskData.auto_feature_generate[0] | keyvalue\" class=\"bold\">\n              {{ item.key }}\n            </td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of taskData.auto_feature_generate\">\n            <td *ngFor=\"let data of tdata | keyvalue\">{{ data.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <br />\n    <div *ngIf=\"columnList['auto_feature_generate'].length\">\n      <label for=\"\">Column list ({{ columnList['auto_feature_generate'].length }} columns)</label>\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td *ngFor=\"let col of columnList['auto_feature_generate']\" class=\"bold\">\n              {{ col }}\n            </td>\n          </tr>\n        </thead>\n      </table>\n    </div>\n    <div *ngIf=\"shape['auto_feature_generate']\" class=\"mt-3\">\n      <table class=\"table table-bordered\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td>Columns</td>\n            <td>Rows</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>{{ shape['auto_feature_generate']['column'] }}</td>\n            <td>{{ shape['auto_feature_generate']['row'] }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div *ngIf=\"method['auto_feature_generate']\">\n      <label>Input Features</label>\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td *ngFor=\"let col of method['auto_feature_generate']['Input feature']\" class=\"bold\">\n              {{ col }}\n            </td>\n          </tr>\n        </thead>\n      </table>\n    </div>\n    <br />\n    <div *ngIf=\"method['auto_feature_generate']\">\n      <label>Output Features</label>\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td *ngFor=\"let col of method['auto_feature_generate']['Output features']\" class=\"bold\">\n              {{ col }}\n            </td>\n          </tr>\n        </thead>\n      </table>\n    </div>\n  </div>\n  <div *ngIf=\"selectedTask == 'date_component_generate'\">\n    <div *ngIf=\"taskData['date_component_generate'].length\" class=\"  \">\n      <label for=\"\" class=\"control-label\">Preview data</label>\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td *ngFor=\"let item of taskData['date_component_generate'][0] | keyvalue\" class=\"bold\">\n              {{ item.key }}\n            </td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of taskData['date_component_generate']\">\n            <td *ngFor=\"let item of tdata | keyvalue\">{{ item.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div *ngIf=\"columnList['date_component_generate'].length\" class=\"  \">\n      <label for=\"\">Column list( {{ columnList['date_component_generate'].length }} columns)</label>\n      <div>\n        <table class=\"table table-bordered table-responsive\">\n          <thead class=\"bg-primary\">\n            <tr>\n              <td *ngFor=\"let col of columnList['date_component_generate']\" class=\"bold\">\n                {{ col }}\n              </td>\n            </tr>\n          </thead>\n        </table>\n      </div>\n    </div>\n    <div *ngIf=\"shape['date_component_generate']\">\n      <table class=\"table table-bordered\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Columns</td>\n            <td class=\"bold\">Rows</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>{{ shape['date_component_generate']['column'] }}</td>\n            <td>{{ shape['date_component_generate']['row'] }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div *ngIf=\"selectedTask == 'feature_normalization'\">\n    <div *ngIf=\"taskData['feature_normalization'].length\" class=\"  \">\n      <label for=\"\" class=\"control-label\">Preview data</label>\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td *ngFor=\"let item of taskData['feature_normalization'][0] | keyvalue\" class=\"bold\">\n              {{ item.key }}\n            </td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of taskData['feature_normalization']\">\n            <td *ngFor=\"let item of tdata | keyvalue\">{{ item.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div *ngIf=\"columnList['feature_normalization'].length\" class=\"  \">\n      <label for=\"\">Column list( {{ columnList['feature_normalization'].length }} columns)</label>\n      <div>\n        <table class=\"table table-bordered table-responsive\">\n          <thead class=\"bg-primary\">\n            <tr>\n              <td *ngFor=\"let col of columnList['feature_normalization']\" class=\"bold\">\n                {{ col }}\n              </td>\n            </tr>\n          </thead>\n        </table>\n      </div>\n    </div>\n    <div *ngIf=\"shape['feature_normalization']\">\n      <table class=\"table table-bordered\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Columns</td>\n            <td class=\"bold\">Rows</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>{{ shape['feature_normalization']['column'] }}</td>\n            <td>{{ shape['feature_normalization']['row'] }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div *ngIf=\"method['feature_normalization']\">\n      <label>Normalization Method</label>\n      <table class=\"table table-bordered\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td>{{ method['feature_normalization']['Method'] }}</td>\n          </tr>\n        </thead>\n      </table>\n    </div>\n  </div>\n  <div *ngIf=\"selectedTask == 'categorical_encoding'\">\n    <div *ngIf=\"taskData['categorical_encoding'].length\" class=\"  \">\n      <label for=\"\" class=\"control-label\">Preview data</label>\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td *ngFor=\"let data of taskData['categorical_encoding'][0] | keyvalue\" class=\"bold\">\n              {{ data.key }}\n            </td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of taskData['categorical_encoding']\">\n            <td *ngFor=\"let item of tdata | keyvalue\">{{ item.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <br />\n    <div *ngIf=\"method['categorical_encoding']\" class=\"  \">\n      <label>Method</label>\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td>Feature</td>\n            <td>Encoding method</td>\n            <td>Encoded features</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of method['categorical_encoding']\">\n            <td>{{ tdata.Feature }}</td>\n            <td>{{ tdata.Encoding_method }}</td>\n            <td>{{ tdata.Encoded_Features }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <br />\n    <div *ngIf=\"columnList['categorical_encoding'].length\" class=\"  \">\n      <label for=\"\">Column list( {{ columnList['categorical_encoding'].length }} columns)</label>\n      <div>\n        <table class=\"table table-bordered table-responsive\">\n          <thead class=\"bg-primary\">\n            <tr>\n              <td *ngFor=\"let col of columnList['categorical_encoding']\" class=\"bold\">\n                {{ col }}\n              </td>\n            </tr>\n          </thead>\n        </table>\n      </div>\n    </div>\n    <br />\n    <div *ngIf=\"shape['categorical_encoding']\">\n      <table class=\"table table-bordered\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Columns</td>\n            <td class=\"bold\">Rows</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>{{ shape['categorical_encoding']['column'] }}</td>\n            <td>{{ shape['categorical_encoding']['row'] }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div *ngIf=\"selectedTask == 'string_replacement'\">\n    <div *ngIf=\"taskData['string_replacement'].length\" class=\"  \">\n      <label for=\"\" class=\"control-label\">Preview data</label>\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Feature Name</td>\n            <td class=\"bold\">From Text</td>\n            <td class=\"bold\">To Text</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of taskData['string_replacement']\">\n            <td *ngFor=\"let item of tdata | keyvalue\">{{ item.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div *ngIf=\"selectedTask == 'resampling'\">\n    <div *ngIf=\"taskData['resampling'].length\" class=\"  \">\n      <label for=\"\" class=\"control-label\">Preview data</label>\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td *ngFor=\"let item of taskData['resampling'][0] | keyvalue\" class=\"bold\">\n              {{ item.key }}\n            </td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of taskData['resampling']\">\n            <td *ngFor=\"let item of tdata | keyvalue\">{{ item.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div *ngIf=\"columnList['resampling'].length\" class=\"  \">\n      <label for=\"\">Column list( {{ columnList['resampling'].length }} columns)</label>\n      <div>\n        <table class=\"table table-bordered table-responsive\">\n          <thead class=\"bg-primary\">\n            <tr>\n              <td *ngFor=\"let col of columnList['resampling']\" class=\"bold\">\n                {{ col }}\n              </td>\n            </tr>\n          </thead>\n        </table>\n      </div>\n    </div>\n    <div *ngIf=\"method['resampling']\" class=\"  \">\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Method</td>\n            <td class=\"bold\">Value</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of method['resampling'] | keyvalue\">\n            <td>{{ item.key }}</td>\n            <td>{{ item.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div *ngIf=\"shape['resampling']\">\n      <table class=\"table table-bordered\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Columns</td>\n            <td class=\"bold\">Rows</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>{{ shape['resampling']['column'] }}</td>\n            <td>{{ shape['resampling']['row'] }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div *ngIf=\"selectedTask == 'stationary_transformation'\">\n    <div *ngIf=\"taskData['stationary_transformation'].length\" class=\"  \">\n      <label for=\"\" class=\"control-label\">Preview data</label>\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td *ngFor=\"let data of taskData['stationary_transformation'][0] | keyvalue\" class=\"bold\">\n              {{ data.key }}\n            </td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of taskData['stationary_transformation']\">\n            <td *ngFor=\"let item of tdata | keyvalue\">{{ item.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div *ngIf=\"columnList['stationary_transformation'].length\" class=\"  \">\n      <label for=\"\">Column list( {{ columnList['stationary_transformation'].length }} columns)</label>\n      <div>\n        <table class=\"table table-bordered table-responsive\">\n          <thead class=\"bg-primary\">\n            <tr>\n              <td *ngFor=\"let col of columnList['stationary_transformation']\" class=\"bold\">\n                {{ col }}\n              </td>\n            </tr>\n          </thead>\n        </table>\n      </div>\n    </div>\n    <div *ngIf=\"method['stationary_transformation']\" class=\"  \">\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Method</td>\n            <td class=\"bold\">Value</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let method of method['stationary_transformation'] | keyvalue\">\n            <td>{{ method.key }}</td>\n            <td>{{ method.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div *ngIf=\"shape['stationary_transformation']\">\n      <table class=\"table table-bordered\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Columns</td>\n            <td class=\"bold\">Rows</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>{{ shape['stationary_transformation']['column'] }}</td>\n            <td>{{ shape['stationary_transformation']['row'] }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div *ngIf=\"selectedTask == 'text_cleaning'\">\n    <div *ngIf=\"taskData['text_cleaning'].length\" class=\"  \">\n      <label for=\"\" class=\"control-label\">Preview data</label>\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td *ngFor=\"let data of taskData['text_cleaning'][0] | keyvalue\" class=\"bold\">\n              {{ data.key }}\n            </td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of taskData['text_cleaning']\">\n            <td *ngFor=\"let item of tdata | keyvalue\">{{ item.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div *ngIf=\"columnList['text_cleaning'].length\" class=\"  \">\n      <label for=\"\">Column list( {{ columnList['text_cleaning'].length }} columns)</label>\n      <div>\n        <table class=\"table table-bordered table-responsive\">\n          <thead class=\"bg-primary\">\n            <tr>\n              <td *ngFor=\"let col of columnList['text_cleaning']\" class=\"bold\">\n                {{ col }}\n              </td>\n            </tr>\n          </thead>\n        </table>\n      </div>\n    </div>\n    <div *ngIf=\"method['text_cleaning']\" class=\"  \">\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Feature</td>\n            <td class=\"bold\">Method</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of method['text_cleaning']\">\n            <td>{{ tdata.featureName }}</td>\n            <td>{{ tdata.method }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div *ngIf=\"shape['text_cleaning']\">\n      <table class=\"table table-bordered\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Columns</td>\n            <td class=\"bold\">Rows</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>{{ shape['text_cleaning']['column'] }}</td>\n            <td>{{ shape['text_cleaning']['row'] }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div *ngIf=\"selectedTask == 'text_extraction'\">\n    <div *ngIf=\"taskData['text_extraction'].length\" class=\"  \">\n      <label for=\"\" class=\"control-label\">Preview data</label>\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td *ngFor=\"let data of taskData['text_extraction'][0] | keyvalue\" class=\"bold\">\n              {{ data.key }}\n            </td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of taskData['text_extraction']\">\n            <td *ngFor=\"let item of tdata | keyvalue\">{{ item.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div *ngIf=\"columnList['text_extraction'].length\" class=\"  \">\n      <label for=\"\">Column list( {{ columnList['text_extraction'].length }} columns)</label>\n      <div>\n        <table class=\"table table-bordered table-responsive\">\n          <thead class=\"bg-primary\">\n            <tr>\n              <td *ngFor=\"let col of columnList['text_extraction']\" class=\"bold\">\n                {{ col }}\n              </td>\n            </tr>\n          </thead>\n        </table>\n      </div>\n    </div>\n    <div *ngIf=\"method['text_extraction']\" class=\"  \">\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Feature</td>\n            <td class=\"bold\">NLP Feature Extraction Method</td>\n            <td class=\"bold\">NLP Language</td>\n            <td class=\"bold\">Feature Count</td>\n            <td class=\"bold\">Strip Accents</td>\n            <td class=\"bold\">Decode Error</td>\n            <td class=\"bold\">NGram</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of method['text_extraction'] | keyvalue\">\n            <td *ngIf=\"item.value['colName']\">{{ item.value.colName }}</td>\n            <td *ngIf=\"item.value['nlpFeatureExtractionMethod']\">{{ item.value.nlpFeatureExtractionMethod }}</td>\n            <td *ngIf=\"item.value['nlpLanguage']\">{{ item.value.nlpLanguage }}</td>\n            <td *ngIf=\"item.value['nFeatureCount']\">{{ item.value.nFeatureCount }}</td>\n            <td *ngIf=\"item.value['stripAccents']\">{{ item.value.stripAccents }}</td>\n            <td *ngIf=\"item.value['decodeError']\">{{ item.value.decodeError }}</td>\n            <td *ngIf=\"item.value['nGram']\">{{ item.value.nGram }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div *ngIf=\"shape['text_extraction']\">\n      <table class=\"table table-bordered\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Columns</td>\n            <td class=\"bold\">Rows</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>{{ shape['text_extraction']['column'] }}</td>\n            <td>{{ shape['text_extraction']['row'] }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div *ngIf=\"selectedTask == 'feature_scaling'\">\n    <div class=\"  \">\n      <label for=\"\" class=\"control-label\">Preview data</label>\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td *ngFor=\"let data of taskData['feature_scaling'][0] | keyvalue\" class=\"bold\">\n              {{ data.key }}\n            </td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of taskData['feature_scaling']\">\n            <td *ngFor=\"let item of tdata | keyvalue\">{{ item.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div *ngIf=\"method['feature_scaling']\" class=\"  \">\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Method</td>\n            <td class=\"bold\">Value</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of method['feature_scaling'] | keyvalue\">\n            <td>{{ item.key }}</td>\n            <td>{{ item.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class=\"  \" *ngIf=\"columnList['feature_scaling'].length\">\n      <label for=\"\">Column list( {{ columnList['feature_scaling'].length }} columns)</label>\n      <div>\n        <table class=\"table table-bordered table-responsive\">\n          <thead class=\"bg-primary\">\n            <tr>\n              <td *ngFor=\"let col of columnList['feature_scaling']\" class=\"bold\">\n                {{ col }}\n              </td>\n            </tr>\n          </thead>\n        </table>\n      </div>\n    </div>\n    <div *ngIf=\"shape['feature_scaling']\">\n      <table class=\"table table-bordered\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Columns</td>\n            <td class=\"bold\">Rows</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>{{ shape['feature_scaling']['column'] }}</td>\n            <td>{{ shape['feature_scaling']['row'] }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div *ngIf=\"selectedTask == 'feature_selection'\">\n    <div class=\"  \">\n      <label for=\"\" class=\"control-label\">Preview data</label>\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td *ngFor=\"let data of taskData['feature_selection'][0] | keyvalue\" class=\"bold\">\n              {{ data.key }}\n            </td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of taskData['feature_selection']\">\n            <td *ngFor=\"let item of tdata | keyvalue\">{{ item.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class=\"  \" *ngIf=\"columnList['feature_selection'].length\">\n      <label for=\"\">Column list( {{ columnList['feature_selection'].length }} columns)</label>\n      <div>\n        <table class=\"table table-bordered table-responsive\">\n          <thead class=\"bg-primary\">\n            <tr>\n              <td *ngFor=\"let col of columnList['feature_selection']\" class=\"bold\">\n                {{ col }}\n              </td>\n            </tr>\n          </thead>\n        </table>\n      </div>\n    </div>\n    <div *ngIf=\"shape['feature_selection']\">\n      <table class=\"table table-bordered\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Columns</td>\n            <td class=\"bold\">Rows</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>{{ shape['feature_selection']['column'] }}</td>\n            <td>{{ shape['feature_selection']['row'] }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div *ngIf=\"method['feature_selection']\">\n      <table class=\"table table-bordered\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td *ngFor=\"let method of method['feature_selection'] | keyvalue\" class=\"bold\">\n              {{ method.key }}\n            </td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td *ngFor=\"let item of method['feature_selection'] | keyvalue\">\n              {{ item.value }}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div *ngIf=\"selectedTask == 'feature_decomposition'\">\n    <div class=\"  \">\n      <label for=\"\" class=\"control-label\">Preview data</label>\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td *ngFor=\"let data of taskData['feature_decomposition'][0] | keyvalue\" class=\"bold\">\n              {{ data.key }}\n            </td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of taskData['feature_decomposition']\">\n            <td *ngFor=\"let item of tdata | keyvalue\">{{ item.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div *ngIf=\"method['feature_decomposition']\" class=\"  \">\n      <table class=\"table table-bordered table-responsive\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Method</td>\n            <td class=\"bold\">Value</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let method of method['feature_decomposition'] | keyvalue\">\n            <td>{{ method.key }}</td>\n            <td>{{ method.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class=\"  \" *ngIf=\"columnList['feature_decomposition'].length\">\n      <label for=\"\">Column list( {{ columnList['feature_decomposition'].length }} columns)</label>\n      <div>\n        <table class=\"table table-bordered table-responsive\">\n          <thead class=\"bg-primary\">\n            <tr>\n              <td *ngFor=\"let col of columnList['feature_decomposition']\" class=\"bold\">\n                {{ col }}\n              </td>\n            </tr>\n          </thead>\n        </table>\n      </div>\n    </div>\n    <div *ngIf=\"shape['feature_decomposition']\">\n      <table class=\"table table-bordered\">\n        <thead class=\"bg-primary\">\n          <tr>\n            <td class=\"bold\">Columns</td>\n            <td class=\"bold\">Rows</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>{{ shape['feature_decomposition']['column'] }}</td>\n            <td>{{ shape['feature_decomposition']['row'] }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div *ngIf=\"selectedTask == 'sampling'\">\n    <div class=\"  \">\n      <label for=\"\" class=\"control-label\">Preview data</label> <br />\n      <div>\n        <table class=\"table table-bordered table-responsive\">\n          <thead class=\"bg-primary\">\n            <tr>\n              <td class=\"bold\">Sampling Method</td>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>{{ taskData['sampling']['Sampling method'] }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <table class=\"table table-bordered\">\n        <thead class=\"bg-primary\">\n          <tr class=\"bold\">\n            <th>Class Name</th>\n            <th>Sampling Percentage</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let tdata of taskData['sampling']['Sampling percentage']\">\n            <td>{{ tdata.colName }}</td>\n            <td>{{ tdata.value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>","import { Component, Input, OnInit, OnChanges } from '@angular/core';\nimport { LocalStorageService } from 'src/app/shared/local-storage.service';\n\n@Component({\n  selector: 'app-pipeline-expansion',\n  templateUrl: './pipeline-expansion.component.html',\n  styleUrls: ['./pipeline-expansion.component.scss'],\n})\nexport class PipelineExpansionComponent implements OnChanges {\n  @Input() pipelineDetails: any;\n  @Input() selectedTask: any;\n  project: any;\n  taskData: any = [];\n  columnList: any = [];\n  method: any = [];\n  shape: any = [];\n\n  constructor(private _localStorage: LocalStorageService) { }\n\n  ngOnChanges(): void {\n    this.project = this._localStorage.getItem('project');\n    this.taskData[this.selectedTask] = this.pipelineDetails['data'];\n    this.columnList[this.selectedTask] = this.pipelineDetails['columnList'];\n    this.method[this.selectedTask] = this.pipelineDetails['method'];\n    this.shape[this.selectedTask] = this.pipelineDetails['shape'];\n    // console.log(this.columnList[this.selectedTask].length);\n  }\n\n  /**\n   * Check whether input data is array or not\n   * @param {*} data\n   */\n  isArrayData(data: any): boolean {\n    return Array.isArray(data);\n  }\n}\n","<!-- HEADER (title) -->\n<h2 mat-dialog-title>PipeLine Steps</h2>\n<!-- BODY -->\n<mat-dialog-content>\n  <ul [hidden]=\"!task['data'].length\" *ngFor=\"let task of pipelineTask; let i = index\"\n    [ngClass]=\"timelineAlt ? 'timeline-alt mt-3' : 'timeline'\">\n    <li class=\"timeline-separator\" data-datetime=\"Task\">\n      <span class=\"pipe\">{{ task['parent'] }}</span>\n    </li>\n    <li *ngFor=\"let subTask of task['data']; let j = index\" class=\"mb-4\">\n      <div class=\"timeline-badge primary\">\n        <em class=\"fa fa-cog\"></em>\n      </div>\n      <div class=\"timeline-card\">\n        <div class=\"popover left\">\n          <h4 class=\"popover-header py-3\">{{ subTask.taskName }}</h4>\n          <div class=\"arrow\"></div>\n          <div class=\"popover-body p-4\">\n            <p>{{ subTask.description }}</p>\n            <div *ngIf=\"subTask.hasOwnProperty('task')\">\n              <div class=\"mt-3\" *ngIf=\"subTask.task == 'auto_feature_generate'\">\n                <mat-radio-group name=\"autofeature\" [(ngModel)]=\"afOperation\">&nbsp;\n                  <mat-radio-button class=\"mr-3\" [checked]=\"afOperation[0]\"\n                    *ngFor=\"let afOperation of subTask.afOperations\" value=\"{{ afOperation }}\">\n                    {{ afOperation | titlecase }}\n                  </mat-radio-button>\n                </mat-radio-group>\n              </div>\n              <mat-accordion [multi]=\"false\" *ngIf=\"subTask.preview == 'True'\">\n                <mat-expansion-panel class=\"mt-3 border border-primary shadow-none\" [expanded]=\"step === i + '' + j\"\n                  (opened)=\"getPipelineTaskDetails(i, subTask.task, j)\">\n                  <mat-expansion-panel-header>\n                    <mat-panel-title> View Details </mat-panel-title>\n                  </mat-expansion-panel-header>\n                  <app-pipeline-expansion *ngIf=\"pipelineDetails\" [selectedTask]=\"selectedTask\"\n                    [pipelineDetails]=\"pipelineDetails\"></app-pipeline-expansion>\n                </mat-expansion-panel>\n              </mat-accordion>\n            </div>\n          </div>\n        </div>\n      </div>\n    </li>\n  </ul>\n</mat-dialog-content>\n<mat-dialog-actions class=\"justify-content-end mt-3 mb-auto\">\n  <!-- CANCEL -->\n  <button mat-stroked-button mat-dialog-close>Cancel</button>\n</mat-dialog-actions>","import { Component, Inject, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { LocalStorageService } from 'src/app/shared/local-storage.service';\nimport { SpinnerService } from 'src/app/shared/spinner.service';\nimport { ModelsService } from '../models.service';\n\n@Component({\n  selector: 'app-pipeline',\n  templateUrl: './pipeline.component.html',\n  styleUrls: ['./pipeline.component.scss'],\n})\nexport class PipelineComponent implements OnInit {\n  unsubscribe$ = new Subject<boolean>();\n  pipelineTask: any = [];\n  timelineAlt: any = true;\n  selectedTask: any;\n  showPipelineDetails = {};\n  project: any;\n  taskData: any = {};\n  columnList: any = {};\n  method: any = {};\n  shape: any = {};\n  step: any;\n  pipelineDetails: any;\n  afOperation: any;\n\n  constructor(\n    private _localStorage: LocalStorageService,\n    @Inject(MAT_DIALOG_DATA) public dialogData: any,\n    private _toaster: ToastrService,\n    private _spinner: SpinnerService,\n    private _models: ModelsService\n  ) { }\n\n  ngOnInit(): void {\n    this.project = this._localStorage.getItem('project');\n    this.pipelineTask = this.dialogData.pipelineTask;\n    this.pipelineTask.forEach(element => {\n      let taskName = element.parent == 'Training' ? element.data : 'none';\n      if (taskName !== 'none') {\n        taskName.forEach(item => {\n          if (item.taskName == 'Auto Feature Generation') {\n            this.afOperation = item.afOperations[0];\n          }\n        });\n      }\n    });\n  }\n\n  /**\n   * Fetches selected pipeline task details when clicked on view details\n   * @param index\n   * @param transformer\n   * @param j\n   */\n  getPipelineTaskDetails(i: any, transformer: any, j: any): void {\n    this.step = `${i}${j}`;\n    this.selectedTask = transformer;\n    let reqObj: any;\n    reqObj = {\n      transformer: transformer,\n      trainingId: this.dialogData.trainings[0]._id,\n      projectType: this.project.type,\n      indepVariable: this.dialogData.trainings[0].indepVariable,\n      filename: this.dialogData.trainings[0].metaInfo.fileName,\n      indexPath: this.dialogData.trainings[0].edaId.indexPath,\n    };\n    if (this.dialogData.originalFileWithEdaDetails.taExperimentId) {\n      reqObj.taExperimentId = this.dialogData.originalFileWithEdaDetails.taExperimentId;\n    }\n    if (transformer == 'sampling') {\n      (reqObj.samplingType = this.dialogData.trainings[0].sampling),\n        (reqObj.samplingPercentage = this.dialogData.trainings[0].samplingPercentage);\n    }\n    if (transformer == 'auto_feature_generate') {\n      reqObj.operation = this.afOperation;\n    }\n    if (this.project.type == 'predictive_modeling') {\n      reqObj.predictiveModelingInfo = this.dialogData.trainings[0].predictiveModelingInfo;\n    } else if (this.project.type == 'clustering') {\n      reqObj.clusteringInfo = this.dialogData.trainings[0].clusteringInfo;\n    }\n    // API call\n    this._models\n      .getPipelineDetails(this.dialogData.trainings[0]._id, reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (resp) => {\n          if (resp) {\n            this.pipelineDetails = resp;\n          }\n          this._spinner.stopSpinner();\n        },\n        (err: any) => {\n          this._toaster.error(`${err.error.message || 'Server Error'}`, 'Models');\n          this._spinner.stopSpinner();\n        }\n      );\n  }\n\n  /**\n   * Perform operations when the module is destroyed\n   */\n  ngOnDestroy() {\n    this.unsubscribe$.next(false);\n    this.unsubscribe$.unsubscribe();\n  }\n}\n","<!-- CLASSIFICATION GRAPHS OPTIONS -->\n<div *ngIf=\"training?.algoType === 'classification'\" class=\"row graphs-list mt-4 mb-3 text-center\">\n  <!-- ROC-AUC SCORE -->\n  <div *ngIf=\"!project.useGPU && model.graphSupported?.rocAucScore == true\" class=\"col border-right\">\n    <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('rocAucScore')\" matBadge\n      [matBadgeIcon]=\"allowedModelOptions.includes('rocAucScore') ? '' : 'PRO'\" matBadgeOverlap=\"false\"\n      [ngClass]=\"(appType === 'enterprise') || (appType === 'saas' &&  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) || allowedModelOptions.includes('rocAucScore') ? '' : 'text-muted disable-Btn'\">\n      ROC-AUC Score ({{ modelData?.rocScore ? (modelData.rocScore | number: '1.3-3') : '-' }})\n    </h6>\n    <button (click)=\"openGraphDialog('rocauc', training, model, activeTabName)\" matTooltip=\"View graph\"\n      *ngIf=\"modelData?.rocScore\" mat-icon-button\n      [disabled]=\"appType === 'saas' && !user?.roles?.includes('super_admin') && !user?.roles?.includes('admin') && user?.planType === 'basic' && !allowedModelOptions.includes('rocAucScore')\"\n      [ngClass]=\"(appType === 'enterprise') || (appType === 'saas' &&  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) || allowedModelOptions.includes('rocAucScore') ? '' : 'disable-Btn'\">\n      <mat-icon>show_chart</mat-icon>\n    </button>\n    <h5 *ngIf=\"!modelData?.rocScore\">NA</h5>\n  </div>\n  <!-- LIFT & GAIN -->\n  <div *ngIf=\"!project.useGPU && model.graphSupported?.liftGain == true\" class=\"col border-right\">\n    <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('liftAndGain')\" matBadge\n      [matBadgeIcon]=\"allowedModelOptions.includes('liftAndGain') ? '' : 'PRO'\" matBadgeOverlap=\"false\"\n      [ngClass]=\"(appType === 'enterprise') || (appType === 'saas' &&  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) || allowedModelOptions.includes('liftAndGain') ? '' : 'text-muted disable-Btn'\">\n      Lift & Gain</h6>\n    <button (click)=\"openGraphDialog('liftGain', training, model, activeTabName)\" matTooltip=\"View graph\"\n      mat-icon-button\n      [disabled]=\"appType === 'saas' && !user?.roles?.includes('super_admin') && !user?.roles?.includes('admin') && user?.planType === 'basic' && !allowedModelOptions.includes('liftAndGain')\"\n      [ngClass]=\"(appType === 'enterprise') || (appType === 'saas' &&  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) || allowedModelOptions.includes('liftAndGain') ? '' : 'disable-Btn'\">\n      <mat-icon>show_chart</mat-icon>\n    </button>\n  </div>\n  <!-- FEATURE IMPACT -->\n  <div *ngIf=\"activeTabName !== 'Scoring Result'\" [hidden]=\"activeTabName === 'Hold Out'\" class=\"col border-right\">\n    <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('featureImpact')\">\n      Feature Impact\n    </h6>\n    <button (click)=\"openGraphDialog('featureImpact', training, model, activeTabName)\" matTooltip=\"View graph\"\n      mat-icon-button>\n      <mat-icon>show_chart</mat-icon>\n    </button>\n  </div>\n  <!-- PR CURVE -->\n  <div *ngIf=\"!project.useGPU \n  && model.graphSupported?.prCurve == true\" class=\"col border-right\">\n    <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('precisionRecall')\" matBadge\n      [matBadgeIcon]=\"allowedModelOptions.includes('prCurve') ? '' : 'PRO'\" matBadgeOverlap=\"false\"\n      [ngClass]=\"(appType === 'enterprise') || (appType === 'saas' &&  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) || allowedModelOptions.includes('prCurve') ? '' : 'text-muted disable-Btn'\">\n      PR Curve</h6>\n    <button (click)=\"openGraphDialog('prCurve', training, model, activeTabName)\" matTooltip=\"View graph\" mat-icon-button\n      [disabled]=\"appType === 'saas' && !user?.roles?.includes('super_admin') && !user?.roles?.includes('admin') && user?.planType === 'basic' && !allowedModelOptions.includes('prCurve')\"\n      [ngClass]=\"(appType === 'enterprise') || (appType === 'saas' &&  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) || allowedModelOptions.includes('prCurve') ? '' : 'disable-Btn'\">\n      <mat-icon>show_chart</mat-icon>\n    </button>\n  </div>\n  <!-- CONFUSION MATRIX -->\n  <div class=\"col border-right\">\n    <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('confusionMatrix')\">\n      Confusion Matrix\n    </h6>\n    <button (click)=\"openGraphDialog('confusionMatrix', training, model, activeTabName)\" matTooltip=\"View graph\"\n      mat-icon-button>\n      <mat-icon>show_chart</mat-icon>\n    </button>\n  </div>\n  <!-- ANALYSIS REPORT -->\n  <div class=\"col border-right\">\n    <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('analysisReport')\">\n      Analysis Report\n    </h6>\n    <button (click)=\"openGraphDialog('analysis', training, model, activeTabName)\" matTooltip=\"View report\"\n      mat-icon-button>\n      <mat-icon>table_chart</mat-icon>\n    </button>\n  </div>\n  <!-- CLASSIFICATION REPORT -->\n  <div class=\"col border-right\">\n    <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('classificationReport')\">\n      Classification Report\n    </h6>\n    <button (click)=\"openGraphDialog('classificationReport', training, model, activeTabName)\" matTooltip=\"View report\"\n      mat-icon-button>\n      <mat-icon>table_chart</mat-icon>\n    </button>\n  </div>\n  <!-- LIME REPORT -->\n  <div class=\"col border-right\" *ngIf=\"model.graphSupported?.limeReport == true\">\n    <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('limeReport')\" matBadge\n      [matBadgeIcon]=\"allowedModelOptions.includes('limeReport') ? '' : 'PRO'\" matBadgeOverlap=\"false\"\n      [ngClass]=\"(appType === 'enterprise') || (appType === 'saas' && (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) || allowedModelOptions.includes('limeReport') ? '' : 'text-muted disable-Btn'\">\n      Lime Report</h6>\n    <button (click)=\"openGraphDialog('limeReport', training, model, activeTabName, 'models_page')\"\n      matTooltip=\"View report\" mat-icon-button\n      [disabled]=\"appType === 'saas' && !user?.roles?.includes('super_admin') && !user?.roles?.includes('admin') && user?.planType === 'basic' && !allowedModelOptions.includes('limeReport')\"\n      [ngClass]=\"(appType === 'enterprise') || (appType === 'saas' &&  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) || allowedModelOptions.includes('limeReport') ? '' : 'disable-Btn'\">\n      <mat-icon>table_chart</mat-icon>\n    </button>\n  </div>\n  <!-- MATHEW COEFF -->\n  <div class=\"col\" *ngIf=\"model?.graphSupported?.mathewsCoeff == true\">\n    <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('mathewCoeff')\">\n      Mathew's Coeff.\n    </h6>\n    <h5 *ngIf=\"modelData?.matCoeff\">\n      {{ modelData?.matCoeff | number: '1.3-3' }}\n    </h5>\n    <h5 *ngIf=\"!modelData?.matCoeff\">NA</h5>\n  </div>\n</div>\n\n<!-- REGRESSION GRAPH OPTIONS -->\n<div *ngIf=\"training?.algoType === 'regression' \" class=\"row graphs-list my-4 text-center\">\n  <!-- R SQUARED -->\n  <div class=\"col border-right\" *ngIf=\"modelData?.rSquared\">\n    <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('rSquared')\">R Squared</h6>\n    <h5>\n      {{ modelData?.rSquared | number: '1.3-3' }}\n    </h5>\n  </div>\n  <!-- ADJUSTED R SQUARED -->\n  <div class=\"col border-right\" *ngIf=\"modelData?.adjustedRsq\">\n    <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('adjustedRsquared')\">\n      Adjusted R Squared\n    </h6>\n    <h5>\n      {{ modelData?.adjustedRsq | number: '1.3-3' }}\n    </h5>\n  </div>\n  <!-- TARGET VARIABLE -->\n  <div class=\"col border-right\">\n    <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('targetFeature')\">\n      Target Variable\n    </h6>\n    <h5>\n      {{ training.depVariable ? training.depVariable : 'NA' }}\n    </h5>\n  </div>\n  <!-- EXPLAINED VARIANCE -->\n  <div class=\"col border-right\" *ngIf=\"modelData?.varianceIFactor\">\n    <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('explainedVarianceScore')\">\n      Explained Variance Score\n    </h6>\n    <h5>\n      {{ modelData?.varianceIFactor | number: '1.3-3' }}\n    </h5>\n  </div>\n  <!-- REGRESSION LINE -->\n  <div class=\"col border-right\">\n    <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('regressionLine')\">\n      Regression Line\n    </h6>\n    <button (click)=\"openGraphDialog('regressionLine', training, model, activeTabName)\" matTooltip=\"View graph\"\n      mat-icon-button>\n      <mat-icon>show_chart</mat-icon>\n    </button>\n  </div>\n  <!-- FEATURE IMPACT -->\n  <div *ngIf=\"activeTabName !== 'Scoring Result'\" [hidden]=\"activeTabName === 'Hold Out'\" class=\"col border-right\">\n    <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('featureImpact')\">\n      Feature Impact\n    </h6>\n    <button (click)=\"openGraphDialog('featureImpact', training, model, activeTabName)\" matTooltip=\"View graph\"\n      mat-icon-button>\n      <mat-icon>show_chart</mat-icon>\n    </button>\n  </div>\n  <!-- ANALYSIS REPORT -->\n  <div class=\"col border-right\">\n    <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('analysisReport')\">\n      Analysis Report\n    </h6>\n    <button (click)=\"openGraphDialog('analysis', training, model, activeTabName)\" matTooltip=\"View report\"\n      mat-icon-button>\n      <mat-icon>table_chart</mat-icon>\n    </button>\n  </div>\n  <!-- LIME REPORT -->\n  <div class=\"col\" *ngIf=\"model.graphSupported?.limeReport == true\">\n    <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('limeReport')\" matBadge\n      [matBadgeIcon]=\"allowedModelOptions.includes('limeReport') ? '' : 'PRO'\" matBadgeOverlap=\"false\"\n      [ngClass]=\"(appType === 'enterprise') || (appType === 'saas' &&  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) || allowedModelOptions.includes('limeReport') ? '' : 'text-muted disable-Btn'\">\n      Lime Report</h6>\n    <button (click)=\"openGraphDialog('limeReport', training, model, activeTabName)\" matTooltip=\"View report\"\n      mat-icon-button\n      [disabled]=\"appType === 'saas' && !user?.roles?.includes('super_admin') && !user?.roles?.includes('admin') && user?.planType === 'basic' && !allowedModelOptions.includes('limeReport')\"\n      [ngClass]=\"(appType === 'enterprise') || (appType === 'saas' &&  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) || allowedModelOptions.includes('limeReport') ? '' : 'disable-Btn'\">\n      <mat-icon>table_chart</mat-icon>\n    </button>\n  </div>\n</div>","import { MatDialog } from '@angular/material/dialog';\nimport { LocalStorageService } from 'src/app/shared/local-storage.service';\nimport { Component, Input, OnInit, SimpleChanges } from '@angular/core';\nimport { UtilsService } from 'src/app/shared/utils.service';\nimport { GraphsDialogHandlerComponent } from '../graphs-dialog-handler/graphs-dialog-handler.component';\nimport { environment } from 'src/environments/environment';\n\n@Component({\n  selector: 'app-expansion-graphs',\n  templateUrl: './expansion-graphs.component.html',\n  styleUrls: ['./expansion-graphs.component.scss'],\n})\nexport class ExpansionGraphsComponent implements OnInit {\n  @Input() training: any;\n  @Input() model: any;\n  @Input() activeTabName: string;\n  @Input() originalFileWithEdaDetails: string;\n  @Input() trainings: any;\n\n  project: any;\n  modelData: any;\n  // restriction variables\n  appType: string = environment.appType;\n  allowedModelOptions: Array<any> = null;\n  user: any;\n  graphSupported: any;\n  constructor(\n    public _utils: UtilsService,\n    private _localStorage: LocalStorageService,\n    private _dialog: MatDialog\n  ) { }\n\n  ngOnInit(): void {\n    //fetching the restriction details from localstorage user.\n    this.user = this._localStorage.getItem(\"user\");\n    this.allowedModelOptions = this.user?.psFeatures?.allowedFeaturesList || [];\n  }\n\n  ngOnChanges(): void {\n    this.project = this._localStorage.getItem('project');\n    // Use the modelData to render the details as per the selected tab name\n    if (this.model.modelMetaData.dev && this.activeTabName === 'Development') {\n      this.modelData = this.model.modelMetaData.dev;\n    } else if (this.model.modelMetaData.holdout && this.activeTabName === 'Hold Out') {\n      this.modelData = this.model.modelMetaData.holdout;\n    } else if (this.activeTabName === 'Scoring Result') {\n      this.modelData = this.model.modelMetaData.scoringMetrics;\n    }\n  }\n\n  /**\n   * Handles the dynamic graph dialog as per the type and opens it\n   * @param type\n   * @param trainingInfo\n   * @param modelInfo\n   */\n  openGraphDialog(\n    type: string,\n    trainingInfo?: any,\n    modelInfo?: any,\n    tab?: string,\n    predMode?: string\n  ): void {\n    this._dialog\n      .open(GraphsDialogHandlerComponent, {\n        minWidth: type === 'featureImpact' || type === 'analysis' ? '80vw' : '60vw',\n        maxWidth: type === 'limeReport' ? '60vw' : '0',\n        data: {\n          type: type,\n          trainingInfo: trainingInfo,\n          modelInfo: modelInfo,\n          tab: tab,\n          trainings: this.trainings,\n          originalFileWithEdaDetails: this.originalFileWithEdaDetails,\n          predMode: predMode,\n        },\n      })\n      .afterClosed()\n      .subscribe((data) => { });\n  }\n}\n","<mat-card class=\"custom-card\">\n  <mat-card-content>\n    <!-- (selectedIndexChange)=\"tabChanged($event)\" -->\n    <mat-tab-group (selectedTabChange)=\"showGraphsSection($event)\" dynamicHeight mat-align-tabs=\"start\">\n      <!-- HOLD OUT -->\n      <mat-tab [matTooltip]=\"_utils.getTootip('holdout')\" *ngIf=\"model.modelMetaData.holdout\" label=\"Hold Out\" active>\n        <!-- TAB LABEL -->\n        <ng-template mat-tab-label>\n          <mat-label [matTooltip]=\"_utils.getTootip('holdout')\">Hold Out</mat-label>\n        </ng-template>\n        <div *ngIf=\"model.modelMetaData.holdout\" class=\"row mx-auto my-4\">\n          <!-- PIE AND SLIDER -->\n          <div class=\"col-md-6 text-center border-right\">\n            <!-- LABEL -->\n            <h6 *ngIf=\"training.algoType === 'regression'\" [matTooltip]=\"_utils.getTootip('modelScore')\">\n              Model Score\n            </h6>\n            <h6 *ngIf=\"training.algoType === 'classification'\" [matTooltip]=\"_utils.getTootip('accuracy')\">\n              Accuracy\n            </h6>\n            <!-- PIE -->\n            <div class=\"easypie-chart mt-3\" easypiechart [options]=\"pieOptions1\"\n              percent=\"{{ model.modelMetaData.holdout.testScore * 100 | number: '1.2-2' }}\">\n              <span>{{ model.modelMetaData.holdout.testScore * 100 | number: '1.2-2' }}%</span>\n            </div>\n          </div>\n          <!-- CAROUSEL -->\n          <div class=\"col-md-6 text-center\">\n            <h6>Losses</h6>\n            <carousel interval=\"0\" [noWrap]=\"false\">\n              <slide *ngFor=\"let loss of model.modelMetaData.holdout.losses; let index = index\" [active]=\"loss.active\">\n                <div class=\"mt-5\" [matTooltip]=\"_utils.getTootip(loss?.name)\">\n                  <mat-chip-list class=\"d-flex justify-content-center\">\n                    <mat-chip [style.font-size.px]=\"18\" class=\"font-weight-bold p-4\">{{\n                      loss.value | number: '1.3-3'\n                      }}</mat-chip>\n                  </mat-chip-list>\n                  <h6 class=\"mt-3\">{{ loss.name }}</h6>\n                </div>\n              </slide>\n            </carousel>\n          </div>\n        </div>\n      </mat-tab>\n      <!-- DEVELOPMENT -->\n      <mat-tab [matTooltip]=\"_utils.getTootip('development')\" *ngIf=\"model.modelMetaData.dev\" label=\"Development\">\n        <!-- TAB LABEL -->\n        <ng-template mat-tab-label>\n          <span [matTooltip]=\"_utils.getTootip('development')\">Development</span>\n        </ng-template>\n        <div class=\"row mx-auto my-4\">\n          <!-- PIE AND SLIDER -->\n          <div class=\"col-md-6 text-center border-right\">\n            <!-- LABEL -->\n            <h6 *ngIf=\"training.algoType === 'regression'\" [matTooltip]=\"_utils.getTootip('modelScore')\">\n              Model Score\n            </h6>\n            <h6 *ngIf=\"training.algoType === 'classification'\" [matTooltip]=\"_utils.getTootip('accuracy')\">\n              Accuracy\n            </h6>\n            <!-- PIE -->\n            <div class=\"easypie-chart mt-3\" easypiechart [options]=\"pieOptions1\"\n              percent=\"{{ model.modelMetaData.dev.testScore * 100 | number: '1.2-2' }}\">\n              <span>{{ model.modelMetaData.dev.testScore * 100 | number: '1.2-2' }}%</span>\n            </div>\n          </div>\n          <!-- CAROUSEL -->\n          <div class=\"col-md-6 text-center\">\n            <h6>Losses</h6>\n            <carousel interval=\"0\" [noWrap]=\"false\">\n              <slide *ngFor=\"let loss of model.modelMetaData.dev.losses; let index = index\" [active]=\"loss.active\">\n                <div class=\"mt-5\" [matTooltip]=\"_utils.getTootip(loss?.name)\">\n                  <mat-chip-list class=\"d-flex justify-content-center\">\n                    <mat-chip [style.font-size.px]=\"18\" class=\"font-weight-bold p-4\">{{\n                      loss.value | number: '1.3-3'\n                      }}</mat-chip>\n                  </mat-chip-list>\n                  <h6 class=\"mt-3\">{{ loss.name }}</h6>\n                </div>\n              </slide>\n            </carousel>\n          </div>\n        </div>\n      </mat-tab>\n      <!-- CROSS VALIDATION -->\n      <mat-tab *ngIf=\"\n         model.modelMetaData.dev && (model.modelMetaData.algoName.split('-')[0] !==\n            'Ridge Classification with Cross Validation' ||\n          !project.useGPU ||\n          !model.modelMetaData.isMultilabel\n         )\"\n        [disabled]=\"appType === 'saas' && !user?.roles?.includes('super_admin') && !user?.roles?.includes('admin') && user?.planType === 'basic' && !allowedModelOptions?.includes('crossValidation')\">\n        <!-- TAB LABEL -->\n        <ng-template mat-tab-label>\n          <mat-label matBadge [matBadgeIcon]=badgeText\n            matBadgeOverlap=\"false\" [matTooltip]=\"_utils.getTootip('crossValidation')\"\n            [ngClass]=\"(appType === 'enterprise') || (appType === 'saas' &&  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) || allowedModelOptions?.includes('crossValidation') ? '' : 'disable-Btn'\">\n            Cross Validation</mat-label>\n        </ng-template>\n        <div class=\"row mx-auto my-4 align-items-center\">\n          <mat-spinner class=\"spinner\" diameter=\"50\" *ngIf=\"showSpinner\"> </mat-spinner>\n          <!-- PIE and BUTTON (run cv) -->\n          <div class=\"col-md-7 border-right\">\n            <div class=\"col-md-12\">\n              <h5>Validation strategy</h5>\n              <!-- BUTTON GROUPS -->\n              <mat-button-toggle-group class=\"my-2\" name=\"validation-strategy\"\n                [(ngModel)]=\"validationStrategy.technique\">\n                <mat-button-toggle value=\"kFold\" [matTooltip]=\"_utils.getTootip('kFold')\">kFold</mat-button-toggle>\n                <mat-button-toggle value=\"stratifiedKFold\" *ngIf=\"algoType == 'classification' && isMultilabel == false\"\n                  [matTooltip]=\"_utils.getTootip('stratifiedKFold')\">\n                  stratifiedKFold</mat-button-toggle>\n              </mat-button-toggle-group>\n\n              <mat-form-field appearance=\"outline\" class=\"my-2\">\n                <mat-label>Select Metrics</mat-label>\n                <mat-select [(ngModel)]=\"metric\">\n                  <mat-option *ngFor=\"let type of metrics\" [value]=\"type.value\">\n                    {{ type.Name }}\n                  </mat-option>\n                </mat-select>\n              </mat-form-field>\n              <!-- SLIDER-1 -->\n              <div class=\"h5\">\n                <label>Select the number of n_split: {{ validationStrategy.nSplit }} split</label>\n                <br />\n                <mat-slider thumbLabel class=\"\" color=\"primary\" min=\"2\" max=\"10\" step=\"1\"\n                  [(ngModel)]=\"validationStrategy.nSplit\"></mat-slider>\n              </div>\n              <!-- SPLITS -->\n              <div class=\"d-flex border border-primary\">\n                <div *ngFor=\"let kf of getArray(validationStrategy.nSplit); last as isLast; index as i\"\n                  [class]=\"isLast ? 'blocks last-block' : 'blocks'\">\n                  {{ i + 1 }}\n                </div>\n              </div>\n            </div>\n            <div class=\"col-md-12 text-center mt-3\">\n              <button [disabled]=\"model.modelMetaData.cvData?.status === 'running' ? true : false\" mat-stroked-button\n                type=\"submit\" (click)=\"runCV(training, model)\">\n                Run CV\n              </button>\n            </div>\n          </div>\n          <!-- BUTTON (learning curve plot) -->\n          <div class=\"col-md-5 border-left text-center\" *ngIf=\"model.modelMetaData.cvData?.status === 'done'\">\n            <div class=\"col-md-12 mb-5\">\n              <!-- PIE -->\n              <div *ngIf=\"model.modelMetaData.cvData?.status === 'done' && training.algoType === 'classification'\">\n                <h6>Average {{metric}}</h6><br>\n                <div class=\"easypie-chart mt-3\" easypiechart [options]=\"pieOptions1\" percent=\"{{\n                                              model.modelMetaData.cvData?.cvScore < 0\n                                                ? 0\n                                                : model.modelMetaData.cvData.cvScore * 100\n                                            }}\">\n                  <span>{{\n                    model.modelMetaData.cvData?.cvScore < 0 ? 0 : (model.modelMetaData.cvData?.cvScore * 100 |\n                      number: '1.2-2' ) }}%</span>\n                </div>\n              </div>\n              <div *ngIf=\"model.modelMetaData.cvData?.status === 'done' && training.algoType === 'regression'\">\n                <h6>Average {{metricdata[0].Name}}</h6><br>\n                <div class=\"h1 m0 text-bold\">\n                  {{model.modelMetaData.cvData?.cvScore | number: '1.3-3'}}\n                </div>\n              </div>\n            </div>\n            <hr>\n            <div class=\"col-md-12 mt-5\">\n              <h6 [style.color]=\"'#08509d'\" [matTooltip]=\"_utils.getTootip('learningCurve')\">\n                Learning Curve\n              </h6>\n              <button (click)=\"openGraphDialog('learningCurve', training, model)\" matTooltip=\"View graph\"\n                mat-icon-button>\n                <mat-icon>show_chart</mat-icon>\n              </button>\n            </div>\n          </div>\n        </div>\n      </mat-tab>\n      <!-- SCORING RESULT -->\n      <mat-tab label=\"Scoring Result\">\n        <!-- TAB LABEL -->\n        <ng-template mat-tab-label>\n          <mat-label [matTooltip]=\"_utils.getTootip('scoringResult')\">Scoring Result</mat-label>\n        </ng-template>\n        <!-- BUTTON (perform scoring) -->\n        <button *ngIf=\"!model.modelMetaData.scoringMetrics\" class=\"mx-auto my-4\" mat-stroked-button\n          (click)=\"doScoring(training, model)\">\n          Perform Scoring\n        </button>\n        <div *ngIf=\"model.modelMetaData.scoringMetrics\" class=\"row mx-auto my-4 align-items-center\">\n          <!-- PIE AND SLIDER -->\n          <div class=\"col-md-4 text-center\">\n            <!-- LABEL -->\n            <h6 *ngIf=\"training.algoType === 'regression'\" [matTooltip]=\"_utils.getTootip('modelScore')\">\n              Model Score\n            </h6>\n            <h6 *ngIf=\"training.algoType === 'classification'\" [matTooltip]=\"_utils.getTootip('accuracy')\">\n              Accuracy\n            </h6>\n            <!-- PIE -->\n            <div class=\"easypie-chart mt-3\" easypiechart [options]=\"pieOptions1\"\n              percent=\"{{ model.modelMetaData.scoringMetrics?.testScore * 100 | number: '1.2-2' }}\">\n              <span>{{ model.modelMetaData.scoringMetrics?.testScore * 100 | number: '1.2-2' }}%</span>\n            </div>\n          </div>\n          <!-- CAROUSEL -->\n          <div class=\"col-md-4 text-center border-left border-right\">\n            <h6>Losses</h6>\n            <carousel interval=\"0\" [noWrap]=\"false\">\n              <slide *ngFor=\"let loss of model.modelMetaData.scoringMetrics?.losses; let index = index\"\n                [active]=\"loss.active\">\n                <div class=\"mt-5\" [matTooltip]=\"_utils.getTootip(loss?.name)\">\n                  <mat-chip-list class=\"d-flex justify-content-center\">\n                    <mat-chip [style.font-size.px]=\"18\" class=\"font-weight-bold p-4\">{{\n                      loss.value | number: '1.3-3'\n                      }}</mat-chip>\n                  </mat-chip-list>\n                  <h6 class=\"mt-3\">{{ loss.name }}</h6>\n                </div>\n              </slide>\n            </carousel>\n          </div>\n          <!-- BUTTON (recalculate) -->\n          <div class=\"col-md-4 text-center\">\n            <button mat-stroked-button type=\"submit\" (click)=\"doScoring(training, model)\">\n              Recalculate Scoring\n            </button>\n          </div>\n        </div>\n      </mat-tab>\n    </mat-tab-group>\n  </mat-card-content>\n</mat-card>\n<mat-divider *ngIf=\"showGraphs\"></mat-divider>\n<!-- GRAPHS SECTION -->\n<app-expansion-graphs *ngIf=\"showGraphs\" [training]=\"training\" [model]=\"model\" [activeTabName]=\"activeTabName\"\n  [trainings]=\"trainings\" [originalFileWithEdaDetails]=\"originalFileWithEdaDetails\"></app-expansion-graphs>","import { LocalStorageService } from './../../../shared/local-storage.service';\nimport { MatDialog } from '@angular/material/dialog';\nimport { SocketIoService } from 'src/app/core/socket-io.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { ModelsService } from './../models.service';\nimport { SpinnerService } from './../../../shared/spinner.service';\nimport { ColorsService } from './../../../shared/colors/colors.service';\nimport { UtilsService } from './../../../shared/utils.service';\nimport { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { GraphsDialogHandlerComponent } from '../graphs-dialog-handler/graphs-dialog-handler.component';\nimport { environment } from 'src/environments/environment';\n\n@Component({\n  selector: 'app-predictive-expansion',\n  templateUrl: './predictive-expansion.component.html',\n  styleUrls: ['./predictive-expansion.component.scss'],\n})\nexport class PredictiveExpansionComponent implements OnInit, OnDestroy {\n  @Input() training: any;\n  @Input() model: any;\n  @Input() originalFileWithEdaDetails: any;\n  @Input() trainings: any;\n  @Output() updateTrainingModels = new EventEmitter<any>();\n\n  /** Usubscription subject */\n  unsubscribe$ = new Subject<boolean>();\n\n  ALGORITHMS_ARRAY: Array<any>;\n\n  /** EasyPie setting */\n  pieOptions1: any = {\n    animate: {\n      duration: 1000,\n      enabled: true,\n    },\n    barColor: this._colors.byName('info'),\n    trackColor: '#f2f2f2',\n    scaleColor: false,\n    lineWidth: 8,\n    size: 150,\n    lineCap: 'round',\n  };\n\n  /** Variables with default values */\n  backGround: string = '#ffffff';\n  foreGround: string = '#08509d';\n  showGraphs: boolean = true;\n  activeTabName: string = 'Development';\n  algoType: string;\n  project: any;\n  metric: any;\n  isMultilabel: boolean = false;\n  showSpinner: boolean = false;\n  regressionMetrics: any = [];\n  classificationMetrics: any = [];\n  validationStrategy: any = {\n    technique: 'kFold',\n    nSplit: 5,\n  };\n  metrics: any;\n  metricdata: any[];\n  // restriction variables\n  appType: string = environment.appType;\n  allowedModelOptions: Array<any> = null;\n  user: any;\n  graphSupported: any;\n  badgeText:string = '';\n\n  constructor(\n    public _utils: UtilsService,\n    private _colors: ColorsService,\n    private _spinner: SpinnerService,\n    private _models: ModelsService,\n    private _toaster: ToastrService,\n    private _socket: SocketIoService,\n    private _dialog: MatDialog,\n    private _localStorage: LocalStorageService\n  ) {\n    this.regressionMetrics = [\n      {\n        name: 'R Squared',\n        value: 'r2',\n        Name: 'R-Squared',\n      },\n      {\n        name: 'MAE',\n        value: 'neg_mean_absolute_error',\n        Name: 'Mean absolute error',\n      },\n      {\n        name: 'MSE',\n        value: 'neg_mean_squared_error',\n        Name: 'Mean squared error',\n      },\n      {\n        name: 'RMSE',\n        value: 'neg_root_mean_squared_error',\n        Name: 'Root mean squared error',\n      },\n    ];\n    this.classificationMetrics = [\n      {\n        Name: 'Acurracy',\n        value: 'accuracy',\n      },\n      {\n        Name: 'f1 Score',\n        value: 'f1',\n      },\n      {\n        Name: 'Precision',\n        value: 'precision',\n      },\n      {\n        Name: 'Recall',\n        value: 'recall',\n      },\n    ];\n  }\n\n  async ngOnInit(): Promise<any> {\n    this.ALGORITHMS_ARRAY = await this._utils.getAlgorithms();\n    this.graphListSupported();\n    this.initCvSocket();\n    let algo: any = this.model.modelMetaData.algoName.split('-');\n    this.project = this._localStorage.getItem('project');\n    //fetching the restriction details from localstorage user.\n    this.user = this._localStorage.getItem('user');\n    this.allowedModelOptions = this.user?.psFeatures?.allowedFeaturesList || [];\n    this.allowedModelOptions.includes('crossValidation') ? this.badgeText = '' : this.badgeText = 'PRO';\n    this.algoType = this.ALGORITHMS_ARRAY.filter((a: any) => a.name === algo[0])[0]?.type;\n    this.isMultilabel = this.training.isMultilabel;\n    if (this.model.modelMetaData.holdout) {\n      this.activeTabName = 'Hold Out';\n    }\n    if (this.algoType == 'regression') {\n      this.metrics = this.regressionMetrics;\n      this.metric = 'neg_mean_squared_error';\n      this.validationStrategy.technique = 'kFold';\n      if (this.model.modelMetaData.cvData?.status === 'done') {\n        this.metricdata = [];\n        this.metricdata = this.regressionMetrics.filter((item) => {\n          return item.value == this.model.validationStrategy.metric;\n        });\n      }\n    } else if (this.algoType == 'classification') {\n      this.metrics = this.classificationMetrics;\n      if (this.isMultilabel) {\n        this.metrics = this.classificationMetrics.filter((item) => {\n          return item.value == 'accuracy' || item.value == 'f1';\n        });\n        this.validationStrategy.technique = 'kFold';\n      } else {\n        this.validationStrategy.technique = 'stratifiedKFold';\n      }\n      this.metric = 'accuracy';\n    }\n    if (this.model.validationStrategy) {\n      this.metric = this.model.validationStrategy.metric;\n      this.validationStrategy.technique = this.model.validationStrategy.technique;\n      this.validationStrategy.nSplit = this.model.validationStrategy.nSplit;\n    }\n  }\n\n  graphListSupported() {\n    let string = this.model.modelMetaData.algoName.toLowerCase();\n    let algoName = [];\n    let subString1 = 'bagging';\n    let subString2 = 'boosting';\n    if (string.includes(subString1)) {\n      if (this.training.algoType == 'classification') {\n        algoName = ['Bagging Classifier'];\n      } else if (this.training.algoType === 'regression') {\n        algoName = ['Bagging Regressor'];\n      }\n      this.graphSupported = this._utils.getAlgorithmSupported(algoName, this.training, string);\n      this.model['graphSupported'] = this.graphSupported;\n    } else if (string.includes(subString2)) {\n      if (this.training.algoType == 'classification') {\n        algoName = ['Boosting Classifier'];\n      } else if (this.training.algoType === 'regression') {\n        algoName = ['Boosting Regressor'];\n      }\n      this.graphSupported = this._utils.getAlgorithmSupported(algoName, this.training, string);\n      this.model['graphSupported'] = this.graphSupported;\n    } else {\n      let modelName = this.model.modelMetaData.algoName;\n      modelName = modelName.split('-', 1);\n      this.graphSupported = this._utils.getAlgorithmSupported(modelName, this.training, string);\n      this.model['graphSupported'] = this.graphSupported;\n    }\n  }\n  /**\n   * Function which triggers hold out API and fetchs hold out reuslt\n   * @param {*} training training details\n   * @param {*} modelInfo model details\n   */\n  doHoldOut(training: any, modelInfo: any): void {\n    this._spinner.showSpinner();\n    let reqObj: any = {\n      algoName: modelInfo.modelMetaData.algoName,\n      algoType: this.algoType,\n      backGround: this.backGround,\n      foreGround: this.foreGround,\n      reTrainFileId: modelInfo.modelMetaData.reTrainFileId,\n      modelFilePath: modelInfo.modelMetaData.modelPath,\n      edaSummary: this.originalFileWithEdaDetails.edaId.edaSummary,\n    };\n    if (training.logTransformationColumns) {\n      reqObj.logTransformationColumns = training.logTransformationColumns;\n      reqObj.scalarValue = training.scalarValue;\n    }\n\n    // API call\n    this._models\n      .performHoldOut(training._id, modelInfo._id, reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res: any) => {\n          if (res) {\n            this.trainings[0].models = this.trainings[0].models.map((data: any) => {\n              if (data._id === res._id) {\n                data = res;\n              }\n              return data;\n            });\n            this.updateTrainingModels.emit(this.trainings[0].models);\n            this._toaster.success('Hold out operation successfully completed', 'Models');\n            this._spinner.stopSpinner();\n          } else {\n            this._toaster.error('Cannot generate distribution graph', 'Models');\n            this._spinner.stopSpinner();\n          }\n        },\n        (err: Error) => {\n          this._toaster.error(`Server Error - ${err.message}`, 'Models');\n          this._spinner.stopSpinner();\n        }\n      );\n  }\n\n  /**\n   * Function which triggers API to get CV score\n   * @param {*} training training details\n   * @param {*} modelInfo model details\n   */\n  runCV(training: any, modelInfo: any): void {\n    this.showSpinner = true;\n    this._toaster.info('CV score calculation started', 'Models');\n    modelInfo.modelMetaData.cvData = {};\n    modelInfo.modelMetaData.cvData.status = 'running';\n    let edaId;\n    if (modelInfo.edaId !== null) {\n      edaId = modelInfo.edaId;\n    } else {\n      edaId = training.edaId._id;\n    }\n    // API call\n    this._models\n      .runCv(\n        training._id,\n        modelInfo._id,\n        modelInfo.modelMetaData.algoName,\n        this.algoType,\n        this.validationStrategy.technique,\n        this.validationStrategy.nSplit,\n        this.metric,\n        edaId,\n        'running'\n      )\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res) => {\n          if (!res) {\n            this._toaster.error('Cannot calculate CV score', 'Models');\n            this.showSpinner = false;\n          }\n        },\n        (err: Error) => {\n          this._toaster.error(`Server Error - ${err.message}`, 'Models');\n          this.showSpinner = false;\n        }\n      );\n  }\n\n  /**\n   * Function which triggers scoring API, to get scoring result\n   * @param {*} training training details\n   * @param {*} modelInfo model details\n   */\n  doScoring(training: any, modelInfo: any): void {\n    this._spinner.showSpinner();\n    // checkThemeColor();\n    let reqObj: any = {\n      backGround: this.backGround,\n      foreGround: this.foreGround,\n      algoName: modelInfo.modelMetaData.algoName,\n      algoType: this.algoType,\n      modelFilePath: modelInfo.modelMetaData.modelPath,\n      transformedDatasetPath: modelInfo.transformedDatasetPath,\n      reTrainFileId: modelInfo.modelMetaData.reTrainFileId,\n    };\n    if (modelInfo.edaId !== null) {\n      reqObj.edaId = modelInfo.edaId;\n    } else {\n      reqObj.edaId = this.trainings[0].edaId._id;\n    }\n    if (this.trainings[0].logTransformationColumns) {\n      reqObj.logTransformationColumns = this.trainings[0].logTransformationColumns;\n      reqObj.scalarValue = this.trainings[0].scalarValue;\n    }\n    // API call\n    this._models\n      .performScoring(training._id, modelInfo._id, reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res: any) => {\n          if (res) {\n            this.trainings[0].models = this.trainings[0].models.map((data: any) => {\n              if (data._id === res._id) {\n                data = res;\n              }\n              return data;\n            });\n            this.updateTrainingModels.emit(this.trainings[0].models);\n            this._toaster.success('Scoring result calculated successfully', 'Models');\n            this._spinner.stopSpinner();\n          } else {\n            this._toaster.error('Cannot calculate scoring result', 'Models');\n            this._spinner.stopSpinner();\n          }\n        },\n        (err: any) => {\n          this._toaster.error(err.error.message, 'Models');\n          this._spinner.stopSpinner();\n        }\n      );\n  }\n\n  /**\n   * Handles the dynamic graph dialog as per the type and opens it\n   * @param type\n   * @param trainingInfo\n   * @param modelInfo\n   */\n  openGraphDialog(type: string, trainingInfo?: any, modelInfo?: any): void {\n    this._dialog\n      .open(GraphsDialogHandlerComponent, {\n        minWidth: type === 'learningCurve' ? '50vw' : '80vw',\n        data: {\n          type: type,\n          trainingInfo: trainingInfo,\n          modelInfo: modelInfo,\n          trainings: this.trainings,\n        },\n      })\n      .afterClosed()\n      .subscribe((data) => { });\n  }\n\n  /**\n   * Renders the graphs section view as per the selected tab\n   * @param event\n   */\n  showGraphsSection(event: any): void {\n    if (event.tab.textLabel === 'Development') {\n      this.showGraphs = true;\n    } else if (event.tab.textLabel === 'Hold Out') {\n      this.model.modelMetaData.holdout ? (this.showGraphs = true) : (this.showGraphs = false);\n    } else if (event.tab.textLabel === 'Scoring Result') {\n      this.model.modelMetaData.scoringMetrics\n        ? (this.showGraphs = true)\n        : (this.showGraphs = false);\n    } else {\n      this.showGraphs = false;\n    }\n    this.activeTabName = event.tab.textLabel;\n  }\n\n  /**\n   * SOCKET - Listen for CV score calculation completed messages\n   */\n  initCvSocket(): void {\n    this._socket.listen('cvCompleted').subscribe(\n      async (respData: any) => {\n        if (respData.modelData.status === 'failed') {\n          this.showSpinner = false;\n          this.trainings[0].models = this.trainings[0].models?.map((data: any) => {\n            if (data._id === respData.modelData?.modelId) {\n              data.modelMetaData.cvData.status = 'completed';\n            }\n            return data;\n          });\n          this.updateTrainingModels.emit(this.trainings[0].models);\n          this._toaster.error(respData.modelData.message, 'Models');\n        } else {\n          this.trainings[0].models = this.trainings[0].models?.map((data: any) => {\n            if (data._id === respData.modelData?._id) {\n              data = respData.modelData;\n            }\n            return data;\n          });\n          this.updateTrainingModels.emit(this.trainings[0].models);\n          this._toaster.success('CV score calculated successfully', 'Models');\n          this.showSpinner = false;\n        }\n      },\n      (err: Error) => {\n        this._toaster.error(`Socket Error - ${err.message}`, 'Train Model');\n        this.showSpinner = false;\n      }\n    );\n  }\n  /**\n   * Create an empty array for k-fold\n   * @param data\n   * @returns\n   */\n  getArray(data: any): Array<any> {\n    return new Array(data);\n  }\n\n  /**\n   * Perform operations when the module is destroyed\n   */\n  ngOnDestroy() {\n    this._socket.removeListener('cvCompleted');\n    this.unsubscribe$.next(false);\n    this.unsubscribe$.unsubscribe();\n  }\n}\n","<mat-tab-group class=\"px-3 pb-3\" dynamicHeight mat-align-tabs=\"start\">\r\n  <!-- LOSSES -->\r\n  <mat-tab>\r\n    <!-- TAB LABEL -->\r\n    <ng-template mat-tab-label>\r\n      <mat-label [matTooltip]=\"_utils.getTootip('losses')\">Losses</mat-label>\r\n    </ng-template>\r\n    <div class=\"mx-auto mt-4\" *ngIf=\"!training.edaId.isMultipleTimeseries\">\r\n      <table class=\"table table-bordered w-50 text-center\">\r\n        <thead class=\"table-dark bg-primary\">\r\n          <tr>\r\n            <td>Loss</td>\r\n            <td>Value</td>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr *ngFor=\"let loss of model.modelMetaData.losses\">\r\n            <td>{{ loss.name }}</td>\r\n            <td>{{ loss.value !== null ? loss.value : '-' }}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <div class=\"mx-auto mt-4\" *ngIf=\"training.edaId.isMultipleTimeseries\">\r\n      <table class=\"table table-responsive-md table-bordered w-75 mx-auto my-4\">\r\n        <thead class=\"thead-dark bg-primary\">\r\n          <tr>\r\n            <td>Loss</td>\r\n            <td>Count of Groups</td>\r\n            <td>Min</td>\r\n            <td>25th Percentile</td>\r\n            <td>50th Percentile</td>\r\n            <td>75th Percentile</td>\r\n            <td>Mean</td>\r\n            <td>Standard Deviation</td>\r\n            <td>Max</td>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr *ngFor=\"let item of losses | keyvalue\">\r\n            <td>{{ item.key }}</td>\r\n            <td *ngIf=\"item.value['count'] != 0\">\r\n              {{\r\n              item.value.count === null || item.value.count === undefined ? '-' : item.value.count\r\n              }}\r\n            </td>\r\n            <td *ngIf=\"item.value['count'] == 0\">\r\n              {{\r\n              0\r\n              }}\r\n            </td>\r\n            <td *ngIf=\"item.value['min'] != 0\">\r\n              {{ item.value.min === null || item.value.min === undefined ? '-' : item.value.min }}\r\n            </td>\r\n            <td *ngIf=\"item.value['min'] == 0\">\r\n              {{ 0}}\r\n            </td>\r\n            <td *ngIf=\"item.value['25%'] != 0\">\r\n              {{\r\n              item.value['25%'] === null || item.value['25%'] === undefined\r\n              ? '-'\r\n              : item.value['25%']\r\n              }}\r\n            </td>\r\n            <td *ngIf=\"item.value['25%'] == 0\">\r\n              {{ 0\r\n              }}\r\n            </td>\r\n            <td *ngIf=\"item.value['50%'] != 0\">\r\n              {{\r\n              item.value['50%'] === null || item.value['50%'] === undefined\r\n              ? '-'\r\n              : item.value['50%']\r\n              }}\r\n            </td>\r\n            <td *ngIf=\"item.value['50%'] == 0\">\r\n              {{0\r\n              }}\r\n            </td>\r\n            <td *ngIf=\"item.value['75%'] != 0\">\r\n              {{\r\n              item.value['75%'] === null || item.value['75%'] === undefined\r\n              ? '-'\r\n              : item.value['75%']\r\n              }}\r\n            <td *ngIf=\"item.value['75%'] == 0\">\r\n              {{0}}\r\n            </td>\r\n            <td *ngIf=\"item.value['mean'] != 0\">\r\n              {{\r\n              item.value.mean === null || item.value.mean === undefined ? '-' : item.value.mean\r\n              }}\r\n            <td *ngIf=\"item.value['mean'] == 0\">\r\n              {{0}}\r\n            </td>\r\n            <td *ngIf=\"item.value['std'] != 0\">\r\n              {{ item.value.std === null || item.value.std === undefined ? '-' : item.value.std }}\r\n            </td>\r\n            <td *ngIf=\"item.value['std'] == 0\">\r\n              {{0}}\r\n            </td>\r\n            <td *ngIf=\"item.value['max'] !=0\">\r\n              {{ item.value.max === null || item.value.max === undefined ? '-' : item.value.max }}\r\n            </td>\r\n            <td *ngIf=\"item.value['max'] == 0\">\r\n              {{0}}\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </mat-tab>\r\n  <!-- EVALUATE FORECAST -->\r\n  <mat-tab>\r\n    <!-- TAB LABEL -->\r\n    <ng-template mat-tab-label>\r\n      <mat-label [matTooltip]=\"_utils.getTootip('evaluateForecast')\">Evaluate Forecast</mat-label>\r\n    </ng-template>\r\n    <mat-form-field appearance=\"outline\" class=\"col-md-4 mt-3\" *ngIf=\"training.edaId.isMultipleTimeseries\">\r\n      <mat-label for=\"timeseries\" [matTooltip]=\"_utils.getTootip('selectGroup')\">Select timeseries group\r\n      </mat-label>\r\n      <mat-select [formControl]=\"selectedTimeseriesGroup\" required>\r\n        <mat-option *ngFor=\"let item of timeseriesGoupList\" [value]=\"item\">\r\n          {{ item }}\r\n        </mat-option>\r\n      </mat-select>\r\n      <mat-error *ngIf=\"\r\n          selectedTimeseriesGroup.hasError('required') &&\r\n          (selectedTimeseriesGroup.dirty || selectedTimeseriesGroup.touched)\r\n        \">Timeseries groups are required.</mat-error>\r\n    </mat-form-field>\r\n    <button class=\"mx-auto my-4\" mat-stroked-button\r\n      [disabled]=\"training.edaId.isMultipleTimeseries && !selectedTimeseriesGroup.value\" (click)=\"evaluateForecast()\">\r\n      Evaluate\r\n    </button>\r\n    <div class=\"d-flex justify-content-center\" [id]=\"uniqueEvaluateDiv\"></div>\r\n  </mat-tab>\r\n  <!-- FORECAST -->\r\n  <mat-tab>\r\n    <!-- TAB LABEL -->\r\n    <ng-template mat-tab-label>\r\n      <mat-label [matTooltip]=\"_utils.getTootip('forecasting')\">Forecast</mat-label>\r\n    </ng-template>\r\n    <div class=\"row mx-auto mt-4\">\r\n      <mat-form-field appearance=\"outline\" class=\"w-25\" *ngIf=\"training.edaId.isMultipleTimeseries\">\r\n        <mat-label for=\"timeseries\" [matTooltip]=\"_utils.getTootip('selectGroup')\">Select timeseries group\r\n        </mat-label>\r\n        <mat-select [formControl]=\"selectedTimeseriesGroupForecast\" required>\r\n          <mat-option *ngFor=\"let item of timeseriesGoupList\" [value]=\"item\">\r\n            {{ item }}\r\n          </mat-option>\r\n        </mat-select>\r\n        <mat-error *ngIf=\"\r\n            selectedTimeseriesGroupForecast.hasError('required') &&\r\n            (selectedTimeseriesGroupForecast.dirty || selectedTimeseriesGroupForecast.touched)\r\n          \">Timeseries groups are required.</mat-error>\r\n      </mat-form-field>\r\n      <mat-form-field class=\"w-25\" appearance=\"outline\" [matTooltip]=\"_utils.getTootip('startDate')\"\r\n        *ngIf=\"!training.edaId.isMultipleTimeseries\">\r\n        <mat-label>Start Input</mat-label>\r\n        <input matInput type=\"date\" [(ngModel)]=\"startDate\" (ngModelChange)=\"onChangeDate(startDate, endDate)\" />\r\n      </mat-form-field>\r\n      <mat-form-field class=\"w-25 ml-4\" appearance=\"outline\" [matTooltip]=\"_utils.getTootip('endDate')\"\r\n        *ngIf=\"!training.edaId.isMultipleTimeseries\">\r\n        <mat-label>End Input</mat-label>\r\n        <input matInput type=\"date\" [(ngModel)]=\"endDate\" (ngModelChange)=\"onChangeDate(startDate, endDate)\" />\r\n      </mat-form-field>\r\n      <button class=\"ml-4 mt-2\" [disabled]=\"\r\n          isError || (training.edaId.isMultipleTimeseries && !selectedTimeseriesGroupForecast.value)\r\n        \" mat-stroked-button (click)=\"getForecast()\" style=\"height: 45px\">\r\n        Get Forecast\r\n      </button>\r\n      <button class=\"ml-4 mt-2\" mat-stroked-button *ngIf=\"csvData.length\" (click)=\"downloadForecast()\"\r\n        style=\"height: 45px\" matTooltip=\"Click here to download graph data (.csv)\">\r\n        Download Forecast\r\n      </button>\r\n      <div class=\"text-muted text-danger col-md-12\" *ngIf=\"showTextError\">\r\n        {{ text }}\r\n      </div>\r\n    </div>\r\n    <!-- PLOT -->\r\n    <div class=\"d-flex justify-content-center\" [id]=\"uniqueForecastDiv\"></div>\r\n  </mat-tab>\r\n</mat-tab-group>","import { Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport * as moment from 'moment';\nimport { SpinnerService } from 'src/app/shared/spinner.service';\nimport { UtilsService } from 'src/app/shared/utils.service';\nimport { ModelsService } from '../models.service';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { FormControl, Validators } from '@angular/forms';\nimport { ngxCsv } from 'ngx-csv';\nimport { EdaService } from '../../eda/eda.service';\n\n\nconst Plotly = require('plotly.js-dist');\n@Component({\n  selector: 'app-timeseries-expansion',\n  templateUrl: './timeseries-expansion.component.html',\n  styleUrls: ['./timeseries-expansion.component.scss'],\n})\nexport class TimeseriesExpansionComponent implements OnInit, OnDestroy {\n  @Input() training: any;\n  @Input() model: any;\n  @Input() originalFileWithEdaDetails: any;\n  /** Usubscription subject */\n  unsubscribe$ = new Subject<boolean>();\n\n  /** Variables with default values */\n  backGround: string = '#ffffff';\n  foreGround: string = '#08509d';\n  startDate: any;\n  endDate: any;\n  showSpinner: boolean = false;\n  showTextError: boolean = false;\n  text: any;\n  isError: boolean = false;\n  uniqueForecastDiv: string;\n  uniqueEvaluateDiv: string;\n  selectedTimeseriesGroup = new FormControl('', Validators.required);\n  selectedTimeseriesGroupForecast = new FormControl('', Validators.required);\n  frequency: any;\n  losses: any = {};\n  //variable for storing the graph data in csv format.\n  csvData: Array<Object> = [];\n  colNameOtherThanX: any = [];\n  timeseriesGoupList;\n  constructor(\n    public _utils: UtilsService,\n    private _spinner: SpinnerService,\n    private _toaster: ToastrService,\n    private _models: ModelsService,\n    private _snackBar: MatSnackBar,\n    private _eda: EdaService,\n  ) { }\n\n  ngOnInit(): void {\n    if (this.training.edaId.isMultipleTimeseries) {\n      this.getTimeseriesGroup();\n  }\n    this.startDate = new Date();\n    this.startDate = new Date(Date.now() - 864e5).toISOString().slice(0, 10);\n    this.endDate = new Date().toISOString().slice(0, 10);\n    this.uniqueForecastDiv = `${this.model.modelMetaData.algoName}Plot`;\n    this.uniqueEvaluateDiv = `${this.model.modelMetaData.algoName}Plot`;\n    this.losses = this.model.modelMetaData.losses;\n  }\n\n  getTimeseriesGroup() {\n    this._spinner.showSpinner();\n    let reqObj = {\n      modelId: this.model._id,\n    }\n    this._eda\n      .getTimeseriesGroup(reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res) => {\n          if (res) {\n            this.showSpinner = true;\n            this.timeseriesGoupList = res[0].allowedGroupList;\n            this._spinner.stopSpinner();\n          }\n        },\n        (err: any) => {\n          this._spinner.stopSpinner();\n          this.showSpinner = false;\n          this._toaster.error(err.error.message || 'Server Error', 'Model');\n        }\n      );\n  }\n  async calculateFrequency(): Promise<any> {\n    if (this.training.edaId.hasOwnProperty('resampling')) {\n      this.frequency = this.training.edaId.resampling.resamplingMethod;\n    } else {\n      this.frequency = this.originalFileWithEdaDetails.descriptiveStatistics.filter((item) => {\n        return item.colName === this.training.edaId.timeseriesInfo.datetimeIndex;\n      })[0];\n      this.frequency = this.frequency.frequency;\n    }\n  }\n  /**\n   * Evaluates the forcast and generates the graph\n   */\n  async evaluateForecast(): Promise<any> {\n    await this.calculateFrequency();\n    let reqObj = {\n      indexPath: this.training.edaId.indexPath,\n      trainPipeFilePath: this.model.trainPipeFilePath,\n      parentPipelineFilename: this.training.edaId.tasks[0].currentPipelineFilename,\n      filename: this.training.metaInfo.fileName,\n      modelPath: this.model.modelMetaData.modelPath,\n      backGround: this.backGround,\n      foreGround: this.foreGround,\n      depVariable: this.training.depVariable,\n      timeseriesIds: this.training.edaId.isMultipleTimeseries\n        ? this.training.edaId.timeseriesIds\n        : null,\n      selectedTimeseriesGroup: this.selectedTimeseriesGroup.value,\n      isMultipleTimeseries: this.training.edaId.isMultipleTimeseries,\n      nSteps: this.training.nSteps,\n      frequency: this.frequency !== '' ? this.frequency : 'none',\n    };\n    this._spinner.showSpinner();\n    this._models\n      .evaluateGraph(this.training._id, this.model._id, reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res) => {\n          if (res) {\n            this.showSpinner = true;\n            let graphDiv: any = document.getElementById(this.uniqueEvaluateDiv);\n            while (graphDiv.data && graphDiv.data.length > 0) {\n              Plotly.deleteTraces(graphDiv, [0]);\n            }\n            res.graphContent.layout.xaxis.linecolor = 'black';\n            res.graphContent.layout.yaxis.linecolor = 'black';\n            Plotly.plot(graphDiv, res.graphContent.data, res.graphContent.layout);\n            this._spinner.stopSpinner();\n          }\n        },\n        (err: any) => {\n          this._spinner.stopSpinner();\n          this.showSpinner = false;\n          this._toaster.error(err.error.message || 'Server Error', 'Model');\n        }\n      );\n  }\n\n  /**\n   * Fetches the forecast graph\n   */\n  async getForecast(): Promise<any> {\n    this._spinner.showSpinner();\n    await this.calculateFrequency();\n    let reqObj = {\n      indexPath: this.training.edaId.indexPath,\n      trainPipeFilePath: this.model.trainPipeFilePath,\n      parentPipelineFilename: this.training.edaId.tasks[0].currentPipelineFilename,\n      filename: this.training.metaInfo.fileName,\n      preprocessedFilepath: this.training.preprocessedFilepath,\n      algorithm: this.model.modelMetaData.algoName,\n      startDate: moment(this.startDate).format('L'),\n      endDate: moment(this.endDate).format('L'),\n      modelPath: this.model.modelMetaData.modelPath,\n      forecastModelPath: this.model.modelMetaData.forecastModelPath,\n      backGround: this.backGround,\n      foreGround: this.foreGround,\n      depVariable: this.training.depVariable,\n      timeseriesIds: this.training.edaId.isMultipleTimeseries\n        ? this.training.edaId.timeseriesIds\n        : null,\n      selectedTimeseriesGroup: this.selectedTimeseriesGroupForecast.value,\n      isMultipleTimeseries: this.training.edaId.isMultipleTimeseries,\n      nSteps: this.training.nSteps,\n      frequency: this.frequency !== '' ? this.frequency : 'none',\n    };\n    // API call\n    this._models\n      .getForecastGraph(this.training._id, this.model._id, reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res: any) => {\n          if (res) {\n            this.showSpinner = true;\n            let graphDiv: any = document.getElementById(this.uniqueForecastDiv);\n            while (graphDiv.data && graphDiv.data.length > 0) {\n              Plotly.deleteTraces(graphDiv, [0]);\n            }\n            if (res.graphContent.layout) {\n              this.showTextError = false;\n              res.graphContent.layout.template.layout.title.xanchor = 'center';\n              res.graphContent.layout.template.layout.title.y = 0.9;\n              res.graphContent.layout.template.layout.title.x = 0.5;\n              res.graphContent.layout.template.layout.title.yanchor = 'top';\n              res.graphContent.layout.template.layout.xaxis.gridcolor = 'transparent';\n              res.graphContent.layout.template.layout.yaxis.gridcolor = 'transparent';\n              res.graphContent.layout.template.layout.yaxis.zerolinecolor = 'transparent';\n              res.graphContent.layout.xaxis.linecolor = 'black';\n              res.graphContent.layout.yaxis.linecolor = 'black';\n              res.graphContent.layout.xaxis.showgrid = false;\n              Plotly.plot(graphDiv, res.graphContent.data, res.graphContent.layout);\n              this.prepareGraphData(res.graphContent.data);\n              this._spinner.stopSpinner();\n            } else {\n              this.showTextError = true;\n              this._spinner.stopSpinner();\n              this.text = res.graphContent;\n            }\n          }\n        },\n        (e: any) => {\n          this._spinner.stopSpinner();\n          this.showSpinner = false;\n          this._toaster.error(e.error.message || 'Server Error', 'Model');\n        }\n      );\n  }\n\n  /**\n   * function to prepare the graph data in the csv format and allow user to download it.\n   * @param graphData - graph data\n   */\n  prepareGraphData(graphData: any) {\n    var transposedData: Array<Object> = [];\n    this.csvData.length = 0;\n    this.colNameOtherThanX = [];\n    let colNames = []\n    // doing transpose of the graph data.\n    graphData.forEach(function (d) {\n      for (var key in d) {\n        if (transposedData[key] === undefined) {\n          transposedData[key] = [];\n        }\n        (key == 'x' || key == 'y') && transposedData[key].push(d[key]);\n        (key === 'name') && colNames.push(d[key]);\n      }\n    });\n    this.colNameOtherThanX = colNames;\n    // deleting all other keys of transposedData.\n    for (var key in transposedData) {\n      if (key != 'x' && key != 'y') {\n        delete transposedData[key];\n      }\n    }\n    // seperating the x and y axis data.\n    let xdataForCsv = [];\n    let ydataForCsv = [];\n    for (var key in transposedData) {\n      (key == 'x') && xdataForCsv.push(transposedData[key]);\n      (key == 'y') && ydataForCsv.push(transposedData[key]);\n    }\n    xdataForCsv = xdataForCsv.toString().split(',').sort();\n    xdataForCsv = [...new Set(xdataForCsv)];\n    // preparing the data in csv format.\n    if (!this.training.edaId.isMultipleTimeseries) {\n      // logic to convert graph data to csv if not multi timeseries and is prophet algo.\n      if (this.model.modelMetaData.algoName === 'Prophet') {\n        for (let i = 0; i < xdataForCsv.length; i++) {\n          this.csvData[i] = {};\n          this.csvData[i]['x'] = xdataForCsv[i];\n          for (let k = 0; k < this.colNameOtherThanX.length; k++) {\n            if (i < ydataForCsv[0][0].length) {\n              if (k === 0) {\n                this.csvData[i][this.colNameOtherThanX[0]] = ydataForCsv[0][0][i];\n              }\n            } else if (i >= ydataForCsv[0][0].length) {\n              if (k !== 0) {\n                this.csvData[i][this.colNameOtherThanX[k]] = ydataForCsv[0][k][(i - Number(ydataForCsv[0][0].length))];\n              } else {\n                this.csvData[i][this.colNameOtherThanX[k]] = '';\n              }\n            }\n          }\n        }\n      } else {\n        // logic to convert graphdata to csv if not multi timeseries and not prophet algo.\n        for (let i = 0; i < xdataForCsv.length; i++) {\n          if (i <= ydataForCsv[0][0].length) {\n            this.csvData.push({ x: xdataForCsv[i], y: ydataForCsv[0][0][i], forecast: ydataForCsv[0][1][i] });\n          }\n        }\n      }\n    } else {\n      // logic to convert graphdata to csv if multi timeseries.\n      for (let i = 0; i < xdataForCsv.length; i++) {\n        if (i < ydataForCsv[0][0].length) {\n          this.csvData.push({ x: xdataForCsv[i], y: ydataForCsv[0][0][i], forecast: '' });\n        } else {\n          this.csvData.push({ x: xdataForCsv[i], y: '', forecast: ydataForCsv[0][1][(i - Number(ydataForCsv[0][0].length))] });\n        }\n      }\n    }\n  }\n\n  // function to download the prepared graph data in the csv format.\n  downloadForecast() {\n    var options = {\n      fieldSeparator: ',',\n      quoteStrings: '\"',\n      decimalseparator: '.',\n      showLabels: true,\n      useBom: true,\n      noDownload: false, // if true, will not allow the direct download of the csv file.\n      headers: ['x', ...this.colNameOtherThanX]\n    };\n    this.csvData.length && new ngxCsv(this.csvData, 'forecastData', options);\n  }\n\n  /**\n   * Called on dates change\n   * @param sDate\n   * @param eDate\n   * @returns\n   */\n  onChangeDate(sDate: any, eDate: any): number {\n    let startDate = moment(sDate);\n    let endDate = moment(eDate);\n    let isDateCorrect = moment(endDate).isAfter(startDate, 'day');\n    if (isDateCorrect === false) {\n      this.isError = true;\n      this._snackBar\n        .open('End date should be greater than start date', 'OK', {\n          horizontalPosition: 'right',\n          verticalPosition: 'bottom',\n        })\n        .afterDismissed()\n        .subscribe((data) => {\n          let date = new Date(sDate);\n          // add a day\n          date.setDate(date.getDate() + 1);\n          this.endDate = date.toISOString().slice(0, 10);\n          this.isError = false;\n        });\n    } else {\n      this.isError = false;\n    }\n    return 0;\n  }\n\n  /**\n   * Perform operations when the module is destroyed\n   */\n  ngOnDestroy() {\n    this.unsubscribe$.next(false);\n    this.unsubscribe$.unsubscribe();\n  }\n}\n   ","<mat-tab-group class=\"pb-3 horizontal\" mat-align-tabs=\"center\" dynamicHeight\n  *ngIf=\"!model.modelMetaData.hasOwnProperty('errorMsg') || model.modelMetaData?.errorMsg === null\">\n  <!-- ANALYSIS -->\n  <mat-tab *ngIf=\"model.modelMetaData.analysisInfo.length\">\n    <ng-template mat-tab-label>\n      <mat-label [matTooltip]=\"_utils.getTootip('clusterAnalysis')\">Analysis</mat-label>\n    </ng-template>\n    <mat-tab-group class=\"vertical mt-2\" (selectedTabChange)=\"showGraphsSection($event)\"\n      *ngIf=\"clusterErrorType !== 'string'\">\n      <mat-tab label=\"Summary\">\n        <ng-template mat-tab-label>\n          <mat-label [matTooltip]=\"_utils.getTootip('')\">Summary</mat-label>\n        </ng-template>\n        <div class=\"row pt-3 ml-2 pr-4\">\n          <div class=\"col-md-4 px-2 mb-2 d-flex\" *ngFor=\"let item of obs | async; let i = index\">\n            <div class=\"card-body p-2 w-100 bgc\" [ngStyle]=\"{ 'background-color': cardColor[i % 3] }\">\n              <div class=\"row\">\n                <div class=\"col-md-4 card-body p-2\">\n                  <div class=\"easypie-chart text-center\" easypiechart [options]=\"pieOptions1\"\n                    [percent]=\"item.samplePercentage\" [matTooltip]=\"_utils.getTootip('samplePercentage')\">\n                    <span style=\"font-size: 0.9rem\">{{ item.samplePercentage }}%</span>\n                  </div>\n                </div>\n                <div class=\"col-md-8 p-2 card-body\">\n                  <mat-form-field appearance=\"outline\" class=\"clusterInput rulesfont mt-1\">\n                    <mat-label for=\"clusterName\">Cluster name</mat-label>\n                    <input matInput type=\"text\" name=\"clusterName\" (focus)=\"editMode = true\"\n                      (keydown.enter)=\"$event.target.blur()\" [value]=\"item.clusterName\"\n                      (change)=\"onFocusOut(clusterName.value, i)\" #clusterName [id]=\"item.clusterId\"\n                      (keydown.enter)=\"$event.target.blur()\" (focusout)=\"editMode = false\" />\n                  </mat-form-field>\n                  <div *ngIf=\"clusterName.errors?.pattern\">Invalid Name</div>\n                  <!-- <mat-hint class=\"text-danger\" *ngIf=\"item.isDuplicate\"> Cluster name already exists!</mat-hint> -->\n                </div>\n              </div>\n              <!-- rules -->\n              <div class=\"col-md-12 float-left rulesfont mb-3\" *ngFor=\"let rule of item.rules\"\n                [matTooltip]=\"_utils.getTootip('clusterRules')\">\n                <li class=\"bullet-font\">\n                  {{ rule }}\n                </li>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"col-md-6\">\n            <div *ngIf=\"model.showUpdateButton == true\">\n              <button mat-raised-button class=\"btn-primary ml-5 mt-3\" type=\"submit\" (click)=\"updateClusterData()\">\n                <mat-icon>insights</mat-icon> Save Cluster\n              </button>\n            </div>\n          </div>\n          <div class=\"col-md-6\">\n            <mat-paginator class=\"col-md-12\" [pageSizeOptions]=\"[6, 12, 18, 24, 30, 36, 42, 48, 54, 60]\">\n            </mat-paginator>\n          </div>\n        </div>\n      </mat-tab>\n      <mat-tab label=\"Heat Map\" [disabled]=\"showUpdateButton === true\">\n        <ng-template mat-tab-label>\n          <mat-label [matTooltip]=\"_utils.getTootip('')\">Heat Map</mat-label>\n        </ng-template>\n        <div class=\"row p-3\">\n          <div class=\"col-md-12\">\n            <div class=\"d-flex justify-content-center\" [id]=\"heatMapDiv\"></div>\n          </div>\n        </div>\n      </mat-tab>\n      <mat-tab label=\"Decision Tree\" [disabled]=\"showUpdateButton === true\" *ngIf=\"model.modelMetaData.treeModelOutput\">\n        <ng-template mat-tab-label>\n          <mat-label [matTooltip]=\"_utils.getTootip('')\">Decision Tree</mat-label>\n        </ng-template>\n        <div class=\"row\">\n          <div class=\"col-md-12\">\n            <button style=\"float: right; margin-right: 15px\" mat-flat-button class=\"btn-primary\" type=\"submit\"\n              (click)=\"downloadDecisionTree()\">\n              Download\n            </button>\n\n            <div class=\"d-flex justify-content-center overflowDiv mt-5\">\n              <img [src]=\"decisionTreeImage\" alt=\"Decision Tree\" class=\"imgObj\" />\n            </div>\n          </div>\n          <!-- <div class=\"d-flex justify-content-center\" [id]=\"heatMapDiv\"></div> -->\n        </div>\n      </mat-tab>\n      <mat-tab label=\"Feature Importance\" [disabled]=\"showUpdateButton === true\"\n        *ngIf=\"model.modelMetaData?.featureImportance.length\">\n        <ng-template mat-tab-label>\n          <mat-label [matTooltip]=\"_utils.getTootip('')\">Feature Importance </mat-label>\n        </ng-template>\n        <div class=\"text-right offset-8 ml-5\">\n          <mat-button-toggle-group class=\"\" [(ngModel)]=\"viewType\" (change)=\"toggleView = !toggleView\">\n            <mat-button-toggle value=\"graph\">\n              <mat-icon class=\"mr-2\">show_chart</mat-icon>Graph\n            </mat-button-toggle>\n            <mat-button-toggle value=\"table\">\n              <mat-icon class=\"mr-2\">table_chart</mat-icon>Table\n            </mat-button-toggle>\n          </mat-button-toggle-group>\n        </div>\n        <div [hidden]=\"!toggleView\" class=\"ml-5 offset-1\">\n          <div class=\"d-flex flex-row justify-content-center\" [id]=\"featureImp\"></div>\n          <br />\n        </div>\n        <div [hidden]=\"toggleView\" class=\"ml-5\">\n          <table class=\"table table-bordered mx-auto w-100 mt-4\">\n            <thead class=\"thead-dark bg-primary\">\n              <tr>\n                <td>Feature</td>\n                <td>Importance</td>\n              </tr>\n            </thead>\n            <tbody>\n              <tr *ngFor=\"let feature of featuresArray\">\n                <td>{{ feature.colName }}</td>\n                <td>{{ feature.importance }}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <!-- NOTE -->\n        <mat-hint *ngIf=\"toggleView\" class=\"col-md-12\">Note: Top 15 features are displayed. To view all features check\n          table view.\n        </mat-hint>\n      </mat-tab>\n    </mat-tab-group>\n    <div *ngIf=\"clusterErrorType == 'string'\" class=\"p-3 text-center text-danger\">\n      <b>{{ model.modelMetaData.analysisInfo }}</b>\n    </div>\n  </mat-tab>\n  <!-- visualization tab -->\n  <mat-tab *ngIf=\"featureList.length\">\n    <!-- TAB LABEL -->\n    <ng-template mat-tab-label>\n      <mat-label [matTooltip]=\"_utils.getTootip('clusterVisualization')\">Feature Distribution</mat-label>\n    </ng-template>\n    <div class=\"row mx-auto my-4\">\n      <div class=\"col-md-4\">\n        <mat-form-field appearance=\"outline\">\n          <mat-label for=\"eda file\">Select a feature</mat-label>\n          <mat-select [(ngModel)]=\"selectedFeature\" multiple\n            (selectionChange)=\"featureSelectionChanged(selectedFeature)\">\n            <mat-option *ngFor=\"let dataItem of clusteringFeatures\" [value]=\"dataItem\">\n              {{ dataItem.colName }}\n            </mat-option>\n          </mat-select>\n          <mat-hint>Maximum 2 features are required.</mat-hint>\n        </mat-form-field>\n      </div>\n      <div *ngIf=\"selectedFeature[0]?.dataType === 'Text'\" class=\"col-md-4\">\n        <mat-form-field appearance=\"outline\">\n          <mat-label for=\"eda file\">Select cluster</mat-label>\n          <mat-select [(ngModel)]=\"selectedCluster\" required>\n            <mat-option *ngFor=\"let item of model.modelMetaData.analysisInfo\" [value]=\"item.clusterName\">\n              {{ item.clusterName }}\n            </mat-option>\n          </mat-select>\n        </mat-form-field>\n      </div>\n      <div class=\"col-md-2 mt-3\">\n        <button *ngIf=\"selectedFeature.length == 1 || selectedFeature.length == 2\" mat-stroked-button\n          (click)=\"visualiseCluster()\" [disabled]=\"selectedFeature[0]?.dataType === 'Text' && !selectedCluster\">\n          Visualize Cluster\n        </button>\n      </div>\n      <div class=\"col-md-2 mt-3\" *ngIf=\"selectedFeature[0]?.dataType === 'Text'\">\n        <button mat-flat-button class=\"btn-primary\" (click)=\"viewClusterFaq(clusterTemplate)\">\n          FAQ's\n        </button>\n      </div>\n      <!-- PLOT -->\n      <div class=\"col-md-12\">\n        <div class=\"d-flex justify-content-center\" [id]=\"uniqueGraphDiv\"></div>\n      </div>\n    </div>\n\n  </mat-tab>\n  <!-- METRICS TAB -->\n  <mat-tab *ngIf=\"model['modelMetaData']['clusteringMetricesScore']\">\n    <!-- TAB LABEL -->\n    <ng-template mat-tab-label>\n      <mat-label [matTooltip]=\"_utils.getTootip('metrics')\">Metrics</mat-label>\n    </ng-template>\n    <div class=\"row my-5 text-center\">\n      <div class=\"col-md-4 border-right\" [matTooltip]=\"_utils.getTootip('silhouetteCoefficient')\">\n        <div class=\"h1 m0 text-bold\">\n          {{\n          checkIsNumber(model.modelMetaData?.clusteringMetricesScore?.silhouetteScore)\n          ? (model.modelMetaData?.clusteringMetricesScore?.silhouetteScore | number: '1.2-2')\n          : model.modelMetaData?.clusteringMetricesScore?.silhouetteScore\n          }}\n        </div>\n        <div class=\"text-uppercase\">Silhouette Coefficient</div>\n      </div>\n      <div class=\"col-md-4 border-right\" [matTooltip]=\"_utils.getTootip('daviesBouldinIndex')\">\n        <div class=\"h1 m0 text-bold\">\n          {{\n          checkIsNumber(model.modelMetaData?.clusteringMetricesScore?.daviesBouldinScore)\n          ? (model.modelMetaData?.clusteringMetricesScore?.daviesBouldinScore | number: '1.2-2')\n          : model.modelMetaData?.clusteringMetricesScore?.daviesBouldinScore\n          }}\n        </div>\n        <div class=\"text-uppercase\">Davies-Bouldin Index</div>\n      </div>\n      <div class=\"col-md-4\" [matTooltip]=\"_utils.getTootip('calinskiHarabaszIndex')\">\n        <div class=\"h1 m0 text-bold\">\n          {{\n          checkIsNumber(model.modelMetaData?.clusteringMetricesScore?.calinskiHarabaszScore)\n          ? (model.modelMetaData?.clusteringMetricesScore?.calinskiHarabaszScore\n          | number: '1.2-2')\n          : model.modelMetaData?.clusteringMetricesScore?.calinskiHarabaszScore\n          }}\n        </div>\n        <div class=\"text-uppercase\">Calinski-Harabasz Index</div>\n      </div>\n    </div>\n  </mat-tab>\n</mat-tab-group>\n\n<div *ngIf=\"model.modelMetaData?.errorMsg !== null\" class=\"p-3 text-center text-danger\">\n  <b>{{ model.modelMetaData?.errorMsg }}</b>\n</div>\n\n\n<ng-template #clusterTemplate>\n  <h2 mat-dialog-title>FAQs</h2>\n  <mat-dialog-content class=\"mat-typography preview-data-section mb-3\">\n    <div class=\"col-md-12\">\n      <mat-accordion>\n        <mat-expansion-panel class=\"my-3\" [expanded]=\"1\">\n          <mat-expansion-panel-header>\n            <!-- <mat-panel-title> FAQ's </mat-panel-title> -->\n            <mat-panel-description> </mat-panel-description>\n          </mat-expansion-panel-header>\n          <ul>\n            <li><b>What is a Scattertext plot?</b></li>\n            <p>\n              The Scattertext plot is a scatter plot for text features that are represented as a set of unigrams and\n              bigrams from the\n              samples in the data.It plots the frequencies of the terms in the two classes.\n            </p>\n            <li><b>What do the x-axis and y-axis represent?</b></li>\n            <p>The x-axis represents the frequency of a term in the negative class or the rest of the clusters.The\n              y-axis represents the frequency of a term in the positive class or the specified cluster.</p>\n            <li><b>What do the points on the plot indicate?</b></li>\n            <p>\n              Each point in the plot indicates terms present in the samples.The points are positioned according to their\n              frequencies in each of the classes.The points are scored using a scaled f-score which can be found on\n              hover along with the term ratio in the two classes.Subsequently, clicking on the point displays some of\n              the documents that mention the term in both classes.\n            </p>\n            <li><b>What do the colours on the points indicate?</b></li>\n            <p>\n              The intensity of the blue color on a point indicates the association of the term with the positive\n              class.The intensity of the red color on a point indicates the association of the term with the negative\n              class.The yellow color on a point indicates an equal association of the term with both the classes.The\n              term association is deduced based on the computed scaled f-scores.  \n            </p>\n            <li><b>How to interpret a Scattertext plot? </b></li>\n            <p>\n              The closer a term is to the top of the plot indicates a higher frequency of the term in the positive\n              class.The closer a term is to the right of the plot indicates a higher frequency of the term in the\n              negative class.The term in the middle has an average frequency for both the classes.Terms frequently\n              present in both the classes are present in the top-right corner and the terms infrequently present in\n              both the classes are present in the bottom-left corner.The right-hand side of the plot summarizes the top\n              terms characteristic of each of the classes.  \n            </p>\n          </ul>\n        </mat-expansion-panel>\n      </mat-accordion>\n    </div>\n  </mat-dialog-content>\n  <mat-dialog-actions class=\"justify-content-end m-auto\">\n    <button mat-stroked-button mat-dialog-close color=\"basic\">Close</button>\n  </mat-dialog-actions>\n</ng-template>","import { LocalStorageService } from './../../../shared/local-storage.service';\nimport {\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n  TemplateRef,\n  ViewChild,\n} from '@angular/core';\nimport { MatSnackBar, MatSnackBarRef } from '@angular/material/snack-bar';\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\nimport { ToastrService } from 'ngx-toastr';\nimport { Observable, Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { ColorsService } from 'src/app/shared/colors/colors.service';\nimport { SpinnerService } from 'src/app/shared/spinner.service';\nimport { UtilsService } from 'src/app/shared/utils.service';\nimport { ModelsService } from '../models.service';\nimport { environment } from 'src/environments/environment';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { EdaReportComponent } from 'src/app/shared/components/eda-report/eda-report.component';\nconst Plotly = require('plotly.js-dist');\nexport interface Card {\n  title: string;\n  subtitle: string;\n  text: string;\n}\n@Component({\n  selector: 'app-cluster-expansion',\n  templateUrl: './cluster-expansion.component.html',\n  styleUrls: ['./cluster-expansion.component.scss'],\n})\nexport class ClusterExpansionComponent implements OnInit {\n  @Input() training: any;\n  @Input() model: any;\n  @Input() originalFileWithEdaDetails: any;\n  @Input() trainings: any;\n  @Output() updateTrainingModels = new EventEmitter<any>();\n  project: any;\n  @ViewChild(MatPaginator) set paginator(value: MatPaginator) {\n    this.dataSource.paginator = value;\n  }\n  dialogRef: MatDialogRef<any>;\n  obs: Observable<any>;\n  dataSource: MatTableDataSource<[]> = new MatTableDataSource();\n  pieOptions1: any = {\n    animate: {\n      duration: 1000,\n      enabled: true,\n    },\n    barColor: this._colors.byName('primary'),\n    trackColor: '#f2f2f2',\n    scaleColor: false,\n    lineWidth: 5,\n    size: 65,\n    lineCap: 'round',\n  };\n  public inputCluster;\n  /** Usubscription subject */\n  unsubscribe$ = new Subject<boolean>();\n  featuresArray: Array<any> = [];\n  /** Variables with default values */\n  backGround: string = '#ffffff';\n  foreGround: string = '#08509d';\n  showSpinner: boolean = false;\n  viewScatterPlot: boolean = false;\n  editMode = false;\n  snackBarRef: MatSnackBarRef<any>;\n  selectedFeature: Array<any> = [];\n  clusteringFeatures: any = [];\n  uniqueGraphDiv: string;\n  heatMapDiv: string;\n  featureImp: string;\n  decisionTreePlot: string;\n  showUpdateButton: boolean = false;\n  toggleView: boolean = true;\n  viewType: string = 'graph';\n  decisionTreeImage: SafeResourceUrl;\n  cardColor = ['#f1f8fe', '#fdf4e3', '#e7e3fd'];\n  showError;\n  hideHeatMap: boolean = true;\n  hideSummary: boolean = false;\n  settingActive: number = 1;\n  featureList: any = [];\n  clusterErrorType: any;\n  selectedCluster: any = null;\n\n  constructor(\n    public _utils: UtilsService,\n    private _spinner: SpinnerService,\n    private _toaster: ToastrService,\n    private _snackBar: MatSnackBar,\n    private _models: ModelsService,\n    private _colors: ColorsService,\n    private _sanitizer: DomSanitizer,\n    private _changeDetectorRef: ChangeDetectorRef,\n    private _dialog: MatDialog,\n    private _localStorage: LocalStorageService\n  ) { }\n\n  ngOnInit(): void {\n    this.project = this._localStorage.getItem('project');\n    this.hideSummary = false;\n    this.hideHeatMap = true;\n    this.model.showUpdateButton = false;\n    this.dataSource.data = this.model.modelMetaData.analysisInfo;\n    this.dataSource.paginator = this.paginator;\n    this._changeDetectorRef.detectChanges();\n    this.obs = this.dataSource.connect();\n    this.model.modelMetaData.clusteringGraphType = 'scatter';\n    this.featureImp = `${this.model.modelMetaData.algoName}`;\n    this.uniqueGraphDiv = `${this.model.modelMetaData.algoName}Plot`;\n    this.heatMapDiv = `${this.model.modelMetaData.algoName}PlotMap`;\n    this.clusteringFeatures = [];\n    this.clusterErrorType = typeof this.model.modelMetaData.analysisInfo;\n    // If decomposition=='pca' or factoranalysis, first priority\n    //  if (this.training.clusteringInfo.decomposition != 'none') {\n    //     // generate custom values for pca\n    //     for (let i = 0; i < this.training.clusteringInfo.components; i++) {\n    //       this.clusteringFeatures.push('component_' + i);\n    //     }\n    //   } else {\n    if (this.training.indepVariable.length) {\n      // Filter out numeric indepVariables\n      let feature = this.training.edaId.edaSummary.filter((data: any) => {\n        if (\n          data.dataType === 'Integer' ||\n          data.dataType === 'Categorical' ||\n          data.dataType === 'Decimal' ||\n          data.dataType === 'Text'\n        ) {\n          return data;\n        }\n      });\n      feature.map((data: any) => {\n        let found = this.training.indepVariable.find((indepVar: any) => {\n          return indepVar.colName === data.colName;\n        });\n        if (found && found !== 'undefined') {\n          // tslint:disable-next-line: no-string-literal\n          // return data['colName'];\n          this.clusteringFeatures.push(data);\n        }\n      });\n      this.featureList = this.clusteringFeatures;\n    }\n    // }\n  }\n\n  showGraphsSection(event: any): void {\n    if (event.tab.textLabel === 'Heat Map') {\n      this.plotHeatMap();\n    } else if (event.tab.textLabel === 'Decision Tree') {\n      this.plotDecisionTreePlot();\n    } else if (event.tab.textLabel === 'Feature Importance') {\n      this.viewType = 'graph';\n      this.plotFeatureImp();\n    }\n  }\n\n  featureSelectionChanged(dataItem) {\n    Plotly.purge(document.getElementById(this.uniqueGraphDiv));\n    if (dataItem.length && dataItem[0].dataType === 'Categorical') {\n      this.clusteringFeatures = dataItem;\n      this.selectedCluster = null;\n    } else if (dataItem.length && dataItem[0].dataType === 'Text') {\n      this.clusteringFeatures = dataItem;\n    } else if (\n      dataItem.length &&\n      dataItem[0].dataType !== 'Categorical' &&\n      dataItem[0].dataType !== 'Text'\n    ) {\n      this.clusteringFeatures = this.featureList.filter((item) => {\n        return item.dataType !== 'Categorical' && item.dataType !== 'Text';\n      });\n      this.selectedCluster = null;\n    } else {\n      this.clusteringFeatures = this.featureList;\n      this.selectedCluster = null;\n    }\n  }\n\n  /**\n   * plot feature imp plot\n   */\n  plotFeatureImp(): void {\n    let graphDiv: any = document.getElementById(this.featureImp);\n    let X: Array<number> = [];\n    let Y: Array<string> = [];\n    let graphData: Array<any> = [];\n    this.featuresArray = this.sortArryOFObjects(\n      this.model.modelMetaData.featureImportance,\n      'importance'\n    );\n    this.featuresArray.length > 15 ? (this.featuresArray = this.featuresArray.slice(0, 15)) : null;\n    this.featuresArray.forEach((item: any) => {\n      X.push(item.importance);\n      Y.push(item.colName);\n    });\n    // Deletes the graph data if already present\n    while (graphDiv?.data?.length > 0) {\n      Plotly.deleteTraces(graphDiv, [0]);\n    }\n    // Final graph object\n    graphData = [\n      {\n        type: 'bar',\n        x: X,\n        y: Y,\n        orientation: 'h',\n      },\n    ];\n    var layout = {\n      autosize: true,\n      yaxis: {\n        automargin: true,\n      },\n    };\n    Plotly.plot(graphDiv, graphData, layout);\n  }\n\n  /**\n   * Fetches the data to plot the graph\n   * @returns\n   */\n  visualiseCluster() {\n    if (this.selectedFeature.length == 0) {\n      this.showSnackBar('Please select at least one features', 'OK');\n      return;\n    } else if (this.selectedFeature.length > 2) {\n      this.showSnackBar('Please select only two features', 'OK');\n      return;\n    }\n    let analysisObj = [];\n    if (this.clusterErrorType !== 'string') {\n      this.model.modelMetaData.analysisInfo.map((element) => {\n        let a = {\n          clusterId: element.clusterId,\n          clusterName: element.clusterName,\n        };\n        analysisObj.push(a);\n      });\n    }\n    let tempFeature = [];\n    this.selectedFeature.map((item) => {\n      tempFeature.push(item.colName);\n    });\n    this._spinner.showSpinner();\n    let reqObj: any = {\n      algoName: this.model.modelMetaData.algoName,\n      selectedFeatures: tempFeature ? tempFeature : null,\n      indexPath: this.training.edaId.indexPath,\n      transformedDatasetPath: this.model.transformedDatasetPath,\n      modelPath: this.model.modelMetaData.modelPath,\n      trainPipeFileName: this.model.trainPipeFilePath,\n      rootFileName: this.originalFileWithEdaDetails.filename,\n    };\n    if (this.selectedFeature.length === 1) {\n      reqObj.graphType = 'featureDistribution';\n      reqObj.analysisInfo = analysisObj.length ? analysisObj : 'none';\n      reqObj.fileSchema = this.originalFileWithEdaDetails.fileSchema;\n    } else {\n      reqObj.graphType = 'scatter';\n    }\n    if (this.selectedCluster) {\n      reqObj.selectedCluster = this.selectedCluster;\n      reqObj.graphType = 'scatterText';\n    }\n    // API call\n    this._models\n      .visualiseGraph(this.training._id, this.model._id, reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res: any) => {\n          if (typeof res.graphContent !== 'string') {\n            this.showSpinner = true;\n            this.viewScatterPlot = false;\n            let graphDiv: any = document.getElementById(this.uniqueGraphDiv);\n            res.graphContent.layout.template.layout.title.xanchor = 'center';\n            res.graphContent.layout.template.layout.title.y = 0.9;\n            res.graphContent.layout.template.layout.title.x = 0.5;\n            res.graphContent.layout.template.layout.title.yanchor = 'top';\n            res.graphContent.layout.template.layout.xaxis.gridcolor = 'transparent';\n            res.graphContent.layout.template.layout.yaxis.gridcolor = 'transparent';\n            res.graphContent.layout.template.layout.yaxis.zerolinecolor = 'transparent';\n            res.graphContent.layout.xaxis.linecolor = 'black';\n            res.graphContent.layout.yaxis.linecolor = 'black';\n            Plotly.newPlot(graphDiv, res.graphContent.data, res.graphContent.layout);\n            this._spinner.stopSpinner();\n          } else if (res.graphContent.includes('.html')) {\n            // this._spinner.showSpinner();\n            this.openEdaReport({ projectId: this.project._id, fileName: res.graphContent });\n          } else {\n            this._spinner.stopSpinner();\n            this._toaster.error(res.graphContent, 'Model');\n          }\n        },\n        (err: Error) => {\n          this._spinner.stopSpinner();\n          this._toaster.error(err.message, 'Model');\n        }\n      );\n  }\n\n  /**\n   * Update cluster name in model collection\n   */\n  updateClusterData() {\n    this._spinner.showSpinner();\n    let analysisObj = [];\n    this.model.modelMetaData.analysisInfo.map((element) => {\n      let a = {\n        clusterId: element.clusterId,\n        clusterName: element.clusterName,\n      };\n      analysisObj.push(a);\n    });\n    let reqObj = {\n      analysisMap: analysisObj,\n      modelMetaData: this.model.modelMetaData,\n      modelId: this.model._id,\n    };\n    this._models\n      .updateModel(reqObj, this.model._id)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res: any) => {\n          this.trainings[0].models = this.trainings[0].models.map((data: any) => {\n            if (data._id === res._id) {\n              data.modelMetaData.analysisInfo = res.modelMetaData.analysisInfo;\n              data.modelMetaData.modelPath = res.modelMetaData.modelPath;\n              data.showUpdateButton = false;\n            }\n            return data;\n          });\n          this.updateTrainingModels.emit(this.trainings[0].models);\n          this.showUpdateButton = false;\n          this._spinner.stopSpinner();\n        },\n        (err: Error) => {\n          this._spinner.stopSpinner();\n          this._toaster.error(err.message, 'Model');\n        }\n      );\n  }\n\n  showSummary() {\n    this.hideSummary = false;\n    this.hideHeatMap = true;\n  }\n  /**\n   *  function to plot heat map for the clustering\n   */\n  plotHeatMap(): void {\n    let graphDiv: any = document.getElementById(this.heatMapDiv);\n    this._spinner.showSpinner();\n    this.hideSummary = true;\n    this.hideHeatMap = false;\n    let analysisObj = [];\n    this.model.modelMetaData.analysisInfo.map((element) => {\n      let a = {\n        clusterId: element.clusterId,\n        clusterName: element.clusterName,\n      };\n      analysisObj.push(a);\n    });\n    let reqObj = {\n      analysisInfo: analysisObj,\n      clusterStats: this.model.modelMetaData.clusterStats,\n    };\n    this._models\n      .clusterHeatMap(this.training._id, this.model._id, reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res: any) => {\n          Plotly.newPlot(graphDiv, res.graphContent.data, res.graphContent.layout);\n          this._spinner.stopSpinner();\n        },\n        (err: Error) => {\n          this._toaster.error(err?.message || 'Cannot generate heat map', 'Models');\n          this._spinner.stopSpinner();\n        }\n      );\n  }\n\n  /**\n   * Decision tree plot\n   */\n  plotDecisionTreePlot(): void {\n    this._spinner.showSpinner();\n    let analysisObj = [];\n    this.model.modelMetaData.analysisInfo.map((element) => {\n      let a = {\n        clusterId: element.clusterId,\n        clusterName: element.clusterName,\n      };\n      analysisObj.push(a);\n    });\n    let reqObj = {\n      analysisInfo: analysisObj,\n      treeModelOutput: this.model.modelMetaData.treeModelOutput,\n    };\n    this._models\n      .clusterDecisionTree(this.training._id, this.model._id, reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res: any) => {\n          if (res) {\n            this.showSpinner = true;\n            const base64 = `data:image/jpg;base64,${res.graphContent}`;\n            this.decisionTreeImage = this._sanitizer.bypassSecurityTrustResourceUrl(base64);\n            this._spinner.stopSpinner();\n          }\n        },\n        (err: Error) => {\n          this._toaster.error(err?.message || 'Cannot generate decision tree graph', 'Models');\n          this._spinner.stopSpinner();\n        }\n      );\n  }\n\n  /**\n   * download decision tree\n   */\n  downloadDecisionTree(): void {\n    this._spinner.showSpinner();\n    let analysisObj = [];\n    this.model.modelMetaData.analysisInfo.map((element) => {\n      let a = {\n        clusterId: element.clusterId,\n        clusterName: element.clusterName,\n      };\n      analysisObj.push(a);\n    });\n    let reqObj = {\n      analysisInfo: analysisObj,\n      operation: 'download',\n      treeModelOutput: this.model.modelMetaData.treeModelOutput,\n    };\n    // API call\n    this._models\n      .clusterDecisionTree(this.training._id, this.model._id, reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res) => {\n          this._spinner.stopSpinner();\n          if (res.graphContent) {\n            window.open(\n              `${environment.serverBaseUrl}/api/projects/${this.model.projectId}/decisionTree/download/${res.graphContent}`,\n              '_blank'\n            );\n          } else {\n            this._toaster.error(res.graphContent || 'Cannot download decision tree', 'Models');\n          }\n        },\n        (err: HttpErrorResponse) => {\n          this._toaster.error(err.error?.message || 'Cannot download decision tree', 'Models');\n          this._spinner.stopSpinner();\n        }\n      );\n  }\n\n  /**\n   * function to toggle between visualization\n   */\n  togglePlot(): void {\n    if (this.model.modelMetaData.clusteringGraphType === 'featureImp') {\n      this.viewType = 'graph';\n      this.plotFeatureImp();\n    } else if (this.model.modelMetaData.clusteringGraphType === 'scatter') {\n      this.viewScatterPlot = true;\n    } else if (this.model.modelMetaData.clusteringGraphType === 'decisionTree') {\n      this.plotDecisionTreePlot();\n    }\n  }\n\n  /**\n   * function for hide/show button\n   */\n  onFocusOut(editedItem, index) {\n    if (editedItem[0] === ' ') {\n      this.showSnackBar('Cluster name cannot contain space', 'OK');\n      return;\n    }\n    if (editedItem === '') {\n      this.showSnackBar('Cluster name cannot be blank', 'OK');\n      return;\n    }\n    if (editedItem.length > 20) {\n      this.showSnackBar('Cluster name max length is 20 characters', 'OK');\n      return;\n    }\n    let form = /^[^\\s][A-Za-z0-9_\\- ]+$/;\n    if (form.test(editedItem) === false) {\n      this.showSnackBar('Invalid cluster name.Only _ and - are supported', 'OK');\n      return;\n    }\n    if (typeof +editedItem === 'number' && !isNaN(+editedItem)) {\n      this.showSnackBar('Cluster name can not have only numeric value', 'OK');\n      return;\n    }\n    let clusterName = this.model.modelMetaData.analysisInfo.filter((item) => {\n      return item.clusterName === editedItem;\n    });\n    if (clusterName.length > 0) {\n      this.model.showUpdateButton = false;\n      this.showSnackBar('Cluster name cannot be duplicate', 'OK');\n    } else {\n      this.model.modelMetaData.analysisInfo[index].clusterName = editedItem;\n      this.model.showUpdateButton = true;\n    }\n  }\n\n  viewClusterFaq(clusterTemplate: TemplateRef<any>, Data?: any) {\n    this._spinner.showSpinner();\n    this.dialogRef = this._dialog.open(clusterTemplate, {\n      // height: 'auto',\n      width: '80%',\n    });\n    this._spinner.stopSpinner();\n  }\n\n  /**\n   * Closes the opened modal by sending the data or without data\n   */\n  closeModal(data?: any): void {\n    this.dialogRef.close(data);\n  }\n  /**\n   * If the report type is EDA, then preview the EDA report in modal\n   * @param reportData\n   */\n  openEdaReport(edaReportData: any): void {\n    /** Opens the eda report component modal to render report */\n    this._dialog\n      .open(EdaReportComponent, {\n        data: {\n          moduleName: 'cluster',\n          edaReportData: edaReportData,\n        },\n        maxHeight: '95vh',\n        minWidth: '95vw',\n      })\n      .afterOpened()\n      .subscribe((any) => {\n        this._spinner.stopSpinner();\n      });\n  }\n\n  /**\n   * Checks the value is number or string and returns booleans\n   * @param val\n   * @returns\n   */\n  checkIsNumber = (val: any) => (typeof val === 'string' ? false : true);\n\n  /**\n   * Renders the snackbar\n   */\n  showSnackBar(message: string, button: string): void {\n    this.snackBarRef = this._snackBar.open(message, button, {\n      horizontalPosition: 'right',\n      verticalPosition: 'bottom',\n    });\n  }\n\n  /**\n   * Function to sort an array of objects as per the key\n   * @param {*} items input data - array\n   * @param {*} key key for comparison\n   */\n  sortArryOFObjects(items: any, key: any): any {\n    items.sort((a: any, b: any) => {\n      return b[key] - a[key];\n    });\n    return items;\n  }\n\n  /**\n   * Perform operations when the module is destroyed\n   */\n  ngOnDestroy() {\n    this.unsubscribe$.next(false);\n    this.unsubscribe$.unsubscribe();\n    if (this.dataSource) {\n      this.dataSource.disconnect();\n    }\n  }\n}\n","<div class=\"fluid-container\">\n  <!-- HEADER -->\n  <mat-card class=\"heading\">\n    <mat-card-header>\n      <div mat-card-avatar>\n        <i class=\"fas fa-cubes folder-icon\"></i>\n      </div>\n      <mat-card-title>\n        <h3 class=\"heading-title ml-0\">Models Leaderboard</h3>\n      </mat-card-title>\n      <!-- Buttons -->\n      <span *ngIf=\"trainingList.length\" class=\"ml-auto\">\n        <button mat-button class=\"text-primary\" [matTooltip]=\"_utils.getTootip('uploadScoringData')\"\n          *ngIf=\"project.type === 'predictive_modeling' && modelSupported?.length\"\n          (click)=\"openScoringDataTemplate(scoringDataTemplate)\">\n          Upload Scoring Data\n        </button>\n        <button mat-button class=\"text-primary\" [matTooltip]=\"_utils.getTootip('quickPrediction')\"\n          *ngIf=\"project.type !== 'timeseries' && modelSupported?.length\" (click)=\"openQuickPredictionDialog()\">\n          Quick Prediction\n        </button>\n        <button mat-button class=\"text-primary\" [matTooltip]=\"_utils.getTootip('compareModels')\"\n          *ngIf=\"project.type === 'predictive_modeling' && trainings[0]?.models?.length > 1\"\n          (click)=\"openGraphDialog('compareModel')\" [routerLink]=\"\" [disabled]=\"\n            appType === 'saas' &&\n            !user?.roles?.includes('super_admin') &&\n            !user?.roles?.includes('admin') &&\n            !allowedModelOptions.includes('compareModels')\n          \">\n          <span matBadge [matBadgeIcon]=\"allowedModelOptions.includes('compareModels') ? '' : 'ENT'\"\n            matBadgeOverlap=\"false\" [ngClass]=\"\n              appType === 'enterprise' ||\n              (appType === 'saas' &&\n                (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) ||\n              allowedModelOptions.includes('compareModels')\n                ? ''\n                : 'text-muted disable-Btn'\n            \">Compare Models</span>\n        </button>\n        <!-- <a\n          [matTooltip]=\"_utils.getTootip('timeVsAccuracy')\"\n          *ngIf=\"project.type === 'predictive_modeling'\"\n          [routerLink]=\"\"\n          (click)=\"openGraphDialog('timeAccuracy')\"\n        >\n          Time vs Accuracy <span class=\"mx-2 text-muted\">|</span>\n        </a> -->\n        <button mat-button class=\"text-primary\" [matTooltip]=\"_utils.getTootip('featureScore')\"\n          [hidden]=\"trainings[0]?.predictiveModelingInfo.featureSelectionMethod === 'none'\"\n          *ngIf=\"project.type === 'predictive_modeling'\" (click)=\"openGraphDialog('featureScore')\" [routerLink]=\"\">\n          Feature Score\n        </button>\n        <button mat-button class=\"text-primary\" [matTooltip]=\"_utils.getTootip('pipeline')\" [routerLink]=\"\"\n          (click)=\"openPipelineDialog()\" [disabled]=\"\n            appType === 'saas' &&\n            !user?.roles?.includes('super_admin') &&\n            !user?.roles?.includes('admin') &&\n            user?.planType === 'basic' &&\n            !allowedModelOptions.includes('pipeline')\n          \">\n          <span matBadge [matBadgeIcon]=\"allowedModelOptions.includes('pipeline') ? '' : 'PRO'\" matBadgeOverlap=\"false\"\n            [ngClass]=\"\n              appType === 'enterprise' ||\n              (appType === 'saas' &&\n                (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) ||\n              allowedModelOptions.includes('pipeline')\n                ? ''\n                : 'text-muted disable-Btn'\n            \">Pipeline</span>\n        </button>\n      </span>\n    </mat-card-header>\n  </mat-card>\n\n  <!-- FIRST TIME -->\n  <h4 *ngIf=\"!trainingList.length\" class=\"text-center mt-5 font-weight-normal\">\n    You haven't trained any models yet,\n    <a class=\"text-decoration-none\" href=\"#\" [routerLink]=\"['/project/training']\">train it now.</a>\n  </h4>\n\n  <!-- CPU LOAD -->\n  <!-- <div *ngIf=\"trainingList.length\" class=\"col-md-3\">\n    <h5 class=\"showCPU-Load text-center\" (click)=\"showCPULoad = !showCPULoad\">\n      <mat-icon class=\"chevron-icon\" *ngIf=\"!showCPULoad\">expand_more</mat-icon>\n      <mat-icon class=\"chevron-icon\" *ngIf=\"showCPULoad\">expand_less</mat-icon>\n      {{ showCPULoad ? 'Hide CPU Load' : 'Show CPU Load' }}\n    </h5>\n  </div>\n  <div *ngIf=\"showCPULoad && trainingList.length\" class=\"d-flex justify-content-center text-center\">\n    <div\n      class=\"cpuLoadeasypie-chart mt-2\"\n      easypiechart\n      *ngFor=\"let cpu of cpuLoad; index as i\"\n      [options]=\"pieOptions1\"\n      percent=\"{{ cpu.CPU | number: '1.2-2' }}\"\n    >\n      <span>{{ cpu.CPU | number: '1.2-2' }}%</span>\n    </div>\n    <hr />\n  </div> -->\n\n  <!-- MODEL INFO SELECT and FILTER -->\n  <div class=\"row mt-5\" *ngIf=\"trainings[0] && filtersArray && currentModelMeta\">\n    <!-- LABEL (dataset name) -->\n    <div class=\"dataset-name col-md-6 d-flex align-items-center\">\n      <i class=\"{{\n          showTrainingSpinner ? 'fas fa-cog fa-spin fa-2x mr-3' : 'fas fa-check-circle fa-2x mr-3'\n        }}\"></i>\n      <div>\n        <h5>{{ trainings[0]?.models?.length }}/{{ totalAlgos }} Models generated</h5>\n        <h5 class=\"mb-0 flex-column text-break\">\n          {{\n          currentModelMeta.name\n          ? (currentModelMeta.fileName | dropFileExtension: 'file')\n          : (currentModelMeta.fileName | dropFileExtension: 'file')\n          }}\n        </h5>\n      </div>\n    </div>\n    <div class=\"d-flex align-items-center justify-content-end col-md-6\">\n      <!-- SELECT (trainings) -->\n      <div class=\"mx-2\">\n        <mat-form-field id=\"removeBtmPadding\" appearance=\"outline\">\n          <mat-label>Select a training</mat-label>\n          <mat-select [formControl]=\"selectedTrainingControl\" (selectionChange)=\"trainingChanged($event.value)\"\n            required>\n            <mat-option *ngFor=\"let dataItem of trainingList; index as i\" [value]=\"dataItem._id\">Training {{ i + 1 }} -\n              {{ dataItem.createdAt | date: 'dd/MM/yy h:mm a' }}\n            </mat-option>\n          </mat-select>\n          <mat-error *ngIf=\"\n              selectedTrainingControl.hasError('required') &&\n              (selectedTrainingControl.dirty || selectedTrainingControl.touched)\n            \">\n            Please select any one training.\n          </mat-error>\n        </mat-form-field>\n      </div>\n      <!-- BUTTON (delete training) -->\n      <button matTooltip=\"Delete selected training\" mat-icon-button (click)=\"deleteTraining()\" class=\"delete-training\">\n        <i class=\"far fa-trash-alt\"></i>\n      </button>\n      <!-- SELECT (filter) -->\n      <div class=\"ml-2\" *ngIf=\"project.type === 'predictive_modeling' && filter\">\n        <mat-form-field id=\"removeBtmPadding\" appearance=\"outline\">\n          <mat-label>Select a filter</mat-label>\n          <mat-select [(ngModel)]=\"filter[0]\" (selectionChange)=\"filterChanged($event.value)\">\n            <mat-option *ngFor=\"let type of filtersArray\" [value]=\"type.id\">\n              {{ type.name }}\n            </mat-option>\n          </mat-select>\n        </mat-form-field>\n      </div>\n      <!-- ICON (sort) -->\n      <div class=\"ml-1\" *ngIf=\"project.type === 'predictive_modeling' && filter\">\n        <button *ngIf=\"filterSortOrder === 'asc'\" (click)=\"filterSortOrderChanged('desc')\" mat-icon-button\n          class=\"sort-icon\">\n          <i class=\"fas fa-sort-amount-up\"></i>\n        </button>\n        <button *ngIf=\"filterSortOrder === 'desc'\" (click)=\"filterSortOrderChanged('asc')\" mat-icon-button\n          class=\"sort-icon\">\n          <i class=\"fas fa-sort-amount-down\"></i>\n        </button>\n      </div>\n    </div>\n    <!-- TARGET -->\n    <div class=\"ml-3 mt-4\" *ngIf=\"project.type !== 'clustering'\">\n      <mat-chip-list>\n        <mat-chip>\n          <mat-icon class=\"mr-2\">noise_aware</mat-icon>{{ target }}\n        </mat-chip>\n      </mat-chip-list>\n    </div>\n  </div>\n\n  <!-- ACCORDION (models list) -->\n  <div *ngIf=\"trainings.length\" class=\"row mt-2\">\n    <div *ngFor=\"let training of trainings; trackBy: trackByFn\" class=\"col-md-12\">\n      <mat-accordion *ngFor=\"let model of training?.models; index as i\" class=\"custom-accordion\" multi>\n        <!-- BADGE (recommended) -->\n        <i *ngIf=\"\n            i === 0 &&\n            filter[0] === 'overallScore' &&\n            filterSortOrder === 'desc' &&\n            project.type === 'predictive_modeling'\n          \" class=\"recommended-tick fas fa-check-circle fa-2x mr-2\"></i>\n        <!-- [style.background-color]=\"\n          i === 0 &&\n          filter[0] === 'overallScore' &&\n          filterSortOrder === 'desc' &&\n          project.type === 'predictive_modeling'\n            ? 'linen'\n            : ''\n        \" -->\n        <!-- {{model.graphSupported?.status === false || model.graphSupported?.isDeleted === true}} -->\n        <mat-expansion-panel class=\"my-3\" [hideToggle]=\"true\" [disabled]=\"model.graphSupported?.status === false || model.graphSupported?.isDeleted === true\">\n          <mat-expansion-panel-header [collapsedHeight]=\"'105px'\" [expandedHeight]=\"'105px'\">\n            <!-- MODEL TITLE -->\n            <mat-panel-title>\n              <!-- PIE -->\n              <div *ngIf=\"project.type === 'predictive_modeling'\" class=\"easypie-chart mt-2\" easypiechart\n                [options]=\"pieOptions1\" [percent]=\"model.modelMetaData.holdout.overallScore * 100 | number: '1.2-2'\"\n                [matTooltip]=\"_utils.getTootip('overallScore')\">\n                <span>{{ model.modelMetaData.holdout.overallScore * 100 | number: '1.2-2' }}%</span>\n              </div>\n              <!-- ALGO NAME -->\n              <h4 class=\"mx-3 mb-0 font-weight-normal\">{{ i + 1 }}</h4>\n              <h4 [style.color]=\"\n                  i === 0 &&\n                  filter[0] === 'overallScore' &&\n                  filterSortOrder === 'desc' &&\n                  project.type === 'predictive_modeling'\n                    ? '#08509d'\n                    : ''\n                \" class=\"mb-0 font-weight-normal\">\n                {{ training.name }} - {{ model.modelMetaData.algoName }}\n                <!-- LABEL (training time) -->\n                <span class=\"m-0 ml-1 h5\" *ngIf=\"model.modelMetaData.timeElapsed\"\n                  [matTooltip]=\"_utils.getTootip('trainingTime')\">\n                  ({{ model.modelMetaData.timeElapsed | number: '1.2-2' }} sec)\n                </span>\n                <!-- ICON (info) -->\n                <i (click)=\"getAlgoDouUrl(model.modelMetaData.algoName); $event.stopPropagation()\"\n                  style=\"color: lightslategray\" class=\"fas fa-info-circle ml-2\"\n                  matTooltip=\"Click to view algoirthm info\"></i>\n              </h4>\n            </mat-panel-title>\n            <!-- ACTION BUTTONS -->\n            <mat-panel-description>\n              <button [matTooltip]=\"_utils.getTootip('rejectedGroups')\" *ngIf=\"project.type === 'timeseries' && training.edaId.isMultipleTimeseries && rejectedGroupList?.length\" \n              (click)=\"openRejectedroup(rejectedGroupTemplate, training, model);\n                                $event.stopPropagation()\n                              \" [disabled]=\"model.graphSupported?.status === false || model.graphSupported?.isDeleted === true\" mat-icon-button>\n                <mat-icon>receipt</mat-icon>\n              </button> \n              <!-- BUTTON (report analysis) -->\n              <button [matTooltip]=\"_utils.getTootip('analysisReport')\" *ngIf=\"project.type !== 'predictive_modeling'\"\n                (click)=\"\n                  openGraphDialog('analysis', training, model, 'development');\n                  $event.stopPropagation()\n                \" [disabled]=\"model.graphSupported?.status === false || model.graphSupported?.isDeleted === true\" mat-icon-button>\n                <mat-icon>insert_chart_outlined</mat-icon>\n              </button>\n              <!-- BUTTON (retrain) -->\n              <button *ngIf=\"!project.useGPU && project.type === 'predictive_modeling'\"\n                (click)=\"openFormDialog('retrain', training, model); $event.stopPropagation()\" mat-icon-button\n                [disabled]=\"\n                  (appType === 'saas' &&\n                  !user?.roles?.includes('super_admin') &&\n                  !user?.roles?.includes('admin') &&\n                  !allowedModelOptions.includes('retrain')) ||\n                  (model.graphSupported?.status === false || model.graphSupported?.isDeleted === true)\n                \">\n                <mat-icon matBadge [matBadgeIcon]=\"allowedModelOptions.includes('retrain') ? '' : 'ENT'\"\n                  [matTooltip]=\"_utils.getTootip('retrain')\" [ngClass]=\"\n                    appType === 'enterprise' ||\n                    (appType === 'saas' &&\n                      (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) ||\n                    allowedModelOptions.includes('retrain')\n                      ? ''\n                      : 'disable-Btn'\n                  \">\n                  loop</mat-icon>\n              </button>\n              <!-- BUTTON (model tuning) -->\n              <button *ngIf=\"project.type !== 'clustering' && (model.modelMetaData.algoName !=='Random Forest' && model.modelMetaData.algoName !== 'Linear Regression Ts')\"\n                (click)=\"openFormDialog('tuning', training, model); $event.stopPropagation()\" mat-icon-button\n                matTooltip=\"Hyper Parameter Tuning (HPT)\" [disabled]=\"(model.graphSupported?.status === false || model.graphSupported?.isDeleted === true) || model.graphSupported?.hpt === false\">\n                <mat-icon>replay</mat-icon>\n              </button>\n              <div *ngIf=\"!project.useGPU\">\n                <!-- BUTTON (download toolkit) -->\n                <button (click)=\"downloadModel('multi-model', training, model); $event.stopPropagation()\"\n                  mat-icon-button [disabled]=\"\n                    (appType === 'saas' &&\n                    !user?.roles?.includes('super_admin') &&\n                    !user?.roles?.includes('admin') &&\n                    !allowedModelOptions.includes('downloadModel')) ||\n                    (model.graphSupported?.status === false || model.graphSupported?.isDeleted === true)\n                  \">\n                  <mat-icon matTooltip=\"Download model for multi-model container\" matBadge\n                    [matBadgeIcon]=\"allowedModelOptions.includes('downloadModel') ? '' : 'ENT'\" [ngClass]=\"\n                      appType === 'enterprise' ||\n                      (appType === 'saas' &&\n                        (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) ||\n                      allowedModelOptions.includes('downloadModel')\n                        ? ''\n                        : 'disable-Btn'\n                    \">sim_card_download</mat-icon>\n                </button>\n                <!-- BUTTON (deploy model) -->\n                <button mat-icon-button (click)=\"\n                    deployModel(deployModelTemplate, 'multi-model', training, model);\n                    $event.stopPropagation()\n                  \" [disabled]=\"\n                    (appType === 'saas' &&\n                    !user?.roles?.includes('super_admin') &&\n                    !user?.roles?.includes('admin') &&\n                    !allowedModelOptions.includes('deployModel')) ||\n                    (model.graphSupported?.status === false|| model.graphSupported?.isDeleted === true)\n                  \">\n                  <mat-icon matTooltip=\"Deploy model\" matBadge\n                    [matBadgeIcon]=\"allowedModelOptions.includes('deployModel') ? '' : 'ENT'\" [ngClass]=\"\n                      appType === 'enterprise' ||\n                      (appType === 'saas' &&\n                        (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) ||\n                      allowedModelOptions.includes('deployModel')\n                        ? ''\n                        : 'disable-Btn'\n                    \">\n                    cloud_upload</mat-icon>\n                </button>\n                <!-- BUTTON (delete) -->\n                <button matTooltip=\"Delete model\" (click)=\"deleteModel(model, training); $event.stopPropagation()\"\n                  mat-icon-button [disabled]=\"model.graphSupported?.status === false || model.graphSupported?.isDeleted === true\">\n                  <mat-icon>delete</mat-icon>\n                </button>\n              </div>\n              <!-- MORE OPT MENU -->\n              <button *ngIf=\"\n                  project.type === 'predictive_modeling' &&\n                  (model.graphSupported?.advancedOpt.featureCoeff == true ||\n                    model.graphSupported?.advancedOpt.featureImp == true ||\n                    model.graphSupported?.advancedOpt.decisionTreeGraph == true ||\n                    model.graphSupported?.advancedOpt.advancedAlgo == true)\n                \" mat-icon-button [matMenuTriggerFor]=\"menu\" (click)=\"$event.stopPropagation()\"\n                [disabled]=\"model.graphSupported?.status === false || model.graphSupported?.isDeleted === true\">\n                <mat-icon>more_vert</mat-icon>\n              </button>\n              <mat-menu #menu=\"matMenu\">\n                <!-- FEATURE COEFF -->\n                <button [matTooltip]=\"_utils.getTootip('featureCoefficient')\"\n                  *ngIf=\"model.graphSupported?.advancedOpt?.featureCoeff\"\n                  (click)=\"openGraphDialog('featureCoeff', training, model)\" mat-menu-item>\n                  <mat-icon>leaderboard</mat-icon>\n                  <span>Feature coefficient graph</span>\n                </button>\n                <!-- FEATURE IMP -->\n                <button [matTooltip]=\"_utils.getTootip('featureImportance')\"\n                  *ngIf=\"model.graphSupported?.advancedOpt?.featureImp\"\n                  (click)=\"openGraphDialog('featureImp', training, model)\" mat-menu-item>\n                  <mat-icon>leaderboard</mat-icon>\n                  <span>Feature importance</span>\n                </button>\n                <!-- DECISION TREE -->\n                <button [matTooltip]=\"_utils.getTootip('decisionTree')\"\n                  *ngIf=\"model.graphSupported?.advancedOpt?.decisionTreeGraph == true\"\n                  (click)=\"openGraphDialog('decisionTree', training, model)\" mat-menu-item [disabled]=\"\n                    appType === 'saas' &&\n                    !user?.roles?.includes('super_admin') &&\n                    !user?.roles?.includes('admin') &&\n                    user?.planType === 'basic' &&\n                    !allowedModelOptions.includes('decisionTree')\n                  \">\n                  <span matBadge [matBadgeIcon]=\"allowedModelOptions.includes('decisionTree') ? '' : 'PRO'\"\n                    matBadgeOverlap=\"false\">\n                    <mat-icon [ngClass]=\"\n                        appType === 'enterprise' ||\n                        (appType === 'saas' &&\n                          (user?.roles?.includes('super_admin') ||\n                            user?.roles?.includes('admin'))) ||\n                        allowedModelOptions.includes('decisionTree')\n                          ? ''\n                          : 'text-muted'\n                      \">\n                      account_tree</mat-icon>Decision tree graph\n                  </span>\n                </button>\n                <!-- ADV ALGO -->\n                <button matTooltip=\"Advanced Algorithms\" *ngIf=\"\n                    !project.useGPU &&\n                    !training.isMultilabel &&\n                    model.graphSupported?.advancedOpt?.advancedAlgo == true\n                  \"\n                  [hidden]=\"model.isAlgoSupported == false || (this.disableBagging == true && this.disableBoosting == true)\"\n                  (click)=\"isAdvAlogSupported(training, model)\" mat-menu-item [disabled]=\"\n                    appType === 'saas' &&\n                    !user?.roles?.includes('super_admin') &&\n                    !user?.roles?.includes('admin') &&\n                    user?.planType === 'basic' &&\n                    !allowedModelOptions.includes('advanceAlgorithm')\n                  \">\n                  <span matBadge [matBadgeIcon]=\"allowedModelOptions.includes('advanceAlgorithm') ? '' : 'PRO'\"\n                    matBadgeOverlap=\"false\">\n                    <mat-icon [ngClass]=\"\n                        appType === 'enterprise' ||\n                        (appType === 'saas' &&\n                          (user?.roles?.includes('super_admin') ||\n                            user?.roles?.includes('admin'))) ||\n                        allowedModelOptions.includes('advanceAlgorithm')\n                          ? ''\n                          : 'text-muted disable-Btn'\n                      \">\n                      assignment</mat-icon>Advance algorithm\n                  </span>\n                </button>\n              </mat-menu>\n            </mat-panel-description>\n          </mat-expansion-panel-header>\n          <!-- EXPANSION BODY -->\n          <!-- PREDICTIVE MODELING -->\n          <div *ngIf=\"project.type === 'predictive_modeling'\">\n            <app-predictive-expansion [training]=\"training\" [model]=\"model\"\n              [originalFileWithEdaDetails]=\"originalFileWithEdaDetails\" [trainings]=\"trainings\"\n              (updateTrainingModels)=\"updateTrainingModels($event)\">\n            </app-predictive-expansion>\n          </div>\n          <!-- TIMESERIES -->\n          <div *ngIf=\"project.type === 'timeseries'\">\n            <app-timeseries-expansion [training]=\"training\" [model]=\"model\"\n              [originalFileWithEdaDetails]=\"originalFileWithEdaDetails\"\n              (updateTrainingModels)=\"updateTrainingModels($event)\"></app-timeseries-expansion>\n          </div>\n          <!-- CLUSTERING -->\n          <div *ngIf=\"project.type === 'clustering'\">\n            <app-cluster-expansion [training]=\"training\" [model]=\"model\" [trainings]=\"trainings\"\n              [originalFileWithEdaDetails]=\"originalFileWithEdaDetails\"\n              (updateTrainingModels)=\"updateTrainingModels($event)\">\n            </app-cluster-expansion>\n          </div>\n        </mat-expansion-panel>\n      </mat-accordion>\n    </div>\n  </div>\n</div>\n\n<!-- Download Model -->\n<ng-template #downloadToolkit>\n  <h2 mat-dialog-title>Download Model</h2>\n  <mat-dialog-content class=\"mat-typography\">\n    <mat-checkbox class=\"example-margin\" [formControl]=\"psType\">\n      For PsLite (optional)</mat-checkbox>\n  </mat-dialog-content>\n\n  <mat-dialog-actions class=\"justify-content-end m-auto\">\n    <button mat-stroked-button mat-dialog-close>Close</button>\n    <button mat-flat-button mat-dialog-close class=\"btn-primary\" (click)=\"downloadModelFile()\">\n      Download\n    </button>\n  </mat-dialog-actions>\n</ng-template>\n\n<!-- Deploy Model -->\n<ng-template #deployModelTemplate>\n  <h2 mat-dialog-title>Deploy Model</h2>\n  <mat-dialog-content class=\"mat-typography\">\n    <mat-form-field appearance=\"outline\">\n      <mat-label>Host List</mat-label>\n      <mat-select [(ngModel)]=\"selectedHost\" #deployModel=\"ngModel\" required>\n        <mat-option *ngFor=\"let host of hostlist\" [value]=\"host\">{{ host.hostName }}</mat-option>\n      </mat-select>\n    </mat-form-field>\n    <div *ngIf=\"selectedHost\" class=\"table-responsive mt-50\">\n      <table class=\"table table-bordered hover\">\n        <colgroup>\n          <col width=\"30%\" />\n          <col width=\"40%\" />\n        </colgroup>\n        <thead>\n          <tr>\n            <th>Host Name</th>\n            <th>Host Url</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>{{ selectedHost.hostName }}</td>\n            <td>{{ selectedHost.url }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <!-- <mat-checkbox class=\"example-margin\" [formControl]=\"deployPsType\">\n      For PsLite (optional)</mat-checkbox> -->\n  </mat-dialog-content>\n\n  <mat-dialog-actions class=\"justify-content-end m-auto\">\n    <button mat-stroked-button mat-dialog-close>Close</button>\n    <button mat-flat-button mat-dialog-close [disabled]=\"deployModel.invalid\" class=\"btn-primary\"\n      (click)=\"deployModelFile()\">\n      Deploy\n    </button>\n  </mat-dialog-actions>\n</ng-template>\n\n<!-- scoring Data -->\n<ng-template #scoringDataTemplate>\n  <h2 mat-dialog-title>Upload Scoring Data</h2>\n  <mat-dialog-content class=\"mat-typography preview-data-section mb-3\">\n    <mat-form-field appearance=\"outline\" class=\"mt-5\">\n      <mat-label>Select encoding</mat-label>\n      <mat-select [(ngModel)]=\"fileEncoding\" required>\n        <mat-option value=\"utf_8\">utf_8</mat-option>\n        <mat-option value=\"latin_1\">latin_1</mat-option>\n      </mat-select>\n    </mat-form-field>\n    <div class=\"mt-2\">\n      <input class=\"mb-2\" type=\"file\" name=\"file\" accept=\".csv\"\n        (change)=\"handleFileInput($event.target.files, fileEncoding)\" /><br />\n      <mat-hint class=\"mt-2\">Only .csv file is allowed.</mat-hint>\n    </div>\n  </mat-dialog-content>\n  <mat-dialog-actions class=\"justify-content-end m-auto\">\n    <button mat-stroked-button mat-dialog-close color=\"basic\">Close</button>\n    <button mat-flat-button mat-dialog-close class=\"btn-primary\" (click)=\"uploadScoringData()\">\n      Upload\n    </button>\n  </mat-dialog-actions>\n</ng-template>\n\n<ng-template #rejectedGroupTemplate>\n  <h2 mat-dialog-title>Rejected Timeseries Group List</h2>\n  <mat-dialog-content class=\"mat-typography\">\n    <div>\n      <ol class=\"list-group list-group-numbered\">\n          <li *ngFor=\"let item of rejectedGroupList\" class=\"bullet-font list-group-item\">\n            <p class=\"bullet-font m-0 capitalize\">\n            {{item}}\n            </p>\n          </li>\n      </ol>\n    </div>\n  </mat-dialog-content>\n  <mat-dialog-actions class=\"justify-content-end m-auto\">\n    <button mat-stroked-button mat-dialog-close>Close</button>\n  </mat-dialog-actions>\n</ng-template>","import { HttpErrorResponse } from '@angular/common/http';\nimport { environment } from 'src/environments/environment';\nimport { UtilsService } from './../../shared/utils.service';\nimport { GraphsDialogHandlerComponent } from './graphs-dialog-handler/graphs-dialog-handler.component';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { Router } from '@angular/router';\nimport { SocketIoService } from './../../core/socket-io.service';\nimport { FormsDialogHandlerComponent } from './forms-dialog-handler/forms-dialog-handler.component';\nimport { TrainingService } from './../training/training.service';\nimport { DataService } from './../data/data.service';\nimport { Component, OnInit, TemplateRef } from '@angular/core';\nimport { LocalStorageService } from 'src/app/shared/local-storage.service';\nimport { ModelsService } from './models.service';\nimport { SpinnerService } from 'src/app/shared/spinner.service';\nimport { ColorsService } from '../../shared/colors/colors.service';\nimport { Validators, FormControl } from '@angular/forms';\nimport { ToastrService } from 'ngx-toastr';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { QuickPredictionComponent } from './quick-prediction/quick-prediction.component';\nimport { PipelineComponent } from './pipeline/pipeline.component';\nimport { ProgressSpinnerMode } from '@angular/material/progress-spinner';\nimport { ThemePalette } from '@angular/material/core';\nimport { includes } from 'lodash';\nimport { EdaService } from '../eda/eda.service';\nconst Plotly = require('plotly.js-dist');\ndeclare var $: any;\nconst swal = require('sweetalert');\n@Component({\n  selector: 'app-models',\n  templateUrl: './models.component.html',\n  styleUrls: ['./models.component.scss'],\n})\nexport class ModelsComponent implements OnInit {\n  /** Usubscription subject */\n  unsubscribe$ = new Subject<boolean>();\n  ALGORITHMS_ARRAY: Array<any>;\n  /** Form instance */\n  selectedTrainingControl = new FormControl('', Validators.required);\n\n  /** Radial progress pie setting */\n  pieOptions1: any = {\n    animate: {\n      duration: 1000,\n      enabled: true,\n    },\n    barColor: this._colors.byName('success'),\n    trackColor: '#f2f2f2',\n    scaleColor: false,\n    lineWidth: 7,\n    size: 80,\n    lineCap: 'round',\n  };\n  fileToUpload: any;\n  allowedPSFileUploadSize: number;\n  dialogRef: MatDialogRef<any>;\n  fileEncoding: any;\n  /** sort and Rak models */\n  values: Array<any> = [];\n  trainings: Array<any> = [];\n  clusteringFeatures: Array<any> = [];\n  filter: Array<any> = ['overallScore'];\n  pipelineTasks: any;\n  filterSortOrder: string = 'desc';\n  data: Array<any> = [\n    {\n      key: 'Model comparison',\n      values: '',\n    },\n  ];\n\n  // Progress spinner settings\n  color: ThemePalette = 'primary';\n  mode: ProgressSpinnerMode = 'indeterminate';\n  downloadToolkitDiameter = 50;\n  psType = new FormControl('', Validators.required);\n  downloadFile = new FormControl('', Validators.required);\n  psTypeDef: any;\n\n  //Download Model Config\n  downloadTraining: any;\n  downloadModelInfo: any;\n  downloadAlgoType: any;\n  downloadPlatform: any;\n  downloadProject: any;\n  downloadFileId: any;\n  downloadNotebookInputFileId: any;\n  downloadNotebooks: any;\n  downloadPsType: any;\n  target: any;\n  /**Deploy Model */\n  deployPsType = new FormControl('', Validators.required);\n  hostlist: Array<any> = [];\n  deployObj: any;\n  deployReqObj: any;\n  resDeployfile: any;\n  modelDeployed: any;\n\n  deployPsTypeflag: any;\n  deployFileId: any;\n  deployTraining: any;\n  deployModelInfo: any;\n  deployAlgoType: any;\n  deployPlatform: any;\n  deployProject: any;\n  deployNotebookInputFileId: any;\n  deployNotebooks: any;\n  selectedHost: any;\n\n  showCPULoad: boolean;\n\n  showTrainingSpinner: boolean = false;\n  erroCount: number = 0;\n  totalAlgos: number = 0;\n\n  project: any;\n  user: any;\n  trainingList: Array<any> = [];\n  previousTraining: any;\n  currentModelMeta: any;\n  algorithmsList: any;\n  ModelsList: any;\n  originalFileDetails: any;\n  originalFileWithEdaDetails: any;\n  notebookInputFileDetails: any;\n  filtersArray: Array<any> = [];\n  forcastHtmlData: Array<any> = [];\n  selectedFeatures: Array<any> = [];\n  sourceType: string;\n  predictionResult: boolean;\n  cpuLoad: any;\n  uploadScoringUrl: string;\n  isMulticlass: Boolean = false;\n  // restriction variables\n  appType: string = environment.appType;\n  allowedModelOptions: Array<any> = null;\n  isAdvanceAlgoSupport: boolean = true;\n  modelSupported: any;\n  disableBagging: Boolean = false;\n  disableBoosting: Boolean = false;\n  rejectedGroupList: any;\n  constructor(\n    private _localStorage: LocalStorageService,\n    private _models: ModelsService,\n    private _spinner: SpinnerService,\n    private _toaster: ToastrService,\n    private _data: DataService,\n    private _colors: ColorsService,\n    private _training: TrainingService,\n    private _window: Window,\n    private _dialog: MatDialog,\n    private _socket: SocketIoService,\n    private _router: Router,\n    private _snackBar: MatSnackBar,\n    public _utils: UtilsService,\n    private _snackbar: MatSnackBar,\n    private _eda: EdaService,\n  ) {}\n\n  async ngOnInit(): Promise<any> {\n    this._spinner.showSpinner();\n    this.initTrainingSocket();\n    this.initDataDriftSocket();\n    this.initCpuLoadSocket();\n    this.project = this._localStorage.getItem('project');\n    this.user = this._localStorage.getItem('user');\n    this.allowedPSFileUploadSize = this.user?.psFeatures?.allowedPSFileUploadSize || 50;\n    this.ALGORITHMS_ARRAY = await this._utils.getAlgorithms();\n    this.ALGORITHMS_ARRAY.filter((item) => {\n      if (\n        (item.name == 'Bagging Classifier' || item.name == 'Bagging Regressor') &&\n        item.status === false\n      ) {\n        this.disableBagging = true;\n      }\n      if (\n        (item.name == 'Boosting Classifier' || item.name == 'Boosting Regressor') &&\n        item.status === false\n      ) {\n        this.disableBoosting = true;\n      }\n      return item;\n    });\n    await this.getTrainingsList();\n    this.fileEncoding = 'utf_8';\n    this.allowedModelOptions = this.user?.psFeatures?.allowedFeaturesList || [];\n  }\n\n  /**\n   * Fetches all the trainings list\n   * @param projectId\n   */\n  async getTrainingsList(): Promise<any> {\n    this._models\n      .getTrainingList(this.project._id)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        async (res) => {\n          if (res.length) {\n            this.trainingList = res;\n            this.previousTraining = res[0];\n            this.selectedTrainingControl.setValue(res[0]._id);\n            this.setFilterList(res[0].algoType);\n            this.selectedTrainingControl.value\n              ? await this.showSelectedTrainingModels(res[0])\n              : null;\n            this.currentModelMeta = {\n              name: 'Training 1',\n              trainingId: res[0]._id,\n              createdAt: res[0].createdAt,\n              originalFileId: res[0].originalFileId,\n              fileName: res[0].metaInfo.fileName ? res[0].metaInfo.fileName : '',\n            };\n\n            // this.activate();`\n            if (res[0].models[0].modelMetaData) {\n              this.sortAndRankModels(res[0]);\n              res[0].problemType === 'clustering' ? this.genClusteringFeatures(res[0]) : null;\n              this.trainings = [res[0]];\n              if (\n                this.trainings[0].classNames &&\n                this.trainings[0].classNames.length > 2 &&\n                this.trainings[0].isMultilabel == false\n              ) {\n                this.isMulticlass = true;\n              }\n              this.target = this.trainings[0].depVariable;\n              this.supportedGraphList();\n              // ! Need to understand the below code flow - for why and what it is used\n              // fetchProjectDetails().$promise.then(\n              //   function (resp) {\n              //     ProjectCore.setProject(resp[0]);\n              //     initModels(resp[0].type, this.trainings.models);\n              //     this.modelErrorCount = resp[0].projectStatusDetails.length;\n              //     if (\n              //       this.modelErrorCount + this.trainings[0].modelMetaData.length ==\n              //       this.trainings[0].algorithms.length\n              //     ) {\n              //       this.showTrainingSpinner = false;\n              //     }\n              //   },\n              //   function (err) {\n              //     this.showLoading = false;\n              //     toaster.pop(\n              //       'error',\n              //       $scope.app.name,\n              //       'Oops! something went wrong while fetching project details.',\n              //       2000\n              //     );\n              //   }\n              // );\n            }\n            this._spinner.stopSpinner();\n          } else {\n            this._spinner.stopSpinner();\n          }\n        },\n        (err: HttpErrorResponse) => {\n          this._spinner.stopSpinner();\n          this._toaster.error(err.error?.message || 'Cannot fetch trainings list', 'Models');\n        }\n      );\n  }\n\n  /**\n   * Fetches the seleted training models\n   */\n  async showSelectedTrainingModels(selectedTraining: any): Promise<any> {\n    // API call\n    selectedTraining.models = await this.getModelsList(this.selectedTrainingControl.value).catch(\n      (e: Error) => {\n        this._toaster.error(`Error - ${e.message}`, 'Models');\n        this._spinner.stopSpinner();\n      }\n    );\n    this.trainings = [selectedTraining];\n    // API call\n    this.originalFileDetails = await this.getOriginalFileDetails(\n      this.trainings[0].originalFileId,\n      this.trainings[0].projectId\n    ).catch((e: Error) => {\n      this._toaster.error(`Error - ${e.message}`, 'Models');\n      this._spinner.stopSpinner();\n    });\n    // API call\n    if (this.originalFileDetails.notebookInputFileId) {\n      this.notebookInputFileDetails = await this.getNotebookInputFileDetails(\n        this.originalFileDetails.projectId,\n        this.originalFileDetails.notebookInputFileId\n      ).catch((e: Error) => {\n        this._toaster.error(`Error - ${e.message}`, 'Models');\n        this._spinner.stopSpinner();\n      });\n    }\n    // API call\n    let fileWithEda: any = await this.getChildDataSets(\n      this.trainings[0].projectId,\n      this.trainings[0].originalFileId\n    ).catch((e: Error) => {\n      this._toaster.error(`Error - ${e.message}`, 'Models');\n      this._spinner.stopSpinner();\n    });\n    this.originalFileWithEdaDetails = fileWithEda[0];\n    this.totalAlgos =\n      this.trainings[0].algorithms.length <= this.trainings[0].models.length\n        ? this.trainings[0].models.length\n        : this.trainings[0].algorithms.length;\n    this.totalAlgos < this.trainings[0].algorithms.length\n      ? (this.showTrainingSpinner = true)\n      : (this.showTrainingSpinner = false);\n    if (this.trainings[0].edaId.isMultipleTimeseries) {\n      this.rejectedGroupList = await this.getTimeseriesList(this.trainings[0], this.trainings[0].models[0]);\n      this.rejectedGroupList = this.rejectedGroupList[0].rejectedGroupList;\n    }\n    this.sortAndRankModels(this.trainings[0]);\n    this.supportedGraphList();\n    // this.trainings[0].models.forEach(element => {\n    this.isAdvanceAlgoSupported();\n    // });\n    this.trainings[0].problemType === 'clustering'\n      ? this.genClusteringFeatures(this.trainings[0])\n      : null;\n    this._spinner.stopSpinner();\n  }\n\n  /**\n   * Generate features for clustering\n   * @param {*} trainingData\n   */\n  genClusteringFeatures(trainingData: any): void {\n    this.clusteringFeatures = [];\n    // If decomposition == 'pca' or factoranalysis, first priority\n    if (trainingData.clusteringInfo.decomposition !== 'none') {\n      //generate custom values for pca\n      for (let i = 0; i < trainingData.clusteringInfo.components; i++) {\n        this.clusteringFeatures.push('component_' + i);\n      }\n    } else {\n      if (trainingData.clusteringInfo.numericFeatures.length && trainingData.indepVariable.length) {\n        //Filter out numeric indepVariables\n        this.clusteringFeatures = trainingData.clusteringInfo.numericFeatures.map((data: any) => {\n          let found: any = trainingData.indepVariable.find(\n            (indepVar: any) => indepVar.colName === data.colName\n          );\n          if (found) {\n            return data.colName;\n          }\n        });\n      }\n    }\n  }\n\n  /**\n   * Fetches details of selected training if changed, from training history drop-down\n   * @param {*} trainingId\n   */\n  async trainingChanged(trainingId: string): Promise<any> {\n    this._spinner.showSpinner();\n    let trainingData: any;\n    this.forcastHtmlData = [];\n    this.selectedFeatures = [];\n    this.sourceType = 'file';\n    this.trainingList.some((item: any) => {\n      item._id === trainingId ? (trainingData = item) : false;\n    });\n    // ! Need to understand the usage of below code and refactored it\n    // if (!trainingData) {\n    //   return;\n    // }\n    // API call\n    this.originalFileDetails = this.getOriginalFileDetails(\n      trainingData.originalFileId,\n      trainingData.projectId\n    ).catch((e: Error) => {\n      this._toaster.error(`Error - ${e.message}`, 'Models');\n      this._spinner.stopSpinner();\n    });\n    // API call\n    if (this.originalFileDetails.notebookInputFileId) {\n      this.notebookInputFileDetails = await this.getNotebookInputFileDetails(\n        this.originalFileDetails.projectId,\n        this.originalFileDetails.notebookInputFileId\n      ).catch((e: Error) => {\n        this._toaster.error(`Error - ${e.message}`, 'Models');\n        this._spinner.stopSpinner();\n      });\n    }\n    // API call\n    let fileWithEda: any = await this.getChildDataSets(\n      trainingData.projectId,\n      trainingData.originalFileId\n    ).catch((e: Error) => {\n      this._toaster.error(`Error - ${e.message}`, 'Models');\n      this._spinner.stopSpinner();\n    });\n    this.originalFileWithEdaDetails = fileWithEda[0];\n    this.currentModelMeta = {\n      name: 'Training ',\n      trainingId: trainingData._id,\n      createdAt: trainingData.createdAt,\n      originalFileId: trainingData.originalFileId,\n      fileName: trainingData.metaInfo.fileName ? trainingData.metaInfo.fileName : '',\n    };\n    this.uploadScoringUrl = `${environment.serverBaseUrl}/api/training/${this.currentModelMeta.trainingId}/scoring/data`;\n    // API call\n    trainingData.models = await this.getModelsList(this.selectedTrainingControl.value).catch(\n      (e: Error) => {\n        this._toaster.error(`Error - ${e.message}`, 'Models');\n        this._spinner.stopSpinner();\n      }\n    );\n    this.trainings = [trainingData];\n    this.target = trainingData.depVariable;\n    if (this.trainings[0].edaId.isMultipleTimeseries) {\n      this.rejectedGroupList = await this.getTimeseriesList(this.trainings[0], this.trainings[0].models[0]);\n      this.rejectedGroupList =  this.rejectedGroupList[0].rejectedGroupList;\n      }\n    this.supportedGraphList();\n    // this.trainings[0].models.forEach(element => {\n    this.isAdvanceAlgoSupported();\n    //  });\n    this.setFilterList(trainingData.algoType);\n    this.sortAndRankModels(this.trainings[0]);\n    this.initModels(this.project.type, this.trainings[0].models);\n    this.totalAlgos =\n      this.trainings[0].algorithms.length <= this.trainings[0].models.length\n        ? this.trainings[0].models.length\n        : this.trainings[0].length;\n    this.predictionResult = false;\n    // ! Need to understand the usage of below code and refactored it\n    // Reset the file input component\n    // var fileElement = angular.element('#predictionFile');\n    // if (fileElement) {\n    //   angular.element(fileElement).val(null);\n    //   if (!$scope.$$phase) {\n    //     $scope.$apply();\n    //   }\n    // }\n    this._spinner.stopSpinner();\n  }\n\n  getTimeseriesList(training,modelInfo): Promise<any> {\n    let reqObj = {\n      modelId: modelInfo._id,\n    }\n    return this._eda\n      .getTimeseriesGroup(reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .toPromise();\n  }\n\n  /**\n   * function to check supported graph for particular algo\n   */\n  supportedGraphList(): any {\n    this.trainings[0].models.forEach((element) => {\n      let string = element.modelMetaData.algoName.toLowerCase();\n      let algoName = [];\n      let subString1 = 'bagging';\n      let subString2 = 'boosting';\n      if (string.includes(subString1)) {\n        if (this.trainings[0].algoType == 'classification') {\n          algoName = ['Bagging Classifier'];\n        } else if (this.trainings[0].algoType === 'regression') {\n          algoName = ['Bagging Regressor'];\n        }\n        let graphSupported = this._utils.getAlgorithmSupported(algoName, this.trainings[0], string);\n        if (graphSupported !== null) {\n          element['graphSupported'] = graphSupported;\n        }\n      } else if (string.includes(subString2)) {\n        if (this.trainings[0].algoType == 'classification') {\n          algoName = ['Boosting Classifier'];\n        } else if (this.trainings[0].algoType === 'regression') {\n          algoName = ['Boosting Regressor'];\n        }\n        let graphSupported = this._utils.getAlgorithmSupported(algoName, this.trainings[0], string);\n        if (graphSupported !== null) {\n          element['graphSupported'] = graphSupported;\n        }\n      } else {\n        let modelName = element.modelMetaData.algoName;\n        modelName = modelName.split('-', 1);\n        let graphSupported = modelName.length\n          ? this._utils.getAlgorithmSupported(modelName, this.trainings[0], string)\n          : this._utils.getAlgorithmSupported(\n              element.modelMetaData.algoName,\n              this.trainings[0],\n              string\n            );\n        if (graphSupported !== null) {\n          element['graphSupported'] = graphSupported;\n        }\n      }\n    });\n    this.modelSupported = this.trainings[0].models.filter((item) => {\n      return item.graphSupported.status === true;\n    });\n   // console.log(this.trainings);\n  }\n\n  /**\n   * function to disable bagging and boosting for already bagged and boosted algo\n   */\n  isAdvanceAlgoSupported() {\n    this.trainings[0].models.forEach((model: any) => {\n      let string = model.modelMetaData.algoName.toLowerCase();\n      let subString1 = 'bagging';\n      let subString2 = 'boosting';\n\n      if (string.includes(subString1)) {\n        model['isAlgoSupported'] = false;\n      } else if (string.includes(subString2)) {\n        model['isAlgoSupported'] = false;\n      } else {\n        model['isAlgoSupported'] = true;\n      }\n    });\n  }\n  /**\n   * Sorts the models and rank them as per the score\n   * @param training\n   */\n  sortAndRankModels(training: any): void {\n    /**\n     * Sorting is required only for predictive_modeling problem type\n     */\n    if (this.project.type !== 'predictive_modeling') {\n      return null;\n    }\n    this.values.length = 0;\n    training.models.sort((a: any, b: any) => {\n      if (\n        this.filter[0] === 'Mean Absolute Error' ||\n        this.filter[0] === 'Root Mean Square Error' ||\n        this.filter[0] === 'Median Square Error' ||\n        this.filter[0] === 'Mean Square Error' ||\n        this.filter[0] === 'Mean Square Log Error'\n      ) {\n        let aa = a.modelMetaData.holdout.losses.filter((pilot: any) => {\n          return pilot.name === this.filter[0];\n        });\n        let bb = b.modelMetaData.holdout.losses.filter((pilot: any) => {\n          return pilot.name === this.filter[0];\n        });\n        if (this.filterSortOrder === 'desc') {\n          return bb[0].value * 1 - aa[0].value * 1;\n        } else {\n          return aa[0].value * 1 - bb[0].value * 1;\n        }\n      }\n      /**\n       * Sorting the models in desc/asc order based on the selected filter\n       */\n      if (this.filterSortOrder === 'desc') {\n        if (this.filter[0] === 'timeElapsed') {\n          return b.modelMetaData[this.filter[0]] * 1 - a.modelMetaData[this.filter[0]] * 1;\n        } else {\n          return (\n            b.modelMetaData.holdout[this.filter[0]] * 1 -\n            a.modelMetaData.holdout[this.filter[0]] * 1\n          );\n        }\n      } else {\n        if (this.filter[0] === 'timeElapsed') {\n          return a.modelMetaData[this.filter[0]] * 1 - b.modelMetaData[this.filter[0]] * 1;\n        } else {\n          return (\n            a.modelMetaData.holdout[this.filter[0]] * 1 -\n            b.modelMetaData.holdout[this.filter[0]] * 1\n          );\n        }\n      }\n    });\n\n    training.models.forEach((data: any) => {\n      if (data.modelMetaData.holdout) {\n        data.modelMetaData.overallScore = data.modelMetaData.holdout.overallScore;\n        this.values.push({\n          label: training.name + ' - ' + data.modelMetaData.algoName,\n          value: data.modelMetaData.overallScore * 1,\n        });\n      }\n    });\n    this.data[0].values = this.values;\n    this.initModels(this.project.type, training.models);\n  }\n\n  openScoringDataTemplate(scoringDataTemplate: TemplateRef<any>, Data?: any) {\n    this.dialogRef = this._dialog.open(scoringDataTemplate, {\n      // height: 'auto',\n      width: '50%',\n    });\n  }\n  /**\n   * Stores the file data to be uploaded into the variable\n   * @param inputFile files object\n   */\n  handleFileInput(inputFile: any, fileEncoding) {\n    const ext = inputFile[0].name.split('.').pop();\n    if (inputFile && ['csv'].includes(ext)) {\n      if (inputFile[0].size < this.allowedPSFileUploadSize * 1024 * 1024) {\n        this.fileToUpload = inputFile[0];\n      } else {\n        this._snackBar.open(\n          'File size should be less than ' + this.allowedPSFileUploadSize + 'Mb',\n          'OK',\n          {\n            horizontalPosition: 'right',\n            verticalPosition: 'bottom',\n          }\n        );\n      }\n    } else {\n      this.fileToUpload = '';\n      this._snackbar.open(`.${ext} file type is not supported`, 'OK');\n    }\n  }\n  /**\n   * Uploads the scoring data\n   */\n  uploadScoringData(): void {\n    this._spinner.showSpinner();\n    if (this.fileToUpload) {\n      this._models\n        .uploadScoringData(this.fileToUpload, this.currentModelMeta.trainingId, this.fileEncoding)\n        .pipe(takeUntil(this.unsubscribe$))\n        .subscribe(\n          (res) => {\n            if (res) {\n              this._toaster.success('Scoring data uploaded successfully', 'Models');\n            } else {\n              this._toaster.error('Cannot upload scoring data', 'Models');\n            }\n            this.fileToUpload = '';\n          },\n          (err: any) => {\n            this._toaster.error(`Server Error - ${err.error.message}`, 'Models');\n            this._spinner.stopSpinner();\n          }\n        );\n    } else {\n      this._snackbar.open('Please select a .csv file for prediction', 'OK', {\n        horizontalPosition: 'right',\n        verticalPosition: 'bottom',\n      });\n    }\n\n    this._spinner.stopSpinner();\n    // Upload scoring data\n    // uploaderScoring = this.uploaderScoring = new FileUploader({\n    //   url: '/api/training/' + this.currentModelMeta.trainingId + '/scoring/data',\n    //   removeAfterUpload: true,\n    // });\n    // uploaderScoring.filters.push({\n    //   name: 'fileTypeChecker',\n    //   fn: function (item /*{File|FileLikeObject}*/, options) {\n    //     var type = null;\n    //     if (item.type) {\n    //       type = '|' + item.type.slice(item.type.lastIndexOf('/') + 1) + '|';\n    //     } else {\n    //       var temp = item.name.split('.');\n    //       type = temp[temp.length - 1];\n    //     }\n    //     return (\n    //       '|csv|vnd.ms-excel|zip|x-zip-compressed|vnd.openxmlformats-officedocument.spreadsheetml.sheet|pkl|pk|pl|pickle|'.indexOf(\n    //         type\n    //       ) !== -1\n    //     );\n    //   },\n    // });\n    // uploaderScoring.onWhenAddingFileFailed = function (\n    //   item /*{File|FileLikeObject}*/,\n    //   filter,\n    //   options\n    // ) {\n    //   toaster.pop('error', $scope.app.name, 'Please upload a csv file.', 3000);\n    // };\n    // uploaderScoring.onAfterAddingFile = function (fileItem) {\n    //   if (this.uploaderScoring.queue[0]) {\n    //     this.uploaderScoring.queue[0].upload();\n    //     this.uploaderScoring.onCompleteItem = function (fileItem, response, status, headers) {\n    //       if (status == 200) {\n    //         toaster.pop('success', $scope.app.name, 'Scoring data uploaded successfully', 2000);\n    //       } else {\n    //         toaster.pop('error', $scope.app.name, response.message, 4000);\n    //         return 0;\n    //       }\n    //       this.uploader.queue.length = 0;\n    //       var fileElement = angular.element('#scoringMetricsFile');\n    //       angular.element(fileElement).val(null);\n    //     };\n    //   }\n    // };\n  }\n\n  /**\n   * Deletes the selected training by trggering API, with alert confirmation\n   */\n  deleteTraining(): void {\n    swal({\n      title: 'Are you sure?',\n      text: 'You will not be able to recover this training!',\n      icon: 'warning',\n      buttons: {\n        cancel: {\n          text: 'Cancel',\n          value: false,\n          visible: true,\n          className: '',\n        },\n        confirm: {\n          text: 'Yes, delete it!',\n          value: true,\n          visible: true,\n          className: 'bg-danger',\n        },\n      },\n    }).then((isConfirm: boolean) => {\n      if (isConfirm) {\n        this._spinner.showSpinner();\n        let isLastTraining: boolean = this.trainingList.length === 1 ? true : false;\n        this._training\n          .deleteTraining(this.selectedTrainingControl.value, this.project._id, isLastTraining)\n          .pipe(takeUntil(this.unsubscribe$))\n          .subscribe(\n            async (res) => {\n              if (res) {\n                this.trainingList = this.trainingList.filter(\n                  (training: any) => training._id !== this.selectedTrainingControl.value\n                );\n                if (this.trainingList.length) {\n                  this.selectedTrainingControl.setValue(this.trainingList[0]._id);\n                  this.trainingList[0].models = await this.getModelsList(\n                    this.selectedTrainingControl.value\n                  ).catch((e: Error) => {\n                    this._toaster.error(`Error - ${e.message}`, 'Models');\n                    this._spinner.stopSpinner();\n                  });\n                  this.trainings = [this.trainingList[0]];\n                  this.sortAndRankModels(this.trainings[0]);\n                } else {\n                  this.selectedTrainingControl.setValue(null);\n                  this.trainings = [];\n                }\n                this._toaster.success('Training deleted sucessfully', 'Models');\n                this._spinner.stopSpinner();\n              } else {\n                this._toaster.error('Cannot fetch models list', 'Models');\n                this._spinner.stopSpinner();\n              }\n            },\n            (err) => {\n              this._spinner.stopSpinner();\n              this._toaster.error('Server Error', 'Models');\n            }\n          );\n      }\n    });\n  }\n\n  /**\n   * Function to delete a selected model from DB\n   * @param {*} modelInfo selected model details\n   * @param {*} training model's training details\n   */\n  deleteModel(modelInfo: any, training: any): void {\n    swal({\n      title: 'Are you sure?',\n      text: 'You will not be able to recover this model!',\n      icon: 'warning',\n      buttons: {\n        cancel: {\n          text: 'Cancel',\n          value: null,\n          visible: true,\n          className: '',\n        },\n        confirm: {\n          text: 'Yes, delete it!',\n          value: true,\n          visible: true,\n          className: 'bg-danger',\n        },\n      },\n    }).then((isConfirm: boolean) => {\n      if (isConfirm) {\n        this._spinner.showSpinner();\n        this._models\n          .deleteModel(training._id, modelInfo._id)\n          .pipe(takeUntil(this.unsubscribe$))\n          .subscribe(\n            (res) => {\n              if (res) {\n                this.trainings[0].models = this.trainings[0].models.filter(\n                  (model: any) => model._id !== modelInfo._id\n                );\n                this.trainings[0].algorithms = this.trainings[0].algorithms.filter(\n                  (algorithm: any) => modelInfo.modelMetaData.algoName !== algorithm\n                );\n                this.totalAlgos -= 1;\n                this.sortAndRankModels(this.trainings[0]);\n                this._toaster.success('Model deleted sucessfully', 'Models');\n                this._spinner.stopSpinner();\n              } else {\n                this._toaster.error('Cannot delete a model', 'Models');\n                this._spinner.stopSpinner();\n              }\n            },\n            (err) => {\n              this._spinner.stopSpinner();\n              this._toaster.error('Server Error', 'Models');\n            }\n          );\n      }\n    });\n  }\n\n  /**\n   * Checks if decision tree is supported for the selected model\n   * @param {*} algoname selected algo name\n   * @param {*} isMultilabel true/false\n   */\n  isDecisionTreeSupported(algoname: string, isMultilabel: boolean): boolean {\n    let algoName: any = algoname.split('-');\n    let x: any =\n      [\n        'Decision Tree Regression',\n        'Random Forest Regression',\n        'Decision Tree Classification',\n        'Random Forest Classification',\n        'Extra Tree Classification',\n        'Ensemble Extra Trees Classification',\n        'XGBoost Classification',\n        'XGBoost Regression',\n        'LightGBM Classification',\n        'LightGBM Regression',\n      ].includes(algoName[0]) && !isMultilabel;\n\n    if (algoName.includes('Bagging') || algoName.includes('Boosting')) {\n      let advAlgoSupported: any = [\n        'Decision Tree Regression',\n        'Decision Tree Classification',\n        'Extra Tree Classification',\n      ].includes(algoName[0]);\n      x = advAlgoSupported ? true : false;\n    }\n    return x;\n  }\n\n  /**\n   * Checks if advance algorithms is supported for the selected model\n   * @param modelInfo\n   * @returns\n   */\n  isAdvAlogSupported(training: any, model: any): any {\n    let algo: Array<string> = model.modelMetaData.algoName.split('-');\n    let index: number = [\n      'Passive Aggressive Classification',\n      'MLP Classification',\n      'NearestCentroid Classification',\n      'Artificial Neural Network Classification',\n      'Artificial Neural Network Regression',\n    ].indexOf(algo[0]);\n    if (index !== -1) {\n      if (\n        model.modelMetaData.algoName.includes('Bagging') ||\n        model.modelMetaData.algoName.includes('Boosting')\n      ) {\n        this._snackBar.open('Advanced option is not avilable for this model', 'OK', {\n          horizontalPosition: 'right',\n          verticalPosition: 'bottom',\n        });\n      } else {\n        this._snackBar.open('Advanced option is not avilable for this model', 'OK', {\n          horizontalPosition: 'right',\n          verticalPosition: 'bottom',\n        });\n      }\n    } else if (this.disableBagging === true || this.disableBoosting === true) {\n      this.disableBagging === true\n        ? this._snackBar.open('Bagging Algorithm is disabled', 'OK', {\n            horizontalPosition: 'right',\n            verticalPosition: 'bottom',\n          })\n        : '';\n      this.disableBoosting === true\n        ? this._snackBar.open('Boosting Algorithm is disabled', 'OK', {\n            horizontalPosition: 'right',\n            verticalPosition: 'bottom',\n          })\n        : '';\n      this.openFormDialog('advAlgo', training, model);\n    } else {\n      this.openFormDialog('advAlgo', training, model);\n    }\n  }\n\n  /**\n   * Deploys the model\n   * @param deployModelTemplate\n   * @param platform\n   * @param training\n   * @param modelInfo\n   */\n  deployModel(\n    deployModelTemplate: TemplateRef<any>,\n    platform: string,\n    training?: any,\n    modelInfo?: any\n  ): void {\n    this._spinner.showSpinner();\n    this.selectedHost = '';\n    this._dialog.open(deployModelTemplate, {\n      minWidth: '50vw',\n    });\n    //Lists the hosts\n    this.listHost();\n\n    this.deployPsTypeflag = '';\n    // if (this.deployPsType.value) {\n    //   this.deployPsTypeflag = \"pslite\";\n    // }\n\n    if (modelInfo.modelMetaData.hasOwnProperty('reTrainFileId')) {\n      this.deployFileId = modelInfo['reTrainFileId'];\n    } else {\n      this.deployFileId = training['originalFileId'];\n    }\n\n    this.deployObj = {\n      training: training,\n      modelInfo: modelInfo,\n      selectedHost: this.selectedHost,\n      algoType: this.findAlgoType(modelInfo.modelMetaData.algoName),\n      platform: platform,\n      project: this.project,\n      fileId: this.deployFileId,\n      notebooks: this.originalFileDetails.notebooks ? this.originalFileDetails.notebooks : '',\n      notebookInputFileId: this.originalFileDetails.notebookInputFileId\n        ? this.originalFileDetails.notebookInputFileId\n        : '',\n      psType: this.deployPsTypeflag,\n    };\n\n    this.deployReqObj = {\n      Host: this.selectedHost,\n      projectId: this.project._id,\n      projectType: this.project.type,\n      modelId: modelInfo._id,\n    };\n    this._spinner.stopSpinner();\n  }\n\n  openRejectedroup(rejectedGroupTemplate: TemplateRef<any>,\n  training?: any,\n  modelInfo?: any\n  ): void {\n              this._dialog.open(rejectedGroupTemplate, {\n                maxWidth: '40vw',\n                minWidth: '40vw',\n              });\n  }\n  /**\n   * Deploys the model\n   */\n  async deployModelFile(): Promise<any> {\n    // API call\n    this.resDeployfile = await this.deployModelService(this.deployObj).catch((e: any) => {\n      this._toaster.error(e.error?.message || 'Model deployment failed', 'Models');\n      this._spinner.stopSpinner();\n    });\n    if (this.resDeployfile) {\n      this.modelDeployed = await this.deployModelPost(this.deployReqObj)\n        .then((res) => {\n          if (res) {\n            this._toaster.success(res.message || 'Model is deployed sucessfully', 'Models');\n          }\n        })\n        .catch((e: any) => {\n          this._toaster.error(e.error.message || 'Model deployment failed', 'Models');\n          this._spinner.stopSpinner();\n        });\n    }\n  }\n\n  deployModelPost(obj: any): Promise<any> {\n    return this._models.deployModelPost(obj).pipe(takeUntil(this.unsubscribe$)).toPromise();\n  }\n\n  deployModelService(obj: any): Promise<any> {\n    return this._models\n      .preDeployModel(obj, this.selectedHost)\n      .pipe(takeUntil(this.unsubscribe$))\n      .toPromise();\n  }\n\n  /**\n   * Fetches the host list\n   */\n  listHost(): void {\n    this._models\n      .getHostList()\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (list) => {\n          if (list) {\n            //let result = {};\n            list.forEach((value, key) => {\n              if (value.hasOwnProperty('hostName')) {\n                this.hostlist[key] = value;\n              }\n            });\n            //this.hostlist = result;\n          } else {\n            this._toaster.error('Cannot fetch hosts', 'Models');\n            this._spinner.stopSpinner();\n          }\n        },\n        (err) => {\n          this._spinner.stopSpinner();\n          this._toaster.error('Server Error', 'Models');\n        }\n      );\n  }\n\n  /**\n   * Function to find algo type - regression/classification\n   * @param {*} algoName - algo full name\n   */\n  findAlgoType(algoName: any): any {\n    var algoSplit = algoName.split('-')[0];\n    var algoType = this.ALGORITHMS_ARRAY.filter((algorithm: any) => algorithm.name === algoSplit)[0]\n      .type;\n    return algoType;\n  }\n\n  /**\n   * Handles the dynamic form dialog as per the type\n   * @param platform\n   */\n  downloadModel(platform: string, training?: any, modelInfo?: any) {\n    this._spinner.showSpinner();\n    this.downloadPsType = '';\n    // if (this.psType.value) {\n    //   this.downloadPsType = \"pslite\";\n    // }\n\n    if (modelInfo.modelMetaData.hasOwnProperty('reTrainFileId')) {\n      this.downloadFileId = modelInfo['reTrainFileId'];\n    } else {\n      this.downloadFileId = training['originalFileId'];\n    }\n\n    this.downloadAlgoType = this.findAlgoType(modelInfo.modelMetaData.algoName);\n    this.downloadNotebooks = this.originalFileDetails.notebooks\n      ? this.originalFileDetails.notebooks\n      : '';\n    this.downloadNotebookInputFileId = this.originalFileDetails.notebookInputFileId\n      ? this.originalFileDetails.notebookInputFileId\n      : '';\n    this.downloadTraining = training;\n    this.downloadModelInfo = modelInfo;\n\n    this.downloadPlatform = platform;\n    this.downloadProject = this.project;\n    this.downloadModelFile();\n    this._spinner.stopSpinner();\n  }\n\n  /**\n   * Downloads the model\n   */\n  downloadModelFile() {\n    window.open(\n      environment.serverBaseUrl +\n        '/api/training/' +\n        this.downloadTraining._id +\n        '/models/' +\n        this.downloadModelInfo._id +\n        '/download?ag=' +\n        this.downloadModelInfo.modelMetaData.algoName +\n        '&algoType=' +\n        this.downloadAlgoType +\n        '&pf=' +\n        this.downloadPlatform +\n        '&projectType=' +\n        this.downloadProject.type +\n        '&projectName=' +\n        this.downloadProject.name +\n        '&reTrainFileId=' +\n        this.downloadFileId +\n        '&notebookInputFileId=' +\n        this.downloadNotebookInputFileId +\n        '&notebooks=' +\n        this.downloadNotebooks +\n        '&psType=' +\n        this.downloadPsType\n    );\n  }\n\n  /**\n   * Fetches original input file details of a particular training\n   * @param {*} originalFileId\n   * @param {*} projectId\n   */\n  getOriginalFileDetails(originalFileId: string, projectId: string): Promise<any> {\n    return this._data\n      .getMyFileData(projectId, originalFileId)\n      .pipe(takeUntil(this.unsubscribe$))\n      .toPromise();\n  }\n\n  /**\n   * Fetchs the child datasets\n   * @param projectId\n   * @param originalFileId\n   */\n  getChildDataSets(projectId: string, originalFileId: string): Promise<any> {\n    return this._data\n      .getAllChildDatasets(projectId, originalFileId)\n      .pipe(takeUntil(this.unsubscribe$))\n      .toPromise();\n  }\n\n  /**\n   * Fetchs all the models list\n   * @param projectId\n   * @param originalFileId\n   */\n  getModelsList(selectedTrainingId: string): Promise<any> {\n    return this._models\n      .getModelsList(selectedTrainingId)\n      .pipe(takeUntil(this.unsubscribe$))\n      .toPromise();\n  }\n\n  /**\n   * Fetches notebook input file details\n   * @param {*} projectId\n   * @param {*} notebookInputFileId\n   */\n  getNotebookInputFileDetails(projectId: string, notebookInputFileId: string): Promise<any> {\n    return this._data\n      .getMyFileData(projectId, notebookInputFileId)\n      .pipe(takeUntil(this.unsubscribe$))\n      .toPromise();\n  }\n\n  /**\n   * Handles the dynamic form dialog as per the type and opens it\n   * @param type\n   * @param trainingInfo\n   * @param modelInfo\n   */\n  openFormDialog(type: string, trainingInfo?: any, modelInfo?: any): void {\n    this._dialog\n      .open(FormsDialogHandlerComponent, {\n        minWidth: '60vw',\n        maxWidth: '60vw',\n        data: {\n          type: type,\n          trainingInfo: trainingInfo,\n          modelInfo: modelInfo,\n          trainings: this.trainings,\n          originalFileWithEdaDetails: this.originalFileWithEdaDetails,\n          currentModelMeta: this.currentModelMeta,\n        },\n      })\n      .afterClosed()\n      .subscribe((data) => {\n        if (data?.type === 'retrain' || data?.type === 'tuning' || data?.type === 'advAlgo') {\n          this.trainings[0].algorithms = data.algorithms;\n        }\n      });\n  }\n\n  /**\n   * Handles the dynamic graph dialog as per the type and opens it\n   * @param type\n   * @param trainingInfo\n   * @param modelInfo\n   */\n  openGraphDialog(type: string, trainingInfo?: any, modelInfo?: any, tab?: string): void {\n    this._dialog\n      .open(GraphsDialogHandlerComponent, {\n        minWidth:\n          type === 'compareModel' || type === 'limeReport' || type === 'timeAccuracy'\n            ? '50vw'\n            : '80vw',\n        maxWidth: '90vw',\n        data: {\n          type: type,\n          trainingInfo: trainingInfo,\n          modelInfo: modelInfo,\n          tab: tab,\n          trainings: this.trainings,\n          originalFileWithEdaDetails: this.originalFileWithEdaDetails,\n          sortedModel: this.data[0].values,\n          filtersArray: this.filtersArray,\n        },\n      })\n      .afterClosed()\n      .subscribe((data) => {});\n  }\n\n  /**\n   * Opens the quick prediction dialog\n   */\n  openQuickPredictionDialog(): void {\n    this._dialog\n      .open(QuickPredictionComponent, {\n        maxWidth: '50vw',\n        data: {\n          trainings: this.trainings,\n          currentModelMeta: this.currentModelMeta,\n          notebookInputFileDetails: this.notebookInputFileDetails,\n          originalFileWithEdaDetails: this.originalFileWithEdaDetails,\n        },\n      })\n      .afterClosed()\n      .subscribe((data) => {});\n  }\n\n  /**\n   * Opens the pipeline dialog\n   */\n  openPipelineDialog(): void {\n    let autoGenerationData = this.trainings[0]['autoFeatureGenTasks'];\n    this._models\n      .getPipelineTask(this.currentModelMeta.trainingId)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        async (res) => {\n          if (res) {\n            if (\n              this.trainings[0].sampling == 'under_sampling' ||\n              this.trainings[0].sampling == 'over_sampling'\n            ) {\n              var obj = {\n                description:\n                  'Sampling is a method that allows us to get information about the population based on the statistics from a subset of the population (sample), without having to investigate every individual.',\n                index: 6,\n                parent: 'training_data_prep',\n                preview: 'True',\n                task: 'sampling',\n                taskName: 'Sampling',\n              };\n              res.push(obj);\n            }\n            var dataCollection = [];\n            var eda = [];\n            var training = [];\n            this.pipelineTasks = [];\n            res.forEach(function (item) {\n              if (item.parent == 'Data Collection') {\n                dataCollection.push(item);\n              }\n              if (item.parent == 'EDA') {\n                eda.push(item);\n              }\n              if (item.parent == 'training_data_prep') {\n                if (item.task == 'auto_feature_generate') {\n                  var tempAFoperations = [];\n                  autoGenerationData.forEach(function (autoFGenOp) {\n                    tempAFoperations.push(autoFGenOp['operation']);\n                  });\n                  item.afOperations = tempAFoperations;\n                }\n                training.push(item);\n              }\n            });\n            this.pipelineTasks.push({\n              data: dataCollection,\n              parent: 'Data Collection',\n            });\n            this.pipelineTasks.push({ data: eda, parent: 'EDA' });\n            this.pipelineTasks.push({ data: training, parent: 'Training' });\n            this._dialog\n              .open(PipelineComponent, {\n                maxWidth: '90vw',\n                data: {\n                  trainings: this.trainings,\n                  currentModelMeta: this.currentModelMeta,\n                  notebookInputFileDetails: this.notebookInputFileDetails,\n                  originalFileWithEdaDetails: this.originalFileWithEdaDetails,\n                  pipelineTask: this.pipelineTasks,\n                  pipelineData: res,\n                },\n              })\n              .afterClosed()\n              .subscribe((data) => {});\n          }\n        },\n        (err) => {\n          this._spinner.stopSpinner();\n          this._toaster.error('Server Error', 'Models');\n        }\n      );\n  }\n\n  /**\n   * Called when hold out operation is performed and updates the trainings data\n   * @param value\n   */\n  async updateTrainingModels(value: any): Promise<any> {\n    this.trainings[0].models = value;\n    //await this.showSelectedTrainingModels(this.trainings[0]);\n  }\n\n  /**\n   * Initailize the models start and end date for only timeseries project type\n   * @param {*} projectType timeseries\n   * @param {*} models\n   */\n  initModels(projectType: string, models: any): void {\n    if (projectType === 'timeseries' && models) {\n      let startDate = new Array(models.length).fill(new Date());\n      let endDate = new Array(models.length).fill(new Date());\n    }\n  }\n\n  /**\n   * Function called when user change filter\n   * @param {*} filter changed value\n   */\n  filterChanged(filter: any): void {\n    this.filter = [filter];\n    this.sortAndRankModels(this.trainings[0]);\n  }\n\n  /**\n   * Function called when filter sort order changed\n   * @param {*} order asc/desc\n   */\n  filterSortOrderChanged(order: string): void {\n    this.filterSortOrder = order;\n    this.sortAndRankModels(this.trainings[0]);\n  }\n\n  /**\n   * Initialize filters list\n   * @param {*} algoType regression/classification\n   */\n  setFilterList(algoType: string): void {\n    if (algoType === 'regression') {\n      this.filtersArray = [\n        { name: 'Model Score', id: 'testScore' },\n        { name: 'R Squared', id: 'rSquared' },\n        { name: 'Time Elapsed', id: 'timeElapsed' },\n        { name: 'Overall Score', id: 'overallScore' },\n        { name: 'MAE', id: 'Mean Absolute Error' },\n        { name: 'RMSE', id: 'Root Mean Square Error' },\n        { name: 'MSE', id: 'Mean Square Error' },\n      ];\n    } else {\n      this.filtersArray = [\n        { name: 'Accuracy', id: 'testScore' },\n        { name: 'F1 Score', id: 'f1Score' },\n        { name: \"Mathew's Coeff\", id: 'matCoeff' },\n        { name: 'Time Elapsed', id: 'timeElapsed' },\n        { name: 'Overall Score', id: 'overallScore' },\n      ];\n    }\n  }\n\n  /**\n   * Function to sort an array of objects as per the key\n   * @param {*} items input data - array\n   * @param {*} key key for comparison\n   */\n  sortArryOFObjects(items: any, key: any): any {\n    items.sort((a: any, b: any) => {\n      return b[key] - a[key];\n    });\n    return items;\n  }\n  /**\n   * Opens the new window with algorithm details and doc\n   * @param {*} algoName\n   */\n  getAlgoDouUrl(algoName: string): void {\n    let queryForUrl = null;\n    if (algoName.includes('Bagging') && algoName.includes('Regression')) {\n      if (algoName.includes('Logistic')) {\n        queryForUrl = 'Bagging Classifier';\n      } else {\n        queryForUrl = 'Bagging Regressor';\n      }\n    } else if (algoName.includes('Bagging') && algoName.includes('Classification')) {\n      queryForUrl = 'Bagging Classifier';\n    } else if (algoName.includes('Boosting') && algoName.includes('Classification')) {\n      queryForUrl = 'Boosting Classifier';\n    } else if (algoName.includes('Boosting') && algoName.includes('Regression')) {\n      if (algoName.includes('Logistic')) {\n        queryForUrl = 'Boosting Classifier';\n      } else {\n        queryForUrl = 'Boosting Regressor';\n      }\n    } else {\n      queryForUrl = algoName.split('-')[0];\n    }\n    if (queryForUrl) {\n      let algo = this.ALGORITHMS_ARRAY.filter((algorithm: any) => algorithm.name === queryForUrl);\n      this._window.open(algo[0].url, '_blank');\n    }\n  }\n\n  /**\n   * SOCKET - Listen for training completed events\n   */\n  initTrainingSocket(): void {\n    this._socket.listen('TrainingProgress').subscribe(\n      async (data: any) => {\n        if (data) {\n          if (!this.trainings[0]) {\n            await this.getTrainingsList();\n          }\n          if (this.trainings[0]) {\n            if (data.status === 'success') {\n              this.trainings[0].models.push(data.modelMetaData);\n              if (data.trainingType == 'retraining') {\n                this.totalAlgos += 1;\n                this.sortAndRankModels(this.trainings[0]);\n                this._toaster.success(\n                  `Retraining successfully completed for ${data.algoName}`,\n                  'Models'\n                );\n              } else if (data.trainingType === 'model_tuning') {\n                this.totalAlgos += 1;\n                this.sortAndRankModels(this.trainings[0]);\n                this._toaster.success(\n                  `Model tuning successfully completed for ${data.modelMetaData.modelMetaData.algoName}`,\n                  'Models'\n                );\n              } else if (data.trainingType === 'bagging_boosting') {\n                this.totalAlgos += 1;\n                this.sortAndRankModels(this.trainings[0]);\n                this._toaster.success(\n                  `Bagging/Boosting successfully completed for ${data.algoName}`,\n                  'Models'\n                );\n              }\n              this._spinner.stopSpinner();\n            } else {\n              if (data.trainingType === 'train') {\n                this.erroCount += 1;\n              } else if (data.trainingType == 'retraining') {\n                this._toaster.error(\n                  `Retraining failed for ${data.algoName} - ${data.modelMetaData.message}`,\n                  'Models'\n                );\n              } else if (data.trainingType === 'model_tuning') {\n                this._toaster.error(\n                  `Model tuning failed for ${data.algoName} - ${data.modelMetaData.message}`,\n                  'Models'\n                );\n              } else if (data.trainingType === 'bagging_boosting') {\n                this._toaster.error(\n                  `Bagging/Boosting failed for ${data.algoName} - ${data.modelMetaData.message}`,\n                  'Models'\n                );\n              }\n              this._spinner.stopSpinner();\n            }\n            if (data.trainingType === 'train') {\n              if (\n                this.trainings[0].algorithms.length ===\n                this.erroCount + this.trainings[0].models.length\n              ) {\n                this.showTrainingSpinner = false;\n                this.getTrainingsList();\n              } else {\n                this.showTrainingSpinner = true;\n              }\n            }\n            this.supportedGraphList();\n          }\n          this._spinner.stopSpinner();\n        } else {\n          this._spinner.stopSpinner();\n        }\n      },\n      (err: Error) => {\n        this._spinner.stopSpinner();\n        this._toaster.error(`Socket Error - ${err.message}`, 'Models');\n      }\n    );\n  }\n\n  /**\n   * SOCKET - Listen for data drift completed events\n   */\n  initDataDriftSocket(): void {\n    this._socket.listen('dataDrift').subscribe(\n      (data: any) => {\n        if (data) {\n          if (data.status === 'datadrift_failed') {\n            this._toaster.error(`Drift analysis failed - ${data.data}`, 'Models');\n            this._spinner.stopSpinner();\n          } else {\n            this._spinner.stopSpinner();\n            this._router.navigateByUrl('/project/datadrift/report');\n            this._toaster.success(`Drift analysis successfully completed`, 'Models');\n          }\n        } else {\n          this._spinner.stopSpinner();\n        }\n      },\n      (err: Error) => {\n        this._spinner.stopSpinner();\n        this._toaster.error(`Socket Error - ${err.message}`, 'Train Model');\n      }\n    );\n  }\n\n  /**\n   * SOCKET - Listen for CPU load completed messages\n   */\n  initCpuLoadSocket(): void {\n    this._socket.listen('cpuLoad').subscribe(\n      async (data: any) => {\n        if (data) {\n          this.cpuLoad = data;\n        }\n      },\n      (err: Error) => {\n        this._spinner.stopSpinner();\n        this._toaster.error(`Socket Error - ${err.message}`, 'Train Model');\n      }\n    );\n  }\n\n  /**\n   * To detect changes inside the array\n   * @param item\n   * @returns\n   */\n  trackByFn(item: any): any {\n    return item ? item._id : null;\n  }\n\n  /**\n   * Perform operations when the module is destroyed\n   */\n  ngOnDestroy() {\n    this._socket.removeListener('dataDrift');\n    this._socket.removeListener('cpuLoad');\n    this._socket.removeListener('TrainingProgress');\n    this.unsubscribe$.next(false);\n    this.unsubscribe$.unsubscribe();\n  }\n}\n","import { ModelsComponent } from './models.component';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { FormsDialogHandlerComponent } from './forms-dialog-handler/forms-dialog-handler.component';\nimport { GraphsDialogHandlerComponent } from './graphs-dialog-handler/graphs-dialog-handler.component';\nimport { PredictiveExpansionComponent } from './predictive-expansion/predictive-expansion.component';\nimport { ClusterExpansionComponent } from './cluster-expansion/cluster-expansion.component';\nimport { TimeseriesExpansionComponent } from './timeseries-expansion/timeseries-expansion.component';\nimport { AgGridModule } from 'ag-grid-angular';\nimport { ExpansionGraphsComponent } from './expansion-graphs/expansion-graphs.component';\nimport { QuickPredictionComponent } from './quick-prediction/quick-prediction.component';\nimport { TreeModule } from '@circlon/angular-tree-component';\nimport { PipelineComponent } from './pipeline/pipeline.component';\nimport { PipelineExpansionComponent } from './pipeline/pipeline-expansion/pipeline-expansion.component';\nimport { CdkAccordionModule } from '@angular/cdk/accordion';\nimport { MatBadgeModule } from '@angular/material/badge';\n@NgModule({\n  declarations: [\n    ModelsComponent,\n    FormsDialogHandlerComponent,\n    GraphsDialogHandlerComponent,\n    PredictiveExpansionComponent,\n    ClusterExpansionComponent,\n    TimeseriesExpansionComponent,\n    ExpansionGraphsComponent,\n    QuickPredictionComponent,\n    PipelineComponent,\n    PipelineExpansionComponent\n  ],\n  imports: [\n    CommonModule,\n    SharedModule,\n    TreeModule,\n    CdkAccordionModule,\n    AgGridModule.withComponents([GraphsDialogHandlerComponent]),\n    RouterModule.forChild([\n      {\n        path: '',\n        component: ModelsComponent,\n      },\n    ]),\n    MatBadgeModule\n  ],\n})\nexport class ModelsModule { }\n"]}