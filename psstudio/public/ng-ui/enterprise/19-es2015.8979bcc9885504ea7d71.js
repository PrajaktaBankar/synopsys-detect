(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{Zjxd:function(t,e,o){"use strict";o.r(e),o.d(e,"DataModule",(function(){return qn}));var a=o("ofXK"),i=o("M9IT"),n=o("Dh3D"),r=o("+0xr"),s=o("XNiG"),c=o("mrSG"),l=o("3Pt+"),d=o("0IaG"),u=o("AytR"),b=o("fXoL"),p=o("kYjS"),m=o("5eHb"),h=o("mLz/"),f=o("4xDO"),g=o("dNgK");function S(t,e){if(1&t&&(b.Tb(0,"h2",6),b.Kc(1),b.Sb()),2&t){const t=b.ec();b.Bb(1),b.Mc(" ",t.dialogHeading,"\n")}}function T(t,e){if(1&t&&(b.Tb(0,"h2",6),b.Kc(1),b.Sb()),2&t){const t=b.ec();b.Bb(1),b.Mc(" ",t.isEdit?"Update Connection":"Connection","\n")}}function y(t,e){if(1&t&&(b.Tb(0,"h2",6),b.Kc(1),b.Sb()),2&t){const t=b.ec();b.Bb(1),b.Mc(" ",t.isEdit?"Update folder":"Create folder","\n")}}function I(t,e){if(1&t){const t=b.Ub();b.Tb(0,"mat-dialog-content",7),b.Tb(1,"legend",8),b.Tb(2,"span",9),b.Ob(3,"em",10),b.Kc(4," Choose any data source "),b.Sb(),b.Sb(),b.Ob(5,"hr"),b.Tb(6,"div",11),b.Tb(7,"div",12),b.Tb(8,"mat-card",13,14),b.ac("click",(function(){return b.wc(t),b.ec().formUIHandler("upload")})),b.Tb(10,"mat-card-content",15),b.Ob(11,"br"),b.Tb(12,"picture",16),b.Ob(13,"img",17),b.Ob(14,"mat-icon",18),b.Sb(),b.Tb(15,"h4",19),b.Kc(16,"Upload"),b.Sb(),b.Tb(17,"p",20),b.Kc(18,"Upload local files (.csv, .pkl, .xlsx)"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(19,"div",12),b.Tb(20,"mat-card",13,21),b.ac("click",(function(){return b.wc(t),b.ec().formUIHandler("url")})),b.Tb(22,"mat-card-content",15),b.Ob(23,"br"),b.Tb(24,"picture",16),b.Ob(25,"img",22),b.Ob(26,"mat-icon",23),b.Sb(),b.Tb(27,"h4",19),b.Kc(28,"URL"),b.Sb(),b.Tb(29,"p",20),b.Kc(30,"Pull data from an open URL"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(31,"div",12),b.Tb(32,"mat-card",13,24),b.ac("click",(function(){return b.wc(t),b.ec().formUIHandler("mssql")})),b.Tb(34,"mat-card-content",15),b.Tb(35,"div",25),b.Tb(36,"span",26),b.Kc(37,"ver-2019"),b.Sb(),b.Sb(),b.Tb(38,"picture",16),b.Ob(39,"img",27),b.Ob(40,"mat-icon",28),b.Sb(),b.Tb(41,"h4",19),b.Kc(42,"MS-SQL"),b.Sb(),b.Tb(43,"p",20),b.Kc(44,"Query data from mssql"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(45,"div",12),b.Tb(46,"mat-card",13,29),b.ac("click",(function(){return b.wc(t),b.ec().formUIHandler("mysql")})),b.Tb(48,"mat-card-content",15),b.Tb(49,"div",25),b.Tb(50,"span",26),b.Kc(51,"ver-8.0.27"),b.Sb(),b.Sb(),b.Tb(52,"picture",16),b.Ob(53,"img",30),b.Ob(54,"mat-icon",31),b.Sb(),b.Tb(55,"h4",19),b.Kc(56,"MySQL"),b.Sb(),b.Tb(57,"p",20),b.Kc(58,"Query data from mysql"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(59,"div",12),b.Tb(60,"mat-card",13,32),b.ac("click",(function(){return b.wc(t),b.ec().formUIHandler("postgresql")})),b.Tb(62,"mat-card-content",15),b.Tb(63,"div",25),b.Tb(64,"span",26),b.Kc(65,"ver-14.1"),b.Sb(),b.Sb(),b.Tb(66,"picture",16),b.Ob(67,"img",33),b.Ob(68,"mat-icon",34),b.Sb(),b.Tb(69,"h4",19),b.Kc(70,"PostgreSQL"),b.Sb(),b.Tb(71,"p",20),b.Kc(72,"Query data from postgresql"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(73,"div",12),b.Tb(74,"mat-card",13,35),b.ac("click",(function(){return b.wc(t),b.ec().formUIHandler("sftp")})),b.Tb(76,"mat-card-content",15),b.Ob(77,"br"),b.Tb(78,"picture",16),b.Ob(79,"img",36),b.Ob(80,"mat-icon",37),b.Sb(),b.Tb(81,"h4",19),b.Kc(82,"SFTP"),b.Sb(),b.Tb(83,"p",20),b.Kc(84,"Pull from SFTP server"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(85,"div",12),b.Tb(86,"mat-card",13,38),b.ac("click",(function(){return b.wc(t),b.ec().formUIHandler("snowflake")})),b.Tb(88,"mat-card-content",15),b.Ob(89,"br"),b.Tb(90,"picture",16),b.Ob(91,"img",39),b.Ob(92,"mat-icon",40),b.Sb(),b.Tb(93,"h4",19),b.Kc(94,"Snowflake"),b.Sb(),b.Tb(95,"p",20),b.Kc(96,"Pull from data cloud"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(97,"div",12),b.Tb(98,"mat-card",13,41),b.ac("click",(function(){return b.wc(t),b.ec().formUIHandler("s3")})),b.Tb(100,"mat-card-content",15),b.Ob(101,"br"),b.Tb(102,"picture",16),b.Ob(103,"img",42),b.Ob(104,"mat-icon",43),b.Sb(),b.Tb(105,"h4",19),b.Kc(106,"Amazon S3"),b.Sb(),b.Tb(107,"p",20),b.Kc(108,"Pull from cloud object storage"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(109,"div",12),b.Tb(110,"mat-card",13),b.ac("click",(function(){return b.wc(t),b.ec().formUIHandler("bigquery")})),b.Tb(111,"mat-card-content",15),b.Ob(112,"br"),b.Tb(113,"picture",16),b.Ob(114,"img",44),b.Ob(115,"mat-icon",43),b.Sb(),b.Tb(116,"h4",19),b.Kc(117,"Google BigQuery"),b.Sb(),b.Tb(118,"p",20),b.Kc(119," Runs query from multicloud data warehouse "),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.ec();b.Bb(2),b.kc("matTooltip",t._utils.getTootip("dataSources")),b.Bb(6),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("upload")?"source-type-card pro-restrict":"source-type-card")("matTooltip",t._utils.getTootip("fileUpload")),b.Bb(6),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("upload")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("upload")&&t.enterpriseConnectionList.includes("upload")?"ENT":"PRO"),b.Bb(6),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("url")?"source-type-card pro-restrict":"source-type-card")("matTooltip",t._utils.getTootip("pullUrl")),b.Bb(6),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("url")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("url")&&t.enterpriseConnectionList.includes("url")?"ENT":"PRO"),b.Bb(6),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("mssql")?"source-type-card pro-restrict":"source-type-card")("matTooltip",t._utils.getTootip("msSql")),b.Bb(8),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("mssql")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("mssql")&&t.enterpriseConnectionList.includes("mssql")?"ENT":"PRO"),b.Bb(6),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("mysql")?"source-type-card pro-restrict":"source-type-card")("matTooltip",t._utils.getTootip("mySql")),b.Bb(8),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("mysql")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("mysql")&&t.enterpriseConnectionList.includes("mysql")?"ENT":"PRO"),b.Bb(6),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("postgresql")?"source-type-card pro-restrict":"source-type-card")("matTooltip",t._utils.getTootip("postgre")),b.Bb(8),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("postgresql")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("postgresql")&&t.enterpriseConnectionList.includes("postgresql")?"ENT":"PRO"),b.Bb(6),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("sftp")?"source-type-card pro-restrict":"source-type-card")("matTooltip",t._utils.getTootip("Sftp")),b.Bb(6),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("sftp")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("sftp")&&t.enterpriseConnectionList.includes("sftp")?"ENT":"PRO"),b.Bb(6),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("snowflake")?"source-type-card pro-restrict":"source-type-card")("matTooltip",t._utils.getTootip("snowflake")),b.Bb(6),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("snowflake")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("snowflake")&&t.enterpriseConnectionList.includes("snowflake")?"ENT":"PRO"),b.Bb(6),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("s3")?"source-type-card pro-restrict":"source-type-card")("matTooltip",t._utils.getTootip("s3")),b.Bb(6),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("s3")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("s3")&&t.enterpriseConnectionList.includes("s3")?"ENT":"PRO"),b.Bb(6),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("bigquery")?"source-type-card pro-restrict":"source-type-card")("matTooltip",t._utils.getTootip("bigquery")),b.Bb(5),b.kc("ngClass",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("bigquery")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=t.connectionsToRestrict&&t.connectionsToRestrict.includes("bigquery")&&t.enterpriseConnectionList.includes("bigquery")?"ENT":"PRO")}}function w(t,e){if(1&t&&(b.Tb(0,"h4",48),b.Tb(1,"picture",49),b.Ob(2,"img",50),b.Sb(),b.Kc(3),b.Sb()),2&t){const t=b.ec(2);b.Bb(2),b.Ec(t.getHeadingIconSize()),b.kc("src",t.iconType,b.zc)("alt",t.sourceType),b.Bb(1),b.Mc(" ",t.formHeading," ")}}function C(t,e){1&t&&b.Ob(0,"hr")}function k(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",51),b.Tb(1,"app-file-upload-form",52),b.ac("goBackFlag",(function(e){return b.wc(t),b.ec(2).showConnectionTypes=e})),b.Sb(),b.Sb()}if(2&t){const t=b.ec(2);b.Bb(1),b.kc("dataGroupsArray",t.dialogData.dataGroups)("currentDataGroup",t.dialogData.currentDataGroup)}}function v(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",51),b.Tb(1,"app-database-form",53),b.ac("goBackFlag",(function(e){return b.wc(t),b.ec(2).showConnectionTypes=e})),b.Sb(),b.Sb()}if(2&t){const t=b.ec(2);b.Bb(1),b.kc("dataGroupsArray",t.dialogData.dataGroups)("schedularsArray",t.dialogData.schedulars)("sourceType",t.sourceType)("data",t.dialogData.data)("currentDataGroup",t.dialogData.currentDataGroup)}}function _(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",51),b.Tb(1,"app-sftp-and-url-form",53),b.ac("goBackFlag",(function(e){return b.wc(t),b.ec(2).showConnectionTypes=e})),b.Sb(),b.Sb()}if(2&t){const t=b.ec(2);b.Bb(1),b.kc("dataGroupsArray",t.dialogData.dataGroups)("schedularsArray",t.dialogData.schedulars)("sourceType",t.sourceType)("data",t.dialogData.data)("currentDataGroup",t.dialogData.currentDataGroup)}}function D(t,e){if(1&t&&(b.Tb(0,"mat-dialog-content",45),b.Ic(1,w,4,5,"h4",46),b.Ic(2,C,1,0,"hr",4),b.Ic(3,k,2,2,"div",47),b.Ic(4,v,2,5,"div",47),b.Ic(5,_,2,5,"div",47),b.Sb()),2&t){const t=b.ec();b.Bb(1),b.kc("ngIf",!t.isEdit),b.Bb(1),b.kc("ngIf",!t.isEdit),b.Bb(1),b.kc("ngIf","upload"===t.sourceType),b.Bb(1),b.kc("ngIf","mysql"===t.sourceType||"mssql"===t.sourceType||"postgresql"===t.sourceType||"snowflake"===t.sourceType||"bigquery"===t.sourceType),b.Bb(1),b.kc("ngIf","sftp"===t.sourceType||"url"===t.sourceType||"s3"===t.sourceType)}}function F(t,e){if(1&t&&b.Ob(0,"mat-progress-spinner",63),2&t){const t=b.ec(2);b.kc("color",t.color)("mode",t.mode)("diameter",t.diameter)}}function O(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Folder name is required."),b.Sb())}function B(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Only alphanumeric characters are allowed. "),b.Sb())}function N(t,e){if(1&t&&(b.Tb(0,"mat-option",64),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t._id),b.Bb(1),b.Lc(t.name)}}function G(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Parent name is required."),b.Sb())}function x(t,e){if(1&t&&(b.Tb(0,"mat-dialog-content",54),b.Ic(1,F,1,3,"mat-progress-spinner",55),b.Tb(2,"form",56),b.Tb(3,"div",57),b.Tb(4,"mat-form-field",58),b.Tb(5,"mat-label",59),b.Kc(6,"Folder name"),b.Sb(),b.Ob(7,"input",60),b.Ic(8,O,2,0,"mat-error",4),b.Ic(9,B,2,0,"mat-error",4),b.Sb(),b.Sb(),b.Tb(10,"div",57),b.Tb(11,"mat-form-field",58),b.Tb(12,"mat-label"),b.Kc(13,"Select parent folder"),b.Sb(),b.Tb(14,"mat-select",61),b.Ic(15,N,2,2,"mat-option",62),b.Sb(),b.Ic(16,G,2,0,"mat-error",4),b.Sb(),b.Sb(),b.Sb(),b.Sb()),2&t){const t=b.ec();b.Bb(1),b.kc("ngIf",t.showSpinner),b.Bb(1),b.kc("formGroup",t.dataGroupForm),b.Bb(6),b.kc("ngIf",t.dataGroupForm.get("name").hasError("required")&&(t.dataGroupForm.get("name").dirty||t.dataGroupForm.get("name").touched)),b.Bb(1),b.kc("ngIf",t.dataGroupForm.get("name").hasError("pattern")),b.Bb(6),b.kc("ngForOf",t.dialogData.dataGroups),b.Bb(1),b.kc("ngIf",t.dataGroupForm.get("parentId").hasError("required")&&(t.dataGroupForm.get("parentId").dirty||t.dataGroupForm.get("parentId").touched))}}function M(t,e){1&t&&b.Ob(0,"hr")}function P(t,e){1&t&&b.Ob(0,"hr")}function K(t,e){1&t&&(b.Tb(0,"mat-dialog-actions",65),b.Tb(1,"button",66),b.Kc(2,"Cancel"),b.Sb(),b.Sb())}function A(t,e){if(1&t){const t=b.Ub();b.Tb(0,"mat-dialog-actions",65),b.Tb(1,"button",67),b.ac("click",(function(){return b.wc(t),b.ec().closeModal()})),b.Kc(2,"Cancel"),b.Sb(),b.Tb(3,"button",68),b.ac("click",(function(){b.wc(t);const e=b.ec();return e.onSubmitDataGroup(e.dataGroupForm.value)})),b.Kc(4),b.Sb(),b.Sb()}if(2&t){const t=b.ec();b.Bb(3),b.kc("disabled",t.dataGroupForm.invalid),b.Bb(1),b.Mc(" ",t.isEdit?"Update":"Create"," ")}}let R=(()=>{class t{constructor(t,e,o,a,i,n,r,s,c){var d,b,p,m,h,f,g,S;this.dialogData=t,this._data=o,this._toaster=a,this.dialogRef=i,this._localStorage=n,this._utils=r,this.renderer=s,this._snackbar=c,this.proConnectionList=null,this.enterpriseConnectionList=null,this.connectionsToRestrict=null,this.allConnectionsList=null,this.allowedNoOfRows=0,this.allowedNoOfColumns=0,this.appType=u.a.appType,this.color="primary",this.mode="indeterminate",this.diameter=100,this.exportProjectDiameter=50,this.showSpinner=!1,this.isEdit=!1,this.showConnectionTypes=!0,this.user=this._localStorage.getItem("user"),this.enterpriseConnectionList=(null===(b=null===(d=this.user)||void 0===d?void 0:d.psFeatures)||void 0===b?void 0:b.enterpriseConnectionList)||[],this.allConnectionsList=(null===(m=null===(p=this.user)||void 0===p?void 0:p.psFeatures)||void 0===m?void 0:m.allConnectionsList)||[],this.allowedNoOfColumns=null===(f=null===(h=this.user)||void 0===h?void 0:h.psFeatures)||void 0===f?void 0:f.allowedNoOfColumns,this.allowedNoOfRows=null===(S=null===(g=this.user)||void 0===g?void 0:g.psFeatures)||void 0===S?void 0:S.allowedNoOfRows,this.fileUploadForm=e.group({name:["",l.I.required]}),this.dataGroupForm=e.group({name:["",[l.I.required,l.I.pattern("^[^\\s][A-Za-z0-9_ ]+$")]],parentId:["",l.I.required]})}ngOnInit(){var t,e,o,a,i;switch(this.project=this._localStorage.getItem("project"),"dataSource"!=this.dialogData.formType&&this.formUIHandler(this.dialogData.formType),this.dialogData.formType){case"dataSource":this.dialogHeading="Data Source",this.showConnectionTypes=!0,"saas"===u.a.appType&&!(null===(e=null===(t=this.user)||void 0===t?void 0:t.roles)||void 0===e?void 0:e.includes("super_admin"))&&!(null===(a=null===(o=this.user)||void 0===o?void 0:o.roles)||void 0===a?void 0:a.includes("admin"))&&this.setRestrictions(null===(i=this.dialogData)||void 0===i?void 0:i.allowedConnectionsList);break;case"mysql":case"mssql":case"postgresql":case"sftp":case"url":case"s3":case"snowflake":case"bigquery":this.sourceType=this.dialogData.formType,this.dialogData.formType="dataSource",this.showConnectionTypes=!1;case"dataGroup":this.showConnectionTypes=!1,this.prefillDataGroupForm(this.dialogData.data);break;default:this.prefillDataGroupForm(this.dialogData.data)}}setRestrictions(t){return Object(c.a)(this,void 0,void 0,(function*(){this.connectionsToRestrict=this.allConnectionsList.filter(e=>!t.includes(e)),this.proConnectionList=this.connectionsToRestrict.filter(t=>!this.enterpriseConnectionList.includes(t))}))}prefillDataGroupForm(t){t?(this.isEdit=!0,this.connectionIdToUpdate=t._id,this.dataGroupForm.patchValue({name:t.name,parentId:t.parentId})):(this.dataGroupForm.get("parentId").setValue(this.dialogData.currentDataGroup),this.dataGroupForm.get("name").reset(),this.isEdit=!1)}onSubmitDataGroup(t){this.isEdit?this.updateDataGroupHandler(t):this.createDataGroupHandler(t)}updateDataGroupHandler(t){delete this.dialogData.data.name;let e=Object.assign(Object.assign({},this.dialogData.data),{name:t.name});this.dataConnection$=this._data.updateDataGroup(e).subscribe(t=>{t&&(this._toaster.success("Folder name updated successfully","Data Connection"),this.closeModal(t))},t=>{this._toaster.error("Server Error","Data Connection")})}createDataGroupHandler(t){let e=Object.assign(Object.assign({},t),{projectId:this.project._id});this.dataConnection$=this._data.createNewDataGroup(e).subscribe(t=>{t&&(this._toaster.success(t.name+" folder created successfully","Data Connection"),this.closeModal(t))},t=>{this._toaster.error("Server Error","Data Connection")})}formUIHandler(t){var e,o,a,i,n,r;if("enterprise"===u.a.appType||(null===(o=null===(e=this.user)||void 0===e?void 0:e.roles)||void 0===o?void 0:o.includes("super_admin"))||(null===(i=null===(a=this.user)||void 0===a?void 0:a.roles)||void 0===i?void 0:i.includes("admin"))||this.connectionsToRestrict&&!this.connectionsToRestrict.includes(t))switch(this.showConnectionTypes=!1,this.sourceType=t,t){case"upload":this.formHeading="Upload a file",this.iconType="../../../../../assets/img/icons/upload.svg";break;case"mysql":this.formHeading="Pull data from MYSQL server",this.iconType="../../../../../assets/img/icons/mysql.svg";break;case"mssql":this.formHeading="Pull data from MSSQL server",this.iconType="../../../../../assets/img/icons/mssql.svg";break;case"postgresql":this.formHeading="Pull data from PostgreSQl server",this.iconType="../../../../../assets/img/icons/postgresql.svg";break;case"snowflake":this.formHeading="Pull from data cloud",this.iconType="../../../../../assets/img/snow.png";break;case"sftp":this.formHeading="Pull data from SFTP server",this.iconType="../../../../../assets/img/icons/sftp.svg";break;case"url":this.formHeading="Data Downloader (Note: Works for dataset < 2MB)",this.iconType="../../../../../assets/img/icons/url.svg";break;case"s3":this.formHeading="Pull data from Amazon S3 server",this.iconType="../../../../../assets/img/s3.svg";break;case"bigquery":this.formHeading="Pull data from Google BigQuery",this.iconType="../../../../../assets/img/bigquery.png"}else((null===(n=this.proConnectionList)||void 0===n?void 0:n.includes(t))||(null===(r=this.enterpriseConnectionList)||void 0===r?void 0:r.includes(t)))&&this._snackbar.open("Selected feature is under premium subscription ","OK",{horizontalPosition:"right",verticalPosition:"bottom"})}getHeadingIconSize(){switch(this.sourceType){case"upload":case"mysql":case"mssql":case"postgresql":case"snowflake":case"sftp":case"url":case"s3":case"bigquery":return"height: 20px; width:20px"}}closeModal(t){this.dialogRef.close(t)}ngOnDestroy(){this.dataConnection$&&this.dataConnection$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(d.a),b.Nb(l.h),b.Nb(p.a),b.Nb(m.c),b.Nb(d.i),b.Nb(h.a),b.Nb(f.a),b.Nb(b.G),b.Nb(g.c))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-dialog-handler"]],decls:10,vars:10,consts:[["mat-dialog-title","",4,"ngIf"],["class","data-sources-container",4,"ngIf"],["class","connection-form",4,"ngIf"],["class","mat-typography",4,"ngIf"],[4,"ngIf"],["class","justify-content-end m-auto",4,"ngIf"],["mat-dialog-title",""],[1,"data-sources-container"],[2,"font-size","20px","margin-top","10px"],[3,"matTooltip"],[1,"far","fa-folder",2,"margin-right","15px"],[1,"row","m-1"],[1,"col-md-4"],[3,"ngClass","matTooltip","click"],["fileUploadCard",""],[1,"text-center"],[1,"img-thumbnail","circle","thumb96"],["src","../../../../../assets/img/icons/upload.svg","alt","File Upload",2,"height","25px"],["id","upload",3,"ngClass","innerText"],[2,"margin-top","10px"],[1,"text-muted",2,"margin-top","16px"],["pullUrlCard",""],["src","../../../../../assets/img/icons/url.svg","alt","URl Upload",2,"height","25px"],["id","url",3,"ngClass","innerText"],["mssqlCard",""],[1,"text-right","mb-2"],[1,"text-muted","text-sm"],["src","../../../../../assets/img/icons/mssql.svg","alt","MSSQL Upload",2,"height","50px"],["id","mssql",3,"ngClass","innerText"],["mysqlCard",""],["src","../../../../../assets/img/icons/mysql.svg","alt","MYSQL Upload",2,"height","32px"],["id","mysql",3,"ngClass","innerText"],["postgreSqlCard",""],["src","../../../../../assets/img/icons/postgresql.svg","alt","PostgreSQL Upload",2,"height","45px"],["id","postgresql",3,"ngClass","innerText"],["sftpCard",""],["src","../../../../../assets/img/icons/sftp.svg","alt","SFTP Upload",2,"height","50px"],["id","sftp",3,"ngClass","innerText"],["snowflakeCard",""],["src","../../../../../assets/img/snow.png","alt","snowflake",2,"height","70px"],["id","snowflake",3,"ngClass","innerText"],["s3Card",""],["src","../../../../../assets/img/s3.svg","alt","s3",2,"height","70px"],["id","s3",3,"ngClass","innerText"],["src","../../../../../assets/img/bigquery.png","alt","bigquery",2,"height","70px"],[1,"connection-form"],["class","d-flex align-items-center mt-3 font-weight-normal",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"d-flex","align-items-center","mt-3","font-weight-normal"],[1,"mr-3","img-thumbnail","circle","thumb96"],[3,"src","alt"],[1,"mt-4"],[3,"dataGroupsArray","currentDataGroup","goBackFlag"],[3,"dataGroupsArray","schedularsArray","sourceType","data","currentDataGroup","goBackFlag"],[1,"mat-typography"],["class","spinner",3,"color","mode","diameter",4,"ngIf"],["role","form","name","dataGroupForm",1,"form-validate",3,"formGroup"],[1,"form-group"],["appearance","outline"],["for","name"],["matInput","","type","text","name","name","formControlName","name","id","name","placeholder","Enter folder name","autocomplete","","required",""],["formControlName","parentId","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"spinner",3,"color","mode","diameter"],[3,"value"],[1,"justify-content-end","m-auto"],["mat-stroked-button","","mat-dialog-close",""],["mat-stroked-button","",3,"click"],["mat-flat-button","","type","submit",1,"btn-primary",3,"disabled","click"]],template:function(t,e){1&t&&(b.Ic(0,S,2,1,"h2",0),b.Ic(1,T,2,1,"h2",0),b.Ic(2,y,2,1,"h2",0),b.Ic(3,I,120,37,"mat-dialog-content",1),b.Ic(4,D,6,5,"mat-dialog-content",2),b.Ic(5,x,17,6,"mat-dialog-content",3),b.Ic(6,M,1,0,"hr",4),b.Ic(7,P,1,0,"hr",4),b.Ic(8,K,3,0,"mat-dialog-actions",5),b.Ic(9,A,5,2,"mat-dialog-actions",5)),2&t&&(b.kc("ngIf","dataSource"===e.dialogData.formType&&e.showConnectionTypes),b.Bb(1),b.kc("ngIf","dataSource"===e.dialogData.formType&&!e.showConnectionTypes),b.Bb(1),b.kc("ngIf","dataGroup"===e.dialogData.formType||!e.dialogData.formType),b.Bb(1),b.kc("ngIf","dataSource"===e.dialogData.formType&&e.showConnectionTypes),b.Bb(1),b.kc("ngIf","dataSource"===e.dialogData.formType&&!e.showConnectionTypes),b.Bb(1),b.kc("ngIf","dataGroup"===e.dialogData.formType||!e.dialogData.formType),b.Bb(1),b.kc("ngIf","dataGroup"===e.dialogData.formType||!e.dialogData.formType),b.Bb(1),b.kc("ngIf","dataSource"===e.dialogData.formType&&e.showConnectionTypes),b.Bb(1),b.kc("ngIf","dataSource"===e.dialogData.formType&&e.showConnectionTypes),b.Bb(1),b.kc("ngIf","dataGroup"===e.dialogData.formType||!e.dialogData.formType))},styles:[".data-sources-container[_ngcontent-%COMP%]   .source-type-card[_ngcontent-%COMP%]{box-shadow:unset;background-color:#eff7ff;margin-top:20px;transition-duration:0s}.data-sources-container[_ngcontent-%COMP%]   .source-type-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .img-thumbnail[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center}.data-sources-container[_ngcontent-%COMP%]   .source-type-card[_ngcontent-%COMP%]:hover{box-shadow:0 0 12px 0 #07509d;cursor:pointer}.connection-form[_ngcontent-%COMP%]   .img-thumbnail[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;height:45px!important;width:45px!important}.linkText[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}"]}),t})();var E=o("1G5W"),q=o("hct1"),j=o("/mf7"),L=o("EiqI"),U=o("THC6"),H=o("aXhh"),V=o("Wp6s"),z=o("Qu3c"),Q=o("bTqV"),Z=o("NFeN"),Y=o("kmnG"),W=o("qFsG"),J=o("tyNb"),X=o("TU8p"),tt=o("3M9v");const et=["ConnFilesPaginator"],ot=["ConnFilesSort"];function at(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",14),b.Tb(1,"mat-icon",15),b.Kc(2,"chevron_right"),b.Sb(),b.Tb(3,"h3",16),b.ac("click",(function(){b.wc(t);const o=e.$implicit;return b.ec().breadcrumbHandler(o,!0)})),b.Kc(4),b.Sb(),b.Sb()}if(2&t){const t=e.$implicit,o=e.last;b.Bb(3),b.Db(o?"breadcrumb-name":"heading-with-breadcrumb ml-0"),b.Bb(1),b.Mc(" ",t.name," ")}}function it(t,e){if(1&t){const t=b.Ub();b.Tb(0,"button",17),b.ac("click",(function(){return b.wc(t),b.ec().openModalHandler("dataSource")})),b.Kc(1," Data Sources "),b.Sb()}if(2&t){const t=b.ec();b.kc("matTooltip",t._utils.getTootip("createDataConnections"))}}function nt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"mat-card",18),b.Tb(1,"mat-card-content",19),b.Tb(2,"div",20),b.Tb(3,"div",21),b.Tb(4,"h3",22),b.Kc(5),b.Sb(),b.Tb(6,"p",23),b.Kc(7," Data is my fuel, connect with wide variety of data sources to pull data and build a fruitful model. "),b.Sb(),b.Tb(8,"div"),b.Tb(9,"button",24),b.ac("click",(function(){return b.wc(t),b.ec().openModalHandler("dataSource")})),b.Kc(10," Data Sources "),b.Sb(),b.Sb(),b.Sb(),b.Tb(11,"div",25),b.Ob(12,"img",26),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.ec();b.Bb(5),b.Mc("Hi ",t.user.displayName,"!")}}function rt(t,e){1&t&&b.Ob(0,"th",48)}function st(t,e){if(1&t&&(b.Tb(0,"td",49),b.Ob(1,"i",50),b.Sb()),2&t){const t=e.$implicit,o=b.ec(2);b.Bb(1),b.kc("ngClass",o.getIcon(t.type))}}function ct(t,e){1&t&&(b.Tb(0,"th",51),b.Kc(1,"Name"),b.Sb())}function lt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"td",52),b.ac("click",(function(){b.wc(t);const o=e.$implicit;return b.ec(2).breadcrumbHandler(o)})),b.Kc(1),b.Sb()}if(2&t){const t=e.$implicit;b.Fb("clickable",!t.type),b.Bb(1),b.Mc(" ",t.name," ")}}function dt(t,e){1&t&&(b.Tb(0,"th",51),b.Kc(1,"Source"),b.Sb())}function ut(t,e){if(1&t){const t=b.Ub();b.Tb(0,"td",52),b.ac("click",(function(){b.wc(t);const o=e.$implicit,a=b.ec(2),i=b.tc(18);return a.openFilesModal(i,o)})),b.Kc(1),b.Sb()}if(2&t){const t=e.$implicit;b.Fb("clickable","upload"!==t.type&&"notebook"!==t.type),b.Bb(1),b.Mc(" ",t.type?t.type:"-"," ")}}function bt(t,e){1&t&&(b.Tb(0,"th",48),b.Kc(1,"Parsed"),b.Sb())}function pt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div"),b.Tb(1,"button",55),b.ac("click",(function(){b.wc(t);const e=b.ec().$implicit;return b.ec(2).showMessage(e.message)})),b.Ob(2,"i",56),b.Sb(),b.Sb()}}function mt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div"),b.Tb(1,"button",55),b.ac("click",(function(){b.wc(t);const e=b.ec().$implicit;return b.ec(2).showMessage(e.message)})),b.Ob(2,"i",57),b.Sb(),b.Sb()}}function ht(t,e){1&t&&(b.Tb(0,"div"),b.Tb(1,"button",58),b.Kc(2,"-"),b.Sb(),b.Sb())}function ft(t,e){if(1&t&&(b.Tb(0,"td",49),b.Tb(1,"div",53),b.Ic(2,pt,3,0,"div",54),b.Ic(3,mt,3,0,"div",54),b.Ic(4,ht,3,0,"div",54),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.kc("ngIf",0==t.parsed),b.Bb(1),b.kc("ngIf",1==t.parsed),b.Bb(1),b.kc("ngIf",null==t.parsed)}}function gt(t,e){1&t&&(b.Tb(0,"th",51),b.Kc(1,"Schedule"),b.Sb())}function St(t,e){if(1&t&&(b.Tb(0,"td",49),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Mc(" ",t.schedule_id?t.schedule_id.scheduleName:"-"," ")}}function Tt(t,e){1&t&&(b.Tb(0,"th",51),b.Kc(1,"Created At"),b.Sb())}function yt(t,e){if(1&t&&(b.Tb(0,"td",49),b.Kc(1),b.fc(2,"date"),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Mc(" ",b.hc(2,1,t.createdAt,"medium")," ")}}function It(t,e){1&t&&(b.Tb(0,"th",48),b.Kc(1,"Actions"),b.Sb())}function wt(t,e){1&t&&(b.Tb(0,"button",69),b.Ob(1,"i",70),b.Sb())}function Ct(t,e){1&t&&b.Ob(0,"i",71)}const kt=function(){return["/project/data/dataflow"]},vt=function(t){return{connectionId:t}};function _t(t,e){if(1&t&&(b.Tb(0,"button",72),b.Ob(1,"i",73),b.Sb()),2&t){const t=b.ec(2).$implicit,e=b.ec(2);b.kc("routerLink",b.mc(5,kt))("queryParams",b.nc(6,vt,t._id))("disabled",!("saas"!==e.appType||null!=e.user&&null!=e.user.roles&&e.user.roles.includes("super_admin")||null!=e.user&&null!=e.user.roles&&e.user.roles.includes("admin"))),b.Bb(1),b.kc("matBadgeIcon","ENT")("ngClass","enterprise"===e.appType||"saas"===e.appType&&(null!=e.user&&null!=e.user.roles&&e.user.roles.includes("super_admin")||null!=e.user&&null!=e.user.roles&&e.user.roles.includes("admin"))?"":"disable-Btn")}}const Dt=function(t){return{dataFlowId:t}};function Ft(t,e){if(1&t&&(b.Tb(0,"button",74),b.Ob(1,"i",75),b.Sb()),2&t){const t=b.ec(2).$implicit;b.kc("routerLink",b.mc(2,kt))("queryParams",b.nc(3,Dt,t.dataflowId))}}function Ot(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div"),b.Ic(1,wt,2,0,"button",63),b.Tb(2,"button",64),b.ac("click",(function(){b.wc(t);const e=b.ec().$implicit;return b.ec(2).pullConnectionData(e)})),b.Ob(3,"i",65),b.Ic(4,Ct,1,0,"i",66),b.Sb(),b.Ic(5,_t,2,8,"button",67),b.Ic(6,Ft,2,5,"button",68),b.Sb()}if(2&t){const t=b.ec().$implicit,e=b.ec(2);b.Bb(1),b.kc("ngIf",t.isPulling),b.Bb(1),b.kc("hidden",t.isPulling)("matTooltip",e.dataFlowToolTip)("matTooltipClass",e.isDataFlowFailed?"nodered-error-tooltip-custom":""),b.Bb(2),b.kc("ngIf",e.isDataFlowFailed&&!e.callFromStartFlow&&e.flowIdCheck==t.name),b.Bb(1),b.kc("ngIf",!t.dataflowId),b.Bb(1),b.kc("ngIf",t.dataflowId)}}function Bt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"button",76),b.ac("click",(function(){b.wc(t);const e=b.ec().$implicit;return b.ec(2).downloadFile(e)})),b.Ob(1,"i",77),b.Sb()}}function Nt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div"),b.Tb(1,"button",78),b.ac("click",(function(){b.wc(t);const e=b.ec().$implicit;return b.ec(2).openModalHandler(e.type,e)})),b.Ob(2,"i",79),b.Sb(),b.Sb()}}function Gt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"td",49),b.Tb(1,"div",59),b.Ic(2,Ot,7,7,"div",54),b.Ic(3,Bt,2,0,"button",60),b.Ic(4,Nt,3,0,"div",54),b.Tb(5,"button",61),b.ac("click",(function(){b.wc(t);const o=e.$implicit;return b.ec(2).deleteHandler(o._id,o.type)})),b.Ob(6,"i",62),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=e.$implicit;b.Bb(2),b.kc("ngIf","url"===t.type||"mysql"===t.type||"mssql"===t.type||"sftp"===t.type||"postgresql"===t.type||"s3"===t.type||"snowflake"===t.type||"bigquery"===t.type),b.Bb(1),b.kc("ngIf","upload"===t.type||"notebook"===t.type),b.Bb(1),b.kc("ngIf","url"===t.type||"mysql"===t.type||"mssql"===t.type||"sftp"===t.type||"postgresql"===t.type||"s3"===t.type||"snowflake"===t.type||"bigquery"===t.type)}}function xt(t,e){1&t&&b.Ob(0,"tr",80)}function Mt(t,e){1&t&&b.Ob(0,"tr",81)}function Pt(t,e){if(1&t&&(b.Tb(0,"tr",82),b.Tb(1,"td",83),b.Kc(2),b.Sb(),b.Sb()),2&t){b.ec();const t=b.tc(6);b.Bb(2),b.Mc('No data matching the filter "',t.value,'"')}}function Kt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"mat-card",27),b.Tb(1,"mat-card-content"),b.Tb(2,"mat-form-field",28),b.Tb(3,"mat-label"),b.Kc(4,"Search"),b.Sb(),b.Tb(5,"input",29,30),b.ac("keyup",(function(e){return b.wc(t),b.ec().applyFilter(e,"connections")})),b.Sb(),b.Sb(),b.Tb(7,"table",31),b.Rb(8,32),b.Ic(9,rt,1,0,"th",33),b.Ic(10,st,2,1,"td",34),b.Qb(),b.Rb(11,35),b.Ic(12,ct,2,0,"th",36),b.Ic(13,lt,2,3,"td",37),b.Qb(),b.Rb(14,38),b.Ic(15,dt,2,0,"th",36),b.Ic(16,ut,2,3,"td",37),b.Qb(),b.Rb(17,39),b.Ic(18,bt,2,0,"th",33),b.Ic(19,ft,5,3,"td",34),b.Qb(),b.Rb(20,40),b.Ic(21,gt,2,0,"th",36),b.Ic(22,St,2,1,"td",34),b.Qb(),b.Rb(23,41),b.Ic(24,Tt,2,0,"th",36),b.Ic(25,yt,3,4,"td",34),b.Qb(),b.Rb(26,42),b.Ic(27,It,2,0,"th",33),b.Ic(28,Gt,7,3,"td",34),b.Qb(),b.Ic(29,xt,1,0,"tr",43),b.Ic(30,Mt,1,0,"tr",44),b.Ic(31,Pt,3,1,"tr",45),b.Sb(),b.Ob(32,"mat-paginator",46,47),b.Sb(),b.Sb()}if(2&t){const t=b.ec();b.Bb(7),b.kc("dataSource",t.dataSource),b.Bb(22),b.kc("matHeaderRowDef",t.displayedColumns),b.Bb(1),b.kc("matRowDefColumns",t.displayedColumns),b.Bb(2),b.kc("pageSizeOptions",t.pageSizeOptions)}}function At(t,e){1&t&&(b.Tb(0,"th",51),b.Kc(1,"Name"),b.Sb())}function Rt(t,e){if(1&t&&(b.Tb(0,"td",49),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Lc(t.name)}}function Et(t,e){1&t&&(b.Tb(0,"th",48),b.Kc(1,"Parsed"),b.Sb())}function qt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div"),b.Tb(1,"button",55),b.ac("click",(function(){b.wc(t);const e=b.ec().$implicit;return b.ec(2).showMessage(e.message)})),b.Ob(2,"i",56),b.Sb(),b.Sb()}}function jt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div"),b.Tb(1,"button",55),b.ac("click",(function(){b.wc(t);const e=b.ec().$implicit;return b.ec(2).showMessage(e.message)})),b.Ob(2,"i",57),b.Sb(),b.Sb()}}function Lt(t,e){1&t&&(b.Tb(0,"div"),b.Tb(1,"button",58),b.Kc(2,"-"),b.Sb(),b.Sb())}function Ut(t,e){if(1&t&&(b.Tb(0,"td",49),b.Tb(1,"div",53),b.Ic(2,qt,3,0,"div",54),b.Ic(3,jt,3,0,"div",54),b.Ic(4,Lt,3,0,"div",54),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.kc("ngIf",0==t.parsed),b.Bb(1),b.kc("ngIf",1==t.parsed),b.Bb(1),b.kc("ngIf",null==t.parsed)}}function $t(t,e){1&t&&(b.Tb(0,"th",51),b.Kc(1,"Created At"),b.Sb())}function Ht(t,e){if(1&t&&(b.Tb(0,"td",49),b.Kc(1),b.fc(2,"date"),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Mc(" ",b.hc(2,1,t.createdAt,"medium")," ")}}function Vt(t,e){1&t&&(b.Tb(0,"th",48),b.Kc(1,"Actions"),b.Sb())}function zt(t,e){1&t&&b.Ob(0,"i",71)}function Qt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"button",95),b.ac("click",(function(){b.wc(t);const e=b.ec().$implicit;return b.ec(2).executeDataFlow(e)})),b.Ob(1,"i",96),b.Ic(2,zt,1,0,"i",66),b.Sb()}if(2&t){const t=b.ec().$implicit,e=b.ec(2);b.kc("matTooltip",e.urlFlowPlayBtnToolTip)("matTooltipClass",e.isDataFlowFailed&&e.callFromStartFlow&&e.flowIdCheck==t.name?"nodered-error-tooltip-custom":""),b.Bb(2),b.kc("ngIf",e.isDataFlowFailed&&e.callFromStartFlow&&e.flowIdCheck==t.name)}}function Zt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"td",49),b.Tb(1,"div",59),b.Tb(2,"p"),b.Kc(3),b.Sb(),b.Ic(4,Qt,3,3,"button",92),b.Tb(5,"button",93),b.ac("click",(function(){b.wc(t);const o=e.$implicit;return b.ec(2).downloadFile(o)})),b.Ob(6,"i",77),b.Sb(),b.Tb(7,"button",94),b.ac("click",(function(){b.wc(t);const o=e.$implicit;return b.ec(2).deleteRawFile(o._id,o.connId,"connectionFile")})),b.Ob(8,"i",62),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=e.$implicit,o=b.ec(2);b.Bb(3),b.Lc(t.dataflowId),b.Bb(1),b.kc("ngIf",o.isDataFlowPresent)}}function Yt(t,e){1&t&&b.Ob(0,"tr",80)}function Wt(t,e){1&t&&b.Ob(0,"tr",81)}function Jt(t,e){if(1&t&&(b.Tb(0,"tr",82),b.Tb(1,"td",83),b.Kc(2),b.Sb(),b.Sb()),2&t){b.ec();const t=b.tc(8);b.Bb(2),b.Mc('No data matching the filter "',t.value,'"')}}function Xt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",84),b.Tb(1,"h2",85),b.Kc(2,"Files"),b.Sb(),b.Tb(3,"mat-dialog-content"),b.Tb(4,"mat-form-field",28),b.Tb(5,"mat-label"),b.Kc(6,"Search"),b.Sb(),b.Tb(7,"input",29,30),b.ac("keyup",(function(e){return b.wc(t),b.ec().applyFilter(e,"connectionFiles")})),b.Sb(),b.Sb(),b.Tb(9,"table",86,87),b.Rb(11,35),b.Ic(12,At,2,0,"th",36),b.Ic(13,Rt,2,1,"td",34),b.Qb(),b.Rb(14,39),b.Ic(15,Et,2,0,"th",33),b.Ic(16,Ut,5,3,"td",34),b.Qb(),b.Rb(17,41),b.Ic(18,$t,2,0,"th",36),b.Ic(19,Ht,3,4,"td",34),b.Qb(),b.Rb(20,42),b.Ic(21,Vt,2,0,"th",33),b.Ic(22,Zt,9,2,"td",34),b.Qb(),b.Ic(23,Yt,1,0,"tr",43),b.Ic(24,Wt,1,0,"tr",44),b.Ic(25,Jt,3,1,"tr",45),b.Sb(),b.Ob(26,"mat-paginator",88,89),b.Sb(),b.Tb(28,"mat-dialog-actions",90),b.Tb(29,"button",91),b.Kc(30,"Close"),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.ec();b.Bb(9),b.kc("dataSource",t.filesDataSource),b.Bb(14),b.kc("matHeaderRowDef",t.displayedColumnsFiles),b.Bb(1),b.kc("matRowDefColumns",t.displayedColumnsFiles),b.Bb(2),b.kc("pageSizeOptions",t.pageSizeOptions)}}function te(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",100),b.Tb(1,"mat-card",101),b.Tb(2,"mat-card-header"),b.Tb(3,"div",102),b.Tb(4,"mat-icon",103),b.Kc(5,"dashboard"),b.Sb(),b.Sb(),b.Tb(6,"mat-card-title"),b.Tb(7,"h3"),b.Kc(8),b.fc(9,"titlecase"),b.Sb(),b.Sb(),b.Sb(),b.Tb(10,"mat-card-content",104),b.Tb(11,"h3"),b.Kc(12," Type : "),b.Tb(13,"label"),b.Kc(14),b.fc(15,"titlecase"),b.Sb(),b.Sb(),b.Tb(16,"p",105),b.Kc(17),b.Sb(),b.Sb(),b.Tb(18,"mat-card-actions"),b.Tb(19,"button",106),b.ac("click",(function(){b.wc(t);const o=e.$implicit;return b.ec(2).importSampleDataset(o.file)})),b.Kc(20," Import\xa0"),b.Ob(21,"i",107),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=e.$implicit;b.Bb(8),b.Lc(b.gc(9,3,t.name)),b.Bb(6),b.Mc(" ","predictive_modeling"===t.domain?"Predictive Modeling":b.gc(15,5,t.domain),""),b.Bb(3),b.Lc(t.description)}}function ee(t,e){if(1&t&&(b.Tb(0,"h1",85),b.Kc(1,"Sample Dataset"),b.Sb(),b.Tb(2,"mat-dialog-content",97),b.Tb(3,"div",98),b.Ic(4,te,22,7,"div",99),b.Sb(),b.Sb(),b.Tb(5,"mat-dialog-actions",90),b.Tb(6,"button",91),b.Kc(7,"Close"),b.Sb(),b.Sb()),2&t){const t=b.ec();b.Bb(4),b.kc("ngForOf",t.allSampleDatasets)}}const oe=o("GUC0");let ae=(()=>{class t{constructor(t,e,o,a,i,n,c,l,d,b,p){var m,h;this._toaster=t,this._data=e,this._localStorage=o,this._spinner=a,this._dialog=i,this._schedular=n,this._window=c,this._snackBar=l,this._socket=d,this._utils=b,this._sampleDataset=p,this.dataSource=new r.p,this.filesDataSource=new r.p,this.pageSizeOptions=[10,15,20],this.displayedColumns=[],this.displayedColumnsFiles=[],this.unsubscribe$=new s.b,this.tempArray=[],this.breadcrumbArray=[],this.breadArray=[],this.dataListArray=[],this.isDataFlowFailed=!1,this.count=0,this.callFromStartFlow=!1,this.flowIdCheck=null,this.dataFlowToolTip="Pull data",this.urlFlowPlayBtnToolTip="Execute data flow",this.planType=null,this.allowedConnectionsList=null,this.appType=u.a.appType,this.percentDone=0,this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this.allowedConnectionsList=(null===(h=null===(m=this.user)||void 0===m?void 0:m.psFeatures)||void 0===h?void 0:h.allowedFeaturesList)||[],this.displayedColumns=["icon","name","parsed","type","schedular","createdAt","actions"],this.displayedColumnsFiles=["name","parsed","createdAt","actions"]}set paginator(t){this.dataSource.paginator=t}set sort(t){this.dataSource.sort=t}set connFilesPaginator(t){this.filesDataSource.paginator=t}set connFilesSort(t){this.filesDataSource.sort=t}ngOnInit(){this._spinner.showSpinner(),this.initSocket(),this.getAllConnectionsData(),this.getDataGroupList(),this.getAllSampleDatasets(),this.schedularList()}getAllSampleDatasets(){this._sampleDataset.getAllDatasets().pipe(Object(E.a)(this.unsubscribe$)).subscribe(t=>{t.data&&(this.allSampleDatasets=t.data,this.filterSampleDatasets=this.allSampleDatasets.sort((t,e)=>new Date(e.createdAt).valueOf()-new Date(t.createdAt).valueOf()),this._spinner.stopSpinner())},t=>{this._spinner.stopSpinner(),this._toaster.error(t.error.message||"Server Error","Project Management")})}importSampleDataset(t){this._spinner.showSpinner(),this._data.uploadFile({encoding:"utf_8",projectId:this.project._id,dataGroupId:this.currentDataGroup||this.dataList[0]._id,dataFolderName:this.currentDataGroup||this.dataList[0]._id,parentFolderName:"",file:t,uploadType:"importDataset"}).subscribe(t=>{this.datasetDialog.close(),this._spinner.stopSpinner(),this._utils.showSnackBar(q.b.fileUpload)},t=>{this._toaster.error(t.error.message||"Server Error","Data Connection"),this._spinner.stopSpinner(),this._utils.dismissSnackBar()})}getAllConnectionsData(){let t=[];this.dataListArray.length=0,this.breadArray.length=0,this.breadcrumbArray.length=0,this._data.getAllConnectionsData(this.project._id).pipe(Object(E.a)(this.unsubscribe$)).subscribe(e=>{if(e){this.dataGroupsList=e[0].datagroupList,this.connectionsList=e[0].connection,this.rawFilesList=e[0].filesdata,this.filesData=e[0].pklfilesdata,this.dataListArray=this.dataListArray.concat(this.dataGroupsList,this.connectionsList,this.rawFilesList),t=this.dataListArray.filter(t=>!Object.keys(t).includes("parentId")&&!Object.keys(t).includes("datagroup_id")),t=t[0]._id;var o=this.dataListArray.filter(e=>"upload_retrained"!==e.type&&(e.parentId===t||e.datagroup_id===t)).filter(t=>!Object.keys(t).includes("connId"));this.parentFolderData=o,this.fArr=o,this.dataSource.data=this.fArr,this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this._spinner.stopSpinner()}else this._spinner.stopSpinner(),this._toaster.error("Cannot fetch connections list","Data Connection");this._utils.dismissSnackBar()},t=>{this._spinner.stopSpinner(),this._toaster.error("Server Error","Data Connection")})}showMessage(t){this.snackBarRef=this._snackBar.open(t,"OK",{verticalPosition:"bottom",horizontalPosition:"end"})}getDataGroupList(){this._data.getDataGroupsList(this.project._id).pipe(Object(E.a)(this.unsubscribe$)).subscribe(t=>{t&&(this.dataList=t)},t=>{this._toaster.error("Server Error","Data Connection")})}schedularList(){this._schedular.getSchedularsList().pipe(Object(E.a)(this.unsubscribe$)).subscribe(t=>{t&&(this.schedularArray=t)},t=>{this._toaster.error("Server Error","Data Connection")})}openDatasetModal(t){this.datasetDialog=this._dialog.open(t,{minWidth:"50vw",maxWidth:"75vw"})}openModalHandler(t,e){this._dialog.open(R,{minWidth:"60vw",maxWidth:"60vw",data:{formType:t,dataGroups:this.dataList,schedulars:this.schedularArray,data:e,currentDataGroup:this.currentDataGroup||this.dataList[0]._id,allowedConnectionsList:this.allowedConnectionsList||[]}}).afterClosed().subscribe(t=>{t&&(this.breadArray.length=0,this.getAllConnectionsData(),this.getDataGroupList(),this.schedularList())})}pullConnectionData(t){this.isDataFlowFailed=!1,this.callFromStartFlow=!1,this.flowIdCheck=t.name,this._utils.showSnackBar(q.b.pullData),this.selectedConnToPull=t._id,this.fArr=this.fArr.map(e=>(e.isPulling=e._id===t._id,e)),this._data.pullSingleData(t._id).pipe(Object(E.a)(this.unsubscribe$)).subscribe(e=>{e||(this.fArr=this.fArr.map(e=>(e._id===t._id&&(e.isPulling=!1),e)))},e=>{this._utils.dismissSnackBar(),this.fArr=this.fArr.map(e=>(e._id===t._id&&(e.isPulling=!1),e))})}downloadFile(t){this._window.open(`${u.a.serverBaseUrl}/api/project/${this.project._id}/download/${t.name}`,"_blank")}deleteHandler(t,e){switch(e){case"upload":case"notebook":case"connectionFile":this.deleteRawFile(t,"",e);break;case"mysql":case"mssql":case"postgresql":case"sftp":case"url":case"s3":case"snowflake":case"bigquery":this.deleteDataConnetion(t,e);break;default:this.deleteDataGroup(t)}}deleteRawFile(t,e,o){oe({title:"Are you sure?",text:"You will not be able to recover this file!",icon:"warning",buttons:{cancel:{text:"Cancel",value:null,visible:!0,className:""},confirm:{text:"Yes, delete it!",value:!0,visible:!0,className:"bg-danger"}}}).then(a=>{let i;a&&(this.breadArray.length=0,this._data.deleteRawFile(this.project._id,t).pipe(Object(E.a)(this.unsubscribe$)).subscribe(a=>{a?(this.getAllConnectionsData(),this._toaster.success("File deleted successfully","Data Connection"),"connectionFile"===o?(i=this.rawFilesList.filter(o=>{if(o._id!==t&&o.connId===e)return o}),this.filesDataSource.data=i,this.filesDataSource._updateChangeSubscription(),this.filesDataSource.paginator=this.paginator,this.filesDataSource.sort=this.sort):(i=this.fArr.filter((function(e){return e._id!==t})),this.dataSource.data=i,this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)):this._toaster.error("Cannot delete file","Data Connection")},t=>{this._toaster.error("Server Error","Data Connection")}))})}deleteDataGroup(t){this.breadArray.length=0;let e=[],o=[],a=[],i=this.dataGroupsList.filter(e=>(e.parentId!==t&&e._id!==t||this.tempArray.push(e),e.parentId===t));this.filterDataGroup(i),this.connectionsList.map(t=>{void 0!==this.tempArray.find(e=>t.datagroup_id===e._id)&&e.push(t)}),this.rawFilesList.map(t=>{void 0!==this.tempArray.find(e=>t.datagroup_id==e._id)&&o.push(t)}),this.filesData.map(t=>{void 0!==this.tempArray.find(e=>t.datagroup_id==e._id)&&a.push(t)}),oe({title:"Are you sure?",text:"You will not be able to recover this data!",icon:"warning",buttons:{cancel:{text:"Cancel",value:null,visible:!0,className:""},confirm:{text:"Yes, delete it!",value:!0,visible:!0,className:"bg-danger"}}}).then(i=>{i&&this._data.deleteDataGroup(this.project._id,t,{projectId:this.project._id,dataId:t,datagroup:this.tempArray,dataconnection:e,rawFiles:o,files:a}).pipe(Object(E.a)(this.unsubscribe$)).subscribe(e=>{e?(this._toaster.success("Folder deleted successfully","Data Connection"),this.fArr=this.fArr.filter(e=>e._id!=t),this.dataList=this.dataList.filter(e=>e._id!=t),this.dataSource.data=this.fArr,this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort):this._toaster.error("Cannot delete folder","Data Connection")},t=>{this._toaster.error("Server Error","Data Connection")})})}deleteDataConnetion(t,e){oe({title:"Are you sure?",text:"You will not be able to recover this data!",icon:"warning",buttons:{cancel:{text:"Cancel",value:null,visible:!0,className:""},confirm:{text:"Yes, delete it!",value:!0,visible:!0,className:"bg-danger"}}}).then(o=>{o&&(this.breadArray.length=0,this._data.deleteDataConnection(this.project._id,t).pipe(Object(E.a)(this.unsubscribe$)).subscribe(o=>{o?(this._toaster.success(e.toUpperCase()+" connection deleted successfully","Data Connection"),this.fArr=this.fArr.filter(e=>e._id!=t),this.dataSource.data=this.fArr,this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort):this._toaster.error("Cannot delete file","Data Connection")},t=>{this._toaster.error("Server Error","Data Connection")}))})}openFilesModal(t,e){let o;this.isDataFlowPresent=e.dataflowId,"upload"!==e.type&&"notebook"!==e.type&&(o=this.rawFilesList.filter(t=>{if(t.connId===e._id&&!t.isDeleted)return t}),this.filesDataSource.data=o,this.filesDataSource._updateChangeSubscription(),this._dialog.open(t,{height:"auto",width:"60%"}))}executeDataFlow(t){this.callFromStartFlow=!0,this.flowIdCheck=t.name,this._data.executeDataFlow(this.project._id,t.connId,t.name).pipe(Object(E.a)(this.unsubscribe$)).subscribe(t=>{t&&this._toaster.success("Flow execution started","Data Connection")},t=>{this._toaster.error("Server Error","Data Connection")})}breadcrumbHandler(t,e){if(!t.type){let o=t._id||t.id;this._spinner.showSpinner(),this.currentDataGroup=o;let a=[],i=[];if(e){let e=this.breadArray.findIndex(t=>t.id==o);this.breadArray.splice(e+1),t||this.getAllConnectionsData()}else this.breadArray.push({id:o,name:t.name});this.breadcrumbArray=this.breadArray,a=this.dataListArray.filter(t=>t.parentId===o||t.datagroup_id===o),i=a.filter(t=>!Object.keys(t).includes("connId")),this.fArr=i,this.dataSource.data=i,this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this._spinner.stopSpinner()}}filterDataGroup(t){let e;for(var o=0;o<t.length;o++)e=this.dataGroupsList.filter(e=>(e.parentId==t[o]._id&&this.tempArray.push(e),e.parentId==t[o]._id)),this.callRecursive(e)}callRecursive(t){t.length>0&&this.filterDataGroup(t)}getIcon(t){switch(t){case"mysql":case"mssql":case"postgresql":case"sftp":case"s3":case"snowflake":case"bigquery":return"fa fa-database icons";case"upload":case"notebook":return"fa fa-file-alt icons";case"url":return"fa fa-link icons";default:return"fa fa-folder icons"}}applyFilter(t,e){const o=t.target.value;"connections"===e?(this.dataSource.filter=o.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()):"connectionFiles"===e&&(this.filesDataSource.filter=o.trim().toLowerCase(),this.filesDataSource.paginator&&this.filesDataSource.paginator.firstPage())}initSocket(){this._socket.listen("pullData").subscribe(t=>{"pull_success"===t.status?(this._utils.dismissSnackBar(),t.data.parsed?t.data.projectId===this.project._id&&this._toaster.success("Data uploaded successfully","Data Connection"):t.data.projectId===this.project._id&&this._toaster.info(t.data.message,"Data Connection"),this.getAllConnectionsData()):(this.fArr=this.fArr.map(e=>(e._id===this.selectedConnToPull&&(e.isPulling=!1,"sftp"!==e.type&&"s3"!==e.type||"No updated files"!==t.status?this._toaster.error(t.status,"Data Connection"):this._toaster.info(t.status,"Data Connection")),e)),"No updated files"===t.status?this._toaster.info(t.status.message||t.status||"Could not complete the operation","Data Connection"):this._toaster.error(t.status.message||t.status||"Could not complete the operation","Data Connection"),this._spinner.stopSpinner(),this._utils.dismissSnackBar()),this._utils.dismissSnackBar(),this._spinner.stopSpinner()},t=>{this._spinner.stopSpinner(),this._utils.dismissSnackBar(),this._toaster.error("Socket Error","Data Connection")}),this._socket.listen("nodeRedFlowExecution").subscribe(t=>{"flow_execution_failed"===t.status&&(this.isDataFlowFailed=!0,this.dataFlowToolTip="Data Flow Execution Failed",this.urlFlowPlayBtnToolTip="Data Flow Execution Failed"),this.isDataFlowFailed&&(this.count<1&&this._toaster.error("Data Flow Execution Failed","Data Flow"),this.count++),this._spinner.stopSpinner()},t=>{this._spinner.stopSpinner(),this._toaster.error("Socket Error","Data Connection")})}ngOnDestroy(){this._socket.removeListener("pullData"),this._socket.removeListener("nodeRedFlowExecution"),this._utils.dismissSnackBar(),this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(m.c),b.Nb(p.a),b.Nb(h.a),b.Nb(j.a),b.Nb(d.c),b.Nb(L.a),b.Nb(Window),b.Nb(g.c),b.Nb(U.a),b.Nb(f.a),b.Nb(H.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-data-connection"]],viewQuery:function(t,e){var o;1&t&&(b.Oc(i.a,!0),b.Oc(n.a,!0),b.Oc(et,!0),b.Oc(ot,!0)),2&t&&(b.sc(o=b.bc())&&(e.paginator=o.first),b.sc(o=b.bc())&&(e.sort=o.first),b.sc(o=b.bc())&&(e.connFilesPaginator=o.first),b.sc(o=b.bc())&&(e.connFilesSort=o.first))},decls:21,vars:9,consts:[[1,"fluid-container"],[1,"heading"],["mat-card-avatar",""],[1,"far","fa-folder","folder-icon"],[2,"cursor","pointer",3,"matTooltip","click"],["class","d-flex align-items-center",4,"ngFor","ngForOf"],[1,"ml-auto"],["type","button","mat-raised-button","","class","bg-primary","style","float: right",3,"matTooltip","click",4,"ngIf"],["type","button","mat-raised-button","",1,"bg-primary","mr-3",2,"float","right",3,"matTooltip","click"],["type","button","mat-stroked-button","",2,"float","right","margin-right","15px",3,"matTooltip","click"],["class","first-user-widget",4,"ngIf"],["class","connection-listing mt-5 p-4",4,"ngIf"],["connectionFilesTemplate",""],["importDataset",""],[1,"d-flex","align-items-center"],[1,"align-middle"],[3,"click"],["type","button","mat-raised-button","",1,"bg-primary",2,"float","right",3,"matTooltip","click"],[1,"first-user-widget"],[1,"px-5","py-3"],[1,"row","align-items-center"],[1,"col-md-7","align-middle","p-lg"],[2,"font-size","22px"],[2,"font-size","22px","margin","30px 0"],["type","button","mat-flat-button","",1,"btn-primary",2,"font-size","22px","height","48px",3,"click"],[1,"col-md-5","text-right"],["src","../../../../assets/img/data-connection-infographic.svg","alt","Data Connection Types"],[1,"connection-listing","mt-5","p-4"],[1,"search-input"],["matInput","",3,"keyup"],["input",""],["mat-table","","matSort","","matSortActive","createdAt","matSortDirection","desc","matSortDisableClear","",1,"mt-2",3,"dataSource"],["matColumnDef","icon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"clickable","click",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","parsed"],["matColumnDef","schedular"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mt-2",3,"pageSizeOptions"],["conListPaginator",""],["mat-header-cell",""],["mat-cell",""],[3,"ngClass"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",3,"click"],[1,"actions-buttons"],[4,"ngIf"],["mat-icon-button","",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle","danger-icon"],["aria-hidden","true",1,"fa","fa-check-circle","success-icon"],["mat-icon-button",""],[1,"action-buttons","d-flex"],["mat-icon-button","","matTooltip","Download file","class","text-value",3,"click",4,"ngIf"],["matTooltip","Delete","mat-icon-button","",1,"delete-button",3,"click"],[1,"fa","fa-trash"],["mat-icon-button","","style","background-color: inherit; font-size: 18px",4,"ngIf"],["mat-icon-button","",3,"hidden","matTooltip","matTooltipClass","click"],[1,"fa","fa-magnet"],["class","nodered-error fas fa-exclamation-circle",4,"ngIf"],["mat-icon-button","","matTooltip","Data flow",3,"routerLink","queryParams","disabled",4,"ngIf"],["mat-icon-button","","matTooltip","Data flow",3,"routerLink","queryParams",4,"ngIf"],["mat-icon-button","",2,"background-color","inherit","font-size","18px"],[1,"fa","fa-cog","fa-spin"],[1,"nodered-error","fas","fa-exclamation-circle"],["mat-icon-button","","matTooltip","Data flow",3,"routerLink","queryParams","disabled"],["matBadge","","matBadgeOverlap","false",1,"fa","fa-random",3,"matBadgeIcon","ngClass"],["mat-icon-button","","matTooltip","Data flow",3,"routerLink","queryParams"],[1,"fa","fa-random"],["mat-icon-button","","matTooltip","Download file",1,"text-value",3,"click"],[1,"fa","fa-download"],["mat-icon-button","","matTooltip","Edit",3,"click"],[1,"fa","fa-edit"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"],[1,"connection-listing"],["mat-dialog-title",""],["mat-table","","matSort","","matSortActive","createdAt","matSortDirection","desc","matSortDisableClear","",3,"dataSource"],["ConnFilesSort","matSort"],[3,"pageSizeOptions"],["ConnFilesPaginator",""],[1,"justify-content-end","m-auto"],["mat-stroked-button","","mat-dialog-close","","color","basic"],["mat-icon-button","","class","text-value",3,"matTooltip","matTooltipClass","click",4,"ngIf"],["mat-icon-button","","matTooltip","Download File",1,"text-value",3,"click"],["mat-icon-button","","matTooltip","Click to remove the file.",1,"delete-button",3,"click"],["mat-icon-button","",1,"text-value",3,"matTooltip","matTooltipClass","click"],[1,"fa","fa-play"],[1,"mat-typography"],[1,"d-flex","flex-wrap","justify-content-start","my-4","row"],["class","col-md-4 mb-4 d-flex",4,"ngFor","ngForOf"],[1,"col-md-4","mb-4","d-flex"],[1,"template-proj-card","d-flex","flex-column",2,"background-color","whitesmoke","width","350px"],["mat-card-avatar","",1,"example-header-image"],[2,"font-size","35px","color","orange"],[1,"flex-grow-1"],[1,"font-weight-normal"],["mat-stroked-button","","matTooltip","Click to import dataset",1,"mb-3","mr-3",2,"float","right","font-size","medium",3,"click"],[1,"fas","fa-file-import"]],template:function(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",0),b.Tb(1,"mat-card",1),b.Tb(2,"mat-card-header"),b.Tb(3,"div",2),b.Ob(4,"i",3),b.Sb(),b.Tb(5,"mat-card-title"),b.Tb(6,"h3",4),b.ac("click",(function(){return e.breadcrumbHandler("",!0)})),b.Kc(7," Data Connections "),b.Sb(),b.Ic(8,at,5,3,"div",5),b.Sb(),b.Tb(9,"span",6),b.Ic(10,it,2,1,"button",7),b.Tb(11,"button",8),b.ac("click",(function(){b.wc(t);const o=b.tc(20);return e.openDatasetModal(o)})),b.Kc(12," Sample Datasets "),b.Sb(),b.Tb(13,"button",9),b.ac("click",(function(){return e.openModalHandler("dataGroup")})),b.Kc(14," Create Folder "),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Ic(15,nt,13,1,"mat-card",10),b.Ic(16,Kt,34,4,"mat-card",11),b.Sb(),b.Ic(17,Xt,31,4,"ng-template",null,12,b.Jc),b.Ic(19,ee,8,1,"ng-template",null,13,b.Jc)}2&t&&(b.Bb(6),b.Db(e.breadcrumbArray.length?"heading-with-breadcrumb":"heading-title"),b.kc("matTooltip",e._utils.getTootip("dataConnections")),b.Bb(2),b.kc("ngForOf",e.breadcrumbArray),b.Bb(2),b.kc("ngIf",e.fArr&&e.fArr.length>0),b.Bb(1),b.kc("matTooltip","Choose and import sample datasets."),b.Bb(2),b.kc("matTooltip",e._utils.getTootip("createDataGroup")),b.Bb(2),b.kc("ngIf",e.fArr&&0===e.fArr.length),b.Bb(1),b.kc("ngIf",e.fArr&&e.fArr.length>0))},directives:[V.a,V.f,V.c,V.m,z.b,a.s,a.t,Q.b,Z.a,V.d,Y.c,Y.g,W.b,r.o,n.a,r.c,r.i,r.b,r.k,r.n,r.l,i.a,r.h,r.a,a.q,n.b,J.f,X.a,tt.a,r.j,r.m,d.j,d.g,d.d,d.e,V.b],pipes:[a.f,a.F],styles:[".fluid-container[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover{color:#fff!important}.fluid-container[_ngcontent-%COMP%]   .connection-listing[_ngcontent-%COMP%]   .clickable[_ngcontent-%COMP%]{cursor:pointer;color:#07509d!important}.nodered-error[_ngcontent-%COMP%]{color:red;position:absolute;right:-1px;z-index:1;top:-4px}.nodered-error-tooltip-custom[_ngcontent-%COMP%]{background:#b71c1c!important}.success-icon[_ngcontent-%COMP%]{color:green!important}.danger-icon[_ngcontent-%COMP%]{color:red!important}"]}),t})();var ie=o("WUEe"),ne=o("A5z7"),re=o("d3UM"),se=o("QibW"),ce=o("Xa2L"),le=o("FKr1"),de=o("cWTo"),ue=o("8NN1");function be(t,e){1&t&&(b.Tb(0,"small"),b.Kc(1,"(Note: Preview of first 5 records only)"),b.Sb())}function pe(t,e){if(1&t&&b.Ob(0,"mat-progress-spinner",24),2&t){const t=b.ec(2);b.kc("color",t.color)("mode",t.mode)("diameter",t.diameter)}}function me(t,e){if(1&t&&(b.Tb(0,"mat-option",25),b.Kc(1),b.fc(2,"dropFileExtension"),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t._id),b.Bb(1),b.Lc(b.hc(2,2,t.filename,t.fileSource))}}function he(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Data set is required."),b.Sb())}function fe(t,e){if(1&t&&(b.Tb(0,"mat-option",25),b.Kc(1),b.fc(2,"titlecase"),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t),b.Bb(1),b.Lc(b.gc(2,2,t))}}function ge(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Join type is required."),b.Sb())}function Se(t,e){if(1&t&&(b.Tb(0,"div",12),b.Tb(1,"div",26),b.Tb(2,"mat-form-field",14),b.Tb(3,"mat-label"),b.Kc(4,"Select join type"),b.Sb(),b.Tb(5,"mat-select",27),b.Ic(6,fe,3,4,"mat-option",17),b.Sb(),b.Ic(7,ge,2,0,"mat-error",1),b.Sb(),b.Sb(),b.Sb()),2&t){const t=b.ec(2);b.Bb(6),b.kc("ngForOf",t.joinTypeArray),b.Bb(1),b.kc("ngIf",t.mergeForm.get("joinType").hasError("required")&&(t.mergeForm.get("joinType").dirty||t.mergeForm.get("joinType").touched))}}function Te(t,e){if(1&t&&(b.Tb(0,"mat-option",25),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t.colName),b.Bb(1),b.Lc(t.colName)}}function ye(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"This field is required."),b.Sb())}function Ie(t,e){if(1&t&&(b.Tb(0,"mat-option",25),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t.colName),b.Bb(1),b.Mc("",t.colName," ")}}function we(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"This field is required."),b.Sb())}function Ce(t,e){if(1&t&&(b.Tb(0,"div",12),b.Tb(1,"div",26),b.Tb(2,"mat-form-field",14),b.Tb(3,"mat-label"),b.Kc(4,"On which column(s) you want to merge ?"),b.Sb(),b.Tb(5,"mat-select",28),b.Ic(6,Te,2,2,"mat-option",17),b.Sb(),b.Ic(7,ye,2,0,"mat-error",1),b.Sb(),b.Sb(),b.Tb(8,"div",26),b.Tb(9,"mat-form-field",14),b.Tb(10,"mat-label"),b.Kc(11,"Select column(s) to merge"),b.Sb(),b.Tb(12,"mat-select",29),b.Ic(13,Ie,2,2,"mat-option",17),b.Sb(),b.Ic(14,we,2,0,"mat-error",1),b.Sb(),b.Sb(),b.Sb()),2&t){const t=b.ec(2);b.Bb(6),b.kc("ngForOf",t.commonColumns),b.Bb(1),b.kc("ngIf",t.mergeForm.get("commonColumn").hasError("required")&&(t.mergeForm.get("commonColumn").dirty||t.mergeForm.get("commonColumn").touched)),b.Bb(6),b.kc("ngForOf",t.avalialbleColumnsToMerge),b.Bb(1),b.kc("ngIf",t.mergeForm.get("columnsToMerge").hasError("required")&&(t.mergeForm.get("columnsToMerge").dirty||t.mergeForm.get("columnsToMerge").touched))}}function ke(t,e){1&t&&(b.Tb(0,"mat-hint"),b.Kc(1,"Note : There are no common columns to merge."),b.Sb())}const ve=function(){return{standalone:!0}};function _e(t,e){if(1&t){const t=b.Ub();b.Tb(0,"mat-dialog-content",7),b.Tb(1,"h4",8),b.Kc(2," Selected Data Set : "),b.Tb(3,"mat-chip-list",9),b.Tb(4,"mat-chip"),b.Kc(5),b.Sb(),b.Sb(),b.Sb(),b.Ic(6,pe,1,3,"mat-progress-spinner",10),b.Tb(7,"form",11),b.Tb(8,"div",12),b.Tb(9,"div",13),b.Tb(10,"mat-form-field",14),b.Tb(11,"mat-label",15),b.Kc(12,"Select data set to merge"),b.Sb(),b.Tb(13,"mat-select",16),b.ac("selectionChange",(function(e){return b.wc(t),b.ec().dataSetChanged(e.value)})),b.Ic(14,me,3,5,"mat-option",17),b.Sb(),b.Ic(15,he,2,0,"mat-error",1),b.Sb(),b.Sb(),b.Sb(),b.Tb(16,"div",12),b.Tb(17,"div",18),b.Tb(18,"label",19),b.Kc(19,"How do you want to merge data ?"),b.Sb(),b.Tb(20,"mat-radio-group",20),b.ac("ngModelChange",(function(e){return b.wc(t),b.ec().mergeType=e}))("change",(function(){b.wc(t);const e=b.ec();return e.mergeTypeChanged(e.mergeType)})),b.Tb(21,"mat-radio-button",21),b.Kc(22,"Row wise "),b.Sb(),b.Tb(23,"mat-radio-button",22),b.Kc(24,"Column wise "),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Ic(25,Se,8,2,"div",23),b.Ic(26,Ce,15,4,"div",23),b.Ic(27,ke,2,0,"mat-hint",1),b.Sb(),b.Sb()}if(2&t){const t=b.ec();b.Bb(5),b.Lc(t.dialogData.data.name),b.Bb(1),b.kc("ngIf",t.showSpinner),b.Bb(1),b.kc("formGroup",t.mergeForm),b.Bb(4),b.kc("matTooltip",t._utils.getTootip("selectDataSetEda")),b.Bb(3),b.kc("ngForOf",t.dataSetList),b.Bb(1),b.kc("ngIf",t.mergeForm.get("selectedDataset").hasError("required")&&(t.mergeForm.get("selectedDataset").dirty||t.mergeForm.get("selectedDataset").touched)),b.Bb(5),b.kc("ngModel",t.mergeType)("ngModelOptions",b.mc(13,ve)),b.Bb(1),b.kc("matTooltip",t._utils.getTootip("mergeDatasetRowWise")),b.Bb(2),b.kc("matTooltip",t._utils.getTootip("mergeDatasetColumnWise")),b.Bb(2),b.kc("ngIf","column"===t.mergeType&&t.mergeForm.get("selectedDataset").value&&t.commonColumns.length),b.Bb(1),b.kc("ngIf","column"===t.mergeType&&t.mergeForm.get("selectedDataset").value&&t.commonColumns.length),b.Bb(1),b.kc("ngIf",t.commonColumns&&0===t.commonColumns.length&&"column"===t.mergeType)}}function De(t,e){if(1&t){const t=b.Ub();b.Tb(0,"ag-grid-angular",32,33),b.ac("gridReady",(function(e){return b.wc(t),b.ec(2).gridReady(e)})),b.Sb()}if(2&t){const t=b.ec(2);b.kc("rowData",t.previewrowData)("gridOptions",t.gridOptions)}}function Fe(t,e){if(1&t&&(b.Tb(0,"mat-dialog-content",30),b.Ic(1,De,2,2,"ag-grid-angular",31),b.Sb()),2&t){const t=b.ec();b.Bb(1),b.kc("ngIf",t.previewrowData)}}function Oe(t,e){if(1&t){const t=b.Ub();b.Tb(0,"button",34),b.ac("click",(function(){b.wc(t);const e=b.ec();return e.onSubmitMerge(e.mergeForm.value)})),b.Kc(1," Merge "),b.Sb()}if(2&t){const t=b.ec();b.kc("disabled",t.mergeForm.invalid)}}let Be=(()=>{class t{constructor(t,e,o,a,i,n,s,c){this.dialogData=t,this._spinner=e,this._fb=o,this._data=a,this._toaster=i,this._dataSetDialogRef=n,this._localStorage=s,this._utils=c,this.dataSource=new r.p,this.resizeEvent="resize.ag-grid",this.pageSizeOptions=[10,15,20],this.displayedColumns=[],this.color="primary",this.mode="indeterminate",this.diameter=100,this.exportProjectDiameter=50,this.joinTypeArray=["inner","left","right","outer"],this.showPreview=!1,this.showReport=!1,this.showMergeForm=!1,this.showSpinner=!1,this.dataSetList=[],this.mergeType="row",this.mergeForm=this._fb.group({selectedDataset:["",l.I.required],joinType:["",l.I.nullValidator],commonColumn:["",l.I.nullValidator],columnsToMerge:["",l.I.nullValidator]})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnInit(){"preview"===this.dialogData.type?(this.showPreview=!0,this.modalHeading="Data Preview",console.log(this.dialogData),this.previewData()):(this.showMergeForm=!0,this.modalHeading="Merge Data",this.project=this._localStorage.getItem("project"),this.listAllProjectFileList(this.dialogData.data))}previewData(){this._spinner.showSpinner();let t=[];this._data.myFileData(this.dialogData.reqObj.pid,this.dialogData.dataId,this.dialogData.reqObj,!0).subscribe(e=>{if(e){for(let o in e.preview[0])t.push({headerName:o,field:o});console.log(t),this.gridOptions={headerHeight:40,columnDefs:t,defaultColDef:{resizable:!0}},this.previewrowData=e.preview,this._spinner.stopSpinner()}else this._spinner.stopSpinner(),this._toaster.error("Sorry! Cannot preview the files data.","Data Set")},t=>{this.showSpinner=!1,this._toaster.error("Server Error","Data Set")})}listAllProjectFileList(t){this.dataConnection$=this._data.getAllProjectFileList(this.project._id).subscribe(e=>{e&&(this.parentFile=e.find(e=>e._id===t._id),this.dataSetList=e.filter(e=>e._id!==t._id))},t=>{this._toaster.error("Server Error","Data Sets")})}dataSetChanged(t){this.mergeDataSet=this.dataSetList.find(e=>e._id===t),this.avalialbleColumnsToMerge=this.mergeDataSet.fileSchema,this.commonColumns=this.parentFile.fileSchema.filter(t=>this.mergeDataSet.fileSchema.find(e=>e.colName===t.colName))}mergeTypeChanged(t){"column"===t?(this.mergeForm.get("joinType").setValidators(l.I.required),this.mergeForm.get("commonColumn").setValidators(l.I.required),this.mergeForm.get("columnsToMerge").setValidators(l.I.required),this.mergeForm.get("joinType").updateValueAndValidity(),this.mergeForm.get("commonColumn").updateValueAndValidity(),this.mergeForm.get("columnsToMerge").updateValueAndValidity()):(this.mergeForm.get("joinType").clearValidators(),this.mergeForm.get("commonColumn").clearValidators(),this.mergeForm.get("columnsToMerge").clearValidators(),this.mergeForm.get("joinType").updateValueAndValidity(),this.mergeForm.get("commonColumn").updateValueAndValidity(),this.mergeForm.get("columnsToMerge").updateValueAndValidity())}onSubmitMerge(t){this.showSpinner=!0,t.originalFilePath=this.parentFile.filename,t.pid=this.project._id,t.dataGroupId=this.dialogData.data.datagroup_id,t.mergeFilePath=this.mergeDataSet.filename,t.parentDatasetTasks=this.parentFile.tasks,t.mergeDatasetTasks=this.mergeDataSet.tasks,t.mergeType=this.mergeType,"row"===this.mergeType&&(delete t.columnsToMerge,delete t.commonColumn,delete t.joinType),this.dataConnection$=this._data.mergeDataSet(this.project._id,t).subscribe(t=>{t?(this.closeModal(t),this.showSpinner=!1,this._toaster.info("Data merging started...","Data Sets")):(this.showSpinner=!1,this._toaster.error("Sorry! Cannot merge the data set.","Data Sets"))},t=>{this.closeModal(),this.showSpinner=!1,this._toaster.error(t.message,"Data Sets")})}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}closeModal(t){this._dataSetDialogRef.close(t)}gridReady(t){t.api.setDomLayout("autoHeight"),this.gridApi=t.api,this.gridApi.setColumnDefs(this.gridOptions.columnDefs),this.gridApi.setRowData(this.previewrowData),this.gridApi.refreshCells({force:!0})}ngOnDestroy(){this.dataConnection$&&this.dataConnection$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(d.a),b.Nb(j.a),b.Nb(l.h),b.Nb(p.a),b.Nb(m.c),b.Nb(d.i),b.Nb(h.a),b.Nb(f.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-data-set-dialog"]],viewQuery:function(t,e){var o;1&t&&(b.Oc(i.a,!0),b.Oc(n.a,!0)),2&t&&(b.sc(o=b.bc())&&(e.paginator=o.first),b.sc(o=b.bc())&&(e.sort=o.first))},decls:9,vars:5,consts:[["mat-dialog-title",""],[4,"ngIf"],["class","mat-typography mt-4",4,"ngIf"],["class","mat-typography preview-data-section mb-3",4,"ngIf"],[1,"justify-content-end","m-auto"],["mat-stroked-button","",3,"click"],["mat-flat-button","","class","btn-primary","type","submit",3,"disabled","click",4,"ngIf"],[1,"mat-typography","mt-4"],[1,"selected-dataset"],[1,"ml-2"],["class","spinner",3,"color","mode","diameter",4,"ngIf"],["role","form","name","mergeForm",1,"form-validate",3,"formGroup"],[1,"row"],[1,"col-md-12","form-group"],["appearance","outline"],[3,"matTooltip"],["formControlName","selectedDataset","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-5","form-group","ml-1"],["id","project-type"],[1,"radio-group",3,"ngModel","ngModelOptions","ngModelChange","change"],["value","row",3,"matTooltip"],["value","column",3,"matTooltip"],["class","row",4,"ngIf"],[1,"spinner",3,"color","mode","diameter"],[3,"value"],[1,"col-md-6","form-group"],["formControlName","joinType","required",""],["formControlName","commonColumn","multiple",""],["formControlName","columnsToMerge","multiple",""],[1,"mat-typography","preview-data-section","mb-3"],["id","myGrid","class","ag-angle my-4",3,"rowData","gridOptions","gridReady",4,"ngIf"],["id","myGrid",1,"ag-angle","my-4",3,"rowData","gridOptions","gridReady"],["agGrid",""],["mat-flat-button","","type","submit",1,"btn-primary",3,"disabled","click"]],template:function(t,e){1&t&&(b.Tb(0,"h2",0),b.Kc(1),b.Ic(2,be,2,0,"small",1),b.Sb(),b.Ic(3,_e,28,14,"mat-dialog-content",2),b.Ic(4,Fe,2,1,"mat-dialog-content",3),b.Tb(5,"mat-dialog-actions",4),b.Tb(6,"button",5),b.ac("click",(function(){return e.closeModal()})),b.Kc(7,"Cancel"),b.Sb(),b.Ic(8,Oe,2,1,"button",6),b.Sb()),2&t&&(b.Bb(1),b.Mc(" ",e.modalHeading," "),b.Bb(1),b.kc("ngIf","preview"===e.dialogData.type),b.Bb(1),b.kc("ngIf","merge"===e.dialogData.type),b.Bb(1),b.kc("ngIf","preview"===e.dialogData.type),b.Bb(4),b.kc("ngIf","merge"===e.dialogData.type))},directives:[d.j,a.t,d.d,Q.b,d.g,ne.d,ne.a,l.K,l.v,l.m,Y.c,Y.g,z.b,re.a,l.u,l.k,l.F,a.s,se.c,l.x,se.b,ce.a,le.o,Y.b,Y.f,de.a],pipes:[ue.a,a.F],styles:[".selected-dataset[_ngcontent-%COMP%]{display:inline-flex;align-items:center}.radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}"]}),t})();var Ne=o("x/NU"),Ge=o("jhN1"),xe=o("mdW0");function Me(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",8),b.Tb(1,"mat-icon",9),b.Kc(2,"chevron_right"),b.Sb(),b.Tb(3,"h3",10),b.ac("click",(function(){b.wc(t);const o=e.$implicit;return b.ec().breadcrumbHandler(o,!0)})),b.Kc(4),b.Sb(),b.Sb()}if(2&t){const t=e.$implicit,o=e.last;b.Bb(3),b.Db(o?"breadcrumb-name":"heading-with-breadcrumb ml-0"),b.Bb(1),b.Mc(" ",t.name," ")}}const Pe=function(){return["/project/data/dataconnection"]};function Ke(t,e){1&t&&(b.Tb(0,"h4",11),b.Kc(1," You don't have any data set or connection yet, "),b.Tb(2,"a",12),b.Kc(3,"upload now."),b.Sb(),b.Sb()),2&t&&(b.Bb(2),b.kc("routerLink",b.mc(1,Pe)))}function Ae(t,e){if(1&t&&b.Ob(0,"mat-progress-spinner",35),2&t){const t=b.ec(2);b.kc("color",t.color)("mode",t.mode)("diameter",t.diameter)}}function Re(t,e){1&t&&b.Ob(0,"th",36)}function Ee(t,e){if(1&t&&(b.Tb(0,"td",37),b.Ob(1,"i"),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Db(t.fileSource?"fa fa-file-alt icons mr-3":"fa fa-folder icons mr-3")}}function qe(t,e){1&t&&(b.Tb(0,"th",38),b.Kc(1,"Name"),b.Sb())}function je(t,e){if(1&t){const t=b.Ub();b.Tb(0,"td",39),b.ac("click",(function(){b.wc(t);const o=e.$implicit;return b.ec(2).breadcrumbHandler(o)})),b.Kc(1),b.fc(2,"dropFileExtension"),b.Sb()}if(2&t){const t=e.$implicit;b.Fb("clickable",!t.fileSource),b.Bb(1),b.Mc(" ",b.hc(2,3,t.name,t.fileSource)," ")}}function Le(t,e){1&t&&(b.Tb(0,"th",38),b.Kc(1,"Created At"),b.Sb())}function Ue(t,e){if(1&t&&(b.Tb(0,"td",37),b.Kc(1),b.fc(2,"date"),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Mc(" ",b.hc(2,1,t.createdAt,"medium")," ")}}function $e(t,e){1&t&&(b.Tb(0,"th",38),b.Kc(1,"No. of Rows"),b.Sb())}function He(t,e){if(1&t&&(b.Tb(0,"td",37),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Mc(" ",t.noOfRows?t.noOfRows:"-"," ")}}function Ve(t,e){1&t&&(b.Tb(0,"th",38),b.Kc(1,"No. of Columns"),b.Sb())}function ze(t,e){if(1&t&&(b.Tb(0,"td",37),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Mc(" ",t.noOfCols?t.noOfCols:"-"," ")}}function Qe(t,e){1&t&&(b.Tb(0,"th",38),b.Kc(1,"File Size"),b.Sb())}function Ze(t,e){if(1&t&&(b.Tb(0,"td",37),b.Kc(1),b.fc(2,"fileSizeConverter"),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Mc(" ",t.fileSize?b.hc(2,1,t.fileSize,2):"-"," ")}}function Ye(t,e){1&t&&(b.Tb(0,"th",36),b.Kc(1,"Actions"),b.Sb())}function We(t,e){if(1&t){const t=b.Ub();b.Tb(0,"button",49),b.ac("click",(function(){b.wc(t);const e=b.ec(2).$implicit;return b.ec(2).openDataReportModal(e,"report")})),b.Ob(1,"i",50),b.Sb()}}function Je(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",41),b.Tb(1,"button",42),b.ac("click",(function(){b.wc(t);const e=b.ec().$implicit;return b.ec(2).openDataPreviewModal(e,"preview")})),b.Ob(2,"i",43),b.Sb(),b.Ic(3,We,2,0,"button",44),b.Tb(4,"button",45),b.ac("click",(function(){b.wc(t);const e=b.ec().$implicit;return b.ec(2).openMergeDataModal(e,"merge")})),b.Ob(5,"i",46),b.Sb(),b.Tb(6,"button",47),b.ac("click",(function(){b.wc(t);const e=b.ec().$implicit;return b.ec(2).deleteHandler(e._id)})),b.Ob(7,"i",48),b.Sb(),b.Sb()}if(2&t){const t=b.ec(3);b.Bb(3),b.kc("ngIf",(null==t.user||null==t.user.roles?null:t.user.roles.includes("super_admin"))||"basic"!==(null==t.user?null:t.user.planType)&&"pro"!==(null==t.user?null:t.user.planType))}}function Xe(t,e){if(1&t&&(b.Tb(0,"td",37),b.Ic(1,Je,8,1,"div",40),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.kc("ngIf",t.fileSource)}}function to(t,e){1&t&&b.Ob(0,"tr",51)}function eo(t,e){1&t&&b.Ob(0,"tr",52)}function oo(t,e){if(1&t&&(b.Tb(0,"td",55),b.Kc(1),b.Sb()),2&t){b.ec(2);const t=b.tc(5);b.Bb(1),b.Mc(' No data matching the filter "',t.value,'" ')}}function ao(t,e){1&t&&(b.Tb(0,"td",55),b.Kc(1,"No data available in table"),b.Sb())}function io(t,e){if(1&t&&(b.Tb(0,"tr",53),b.Ic(1,oo,2,1,"td",54),b.Ic(2,ao,2,0,"td",54),b.Sb()),2&t){b.ec();const t=b.tc(5);b.Bb(1),b.kc("ngIf",""!=t.value),b.Bb(1),b.kc("ngIf",""==t.value)}}function no(t,e){if(1&t){const t=b.Ub();b.Tb(0,"mat-card",13),b.Tb(1,"mat-form-field",14),b.Tb(2,"mat-label"),b.Kc(3,"Search"),b.Sb(),b.Tb(4,"input",15,16),b.ac("keyup",(function(e){return b.wc(t),b.ec().applyFilter(e)})),b.Sb(),b.Sb(),b.Ic(6,Ae,1,3,"mat-progress-spinner",17),b.Tb(7,"table",18),b.Rb(8,19),b.Ic(9,Re,1,0,"th",20),b.Ic(10,Ee,2,2,"td",21),b.Qb(),b.Rb(11,22),b.Ic(12,qe,2,0,"th",23),b.Ic(13,je,3,6,"td",24),b.Qb(),b.Rb(14,25),b.Ic(15,Le,2,0,"th",23),b.Ic(16,Ue,3,4,"td",21),b.Qb(),b.Rb(17,26),b.Ic(18,$e,2,0,"th",23),b.Ic(19,He,2,1,"td",21),b.Qb(),b.Rb(20,27),b.Ic(21,Ve,2,0,"th",23),b.Ic(22,ze,2,1,"td",21),b.Qb(),b.Rb(23,28),b.Ic(24,Qe,2,0,"th",23),b.Ic(25,Ze,3,4,"td",21),b.Qb(),b.Rb(26,29),b.Ic(27,Ye,2,0,"th",20),b.Ic(28,Xe,2,1,"td",21),b.Qb(),b.Ic(29,to,1,0,"tr",30),b.Ic(30,eo,1,0,"tr",31),b.Ic(31,io,3,2,"tr",32),b.Sb(),b.Ob(32,"mat-paginator",33,34),b.Sb()}if(2&t){const t=b.ec();b.Bb(6),b.kc("ngIf",t.showSpinner),b.Bb(1),b.kc("dataSource",t.dataSource),b.Bb(22),b.kc("matHeaderRowDef",t.displayedColumns),b.Bb(1),b.kc("matRowDefColumns",t.displayedColumns),b.Bb(2),b.kc("pageSizeOptions",t.pageSizeOptions)}}const ro=o("GUC0");let so=(()=>{class t{constructor(t,e,o,a,i,n,c,l,d){this._toaster=t,this._data=e,this._localStorage=o,this._spinner=a,this._dialog=i,this._report=n,this._sanitizer=c,this._socket=l,this._utils=d,this.dataSource=new r.p,this.pageSizeOptions=[10,15,20],this.displayedColumns=[],this.unsubscribe$=new s.b,this.resizeEvent="resize.ag-grid",this.color="primary",this.mode="indeterminate",this.diameter=100,this.showSpinner=!1,this.breadcrumbArray=[],this.breadArray=[],this.fArr=[],this.dataFilterArray=[],this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this.displayedColumns=["icon","fileName","createdAt","noOfRecords","noOfColumns","fileSize","actions"]}set paginator(t){this.dataSource.paginator=t}set sort(t){this.dataSource.sort=t}ngOnInit(){this._spinner.showSpinner(),this.initSocket(),this.getDataSetList()}getDataSetList(){let t,e=[];this.breadArray.length=0,this.breadcrumbArray.length=0,this._data.getAllProjectDatas(this.project._id).pipe(Object(E.a)(this.unsubscribe$)).subscribe(o=>{if(o){let a=[];this.dataFilterArray=[],this.dataFilterArray=this.dataFilterArray.concat(o[0].dataGroupList,o[0].filesList),e=this.dataFilterArray.filter(t=>!Object.keys(t).includes("parentId")&&!Object.keys(t).includes("datagroup_id")),t=e[0]._id,a=this.dataFilterArray.filter(e=>"upload_retrained"!=e.fileSource&&(e.parentId==t||e.datagroup_id==t)),this.fArr=a,this.dataSource.data=a,this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this._spinner.stopSpinner()}else this._spinner.stopSpinner(),this._toaster.error("Cannot fetch data list","Data Sets")},t=>{this._spinner.stopSpinner(),this._toaster.error("Server Error","Data Sets")})}deleteHandler(t){let e=document.createElement("div");e.innerHTML="You will not be able to recover <b>Eda, Training and Models </b> related to this dataset!",ro({title:"Are you sure?",content:e,icon:"warning",buttons:{cancel:{text:"Cancel",value:null,visible:!0,className:""},confirm:{text:"Yes, delete it!",value:!0,visible:!0,className:"bg-danger"}}}).then(e=>{e&&(this.breadArray.length=0,this._data.deleteDataSet(this.project._id,t).pipe(Object(E.a)(this.unsubscribe$)).subscribe(t=>{t?(this.getDataSetList(),this._toaster.success("File deleted successfully","Data Sets")):this._toaster.error("Cannot delete file","Data Sets")},t=>{this._toaster.error("Server Error","Data Sets")}))})}openDialog(t,e,o){this._dialog.open(Be,{minWidth:"preview"===e?"80vw":"50vw",maxWidth:"80vw",data:"preview"===e?{type:e,dataId:o,reqObj:t}:{type:e,columns:o,data:t}}).afterClosed().subscribe(t=>{t&&this.getDataSetList()})}openDataPreviewModal(t,e){this.showSpinner=!0;let o={dataId:t._id,pid:this.project._id};this.showSpinner=!1,this.openDialog(o,"preview",t._id)}openDataReportModal(t,e){this._dialog.open(ie.a,{minHeight:"90vh",maxHeight:"90vh",minWidth:"90vw",data:{moduleName:"data-set",edaReportData:{projectId:this.project._id,dataId:t._id}}})}openMergeDataModal(t,e){this.openDialog(t,e)}breadcrumbHandler(t,e){if(!t.fileSource){let o=t._id||t.id;this.showSpinner=!0;let a=[],i=[];if(e){let e=this.breadArray.findIndex(t=>t.id==o);this.breadArray.splice(e+1),t||this.getDataSetList()}else this.breadArray.push({id:o,name:t.name});this.breadcrumbArray=this.breadArray,a=this.dataFilterArray.filter(t=>t.parentId===o||t.datagroup_id===o),i=a.filter(t=>!Object.keys(t).includes("connId")),this.fArr=i,this.dataSource.data=i,this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.showSpinner=!1}}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}initSocket(){this._socket.listen("merge").subscribe(t=>{"pull_success"===t.status?(this.getDataSetList(),this._toaster.success("Data merged successfully","Data Set")):this._toaster.error(t.status,"Data Set"),this._spinner.stopSpinner()},t=>{this._spinner.stopSpinner(),this._toaster.error("Socket Error","Data Set")})}ngOnDestroy(){this._socket.removeListener("pullData"),this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(m.c),b.Nb(p.a),b.Nb(h.a),b.Nb(j.a),b.Nb(d.c),b.Nb(Ne.a),b.Nb(Ge.b),b.Nb(U.a),b.Nb(f.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-data-set"]],viewQuery:function(t,e){var o;1&t&&(b.Oc(i.a,!0),b.Oc(n.a,!0)),2&t&&(b.sc(o=b.bc())&&(e.paginator=o.first),b.sc(o=b.bc())&&(e.sort=o.first))},decls:11,vars:6,consts:[[1,"fluid-container"],[1,"heading"],["mat-card-avatar",""],[1,"far","fa-folder","folder-icon"],[2,"cursor","pointer",3,"matTooltip","click"],["class","d-flex align-items-center",4,"ngFor","ngForOf"],["class","text-center mt-5 font-weight-normal",4,"ngIf"],["class","files-listing mt-5 p-4",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"align-middle"],[3,"click"],[1,"text-center","mt-5","font-weight-normal"],["href","#",1,"text-decoration-none",3,"routerLink"],[1,"files-listing","mt-5","p-4"],[1,"search-input"],["matInput","",3,"keyup"],["input",""],["class","spinner",3,"color","mode","diameter",4,"ngIf"],["mat-table","","matSort","","matSortActive","createdAt","matSortDirection","desc","matSortDisableClear","",1,"mt-2",3,"dataSource"],["matColumnDef","icon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fileName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"clickable","click",4,"matCellDef"],["matColumnDef","createdAt"],["matColumnDef","noOfRecords"],["matColumnDef","noOfColumns"],["matColumnDef","fileSize"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mt-2",3,"pageSizeOptions"],["dataSetPaginator",""],[1,"spinner",3,"color","mode","diameter"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-cell","",3,"click"],["class","action-buttons d-flex",4,"ngIf"],[1,"action-buttons","d-flex"],["mat-icon-button","","matTooltip","Preview the data",1,"text-value",3,"click"],[1,"fa","fa-eye"],["mat-icon-button","","class","text-value","matTooltip","Preview the detailed report about the data",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Merge two datasets",1,"text-value",3,"click"],[1,"fa","fa-clone"],["mat-icon-button","","matTooltip","Delete",1,"delete-button",3,"click"],[1,"fa","fa-trash"],["mat-icon-button","","matTooltip","Preview the detailed report about the data",1,"text-value",3,"click"],[1,"fas","fa-file-invoice"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["class","mat-cell","colspan","4",4,"ngIf"],["colspan","4",1,"mat-cell"]],template:function(t,e){1&t&&(b.Tb(0,"div",0),b.Tb(1,"mat-card",1),b.Tb(2,"mat-card-header"),b.Tb(3,"div",2),b.Ob(4,"i",3),b.Sb(),b.Tb(5,"mat-card-title"),b.Tb(6,"h3",4),b.ac("click",(function(){return e.breadcrumbHandler("",!0)})),b.Kc(7," Data Sets "),b.Sb(),b.Ic(8,Me,5,3,"div",5),b.Sb(),b.Sb(),b.Sb(),b.Ic(9,Ke,4,2,"h4",6),b.Ic(10,no,34,5,"mat-card",7),b.Sb()),2&t&&(b.Bb(6),b.Db(e.breadcrumbArray.length?"heading-with-breadcrumb":"heading-title"),b.kc("matTooltip",e._utils.getTootip("dataSet")),b.Bb(2),b.kc("ngForOf",e.breadcrumbArray),b.Bb(1),b.kc("ngIf",!e.dataSource.data.length),b.Bb(1),b.kc("ngIf",e.dataSource.data.length))},directives:[V.a,V.f,V.c,V.m,z.b,a.s,a.t,Z.a,J.h,Y.c,Y.g,W.b,r.o,n.a,r.c,r.i,r.b,r.k,r.n,r.l,i.a,ce.a,r.h,r.a,n.b,Q.b,r.j,r.m],pipes:[ue.a,a.f,xe.a],styles:[".files-listing[_ngcontent-%COMP%]   .clickable[_ngcontent-%COMP%]{cursor:pointer;color:#08509d!important}td.mat-column-actions[_ngcontent-%COMP%], td.mat-column-noOfColumns[_ngcontent-%COMP%], td.mat-column-noOfRecords[_ngcontent-%COMP%], th.mat-column-noOfColumns[_ngcontent-%COMP%], th.mat-column-noOfRecords[_ngcontent-%COMP%]{text-align:center!important}"]}),t})();var co=o("tk/3");let lo=(()=>{class t{constructor(t){this._http=t,this.serverBaseUrl=u.a.serverBaseUrl}getAllFlowsList(t){return this._http.get(`${this.serverBaseUrl}/api/udd?projectId=${t}`)}createNewFlow(t){return this._http.post(this.serverBaseUrl+"/api/udd",t)}deleteFlow(t){return this._http.delete(`${this.serverBaseUrl}/api/udd/${t}`)}getSingleFlow(t){return this._http.get(`${this.serverBaseUrl}/api/udd/${t}`)}updateFlow(t,e){return this._http.put(`${this.serverBaseUrl}/api/udd/${t}`,e)}executeDataFlow(t,e,o){return this._http.get(`${this.serverBaseUrl}/api/project/${t}/udd/${e}/execute?dataGroupId=${o}`)}getErrorLogs(t,e,o){return this._http.get(`${this.serverBaseUrl}/api/node-red/errorLog/${t}?startDate=${e}&endDate=${o}`)}}return t.\u0275fac=function(e){return new(e||t)(b.Xb(co.b))},t.\u0275prov=b.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var uo=o("xHqg");const bo=["myiframe"];function po(t,e){if(1&t&&b.Kc(0),2&t){const t=b.ec();b.Lc(t.isEdit?"Update Flow Details":"Enter Flow Details")}}function mo(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Flow name is required."),b.Sb())}function ho(t,e){if(1&t&&(b.Tb(0,"mat-option",20),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t._id),b.Bb(1),b.Lc(t.name)}}function fo(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Folder is required."),b.Sb())}function go(t,e){if(1&t&&(b.Tb(0,"div",6),b.Tb(1,"mat-form-field",7),b.Tb(2,"mat-label"),b.Kc(3,"Select folder"),b.Sb(),b.Tb(4,"mat-select",18),b.Ic(5,ho,2,2,"mat-option",19),b.Sb(),b.Ic(6,fo,2,0,"mat-error",9),b.Sb(),b.Sb()),2&t){const t=b.ec();b.Bb(5),b.kc("ngForOf",t.dataGroups),b.Bb(1),b.kc("ngIf",t.flowFormGroup.get("dataGroupId").hasError("required")&&(t.flowFormGroup.get("dataGroupId").dirty||t.flowFormGroup.get("dataGroupId").touched))}}function So(t,e){if(1&t&&(b.Tb(0,"mat-option",20),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t._id),b.Bb(1),b.Mc("",t.scheduleName," ")}}function To(t,e){if(1&t&&(b.Tb(0,"div",6),b.Tb(1,"mat-form-field",7),b.Tb(2,"mat-label"),b.Kc(3,"Select scheduler"),b.Sb(),b.Tb(4,"mat-select",21),b.Tb(5,"mat-option",22),b.Kc(6,"None"),b.Sb(),b.Ic(7,So,2,2,"mat-option",19),b.Sb(),b.Sb(),b.Sb()),2&t){const t=b.ec();b.Bb(7),b.kc("ngForOf",t.schedulars)}}function yo(t,e){1&t&&b.Kc(0,"Design Data Flow")}let Io=(()=>{class t{constructor(t,e,o,a,i,n){this._formBuilder=t,this._sanitizer=e,this._dataFlow=o,this._toaster=a,this._localStorage=i,this._router=n,this.closeNodeRed=new b.o,this.unsubscribe$=new s.b,this.serverBaseUrl=u.a.serverBaseUrl,this.isEdit=!1,this.flowFormGroup=this._formBuilder.group({flowName:["",l.I.required],dataGroupId:["",l.I.required],scheduleId:[""]})}ngOnInit(){this.project=this._localStorage.getItem("project"),this.prefillFlowDetails(this.flowData,this.flowIdToEdit),this.flowURL=this._sanitizer.bypassSecurityTrustResourceUrl(this.serverBaseUrl+"/!/")}ngAfterViewInit(){this.connId&&this.stepper.next()}closeStepperHandler(){this.connId||this.flowIdToEdit?this._router.navigateByUrl("/project/data/dataconnection"):this.closeNodeRed.emit({isCanceled:!0})}prefillFlowDetails(t,e){t||e?(this.isEdit=!0,this.flowFormGroup.patchValue({flowName:t?t.flowName:"",dataGroupId:t?t.dataGroupId:"",scheduleId:t?t.scheduleId:""}),this.findOneFlow(t?t._id:e)):(this.isEdit=!1,this.flowFormGroup.reset())}validateFlow(){if(window.frames.myiframe.contentDocument.getElementsByClassName("red-ui-header-toolbar"))return!!window.frames.myiframe.contentDocument.getElementsByClassName("red-ui-header-toolbar")[0].innerHTML.includes("red-ui-deploy-button disabled")}onSubmitFlow(){let t=$("#nodeRedIframe"),e=t.contents().find("#red-ui-header-button-deploy")[0],o=t[0].contentWindow.location.href,a=o.lastIndexOf("/"),i=o.substring(a+1,o.length);e.click(),"#"!=i&&""!=i||alert("Something went wrong, please refresh");let n={flowName:this.flowFormGroup.value.flowName,flowId:i,flowType:this.connId?"interceptor":"direct",projectId:this.project._id,connectionID:this.connId?this.connId:null,dataGroupId:this.flowFormGroup.value.dataGroupId};this.flowFormGroup.value.scheduleId&&(n.scheduleId=this.flowFormGroup.value.scheduleId),this.connId?(delete n.scheduleId,delete n.dataGroupId):delete n.connectionID,this.isEdit?(n.flowType=this.flowData.flowType,this.flowData.dataGroupId||delete n.dataGroupId,this.updateFlow(n)):this.createNewFlow(n)}createNewFlow(t){this._dataFlow.createNewFlow(t).pipe(Object(E.a)(this.unsubscribe$)).subscribe(t=>{t&&(this._toaster.success("Data flow created successfully","Data Flows"),this.closeNodeRed.emit({flowResponse:t,isCanceled:!0}))},t=>{this._toaster.error(t.message,"Data Flows")})}updateFlow(t){this._dataFlow.updateFlow(this.flowData._id||this.flowIdToEdit,t).pipe(Object(E.a)(this.unsubscribe$)).subscribe(t=>{t&&(this._toaster.success("Data flow updated successfully","Data Flows"),this.closeNodeRed.emit({flowResponse:t,isCanceled:!0}))},t=>{this._toaster.error(t.message,"Data Flows")})}findOneFlow(t){this._dataFlow.getSingleFlow(t).pipe(Object(E.a)(this.unsubscribe$)).subscribe(t=>{t&&(this.flowData=t,this.flowFormGroup.get("flowName").setValue(t.flowName),this.flowFormGroup.get("dataGroupId").clearValidators(),this.flowFormGroup.get("dataGroupId").updateValueAndValidity(),this.flowURL=this._sanitizer.bypassSecurityTrustResourceUrl(`${this.serverBaseUrl}/!/#flow/${t.flowId}`))},t=>{this._toaster.error("Cannot fetch flows details","Data Flows")})}ngOnDestroy(){this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(l.h),b.Nb(Ge.b),b.Nb(lo),b.Nb(m.c),b.Nb(h.a),b.Nb(J.e))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-data-flow-stepper"]],viewQuery:function(t,e){var o;1&t&&(b.Oc(bo,!0),b.Oc(uo.a,!0)),2&t&&(b.sc(o=b.bc())&&(e.iframe=o.first),b.sc(o=b.bc())&&(e.stepper=o.first))},inputs:{flowData:"flowData",dataGroups:"dataGroups",schedulars:"schedulars",connId:"connId",flowIdToEdit:"flowIdToEdit"},outputs:{closeNodeRed:"closeNodeRed"},decls:33,vars:9,consts:[["labelPosition","bottom"],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"row","mt-4"],[1,"col-md-4","form-group"],["appearance","outline"],["matInput","","type","text","name","flowName","formControlName","flowName","placeholder","Enter flow name","autocomplete","","required",""],[4,"ngIf"],["class","col-md-4 form-group",4,"ngIf"],[1,"d-flex","justify-content-end","mt-4"],["type","button","mat-stroked-button","",3,"click"],["type","button","mat-flat-button","","matStepperNext","",1,"btn-primary","ml-3",3,"disabled"],[1,"iframe-container","mt-4"],["id","nodeRedIframe","allowFullScreen","true",3,"src"],["mat-stroked-button","","matStepperPrevious","",1,"mr-auto",3,"hidden"],["type","submit","mat-flat-button","","matStepperNext","",1,"btn-primary","ml-3",3,"click"],["formControlName","dataGroupId","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","scheduleId"],["value","None"]],template:function(t,e){1&t&&(b.Tb(0,"mat-card"),b.Tb(1,"mat-card-content"),b.Tb(2,"mat-horizontal-stepper",0,1),b.Tb(4,"mat-step",2),b.Tb(5,"form",3),b.Ic(6,po,1,1,"ng-template",4),b.Tb(7,"div",5),b.Tb(8,"div",6),b.Tb(9,"mat-form-field",7),b.Tb(10,"mat-label"),b.Kc(11,"Flow name"),b.Sb(),b.Ob(12,"input",8),b.Ic(13,mo,2,0,"mat-error",9),b.Sb(),b.Sb(),b.Ic(14,go,7,2,"div",10),b.Ic(15,To,8,1,"div",10),b.Sb(),b.Ob(16,"hr"),b.Tb(17,"div",11),b.Tb(18,"button",12),b.ac("click",(function(){return e.closeStepperHandler()})),b.Kc(19,"Cancel"),b.Sb(),b.Tb(20,"button",13),b.Kc(21," Next "),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(22,"mat-step"),b.Ic(23,yo,1,0,"ng-template",4),b.Tb(24,"div",14),b.Ob(25,"iframe",15),b.Sb(),b.Tb(26,"div",11),b.Tb(27,"button",16),b.Kc(28," Back "),b.Sb(),b.Tb(29,"button",12),b.ac("click",(function(){return e.closeStepperHandler()})),b.Kc(30,"Cancel"),b.Sb(),b.Tb(31,"button",17),b.ac("click",(function(){return e.onSubmitFlow()})),b.Kc(32),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()),2&t&&(b.Bb(4),b.kc("stepControl",e.flowFormGroup),b.Bb(1),b.kc("formGroup",e.flowFormGroup),b.Bb(8),b.kc("ngIf",e.flowFormGroup.get("flowName").hasError("required")&&(e.flowFormGroup.get("flowName").dirty||e.flowFormGroup.get("flowName").touched)),b.Bb(1),b.kc("ngIf","direct"===(null==e.flowData?null:e.flowData.flowType)||!e.isEdit),b.Bb(1),b.kc("ngIf","direct"===(null==e.flowData?null:e.flowData.flowType)||!e.isEdit),b.Bb(5),b.kc("disabled",e.flowFormGroup.invalid),b.Bb(5),b.kc("src",e.flowURL,b.yc),b.Bb(2),b.kc("hidden",!!e.connId),b.Bb(5),b.Mc(" ",e.isEdit?"Update":"Create"," "))},directives:[V.a,V.d,uo.a,uo.b,l.K,l.v,l.m,uo.d,Y.c,Y.g,W.b,l.d,l.u,l.k,l.F,a.t,Q.b,uo.h,uo.i,Y.b,re.a,a.s,le.o],styles:[".iframe-container[_ngcontent-%COMP%] > iframe[_ngcontent-%COMP%]{width:100%;height:800px}"]}),t})();var wo=o("iadO");const Co=["flowPaginator"],ko=["dataflowSort"];function vo(t,e){if(1&t){const t=b.Ub();b.Tb(0,"button",10),b.ac("click",(function(){b.wc(t);const e=b.ec();return e.inputFlowData=null,e.showStepper=!0})),b.Kc(1," Create "),b.Sb()}}function _o(t,e){if(1&t){const t=b.Ub();b.Tb(0,"h4",11),b.Kc(1," You haven't created any data flow yet, "),b.Tb(2,"a",12),b.ac("click",(function(){b.wc(t);const e=b.ec();return e.inputFlowData=null,e.showStepper=!0})),b.Kc(3," create now."),b.Sb(),b.Sb()}}function Do(t,e){1&t&&(b.Tb(0,"th",32),b.Kc(1,"Sr. No."),b.Sb())}function Fo(t,e){if(1&t&&(b.Tb(0,"td",33),b.Kc(1),b.Sb()),2&t){const t=e.index;b.ec();const o=b.tc(28);b.Bb(1),b.Mc(" ",t+1+o.pageIndex*o.pageSize," ")}}function Oo(t,e){1&t&&(b.Tb(0,"th",34),b.Kc(1,"Name"),b.Sb())}function Bo(t,e){if(1&t&&(b.Tb(0,"td",33),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Mc(" ",t.flowName," ")}}function No(t,e){1&t&&(b.Tb(0,"th",34),b.Kc(1,"Flow Id"),b.Sb())}function Go(t,e){if(1&t&&(b.Tb(0,"td",33),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Mc(" ",t.flowId," ")}}function xo(t,e){1&t&&(b.Tb(0,"th",34),b.Kc(1,"Flow Type"),b.Sb())}function Mo(t,e){if(1&t&&(b.Tb(0,"td",33),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Mc(" ",t.flowType," ")}}function Po(t,e){1&t&&(b.Tb(0,"th",32),b.Kc(1,"Actions"),b.Sb())}function Ko(t,e){if(1&t){const t=b.Ub();b.Tb(0,"button",44),b.ac("click",(function(){b.wc(t);const e=b.ec().$implicit;return b.ec(2).startFlow(e)})),b.Ob(1,"i",45),b.Sb()}}function Ao(t,e){1&t&&b.Ob(0,"i",46)}function Ro(t,e){if(1&t){const t=b.Ub();b.Tb(0,"td",33),b.Tb(1,"div",35),b.Ic(2,Ko,2,0,"button",36),b.Tb(3,"button",37),b.ac("click",(function(){b.wc(t);const o=e.$implicit;return b.ec(2).editFlow(o)})),b.Ob(4,"i",38),b.Sb(),b.Tb(5,"button",39),b.ac("click",(function(){b.wc(t);const o=e.$implicit,a=b.ec(2),i=b.tc(14);return a.viewNodeRedLogs(o,i)})),b.Ob(6,"i",40),b.Ic(7,Ao,1,0,"i",41),b.Sb(),b.Tb(8,"button",42),b.ac("click",(function(){b.wc(t);const o=e.$implicit;return b.ec(2).deleteHandler(o._id)})),b.Ob(9,"i",43),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=e.$implicit,o=b.ec(2);b.Bb(2),b.kc("ngIf","direct"===t.flowType),b.Bb(3),b.kc("matTooltipClass",o.isDataFlowFailed&&o.directFlowNameCheck==t.flowId?"nodered-error-tooltip-custom":""),b.Bb(2),b.kc("ngIf",o.isDataFlowFailed&&o.directFlowNameCheck==t.flowId)}}function Eo(t,e){1&t&&b.Ob(0,"tr",47)}function qo(t,e){1&t&&b.Ob(0,"tr",48)}function jo(t,e){if(1&t&&(b.Tb(0,"td",51),b.Kc(1),b.Sb()),2&t){b.ec(2);const t=b.tc(6);b.Bb(1),b.Mc(' No data matching the filter "',t.value,'" ')}}function Lo(t,e){1&t&&(b.Tb(0,"td",51),b.Kc(1,"No data available in table"),b.Sb())}function Uo(t,e){if(1&t&&(b.Tb(0,"tr",49),b.Ic(1,jo,2,1,"td",50),b.Ic(2,Lo,2,0,"td",50),b.Sb()),2&t){b.ec();const t=b.tc(6);b.Bb(1),b.kc("ngIf",""!=t.value),b.Bb(1),b.kc("ngIf",""==t.value)}}function $o(t,e){if(1&t){const t=b.Ub();b.Tb(0,"mat-card",13),b.Tb(1,"mat-card-content"),b.Tb(2,"mat-form-field",14),b.Tb(3,"mat-label"),b.Kc(4,"Search"),b.Sb(),b.Tb(5,"input",15,16),b.ac("keyup",(function(e){return b.wc(t),b.ec().applyFilter(e)})),b.Sb(),b.Sb(),b.Tb(7,"table",17,18),b.Rb(9,19),b.Ic(10,Do,2,0,"th",20),b.Ic(11,Fo,2,1,"td",21),b.Qb(),b.Rb(12,22),b.Ic(13,Oo,2,0,"th",23),b.Ic(14,Bo,2,1,"td",21),b.Qb(),b.Rb(15,24),b.Ic(16,No,2,0,"th",23),b.Ic(17,Go,2,1,"td",21),b.Qb(),b.Rb(18,25),b.Ic(19,xo,2,0,"th",23),b.Ic(20,Mo,2,1,"td",21),b.Qb(),b.Rb(21,26),b.Ic(22,Po,2,0,"th",20),b.Ic(23,Ro,10,3,"td",21),b.Qb(),b.Ic(24,Eo,1,0,"tr",27),b.Ic(25,qo,1,0,"tr",28),b.Ic(26,Uo,3,2,"tr",29),b.Sb(),b.Ob(27,"mat-paginator",30,31),b.Sb(),b.Sb()}if(2&t){const t=b.ec();b.Bb(7),b.kc("dataSource",t.dataSource),b.Bb(17),b.kc("matHeaderRowDef",t.displayedColumns),b.Bb(1),b.kc("matRowDefColumns",t.displayedColumns),b.Bb(2),b.kc("pageSizeOptions",t.pageSizeOptions)}}function Ho(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",52),b.Tb(1,"app-data-flow-stepper",53),b.ac("closeNodeRed",(function(e){return b.wc(t),b.ec().nodeRedClosed(e)})),b.Sb(),b.Sb()}if(2&t){const t=b.ec();b.Bb(1),b.kc("flowData",t.inputFlowData)("dataGroups",t.dataGroupList)("schedulars",t.schedularsList)("connId",t.connId)("flowIdToEdit",t.flowIdToEdit)}}function Vo(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Invalid start/end date."),b.Sb())}function zo(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Date range is required."),b.Sb())}function Qo(t,e){1&t&&(b.Tb(0,"th",34),b.Kc(1,"Date"),b.Sb())}function Zo(t,e){if(1&t&&(b.Tb(0,"td",33),b.Kc(1),b.fc(2,"date"),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Mc(" ",b.hc(2,1,t.createdAt,"medium")," ")}}function Yo(t,e){1&t&&(b.Tb(0,"th",34),b.Kc(1,"Level"),b.Sb())}function Wo(t,e){if(1&t&&(b.Tb(0,"td",33),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Mc(" ",t.level," ")}}function Jo(t,e){1&t&&(b.Tb(0,"th",34),b.Kc(1,"Node"),b.Sb())}function Xo(t,e){if(1&t&&(b.Tb(0,"td",33),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Mc(" ",t.metaData.nodeType," ")}}function ta(t,e){1&t&&(b.Tb(0,"th",34),b.Kc(1,"Message"),b.Sb())}function ea(t,e){if(1&t&&(b.Tb(0,"td",33),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Mc(" ",t.message," ")}}function oa(t,e){1&t&&b.Ob(0,"tr",47)}function aa(t,e){1&t&&b.Ob(0,"tr",48)}function ia(t,e){if(1&t&&(b.Tb(0,"tr",49),b.Tb(1,"td",51),b.Kc(2),b.Sb(),b.Sb()),2&t){b.ec();const t=b.tc(23);b.Bb(2),b.Mc('No data matching the filter "',t.value,'"')}}function na(t,e){if(1&t){const t=b.Ub();b.Tb(0,"h2",54),b.Kc(1," Data Flow Error Logs : "),b.Tb(2,"mat-chip-list",55),b.Tb(3,"mat-chip"),b.Kc(4),b.Sb(),b.Sb(),b.Sb(),b.Tb(5,"div",56),b.Tb(6,"div",57),b.Tb(7,"mat-form-field",58),b.Tb(8,"mat-label"),b.Kc(9,"Select date (From and To)"),b.Sb(),b.Tb(10,"mat-date-range-input",59),b.Tb(11,"input",60),b.ac("dateChange",(function(e){return b.wc(t),b.ec().dateChanged("start",e.value)})),b.Sb(),b.Tb(12,"input",61),b.ac("dateChange",(function(e){return b.wc(t),b.ec().dateChanged("end",e.value)})),b.Sb(),b.Sb(),b.Ob(13,"mat-datepicker-toggle",62),b.Ob(14,"mat-date-range-picker",null,63),b.Ic(16,Vo,2,0,"mat-error",64),b.Ic(17,zo,2,0,"mat-error",64),b.Sb(),b.Sb(),b.Sb(),b.Tb(18,"mat-dialog-content",65),b.Tb(19,"mat-form-field",14),b.Tb(20,"mat-label"),b.Kc(21,"Search"),b.Sb(),b.Tb(22,"input",66,16),b.ac("keyup",(function(e){return b.wc(t),b.ec().applyFilter(e)})),b.Sb(),b.Sb(),b.Tb(24,"table",67),b.Rb(25,68),b.Ic(26,Qo,2,0,"th",23),b.Ic(27,Zo,3,4,"td",21),b.Qb(),b.Rb(28,69),b.Ic(29,Yo,2,0,"th",23),b.Ic(30,Wo,2,1,"td",21),b.Qb(),b.Rb(31,70),b.Ic(32,Jo,2,0,"th",23),b.Ic(33,Xo,2,1,"td",21),b.Qb(),b.Rb(34,71),b.Ic(35,ta,2,0,"th",23),b.Ic(36,ea,2,1,"td",21),b.Qb(),b.Ic(37,oa,1,0,"tr",27),b.Ic(38,aa,1,0,"tr",28),b.Ic(39,ia,3,1,"tr",29),b.Sb(),b.Ob(40,"mat-paginator",72),b.Sb(),b.Tb(41,"mat-dialog-actions",73),b.Tb(42,"button",74),b.Kc(43,"Close"),b.Sb(),b.Sb()}if(2&t){const t=b.tc(15),e=b.ec();b.Bb(4),b.Lc(e.selectedFlow.flowName),b.Bb(6),b.kc("formGroup",e.dateGroup)("rangePicker",t),b.Bb(3),b.kc("for",t),b.Bb(3),b.kc("ngIf",e.dateGroup.controls.start.hasError("matStartDateInvalid")||e.dateGroup.controls.end.hasError("matEndDateInvalid")),b.Bb(1),b.kc("ngIf",(e.dateGroup.controls.start.dirty||e.dateGroup.controls.end.dirty||e.dateGroup.controls.start.touched||e.dateGroup.controls.end.touched)&&(!e.dateGroup.controls.start.hasError("matStartDateInvalid")||!e.dateGroup.controls.end.hasError("matEndDateInvalid"))),b.Bb(7),b.kc("dataSource",e.logsDataSource),b.Bb(13),b.kc("matHeaderRowDef",e.logsDisplayedColumns),b.Bb(1),b.kc("matRowDefColumns",e.logsDisplayedColumns),b.Bb(2),b.kc("pageSizeOptions",e.pageSizeOptions)}}const ra=o("GUC0"),sa=o("wd/R");let ca=(()=>{class t{constructor(t,e,o,a,i,n,c,d,u,b,p){this._toaster=t,this._data=e,this._localStorage=o,this._spinner=a,this._dataFlow=i,this._schedular=n,this._dialog=c,this._activatedRoute=d,this._socket=u,this._router=b,this._utils=p,this.dataSource=new r.p,this.logsDataSource=new r.p,this.pageSizeOptions=[10,15,20],this.displayedColumns=[],this.logsDisplayedColumns=[],this.unsubscribe$=new s.b,this.showStepper=!1,this.hideDialog=!0,this.dateRange={},this.isDataFlowFailed=!1,this.directFlowNameCheck=null,this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this._activatedRoute.queryParams&&this._activatedRoute.queryParams.subscribe(t=>{t.connectionId?(this.connId=t.connectionId,this.showStepper=!0):t.dataFlowId?(this.flowIdToEdit=t.dataFlowId,this.showStepper=!0):this.showStepper=!1}),this.displayedColumns=["srNo","flowName","flowId","flowType","actions"],this.logsDisplayedColumns=["date","level","node","message"],this.dateGroup=new l.l({start:new l.i("",l.I.required),end:new l.i("",l.I.required)})}set paginator(t){this.dataSource.paginator=t}set sort(t){this.dataSource.sort=t}ngOnInit(){this._spinner.showSpinner(),this.initSocket(),this.getFlowsList(),this.getDataGroupList(),this.schedularList(),this.dateGroup.get("start").setValue(sa().subtract(3,"days")),this.dateGroup.get("end").setValue(sa())}getFlowsList(){this._dataFlow.getAllFlowsList(this.project._id).pipe(Object(E.a)(this.unsubscribe$)).subscribe(t=>{t?(this.uddFlowsList=t,this.dataSource.data=t,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource._updateChangeSubscription(),console.log("\u{1f680} ~ this.dataSource",this.dataSource),this._spinner.stopSpinner()):this._spinner.stopSpinner()},t=>{this._spinner.stopSpinner(),this._toaster.error("Server Error","Data Flows")})}getDataGroupList(){this._data.getDataGroupsList(this.project._id).pipe(Object(E.a)(this.unsubscribe$)).subscribe(t=>{t&&(this.dataGroupList=t)},t=>{this._toaster.error("Server Error","Data Flows")})}schedularList(){this._schedular.getSchedularsList().pipe(Object(E.a)(this.unsubscribe$)).subscribe(t=>{t&&(this.schedularsList=t)},t=>{this._toaster.error("Server Error","Data Flows")})}startFlow(t){this.directFlowNameCheck=t.flowId,this._dataFlow.executeDataFlow(this.project._id,t._id,t.dataGroupId).pipe(Object(E.a)(this.unsubscribe$)).subscribe(t=>{t&&this._toaster.success("Flow execution started","Data Flows")},t=>{this._toaster.error(t.message,"Data Flows")})}dateChanged(t,e){"start"===t?this.dateRange.startDate=e:this.dateRange.endDate=e,this.dateRange.endDate&&this.getNodeRedLogs(this.selectedFlow._id,this.dateRange.startDate,this.dateRange.endDate)}viewNodeRedLogs(t,e){this.selectedFlow=t;let o=this.dateGroup.get("start").value,a=this.dateGroup.get("end").value;this.getNodeRedLogs(t._id,o,a),this.hideDialog=!1,this._dialog.open(e,{height:"auto",width:"60%"})}getNodeRedLogs(t,e,o){this._dataFlow.getErrorLogs(t,sa.utc(e).format(),sa.utc(o).format()).pipe(Object(E.a)(this.unsubscribe$)).subscribe(t=>{t?(this.errorLogs=t,this.logsDataSource.data=this.errorLogs,this.logsDataSource.paginator=this.paginator,this.logsDataSource.sort=this.sort):this._toaster.error("Cannot fetch error logs","Data Flows")},t=>{this._toaster.error("Server Error","Data Flows")})}editFlow(t){this.showStepper=!0,this.inputFlowData=t}deleteHandler(t){ra({title:"Are you sure?",text:"You will not be able to recover this data flow!",icon:"warning",buttons:{cancel:{text:"Cancel",value:null,visible:!0,className:""},confirm:{text:"Yes, delete it!",value:!0,visible:!0,className:"bg-danger"}}}).then(e=>{e&&this._dataFlow.deleteFlow(t).pipe(Object(E.a)(this.unsubscribe$)).subscribe(e=>{e?(this.uddFlowsList=this.uddFlowsList.filter(e=>e._id!==t),this.dataSource.data=this.uddFlowsList,this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this._toaster.success(e.flowName+" deleted successfully","Data Flows")):this._toaster.error("Sorry! Cannot delete the flow","Data Flows")},t=>{this._toaster.error("Server Error","Data Flows")})})}nodeRedClosed(t){t.flowResponse?(this.showStepper=!t.isCanceled,this.flowIdToEdit="",this.connId="",this.inputFlowData=[],this._spinner.stopSpinner(),this._router.navigate(["/project/data/dataflow"]),this.getFlowsList()):(this.flowIdToEdit="",this.connId="",this.inputFlowData=[],this.showStepper=!t.isCanceled)}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}initSocket(){this._socket.listen("pullData").subscribe(t=>{this._spinner.stopSpinner(),"pull_success"===t.status?(t.data.projectId===this.project._id&&this._toaster.success("Flow execution completed successfully","Data Flows"),t.data.projectId===this.project._id&&this._router.navigate(["/project/data/dataset"])):t.data.projectId===this.project._id&&this._toaster.success(t.err_msg,"Data Flows")},t=>{this._spinner.stopSpinner(),this._toaster.error("Socket Error","Data Flows")}),this._socket.listen("nodeRedFlowExecution").subscribe(t=>{"flow_execution_failed"===t.status&&(this.isDataFlowFailed=!0),this._spinner.stopSpinner()},t=>{this._spinner.stopSpinner(),this._toaster.error("Socket Error","Data Connection")})}ngOnDestroy(){this._socket.removeListener("pullData"),this._socket.removeListener("nodeRedFlowExecution"),this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(m.c),b.Nb(p.a),b.Nb(h.a),b.Nb(j.a),b.Nb(lo),b.Nb(L.a),b.Nb(d.c),b.Nb(J.a),b.Nb(U.a),b.Nb(J.e),b.Nb(f.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-data-flow"]],viewQuery:function(t,e){var o;1&t&&(b.Oc(Co,!0),b.Oc(ko,!0)),2&t&&(b.sc(o=b.bc())&&(e.paginator=o.first),b.sc(o=b.bc())&&(e.sort=o.first))},decls:15,vars:4,consts:[[1,"fluid-container"],[1,"heading"],["mat-card-avatar",""],[1,"folder-icon"],[1,"heading-title"],["mat-raised-button","","class","bg-primary ml-auto",3,"click",4,"ngIf"],["class","text-center mt-5 font-weight-normal",4,"ngIf"],["class","flows-listing mt-5 p-4",4,"ngIf"],["class","mt-5",4,"ngIf"],["errorLogsTemplate",""],["mat-raised-button","",1,"bg-primary","ml-auto",3,"click"],[1,"text-center","mt-5","font-weight-normal"],["href","#",1,"text-decoration-none",3,"click"],[1,"flows-listing","mt-5","p-4"],[1,"search-input"],["matInput","",3,"keyup"],["input",""],["mat-table","","matSort","","matSortDisableClear","",1,"mt-2",3,"dataSource"],["dataflowSort","matSort"],["matColumnDef","srNo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","flowName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","flowId"],["matColumnDef","flowType"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mt-2",3,"pageSizeOptions"],["flowPaginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[1,"action-buttons","d-flex"],["matTooltip","Start data flow","mat-icon-button","","class","text-value",3,"click",4,"ngIf"],["matTooltip","Edit data flow","mat-icon-button","",1,"text-value",3,"click"],[1,"fa","fa-edit"],["matTooltip","View logs","mat-icon-button","",1,"text-value",3,"matTooltipClass","click"],[1,"fas","fa-file-invoice"],["class","nodered-error fas fa-exclamation-circle",4,"ngIf"],["matTooltip","Remove data flow","mat-icon-button","",1,"delete-button",3,"click"],[1,"fa","fa-trash"],["matTooltip","Start data flow","mat-icon-button","",1,"text-value",3,"click"],[1,"fa","fa-play"],[1,"nodered-error","fas","fa-exclamation-circle"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["class","mat-cell","colspan","4",4,"ngIf"],["colspan","4",1,"mat-cell"],[1,"mt-5"],[3,"flowData","dataGroups","schedulars","connId","flowIdToEdit","closeNodeRed"],["mat-dialog-title","",1,"selected-flow"],[1,"ml-2"],[1,"row","mt-3"],[1,"col-md-6"],["appearance","outline"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date",3,"dateChange"],["matEndDate","","formControlName","end","placeholder","End date",3,"dateChange"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],[1,"mat-typography","mt-4"],["matInput","","placeholder","Enter value to search",3,"keyup"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource"],["matColumnDef","date"],["matColumnDef","level"],["matColumnDef","node"],["matColumnDef","message"],[3,"pageSizeOptions"],[1,"justify-content-end","m-auto"],["mat-stroked-button","","mat-dialog-close",""]],template:function(t,e){1&t&&(b.Tb(0,"div",0),b.Tb(1,"mat-card",1),b.Tb(2,"mat-card-header"),b.Tb(3,"div",2),b.Tb(4,"mat-icon",3),b.Kc(5,"account_tree"),b.Sb(),b.Sb(),b.Tb(6,"mat-card-title"),b.Tb(7,"h3",4),b.Kc(8,"Data Flows"),b.Sb(),b.Sb(),b.Ic(9,vo,2,0,"button",5),b.Sb(),b.Sb(),b.Ic(10,_o,4,0,"h4",6),b.Ic(11,$o,29,4,"mat-card",7),b.Ic(12,Ho,2,5,"div",8),b.Sb(),b.Ic(13,na,44,10,"ng-template",null,9,b.Jc)),2&t&&(b.Bb(9),b.kc("ngIf",!e.showStepper),b.Bb(1),b.kc("ngIf",!e.showStepper&&!e.dataSource.data.length),b.Bb(1),b.kc("ngIf",!e.showStepper&&e.dataSource.data.length),b.Bb(1),b.kc("ngIf",e.showStepper))},directives:[V.a,V.f,V.c,Z.a,V.m,a.t,Q.b,V.d,Y.c,Y.g,W.b,r.o,n.a,r.c,r.i,r.b,r.k,r.n,r.l,i.a,r.h,r.a,n.b,z.b,r.j,r.m,Io,d.j,ne.d,ne.a,wo.d,l.v,l.m,wo.o,l.d,l.u,l.k,wo.l,wo.j,Y.j,wo.e,d.g,d.d,d.e,Y.b],pipes:[a.f],styles:[".flows-listing .clickable{cursor:pointer;color:#08509d!important}.selected-flow{display:inline-flex;align-items:center}.nodered-error{color:red;position:absolute;right:-1px;z-index:1;top:-4px}.nodered-error-tooltip-custom{background:#b71c1c!important}"],encapsulation:2}),t})();var la=o("PCNd"),da=o("bv9b");function ua(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Encoding is required."),b.Sb())}function ba(t,e){if(1&t&&(b.Tb(0,"mat-option",19),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t._id),b.Bb(1),b.Lc(t.name)}}function pa(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Folder name is required. "),b.Sb())}function ma(t,e){if(1&t&&(b.Tb(0,"mat-option",19),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t._id),b.Bb(1),b.Lc(t.name)}}function ha(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Parent folder is required."),b.Sb())}function fa(t,e){if(1&t&&(b.Tb(0,"div"),b.Tb(1,"div",2),b.Tb(2,"div",3),b.Tb(3,"mat-form-field",4),b.Tb(4,"mat-label",20),b.Kc(5,"Folder name"),b.Sb(),b.Ob(6,"input",21),b.Ic(7,pa,2,0,"mat-error",8),b.Sb(),b.Sb(),b.Tb(8,"div",3),b.Tb(9,"mat-form-field",4),b.Tb(10,"mat-label"),b.Kc(11,"Select parent folder"),b.Sb(),b.Tb(12,"mat-select",22),b.Ic(13,ma,2,2,"mat-option",12),b.Sb(),b.Ic(14,ha,2,0,"mat-error",8),b.Sb(),b.Sb(),b.Sb(),b.Sb()),2&t){const t=b.ec();b.Bb(7),b.kc("ngIf",t.fileUploadForm.get("dataFolderName").hasError("required")&&(t.fileUploadForm.get("dataFolderName").dirty||t.fileUploadForm.get("dataFolderName").touched)),b.Bb(6),b.kc("ngForOf",t.dataGroupsArray),b.Bb(1),b.kc("ngIf",t.fileUploadForm.get("parentFolderName").hasError("required")&&(t.fileUploadForm.get("parentFolderName").dirty||t.fileUploadForm.get("parentFolderName").touched))}}function ga(t,e){if(1&t&&b.Ob(0,"mat-progress-bar",26),2&t){const t=b.ec(2);b.kc("value",t.percentDone)}}function Sa(t,e){if(1&t&&(b.Tb(0,"div",23),b.Ic(1,ga,1,1,"mat-progress-bar",24),b.Tb(2,"span",25),b.Kc(3),b.Sb(),b.Sb()),2&t){const t=b.ec();b.Bb(1),b.kc("ngIf",t.percentDone),b.Bb(2),b.Mc("",t.percentDone,"%")}}let Ta=(()=>{class t{constructor(t,e,o,a,i,n,r,c){var d,p;this._fb=t,this._data=e,this._localStorage=o,this._connectionDialogRef=a,this._toaster=i,this._snackbar=n,this._spinner=r,this._utils=c,this.goBackFlag=new b.o,this.unsubscribe$=new s.b,this.mode="indeterminate",this.diameter=100,this.exportProjectDiameter=50,this.serverBaseUrl=u.a.serverBaseUrl,this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this.allowedPSFileUploadSize=(null===(p=null===(d=this.user)||void 0===d?void 0:d.psFeatures)||void 0===p?void 0:p.allowedPSFileUploadSize)||50,this.fileUploadForm=this._fb.group({encoding:["utf_8",l.I.required],selectFolder:["",l.I.required],dataFolderName:["",l.I.required],parentFolderName:["",l.I.required]})}ngOnInit(){this.fileUploadForm.get("selectFolder").setValue(this.currentDataGroup)}goBack(){this.goBackFlag.emit(!0)}handleFileInput(t,e){const o=t[0].name.split(".").pop();t&&["csv","xlsx","xls","pkl","pk","pl","pickle"].includes(o)?t[0].size<1024*this.allowedPSFileUploadSize*1024?(this.fileToUpload=t[0],this.createConnection(e)):this._snackbar.open("File size should be less than "+this.allowedPSFileUploadSize+"Mb","OK",{horizontalPosition:"right",verticalPosition:"bottom"}):this._snackbar.open(`.${o} file type is not supported`,"OK")}createConnection(t){let e,o;this._spinner.showSpinner(),"Add"===t.selectFolder?(e=t.dataFolderName,o=t.parentFolderName):e=t.selectFolder,this._data.uploadFile({encoding:t.encoding,projectId:this.project._id,dataGroupId:e,dataFolderName:e,parentFolderName:o,file:this.fileToUpload}).pipe(Object(E.a)(this.unsubscribe$)).subscribe(t=>{t.type===co.d.UploadProgress&&(this.percentDone=Math.round(100*t.loaded/t.total)),100===this.percentDone&&(this._utils.showSnackBar(q.b.fileUpload),this._spinner.stopSpinner(),4===t.type&&200===t.status&&this._connectionDialogRef.close())},t=>{this._toaster.error(t.error.message||"Server Error","Data Connection"),this._spinner.stopSpinner(),this._utils.dismissSnackBar()})}ngOnDestroy(){this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(l.h),b.Nb(p.a),b.Nb(h.a),b.Nb(d.i),b.Nb(m.c),b.Nb(g.c),b.Nb(j.a),b.Nb(f.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-file-upload-form"]],inputs:{dataGroupsArray:"dataGroupsArray",currentDataGroup:"currentDataGroup"},outputs:{goBackFlag:"goBackFlag"},decls:31,vars:5,consts:[[1,"mat-typography"],["role","form","name","fileUploadForm",1,"form-validate",3,"formGroup"],[1,"row"],[1,"col-md-6","form-group"],["appearance","outline"],["formControlName","encoding","required",""],["value","utf_8"],["value","latin_1"],[4,"ngIf"],[1,"col-md-6"],["formControlName","selectFolder","required","",3,"selectionChange"],["value","Add"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","mb-4"],["type","file","name","file","accept",".csv,.zip,.xlsx,.xls,.pkl,.pk,.pl,.pickle,.json,.html",3,"change"],["class","my-3 d-flex align-items-center",4,"ngIf"],[1,"d-flex","justify-content-end","m-auto"],["mat-stroked-button","",1,"mr-auto",3,"click"],["mat-stroked-button","","mat-dialog-close",""],[3,"value"],["for","dataFolderName"],["matInput","","type","text","name","dataFolderName","id","dataFolderName","formControlName","dataFolderName","placeholder","Enter folder name","required",""],["formControlName","parentFolderName","required",""],[1,"my-3","d-flex","align-items-center"],["color","#07509d",3,"value",4,"ngIf"],[1,"ml-1"],["color","#07509d",3,"value"]],template:function(t,e){1&t&&(b.Tb(0,"div",0),b.Tb(1,"form",1),b.Tb(2,"div",2),b.Tb(3,"div",3),b.Tb(4,"mat-form-field",4),b.Tb(5,"mat-label"),b.Kc(6,"Select encoding"),b.Sb(),b.Tb(7,"mat-select",5),b.Tb(8,"mat-option",6),b.Kc(9,"utf_8"),b.Sb(),b.Tb(10,"mat-option",7),b.Kc(11,"latin_1"),b.Sb(),b.Sb(),b.Ic(12,ua,2,0,"mat-error",8),b.Sb(),b.Sb(),b.Tb(13,"div",9),b.Tb(14,"mat-form-field",4),b.Tb(15,"mat-label"),b.Kc(16,"Select folder"),b.Sb(),b.Tb(17,"mat-select",10),b.ac("selectionChange",(function(t){return e.selectedFolder=t.value})),b.Tb(18,"mat-option",11),b.Kc(19,"Create new folder"),b.Sb(),b.Ic(20,ba,2,2,"mat-option",12),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Ic(21,fa,15,3,"div",8),b.Tb(22,"div",13),b.Tb(23,"input",14),b.ac("change",(function(t){return e.handleFileInput(t.target.files,e.fileUploadForm.value)})),b.Sb(),b.Sb(),b.Sb(),b.Ic(24,Sa,4,2,"div",15),b.Sb(),b.Ob(25,"hr"),b.Tb(26,"div",16),b.Tb(27,"button",17),b.ac("click",(function(){return e.goBack()})),b.Kc(28,"Back"),b.Sb(),b.Tb(29,"button",18),b.Kc(30,"Cancel"),b.Sb(),b.Sb()),2&t&&(b.Bb(1),b.kc("formGroup",e.fileUploadForm),b.Bb(11),b.kc("ngIf",e.fileUploadForm.get("encoding").hasError("required")&&(e.fileUploadForm.get("encoding").dirty||e.fileUploadForm.get("encoding").touched)),b.Bb(8),b.kc("ngForOf",e.dataGroupsArray),b.Bb(1),b.kc("ngIf","Add"===e.selectedFolder),b.Bb(3),b.kc("ngIf",e.percentDone))},directives:[l.K,l.v,l.m,Y.c,Y.g,re.a,l.u,l.k,l.F,le.o,a.t,a.s,Q.b,d.e,Y.b,W.b,l.d,da.a],styles:[".progress[_ngcontent-%COMP%]{background-color:#e9ecef;border-radius:.25rem;display:flex;font-size:1.2rem;height:1rem;margin-top:1rem;overflow:hidden}.progress-bar[_ngcontent-%COMP%]{align-items:center;background-color:#007bff;color:#fff;display:flex;justify-content:center}.mat-progress-bar[_ngcontent-%COMP%]{height:10px!important}.mat-progress-bar-fill[_ngcontent-%COMP%]:after{background-color:#07509d!important}"]}),t})();var ya=o("d+pd"),Ia=o("bSwM"),wa=o("5uqF");function Ca(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Connection name is required."),b.Sb())}function ka(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Invalid connection name "),b.Sb())}function va(t,e){if(1&t&&(b.Tb(0,"mat-option",23),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t),b.Bb(1),b.Lc(t.name)}}function _a(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Connection is required."),b.Sb())}function Da(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Database name is required."),b.Sb())}function Fa(t,e){if(1&t&&(b.Tb(0,"div",24),b.Tb(1,"mat-form-field",4),b.Tb(2,"mat-label",25),b.Kc(3,"Database name"),b.Sb(),b.Ob(4,"input",26),b.Ic(5,Da,2,0,"mat-error",7),b.Sb(),b.Sb()),2&t){const t=b.ec();b.Bb(5),b.kc("ngIf",t.dbConnectionForm.get("database").hasError("required")&&(t.dbConnectionForm.get("database").dirty||t.dbConnectionForm.get("database").touched))}}function Oa(t,e){if(1&t&&(b.Tb(0,"mat-hint",27),b.Kc(1),b.fc(2,"rowColValConverter"),b.Sb()),2&t){const t=b.ec();b.Bb(1),b.Mc("Note: Only ",b.gc(2,1,t.allowedNoOfRows)," rows will be fetched from the data source.")}}function Ba(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Query is required."),b.Sb())}function Na(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Invalid query. "),b.Sb())}function Ga(t,e){1&t&&(b.Tb(0,"mat-option"),b.Kc(1,"None"),b.Sb())}function xa(t,e){1&t&&(b.Tb(0,"mat-option",33),b.Kc(1,"None"),b.Sb())}function Ma(t,e){if(1&t&&(b.Tb(0,"mat-option",23),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t._id),b.Bb(1),b.Lc(t.scheduleName)}}function Pa(t,e){if(1&t){const t=b.Ub();b.Tb(0,"mat-hint",34),b.Tb(1,"a",35),b.ac("click",(function(){return b.wc(t),b.ec(2).navigateToScheduler()})),b.Kc(2,"Add scheduler"),b.Sb(),b.Sb()}}function Ka(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",28),b.Tb(1,"mat-form-field",4),b.Tb(2,"mat-label",29),b.Kc(3,"Select scheduler"),b.Sb(),b.Tb(4,"mat-select",30),b.ac("selectionChange",(function(e){return b.wc(t),b.ec().schedularChanged(e.value)})),b.Ic(5,Ga,2,0,"mat-option",7),b.Ic(6,xa,2,0,"mat-option",31),b.Ic(7,Ma,2,2,"mat-option",10),b.Sb(),b.Ic(8,Pa,3,0,"mat-hint",32),b.Sb(),b.Sb()}if(2&t){const t=b.ec();b.Bb(5),b.kc("ngIf",!t.isEdit),b.Bb(1),b.kc("ngIf",t.isEdit),b.Bb(1),b.kc("ngForOf",t.schedularsArray),b.Bb(1),b.kc("ngIf",!t.schedularsArray.length)}}function Aa(t,e){if(1&t&&(b.Tb(0,"mat-option",23),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t._id),b.Bb(1),b.Lc(t.name)}}function Ra(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",28),b.Tb(1,"mat-form-field",4),b.Tb(2,"mat-label"),b.Kc(3,"Select folder"),b.Sb(),b.Tb(4,"mat-select",36),b.ac("selectionChange",(function(e){return b.wc(t),b.ec().onFolderChange(e.value)})),b.Tb(5,"mat-option",37),b.Kc(6,"Create new folder"),b.Sb(),b.Ic(7,Aa,2,2,"mat-option",10),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.ec();b.Bb(7),b.kc("ngForOf",t.dataGroupsArray)}}function Ea(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Folder name is required. "),b.Sb())}function qa(t,e){if(1&t&&(b.Tb(0,"mat-option",23),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t._id),b.Bb(1),b.Lc(t.name)}}function ja(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Parent folder is required."),b.Sb())}function La(t,e){if(1&t&&(b.Tb(0,"div",38),b.Tb(1,"div",28),b.Tb(2,"mat-form-field",4),b.Tb(3,"mat-label",39),b.Kc(4,"Folder name"),b.Sb(),b.Ob(5,"input",40),b.Ic(6,Ea,2,0,"mat-error",7),b.Sb(),b.Sb(),b.Tb(7,"div",28),b.Tb(8,"mat-form-field",4),b.Tb(9,"mat-label"),b.Kc(10,"Select parent folder"),b.Sb(),b.Tb(11,"mat-select",41),b.Ic(12,qa,2,2,"mat-option",10),b.Sb(),b.Ic(13,ja,2,0,"mat-error",7),b.Sb(),b.Sb(),b.Sb()),2&t){const t=b.ec();b.Bb(6),b.kc("ngIf",t.dbConnectionForm.get("dataGroupName").hasError("required")&&(t.dbConnectionForm.get("dataGroupName").dirty||t.dbConnectionForm.get("dataGroupName").touched)),b.Bb(6),b.kc("ngForOf",t.dataGroupsArray),b.Bb(1),b.kc("ngIf",t.dbConnectionForm.get("parent_id").hasError("required")&&(t.dbConnectionForm.get("parent_id").dirty||t.dbConnectionForm.get("parent_id").touched))}}const Ua=function(){return{standalone:!0}};function $a(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",42),b.Tb(1,"mat-checkbox",43),b.ac("ngModelChange",(function(e){return b.wc(t),b.ec().isPulling=e})),b.Kc(2,"Pull data"),b.Sb(),b.Sb()}if(2&t){const t=b.ec();b.Bb(1),b.kc("ngModel",t.isPulling)("ngModelOptions",b.mc(2,Ua))}}function Ha(t,e){if(1&t){const t=b.Ub();b.Tb(0,"button",44),b.ac("click",(function(){return b.wc(t),b.ec().goBack()})),b.Kc(1,"Back"),b.Sb()}}let Va=(()=>{class t{constructor(t,e,o,a,i,n,r,c){this._fb=t,this._connection=e,this._toaster=o,this._connectionDialogRef=a,this._data=i,this._localStorage=n,this._router=r,this._spinner=c,this.goBackFlag=new b.o,this.color="primary",this.mode="indeterminate",this.diameter=100,this.exportProjectDiameter=50,this.unsubscribe$=new s.b,this.hidePassword=!0,this.isPulling=!0,this.isEdit=!1,this.appType=u.a.appType,this.allowedNoOfRows=0,this.dbConnectionForm=this._fb.group({connectionName:["",[l.I.required,l.I.pattern("^[^\\s][A-Za-z0-9_\\- ]+$")]],connection:["",l.I.required],database:["",l.I.required],query:["",l.I.required],dataGroupId:["",l.I.required],parent_id:["",l.I.nullValidator],dataGroupName:["",l.I.nullValidator],scheduleId:[""]},{validator:this.validateQuery})}ngOnInit(){var t,e;return Object(c.a)(this,void 0,void 0,(function*(){this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this.allowedNoOfRows=null===(e=null===(t=this.user)||void 0===t?void 0:t.psFeatures)||void 0===e?void 0:e.allowedNoOfRows,yield this.getRequiredConnectionList(),this.prefillConnectionForm(this.data)}))}getRequiredConnectionList(){var t;return Object(c.a)(this,void 0,void 0,(function*(){"snowflake"===this.sourceType||"bigquery"===this.sourceType?this.dbConns=yield this._connection.getConnectionsList(this.sourceType).pipe(Object(E.a)(this.unsubscribe$)).toPromise():(this.dbConns=yield this._connection.getDbConnectionList().pipe(Object(E.a)(this.unsubscribe$)).toPromise(),this.dbConns=null===(t=this.dbConns)||void 0===t?void 0:t.filter(t=>t.source===this.sourceType))}))}prefillConnectionForm(t){t?(this.isEdit=!0,this.connectionIdToUpdate=t._id,this._data.getSingleDataConnection(this.project._id,t._id).subscribe(t=>{t&&(this.connectionDetails=t,this.dbConnectionForm.patchValue({connectionName:t.connectionName,connection:this.dbConns.filter(e=>e._id===t.databaseConnectionId)[0],database:t.databaseName,query:t.query,scheduleId:t.scheduleId}),this.dbConnectionForm.get("dataGroupId").clearValidators(),this.dbConnectionForm.get("dataGroupId").updateValueAndValidity())},t=>{this._toaster.error("Server Error","Data Connection")})):(this.dbConnectionForm.reset(),this.dbConnectionForm.get("dataGroupId").setValue(this.currentDataGroup),this.isEdit=!1)}onSubmitConnection(t){this.isEdit?this.updateConnectionHandler(t):this.createConnectionHandler(t)}updateConnectionHandler(t){this.connectionDetails.databaseConnectionId=t.connection._id,this.connectionDetails.connectionName=t.connectionName,this.connectionDetails.databaseName=t.database,this.connectionDetails.query=t.query,this.connectionDetails.projectId=this.project._id,"None"==t.scheduleId&&(this.connectionDetails.statusData="None"),this.connectionDetails.scheduledata=void 0===this.dataschedule?"noupdate":this.dataschedule,this.connectionDetails.scheduleId&&(this.connectionDetails.oldScheduleId=this.connectionDetails.scheduleId),t.scheduleId&&(this.connectionDetails.scheduleId=t.scheduleId),this._data.updateDataConnection(this.project._id,this.connectionDetails._id,this.connectionDetails).subscribe(t=>{t&&(this.closeModal(t),this._toaster.success(this.sourceType.toUpperCase()+" connection updated successfully","Data Connection"))},t=>{this._toaster.success("Server Error","Data Connection")})}createConnectionHandler(t){t.scheduleId||delete t.scheduleId,t.dataGroupName||delete t.dataGroupName,t.parent_id||delete t.parent_id;let e=Object.assign(Object.assign({},t),{source:this.sourceType,isPulling:this.isPulling});this._data.pullData(this.project._id,e).subscribe(t=>{t&&(this.closeModal(t),this._toaster.success(this.sourceType.toUpperCase()+" connection created successfully","Data Connection"))},t=>{this._toaster.error(t.error.message||"Server Error","Data Connection")})}schedularChanged(t){var e;this.dataschedule=(null===(e=this.connectionDetails)||void 0===e?void 0:e.scheduleId)?this.connectionDetails.scheduleId!==t?"update":"noupdate":"new"}goBack(){this.goBackFlag.emit(!0)}onFolderChange(t){this.selectedFolder=t,"Add"===this.selectedFolder?(this.dbConnectionForm.get("dataGroupName").setValidators(l.I.required),this.dbConnectionForm.get("dataGroupName").updateValueAndValidity(),this.dbConnectionForm.get("parent_id").setValidators(l.I.required),this.dbConnectionForm.get("parent_id").updateValueAndValidity()):(this.dbConnectionForm.get("dataGroupName").clearValidators(),this.dbConnectionForm.get("dataGroupName").updateValueAndValidity(),this.dbConnectionForm.get("parent_id").clearValidators(),this.dbConnectionForm.get("parent_id").updateValueAndValidity())}closeModal(t){this._connectionDialogRef.close(t)}navigateToScheduler(){this.closeModal(),this._spinner.stopSpinner(),this._router.navigateByUrl("/dashboard/scheduler?type=scheduler")}validateQuery(t){let e=t.get("query").value;(null==e?void 0:e.length)&&(e=e.toLowerCase(),e.includes("select")||t.get("query").setErrors({queryInvalid:!0}))}ngOnDestroy(){this.connection$&&this.connection$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(l.h),b.Nb(ya.a),b.Nb(m.c),b.Nb(d.i),b.Nb(p.a),b.Nb(h.a),b.Nb(J.e),b.Nb(j.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-database-form"]],inputs:{dataGroupsArray:"dataGroupsArray",schedularsArray:"schedularsArray",sourceType:"sourceType",data:"data",currentDataGroup:"currentDataGroup"},outputs:{goBackFlag:"goBackFlag"},decls:43,vars:19,consts:[[1,"mat-typography"],["role","form","name","dbConnectionForm",1,"form-validate",3,"formGroup"],[1,"row"],[1,"col-md-12","form-group"],["appearance","outline"],["for","connectionName"],["matInput","","type","text","name","connectionName","formControlName","connectionName","id","connectionName","placeholder","Enter connection name","autocomplete","","required",""],[4,"ngIf"],["for","inputdatabase"],["formControlName","connection","required",""],[3,"value",4,"ngFor","ngForOf"],["class","col-md-6 form-group",4,"ngIf"],["for","query"],["matInput","","type","text","name","query","formControlName","query","id","query","placeholder","Enter SELECT query","autocomplete","","required",""],["queryString",""],["align","end",4,"ngIf"],["class","col-md-6",4,"ngIf"],["class","row my-4",4,"ngIf"],["class","mt-5 ml-1",4,"ngIf"],[1,"d-flex","justify-content-end","m-auto"],["mat-stroked-button","","class","mr-auto",3,"click",4,"ngIf"],["mat-stroked-button","","mat-dialog-close",""],["mat-flat-button","","type","submit",1,"btn-primary","ml-3",3,"disabled","click"],[3,"value"],[1,"col-md-6","form-group"],["for","database"],["matInput","","type","text","name","database","formControlName","database","id","database","placeholder","Enter database name","autocomplete","","required",""],["align","end"],[1,"col-md-6"],["for","scheduleId"],["formControlName","scheduleId",3,"selectionChange"],["value","None",4,"ngIf"],["class","redirect-link",4,"ngIf"],["value","None"],[1,"redirect-link"],[1,"text-decoration-none",2,"cursor","pointer",3,"click"],["formControlName","dataGroupId","required","",3,"selectionChange"],["value","Add"],[1,"row","my-4"],["for","dataGroupName"],["matInput","","type","text","name","dataGroupName","id","dataGroupName","formControlName","dataGroupName","placeholder","Enter folder name","required",""],["formControlName","parent_id","required",""],[1,"mt-5","ml-1"],[3,"ngModel","ngModelOptions","ngModelChange"],["mat-stroked-button","",1,"mr-auto",3,"click"]],template:function(t,e){1&t&&(b.Tb(0,"div",0),b.Tb(1,"form",1),b.Tb(2,"div",2),b.Tb(3,"div",3),b.Tb(4,"mat-form-field",4),b.Tb(5,"mat-label",5),b.Kc(6,"Connection name"),b.Sb(),b.Ob(7,"input",6),b.Ic(8,Ca,2,0,"mat-error",7),b.Ic(9,ka,2,0,"mat-error",7),b.Sb(),b.Sb(),b.Sb(),b.Tb(10,"div",2),b.Tb(11,"div"),b.Tb(12,"mat-form-field",4),b.Tb(13,"mat-label",8),b.Kc(14,"Select connection"),b.Sb(),b.Tb(15,"mat-select",9),b.Ic(16,va,2,2,"mat-option",10),b.Sb(),b.Ic(17,_a,2,0,"mat-error",7),b.Sb(),b.Sb(),b.Ic(18,Fa,6,1,"div",11),b.Sb(),b.Tb(19,"div",2),b.Tb(20,"div",3),b.Tb(21,"mat-form-field",4),b.Tb(22,"mat-label",12),b.Kc(23,"Query"),b.Sb(),b.Ob(24,"textarea",13,14),b.Tb(26,"mat-hint"),b.Kc(27,"Only SELECT query is allowed."),b.Sb(),b.Ic(28,Oa,3,3,"mat-hint",15),b.Ic(29,Ba,2,0,"mat-error",7),b.Ic(30,Na,2,0,"mat-error",7),b.Sb(),b.Sb(),b.Sb(),b.Tb(31,"div",2),b.Ic(32,Ka,9,4,"div",16),b.Ic(33,Ra,8,1,"div",16),b.Sb(),b.Ic(34,La,14,3,"div",17),b.Ic(35,$a,3,3,"div",18),b.Sb(),b.Sb(),b.Ob(36,"hr"),b.Tb(37,"div",19),b.Ic(38,Ha,2,0,"button",20),b.Tb(39,"button",21),b.Kc(40,"Cancel"),b.Sb(),b.Tb(41,"button",22),b.ac("click",(function(){return e.onSubmitConnection(e.dbConnectionForm.value)})),b.Kc(42),b.Sb(),b.Sb()),2&t&&(b.Bb(1),b.kc("formGroup",e.dbConnectionForm),b.Bb(7),b.kc("ngIf",e.dbConnectionForm.get("connectionName").hasError("required")&&(e.dbConnectionForm.get("connectionName").dirty||e.dbConnectionForm.get("connectionName").touched)),b.Bb(1),b.kc("ngIf",e.dbConnectionForm.get("connectionName").hasError("pattern")),b.Bb(2),b.Eb("\n          ","sftp"===e.sourceType?"col-md-12 form-group":"col-md-6 form-group",""),b.Bb(5),b.kc("ngForOf",e.dbConns),b.Bb(1),b.kc("ngIf",e.dbConnectionForm.get("connection").hasError("required")&&(e.dbConnectionForm.get("connection").dirty||e.dbConnectionForm.get("connection").touched)),b.Bb(1),b.kc("ngIf","sftp"!==e.sourceType),b.Bb(10),b.kc("ngIf",!(null!=e.user&&null!=e.user.roles&&e.user.roles.includes("super_admin")||null!=e.user&&null!=e.user.roles&&e.user.roles.includes("admin"))),b.Bb(1),b.kc("ngIf",e.dbConnectionForm.get("query").hasError("required")&&(e.dbConnectionForm.get("query").dirty||e.dbConnectionForm.get("query").touched)),b.Bb(1),b.kc("ngIf",e.dbConnectionForm.get("query").hasError("queryInvalid")),b.Bb(2),b.kc("ngIf","enterprise"===e.appType||"saas"===e.appType&&((null==e.user||null==e.user.roles?null:e.user.roles.includes("super_admin"))||(null==e.user||null==e.user.roles?null:e.user.roles.includes("admin")))),b.Bb(1),b.kc("ngIf",!e.isEdit),b.Bb(1),b.kc("ngIf","Add"===e.selectedFolder&&!e.isEdit),b.Bb(1),b.kc("ngIf",!e.isEdit),b.Bb(3),b.kc("ngIf",!e.isEdit),b.Bb(3),b.kc("disabled",e.dbConnectionForm.invalid),b.Bb(1),b.Mc(" ",e.isEdit?"Update":"Create"," "))},directives:[l.K,l.v,l.m,Y.c,Y.g,W.b,l.d,l.u,l.k,l.F,a.t,re.a,a.s,Y.f,Q.b,d.e,Y.b,le.o,Ia.b,l.x],pipes:[wa.a],styles:[".redirect-link[_ngcontent-%COMP%]{cursor:pointer;font-size:14px;margin-top:5px}"]}),t})();var za=o("FvrZ"),Qa=o("8yBR"),Za=o("uxn7"),Ya=o("mW75"),Wa=o("DH7j");function Ja(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Connection name is required."),b.Sb())}function Xa(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Invalid connection name"),b.Sb())}function ti(t,e){if(1&t&&(b.Tb(0,"mat-option",31),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t),b.Bb(1),b.Lc(t.name)}}function ei(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Connection is required."),b.Sb())}function oi(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",28),b.Tb(1,"mat-form-field",3),b.Tb(2,"mat-label",29),b.Kc(3,"Select connection"),b.Sb(),b.Tb(4,"mat-select",30),b.ac("selectionChange",(function(e){return b.wc(t),b.ec().connectionChanged(e)})),b.Ic(5,ti,2,2,"mat-option",18),b.Sb(),b.Ic(6,ei,2,0,"mat-error",6),b.Sb(),b.Sb()}if(2&t){const t=b.ec();b.Db("sftp"===t.sourceType?"col-md-6 ":"d-none"),b.Bb(5),b.kc("ngForOf",t.sftpConns),b.Bb(1),b.kc("ngIf",t.dynamicForm.get("sftpGroup.connection").hasError("required")&&(t.dynamicForm.get("sftpGroup.connection").dirty||t.dynamicForm.get("sftpGroup.connection").touched))}}function ai(t,e){if(1&t&&(b.Tb(0,"mat-option",31),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t),b.Bb(1),b.Lc(t.name)}}function ii(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Connection is required."),b.Sb())}function ni(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",32),b.Tb(1,"mat-form-field",3),b.Tb(2,"mat-label",29),b.Kc(3,"Select connection"),b.Sb(),b.Tb(4,"mat-select",30),b.ac("selectionChange",(function(e){return b.wc(t),b.ec().connectionChanged(e)})),b.Ic(5,ai,2,2,"mat-option",18),b.Sb(),b.Ic(6,ii,2,0,"mat-error",6),b.Sb(),b.Sb()}if(2&t){const t=b.ec();b.Db("s3"===t.sourceType?"col-md-6":"d-none"),b.Bb(5),b.kc("ngForOf",t.s3Conns),b.Bb(1),b.kc("ngIf",t.dynamicForm.get("s3Group.connection").hasError("required")&&(t.dynamicForm.get("s3Group.connection").dirty||t.dynamicForm.get("s3Group.connection").touched))}}function ri(t,e){if(1&t&&(b.Tb(0,"mat-option",31),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t),b.Bb(1),b.Lc(t)}}function si(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Bucket is required."),b.Sb())}function ci(t,e){if(1&t&&(b.Tb(0,"div",2),b.Tb(1,"div",33),b.Tb(2,"mat-form-field",3),b.Tb(3,"mat-label",29),b.Kc(4,"Select bucket"),b.Sb(),b.Tb(5,"mat-select",34),b.Ic(6,ri,2,2,"mat-option",18),b.Sb(),b.Ic(7,si,2,0,"mat-error",6),b.Sb(),b.Sb(),b.Tb(8,"div",33),b.Tb(9,"mat-form-field",3),b.Tb(10,"mat-label",35),b.Kc(11,"Bucket folder path (optional)"),b.Sb(),b.Ob(12,"input",36),b.Sb(),b.Sb(),b.Sb()),2&t){const t=b.ec();b.Bb(6),b.kc("ngForOf",t.s3BucketsArray),b.Bb(1),b.kc("ngIf",t.dynamicForm.get("s3Group.bucket").hasError("required")&&(t.dynamicForm.get("s3Group.bucket").dirty||t.dynamicForm.get("s3Group.bucket").touched))}}function li(t,e){if(1&t){const t=b.Ub();b.Tb(0,"span",47),b.ac("click",(function(){b.wc(t);const o=e.$implicit;return b.ec(3).treeHandler(o)})),b.Kc(1),b.Sb()}if(2&t){const t=e.$implicit;b.lc("title",t.data.subTitle),b.Bb(1),b.Lc(t.data.label)}}function di(t,e){1&t&&b.Kc(0,"Loading, please hold....")}function ui(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",39),b.Tb(1,"mat-label",40),b.Kc(2,"Folder path tree"),b.Sb(),b.Tb(3,"a",41),b.ac("click",(function(){return b.wc(t),b.ec(2).previousTree()})),b.Kc(4,"Back"),b.Sb(),b.Tb(5,"tree-root",42,43),b.Ic(7,li,2,2,"ng-template",null,44,b.Jc),b.Ic(9,di,1,0,"ng-template",null,45,b.Jc),b.Sb(),b.Tb(11,"mat-hint",46),b.Kc(12,"Note: Above tree is supported upto 2 levels only."),b.Sb(),b.Sb()}if(2&t){const t=b.ec(2);b.Bb(5),b.kc("nodes",t.nodes)("focused",!0)("options",t.options)("ngClass","expand_tree")}}function bi(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Folder path is required."),b.Sb())}function pi(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",28),b.Tb(1,"mat-form-field",3),b.Tb(2,"mat-label",48),b.Kc(3,"Selected folder path"),b.Sb(),b.Ob(4,"input",49),b.Tb(5,"button",50),b.ac("click",(function(){b.wc(t);const e=b.ec(2);return e.selectedPath="",e.nodesArray=[],e.dynamicForm.get("sftpGroup.folderpath").setValue(""),e.resetTreeNode()})),b.Tb(6,"mat-icon"),b.Kc(7,"close"),b.Sb(),b.Sb(),b.Ic(8,bi,2,0,"mat-error",6),b.Tb(9,"mat-hint"),b.Kc(10,"Note: You can use folder path input for more nested structure."),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.ec(2);b.Db(t.isEdit?"col-md-12 ":"col-md-6 "),b.Bb(4),b.kc("value",t.selectedPath),b.Bb(4),b.kc("ngIf",t.dynamicForm.get("sftpGroup.folderpath").hasError("required")&&(t.dynamicForm.get("sftpGroup.folderpath").dirty||t.dynamicForm.get("sftpGroup.folderpath").touched))}}function mi(t,e){if(1&t&&(b.Tb(0,"div",37),b.Ic(1,ui,13,4,"div",38),b.Ic(2,pi,11,5,"div",7),b.Sb()),2&t){const t=b.ec();b.Bb(1),b.kc("ngIf",!t.isEdit),b.Bb(1),b.kc("ngIf","sftp"===t.sourceType)}}function hi(t,e){if(1&t&&(b.Tb(0,"mat-option",31),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t.value),b.Bb(1),b.Lc(t.name)}}function fi(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"File extentsion is required. "),b.Sb())}function gi(t,e){if(1&t&&(b.Tb(0,"div",51),b.Tb(1,"mat-form-field",3),b.Tb(2,"mat-label"),b.Kc(3,"Select file extentsion"),b.Sb(),b.Tb(4,"mat-select",52),b.Ic(5,hi,2,2,"mat-option",18),b.Sb(),b.Ic(6,fi,2,0,"mat-error",6),b.Sb(),b.Sb()),2&t){const t=b.ec();b.Bb(5),b.kc("ngForOf",t.sftpFileTypes),b.Bb(1),b.kc("ngIf",t.dynamicForm.get("sftpGroup.fileExtension").hasError("required")&&(t.dynamicForm.get("sftpGroup.fileExtension").dirty||t.dynamicForm.get("sftpGroup.fileExtension").touched))}}function Si(t,e){if(1&t&&(b.Tb(0,"mat-option",31),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t.value),b.Bb(1),b.Lc(t.name)}}function Ti(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"URL resource type is required. "),b.Sb())}function yi(t,e){if(1&t&&(b.Tb(0,"div",53),b.Tb(1,"mat-form-field",3),b.Tb(2,"mat-label"),b.Kc(3,"Select resource type"),b.Sb(),b.Tb(4,"mat-select",54),b.Ic(5,Si,2,2,"mat-option",18),b.Sb(),b.Ic(6,Ti,2,0,"mat-error",6),b.Sb(),b.Sb()),2&t){const t=b.ec();b.Bb(5),b.kc("ngForOf",t.urlSources),b.Bb(1),b.kc("ngIf",t.dynamicForm.get("urlGroup.filetype").hasError("required")&&(t.dynamicForm.get("urlGroup.filetype").dirty||t.dynamicForm.get("urlGroup.filetype").touched))}}function Ii(t,e){if(1&t&&(b.Tb(0,"mat-option",31),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t._id),b.Bb(1),b.Lc(t.scheduleName)}}function wi(t,e){if(1&t){const t=b.Ub();b.Tb(0,"mat-hint",55),b.Tb(1,"a",56),b.ac("click",(function(){return b.wc(t),b.ec().navigateToScheduler()})),b.Kc(2,"Add scheduler"),b.Sb(),b.Sb()}}function Ci(t,e){if(1&t&&(b.Tb(0,"mat-option",31),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t.value),b.Bb(1),b.Lc(t.name)}}function ki(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"File extentsion is required. "),b.Sb())}function vi(t,e){if(1&t&&(b.Tb(0,"div",33),b.Tb(1,"mat-form-field",3),b.Tb(2,"mat-label"),b.Kc(3,"Select file extentsion"),b.Sb(),b.Tb(4,"mat-select",52),b.Ic(5,Ci,2,2,"mat-option",18),b.Sb(),b.Ic(6,ki,2,0,"mat-error",6),b.Sb(),b.Sb()),2&t){const t=b.ec();b.Bb(5),b.kc("ngForOf",t.sftpFileTypes),b.Bb(1),b.kc("ngIf",t.dynamicForm.get("s3Group.fileExtension").hasError("required")&&(t.dynamicForm.get("s3Group.fileExtension").dirty||t.dynamicForm.get("s3Group.fileExtension").touched))}}const _i=function(){return{standalone:!0}};function Di(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",14),b.Tb(1,"label",57),b.Kc(2,"Data format"),b.Sb(),b.Tb(3,"mat-radio-group",58),b.ac("ngModelChange",(function(e){return b.wc(t),b.ec().dataFormat=e})),b.Tb(4,"mat-radio-button",59),b.Kc(5,"CSV"),b.Sb(),b.Tb(6,"mat-radio-button",60),b.Kc(7,"JSON"),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.ec();b.Bb(3),b.kc("ngModel",t.dataFormat)("ngModelOptions",b.mc(2,_i))}}function Fi(t,e){if(1&t&&(b.Tb(0,"mat-option",31),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t._id),b.Bb(1),b.Lc(t.name)}}function Oi(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",14),b.Tb(1,"mat-form-field",3),b.Tb(2,"mat-label"),b.Kc(3,"Select folder"),b.Sb(),b.Tb(4,"mat-select",61),b.ac("selectionChange",(function(e){return b.wc(t),b.ec().folderChangedHandler(e)})),b.Tb(5,"mat-option",62),b.Kc(6,"Create new folder"),b.Sb(),b.Ic(7,Fi,2,2,"mat-option",18),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.ec();b.Bb(7),b.kc("ngForOf",t.dataGroupsArray)}}function Bi(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Folder name is required. "),b.Sb())}function Ni(t,e){if(1&t&&(b.Tb(0,"mat-option",31),b.Kc(1),b.Sb()),2&t){const t=e.$implicit;b.kc("value",t._id),b.Bb(1),b.Lc(t.name)}}function Gi(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Parent folder is required."),b.Sb())}function xi(t,e){if(1&t&&(b.Tb(0,"div",2),b.Tb(1,"div",14),b.Tb(2,"mat-form-field",3),b.Tb(3,"mat-label",63),b.Kc(4,"Folder name"),b.Sb(),b.Ob(5,"input",64),b.Ic(6,Bi,2,0,"mat-error",6),b.Sb(),b.Sb(),b.Tb(7,"div",14),b.Tb(8,"mat-form-field",3),b.Tb(9,"mat-label"),b.Kc(10,"Select parent folder"),b.Sb(),b.Tb(11,"mat-select",65),b.Ic(12,Ni,2,2,"mat-option",18),b.Sb(),b.Ic(13,Gi,2,0,"mat-error",6),b.Sb(),b.Sb(),b.Sb()),2&t){const t=b.ec();b.Bb(6),b.kc("ngIf",t.dynamicForm.get("dataGroupName").hasError("required")&&(t.dynamicForm.get("dataGroupName").dirty||t.dynamicForm.get("dataGroupName").touched)),b.Bb(6),b.kc("ngForOf",t.dataGroupsArray),b.Bb(1),b.kc("ngIf",t.dynamicForm.get("parent_id").hasError("required")&&(t.dynamicForm.get("parent_id").dirty||t.dynamicForm.get("parent_id").touched))}}function Mi(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"URL is required."),b.Sb())}function Pi(t,e){1&t&&(b.Tb(0,"mat-error"),b.Kc(1,"Invalid URL."),b.Sb())}function Ki(t,e){if(1&t&&(b.Tb(0,"div",2),b.Tb(1,"div",66),b.Tb(2,"mat-form-field",3),b.Tb(3,"mat-label",67),b.Kc(4,"URL"),b.Sb(),b.Ob(5,"input",68),b.Ic(6,Mi,2,0,"mat-error",6),b.Ic(7,Pi,2,0,"mat-error",6),b.Sb(),b.Sb(),b.Sb()),2&t){const t=b.ec();b.Bb(6),b.kc("ngIf",t.dynamicForm.get("urlGroup.url").hasError("required")&&(t.dynamicForm.get("urlGroup.url").dirty||t.dynamicForm.get("urlGroup.url").touched)),b.Bb(1),b.kc("ngIf",t.dynamicForm.get("urlGroup.url").hasError("url"))}}function Ai(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",69),b.Tb(1,"mat-checkbox",70),b.ac("ngModelChange",(function(e){return b.wc(t),b.ec().isPulling=e})),b.Kc(2,"Pull data"),b.Sb(),b.Sb()}if(2&t){const t=b.ec();b.Bb(1),b.kc("ngModel",t.isPulling)("ngModelOptions",b.mc(2,_i))}}function Ri(t,e){1&t&&(b.Tb(0,"li"),b.Kc(1," It will pull all files from selected bucket or folder path (optional) "),b.Sb())}function Ei(t,e){1&t&&(b.Tb(0,"li"),b.Kc(1,"It will pull all files from selected folder path"),b.Sb())}function qi(t,e){if(1&t&&(b.Tb(0,"div",71),b.Tb(1,"mat-hint"),b.Kc(2,"Note: "),b.Tb(3,"ul"),b.Ic(4,Ri,2,0,"li",6),b.Ic(5,Ei,2,0,"li",6),b.Tb(6,"li"),b.Kc(7,"Files will be pulled, only if they have been modified or new are added"),b.Sb(),b.Sb(),b.Sb(),b.Sb()),2&t){const t=b.ec();b.Bb(4),b.kc("ngIf","s3"===t.sourceType),b.Bb(1),b.kc("ngIf","sftp"===t.sourceType)}}function ji(t,e){if(1&t){const t=b.Ub();b.Tb(0,"button",72),b.ac("click",(function(){return b.wc(t),b.ec().goBack()})),b.Kc(1," Back "),b.Sb()}}let Li=(()=>{class t{constructor(t,e,o,a,i,n,r,c,d,u){this.dialogData=t,this._fb=e,this._connection=o,this._toaster=a,this._connectionDialogRef=i,this._data=n,this._localStorage=r,this._spinner=c,this._router=d,this._utils=u,this.goBackFlag=new b.o,this.options={mouse:{contextMenu:(t,e,o)=>{o.preventDefault(),alert("context menu for "+e.data.name)},dblClick:Ya.c.TOGGLE_EXPANDED,click:(t,e,o)=>{o.shiftKey?Ya.c.TOGGLE_ACTIVE_MULTI(t,e,o):Ya.c.TOGGLE_ACTIVE(t,e,o)}},keys:{[Ya.a.ENTER]:(t,e,o)=>alert("This is "+e.data.name)}},this.unsubscribe$=new s.b,this.sftpFileTypes=[{name:"XLS",value:".xls",type:"xls"},{name:"XLSX",value:".xlsx",type:"xlsx"},{name:"CSV",value:".csv",type:"csv"}],this.urlSources=[{name:"URL",value:"url",type:"url"}],this.color="primary",this.mode="indeterminate",this.diameter=100,this.exportProjectDiameter=50,this.treeControl=new za.j(t=>t.children),this.dataSource=new Qa.d,this.hidePassword=!0,this.isPulling=!0,this.isEdit=!1,this.showSftpSpinner=!1,this.nodesArray=[],this.dataFormat="csv",this.s3BucketsArray=[],this.nodes=null,this.hasChild=(t,e)=>!!e.children&&e.children.length>0,this.s3Form=this._fb.group({connection:["",l.I.required],bucket:["",l.I.required],fileExtension:["",l.I.required],bucketFolderPath:[""]}),this.sftpForm=this._fb.group({connection:["",this.dialogData.data?l.I.nullValidator:l.I.required],fileExtension:["",this.dialogData.data?l.I.nullValidator:l.I.required],folderpath:["",this.dialogData.data?l.I.nullValidator:l.I.required]}),this.urlForm=this._fb.group({filetype:["",this.dialogData.data?l.I.nullValidator:l.I.required],url:["",this.dialogData.data?l.I.nullValidator:[l.I.required,Za.a.url]]})}ngOnInit(){return Object(c.a)(this,void 0,void 0,(function*(){this.dynamicForm=this._fb.group({connectionName:["",[l.I.required,l.I.pattern("^[^\\s][A-Za-z0-9_\\- ]+$")]],dataGroupId:["",l.I.required],dataGroupName:["",l.I.nullValidator],parent_id:["",l.I.nullValidator],scheduleId:[""],sftpGroup:"sftp"===this.sourceType?this.sftpForm:"",urlGroup:"url"===this.sourceType?this.urlForm:"",s3Group:"s3"===this.sourceType?this.s3Form:""}),this.project=this._localStorage.getItem("project"),"s3"===this.sourceType?this.s3Conns=yield this._connection.getConnectionsList(this.sourceType).pipe(Object(E.a)(this.unsubscribe$)).toPromise():"sftp"===this.sourceType&&(this.sftpConns=yield this._connection.getSftpConnectionList().pipe(Object(E.a)(this.unsubscribe$)).toPromise()),this.prefillConnectionForm(this.dialogData.data),this.dataSource.data=[{label:"/"}],this.nodes=[{expanded:!0,label:"/"}]}))}previousTree(){let t,e,o,a;e=this.selectedPath.replace("//","/"),t=e.lastIndexOf("/"),a=e.substring(t+1),-1===t?(o=void 0,this.selectedPath=""):(o=e.replace("/"+a,""),this.selectedPath=o,o=o.replace("//","/"));const i=this.sftpConns.filter(t=>t.name===this.sftpForm.get("connection").value.name)[0];this.getSFTPFolders(i._id,o)}prefillConnectionForm(t){t?(this.isEdit=!0,this.dynamicForm.get("dataGroupId").clearValidators(),this.dynamicForm.get("dataGroupId").updateValueAndValidity(),this.connectionIdToUpdate=t._id,this._data.getSingleDataConnection(this.project._id,t._id).subscribe(t=>{var e;t&&("sftp"===t.source?this.sftpDetails=t:"url"===t.source?this.urlDetails=t:"s3"===t.source&&(this.s3Details=t),this.s3BucketsArray.push(t.bucket),this.dynamicForm.patchValue({connectionName:t.connectionName,scheduleId:t.scheduleId||"None",sftpGroup:{connection:"sftp"===this.sourceType?this.sftpConns.filter(e=>e._id===t.sftpConnectionId)[0]:null,fileExtension:t.fileExtension||t.fileExtension,folderpath:t.folderPath},urlGroup:{url:t.url},s3Group:{connection:"s3"===this.sourceType?null===(e=this.s3Conns)||void 0===e?void 0:e.filter(e=>e._id===t.s3ConnectionId)[0]:null,fileExtension:t.fileExtension,bucketFolderPath:t.bucketFolderPath,bucket:t.bucket}}),this.dynamicForm.updateValueAndValidity(),this.dataFormat=t.dataFormat)},t=>{this._toaster.error("Server Error","Data Connection")})):(this.dynamicForm.get("dataGroupId").setValue(this.currentDataGroup),this.isEdit=!1)}folderChangedHandler(t){this.selectedFolder=t.value,"Add"===this.selectedFolder?(this.dynamicForm.get("dataGroupName").setValidators(l.I.required),this.dynamicForm.get("parent_id").setValidators(l.I.required),this.dynamicForm.get("dataGroupName").updateValueAndValidity(),this.dynamicForm.get("parent_id").updateValueAndValidity()):(this.dynamicForm.get("dataGroupName").clearValidators(),this.dynamicForm.get("parent_id").clearValidators(),this.dynamicForm.get("dataGroupName").updateValueAndValidity(),this.dynamicForm.get("parent_id").updateValueAndValidity())}connectionChanged(t){"s3"===this.sourceType?(this._spinner.showSpinner(),this.getS3Buckets(t)):this.getSFTPFolders(t.value._id)}getS3Buckets(t){this._data.getS3BucketsList(t.value._id).pipe(Object(E.a)(this.unsubscribe$)).subscribe(t=>{this._spinner.stopSpinner(),Object(Wa.a)(t.buckets)?this.s3BucketsArray=t.buckets:this._toaster.error(t.buckets||"Cannot fetch S3 buckets list","Data Connection")},t=>{this._spinner.stopSpinner(),this._toaster.error(t.error.message||"Server Error","Data Connection")})}getSFTPFolders(t,e){e||(this.dataSource.data=[{label:"Fetching details from remote server..."}]),this._spinner.showSpinner(),this.sftpId=t,this.dataConnection$=this._data.getSftpFolderDetails(t,e||"first").subscribe(t=>{if(t.length){if(this.nodes=t,void 0!==e&&""!==e){let t=[];t=e.split("/"),this.nodes[0].label=t.slice().pop()}this._spinner.stopSpinner()}else this._toaster.error("Cannot fetch SFTP folders structure","Data Connection"),this._spinner.stopSpinner()},t=>{this.dataSource.data=[{label:"Cannot fetch details from remote server"}],this._spinner.stopSpinner(),this._toaster.error(t.error.message||"Server Error","Data Connection")})}refreshTreeData(){const t=this.dataSource.data;this.dataSource.data=[],this.dataSource.data=t}treeHandler(t){var e;null===(e=this.nodesArray)||void 0===e||e.push(t.data.label),this.selectedPath=this.nodesArray.toString().split(",").join("/");const o=this.sftpConns.filter(t=>t.name===this.sftpForm.get("connection").value.name)[0];this.getSFTPFolders(o._id,this.selectedPath),this.sftpForm.get("folderpath").setValue(this.selectedPath)}resetTreeNode(){const t=this.sftpConns.filter(t=>t.name===this.sftpForm.get("connection").value.name)[0];this.getSFTPFolders(t._id,this.selectedPath)}showPreviousNode(){}goBack(){this.goBackFlag.emit(!0)}onSubmitConnection(t){this._spinner.showSpinner(),this.isEdit?this.updateConnectionHandler(t):this.createConnectionHandler(t)}updateConnectionHandler(t){this.sftpDetails?this.updateSftpConnection(t):this.urlDetails?this.updateUrlConnection(t):this.s3Details&&this.updateS3Connection(t)}updateUrlConnection(t){this.urlDetails.connectionName=t.connectionName,this.urlDetails.url=t.urlGroup.url,this.urlDetails.dataFormat=this.dataFormat,this.urlDetails.projectId=this.project._id,"None"==t.scheduleId&&(this.urlDetails.statusData="None"),this.urlDetails.scheduledata=void 0===this.dataschedule?"noupdate":this.dataschedule,this.urlDetails.scheduleId&&(this.urlDetails.oldScheduleId=this.urlDetails.scheduleId),t.scheduleId&&(this.urlDetails.scheduleId=t.scheduleId),this._data.updateDataConnection(this.project._id,this.urlDetails._id,this.urlDetails).subscribe(t=>{t&&(this.closeModal(t),this._toaster.success(this.urlDetails.source.toUpperCase()+" connection updated successfully","Data Connection"))},t=>{this._toaster.success("Server Error","Data Connection")})}updateSftpConnection(t){this.sftpDetails.connectionName=t.connectionName,this.sftpDetails.folderPath=t.sftpGroup.folderpath,this.sftpDetails.fileExtension=t.sftpGroup.fileExtension,this.sftpDetails.projectId=this.project._id,"None"==t.scheduleId&&(this.sftpDetails.statusData="None"),this.sftpDetails.scheduledata=void 0===this.dataschedule?"noupdate":this.dataschedule,this.sftpDetails.scheduleId&&(this.sftpDetails.oldScheduleId=this.sftpDetails.scheduleId),t.scheduleId&&(this.sftpDetails.scheduleId=t.scheduleId),this._data.updateDataConnection(this.project._id,this.sftpDetails._id,this.sftpDetails).subscribe(t=>{t&&(this.closeModal(t),this._toaster.success(this.sftpDetails.source.toUpperCase()+" connection updated successfully","Data Connection"))},t=>{this._toaster.success("Server Error","Data Connection")})}updateS3Connection(t){var e;this.s3Details.connectionName=t.connectionName,this.s3Details.fileExtension=t.s3Group.fileExtension,this.s3Details.projectId=this.project._id,this.s3Details.s3ConnectionId=null===(e=this.s3Conns)||void 0===e?void 0:e.filter(e=>e._id===t.s3Group.connection._id)[0]._id,this.s3Details.bucket=t.s3Group.bucket,this.s3Details.bucketFolderPath=t.s3Group.bucketFolderPath,"None"==t.scheduleId&&(this.s3Details.statusData="None"),this.s3Details.scheduledata=void 0===this.dataschedule?"noupdate":this.dataschedule,this.s3Details.scheduleId&&(this.s3Details.oldScheduleId=this.s3Details.scheduleId),t.scheduleId&&(this.s3Details.scheduleId=t.scheduleId),this._data.updateDataConnection(this.project._id,this.s3Details._id,this.s3Details).subscribe(t=>{t&&(this.closeModal(t),this._toaster.success(this.s3Details.source.toUpperCase()+" connection updated successfully","Data Connection"))},t=>{this._toaster.success("Server Error","Data Connection")})}createConnectionHandler(t){let e;t.scheduleId||delete t.scheduleId,t.dataGroupName||delete t.dataGroupName,t.parent_id||delete t.parent_id,"sftp"===this.sourceType?e=Object.assign(Object.assign(Object.assign({},t),t.sftpGroup),{source:this.sourceType,isPulling:this.isPulling}):"url"===this.sourceType?e=Object.assign(Object.assign(Object.assign({},t),t.urlGroup),{source:this.sourceType,dataFormat:this.dataFormat,isPulling:this.isPulling}):"s3"===this.sourceType&&(e=Object.assign(Object.assign(Object.assign({},t),t.s3Group),{source:this.sourceType,isPulling:this.isPulling})),delete e.sftpGroup,delete e.urlGroup,delete e.s3Group,this._data.pullData(this.project._id,e).subscribe(t=>{t&&(this.closeModal(t),this.isPulling?this._utils.showSnackBar(q.b.pullData):this._toaster.success(this.sourceType.toUpperCase()+" connection created successfully","Data Connection")),this._spinner.stopSpinner()},t=>{this._spinner.stopSpinner(),this._toaster.error("Server Error","Data Connection")})}schedularChanged(t){switch(this.sourceType){case"sftp":this.mapSchedular(this.sftpDetails,t);break;case"url":this.mapSchedular(this.urlDetails,t);break;case"s3":this.mapSchedular(this.s3Details,t)}}mapSchedular(t,e){this.dataschedule=void 0===t.scheduleId?"new":t.scheduleId!==e?"update":"noupdate"}fetchAlgorithmsList(){return this._connection.getSftpConnectionList().pipe(Object(E.a)(this.unsubscribe$)).toPromise()}navigateToScheduler(){this.closeModal(),this._spinner.stopSpinner(),this._router.navigateByUrl("/dashboard/scheduler?type=scheduler")}closeModal(t){this._connectionDialogRef.close(t)}ngOnDestroy(){this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe(),this.connection$&&this.connection$.unsubscribe(),this.dataConnection$&&this.dataConnection$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(d.a),b.Nb(l.h),b.Nb(ya.a),b.Nb(m.c),b.Nb(d.i),b.Nb(p.a),b.Nb(h.a),b.Nb(j.a),b.Nb(J.e),b.Nb(f.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-sftp-and-url-form"]],inputs:{dataGroupsArray:"dataGroupsArray",schedularsArray:"schedularsArray",sourceType:"sourceType",data:"data",currentDataGroup:"currentDataGroup"},outputs:{goBackFlag:"goBackFlag"},features:[b.Ab([Qa.b])],decls:41,vars:24,consts:[[1,"mat-typography"],["role","form","name","dynamicForm",1,"form-validate",3,"formGroup"],[1,"row"],["appearance","outline"],["for","connectionName"],["matInput","","type","text","name","connectionName","formControlName","connectionName","id","connectionName","placeholder","Enter connection name","autocomplete","","required",""],[4,"ngIf"],["formGroupName","sftpGroup",3,"class",4,"ngIf"],["formGroupName","s3Group",3,"class",4,"ngIf"],["class","row",4,"ngIf"],["class","row mb-5",4,"ngIf"],[1,"row","mt-2"],["formGroupName","sftpGroup","class","col-md-6",4,"ngIf"],["formGroupName","urlGroup","class","col-md-6",4,"ngIf"],[1,"col-md-6"],["for","scheduleId"],["formControlName","scheduleId",3,"selectionChange"],["value","None"],[3,"value",4,"ngFor","ngForOf"],["class","redirect-link",4,"ngIf"],["formGroupName","s3Group","class","col-md-6",4,"ngIf"],["class","col-md-6",4,"ngIf"],["class","mt-3 ml-1",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"d-flex","justify-content-end","m-auto"],["mat-stroked-button","","class","mr-auto","ccolor","basic",3,"click",4,"ngIf"],["mat-stroked-button","","mat-dialog-close",""],["mat-flat-button","","type","submit",1,"btn-primary","ml-3",3,"disabled","click"],["formGroupName","sftpGroup"],["for","inputdatabase"],["formControlName","connection","required","",3,"selectionChange"],[3,"value"],["formGroupName","s3Group"],["formGroupName","s3Group",1,"col-md-6"],["formControlName","bucket","required",""],["for","bucketFolderPath"],["matInput","","type","text","name","bucketFolderPath","formControlName","bucketFolderPath","id","bucketFolderPath","placeholder","Eg: upload or upload/demo"],[1,"row","mb-5"],["class","col-md-6 overflow-auto",4,"ngIf"],[1,"col-md-6","overflow-auto"],["for","folder-path",1,"ml-2"],[1,"text-decoration-none","ml-2",2,"cursor","pointer",3,"click"],[3,"nodes","focused","options","ngClass"],["tree",""],["treeNodeTemplate",""],["loadingTemplate",""],[1,"text-sm","ml-3","mb-3"],[3,"title","click"],["for","folderpath"],["matInput","","type","text","name","connectionName","formControlName","folderpath","id","folderpath","placeholder","Enter selected folder path","required","",3,"value"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["formGroupName","sftpGroup",1,"col-md-6"],["formControlName","fileExtension","required",""],["formGroupName","urlGroup",1,"col-md-6"],["formControlName","filetype","required",""],[1,"redirect-link"],[1,"text-decoration-none",2,"cursor","pointer",3,"click"],["id","dataFormat"],["aria-labelledby","dataFormat",1,"radio-group","my-2","ml-1",3,"ngModel","ngModelOptions","ngModelChange"],["value","csv"],["value","json"],["formControlName","dataGroupId","required","",3,"selectionChange"],["value","Add"],["for","dataGroupName"],["matInput","","type","text","name","dataGroupName","id","dataGroupName","formControlName","dataGroupName","placeholder","Enter folder name","required",""],["formControlName","parent_id","required",""],["formGroupName","urlGroup",1,"col-md-12"],["for","url"],["matInput","","type","url","name","url","formControlName","url","id","url","placeholder","Enter URL","autocomplete","","required",""],[1,"mt-3","ml-1"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"mt-3"],["mat-stroked-button","","ccolor","basic",1,"mr-auto",3,"click"]],template:function(t,e){1&t&&(b.Tb(0,"div",0),b.Tb(1,"form",1),b.Tb(2,"div",2),b.Tb(3,"div"),b.Tb(4,"mat-form-field",3),b.Tb(5,"mat-label",4),b.Kc(6,"Connection name"),b.Sb(),b.Ob(7,"input",5),b.Ic(8,Ja,2,0,"mat-error",6),b.Ic(9,Xa,2,0,"mat-error",6),b.Sb(),b.Sb(),b.Ic(10,oi,7,5,"div",7),b.Ic(11,ni,7,5,"div",8),b.Sb(),b.Ic(12,ci,13,2,"div",9),b.Ic(13,mi,3,2,"div",10),b.Tb(14,"div",11),b.Ic(15,gi,7,2,"div",12),b.Ic(16,yi,7,2,"div",13),b.Tb(17,"div",14),b.Tb(18,"mat-form-field",3),b.Tb(19,"mat-label",15),b.Kc(20,"Select scheduler"),b.Sb(),b.Tb(21,"mat-select",16),b.ac("selectionChange",(function(t){return e.schedularChanged(t.value)})),b.Tb(22,"mat-option",17),b.Kc(23,"None"),b.Sb(),b.Ic(24,Ii,2,2,"mat-option",18),b.Sb(),b.Ic(25,wi,3,0,"mat-hint",19),b.Sb(),b.Sb(),b.Ic(26,vi,7,2,"div",20),b.Sb(),b.Tb(27,"div",2),b.Ic(28,Di,8,3,"div",21),b.Ic(29,Oi,8,1,"div",21),b.Sb(),b.Ic(30,xi,14,3,"div",9),b.Ic(31,Ki,8,2,"div",9),b.Ic(32,Ai,3,3,"div",22),b.Ic(33,qi,8,2,"div",23),b.Sb(),b.Sb(),b.Ob(34,"hr"),b.Tb(35,"div",24),b.Ic(36,ji,2,0,"button",25),b.Tb(37,"button",26),b.Kc(38,"Cancel"),b.Sb(),b.Tb(39,"button",27),b.ac("click",(function(){return e.onSubmitConnection(e.dynamicForm.value)})),b.Kc(40),b.Sb(),b.Sb()),2&t&&(b.Bb(1),b.kc("formGroup",e.dynamicForm),b.Bb(2),b.Db("sftp"===e.sourceType&&!e.isEdit||"s3"===e.sourceType?"col-md-6":"col-md-12 "),b.Bb(5),b.kc("ngIf",e.dynamicForm.get("connectionName").hasError("required")&&(e.dynamicForm.get("connectionName").dirty||e.dynamicForm.get("connectionName").touched)),b.Bb(1),b.kc("ngIf",e.dynamicForm.get("connectionName").hasError("pattern")),b.Bb(1),b.kc("ngIf","sftp"===e.sourceType&&!e.isEdit),b.Bb(1),b.kc("ngIf","s3"===e.sourceType),b.Bb(1),b.kc("ngIf","s3"===e.sourceType),b.Bb(1),b.kc("ngIf",e.isEdit||"sftp"===e.sourceType),b.Bb(2),b.kc("ngIf","sftp"===e.sourceType),b.Bb(1),b.kc("ngIf","url"===e.sourceType&&!e.isEdit),b.Bb(8),b.kc("ngForOf",e.schedularsArray),b.Bb(1),b.kc("ngIf",!e.schedularsArray.length),b.Bb(1),b.kc("ngIf","s3"===e.sourceType),b.Bb(2),b.kc("ngIf","url"===e.sourceType&&("url"===e.dynamicForm.get("urlGroup.filetype").value||e.isEdit)),b.Bb(1),b.kc("ngIf",!e.isEdit),b.Bb(1),b.kc("ngIf","Add"===e.selectedFolder&&!e.isEdit),b.Bb(1),b.kc("ngIf","url"===e.sourceType),b.Bb(1),b.kc("ngIf",!e.isEdit),b.Bb(1),b.kc("ngIf","sftp"===e.sourceType||"s3"===e.sourceType),b.Bb(3),b.kc("ngIf",!e.isEdit),b.Bb(3),b.kc("disabled",e.dynamicForm.invalid),b.Bb(1),b.Mc(" ",e.isEdit?"Update":"Create"," "))},directives:[l.K,l.v,l.m,Y.c,Y.g,W.b,l.d,l.u,l.k,l.F,a.t,re.a,le.o,a.s,Q.b,d.e,Y.b,l.n,Ya.e,a.q,Y.f,Y.j,Z.a,se.c,l.x,se.b,Ia.b],styles:['.tree-children.tree-children-no-padding[_ngcontent-%COMP%]{padding-left:0}.tree-children[_ngcontent-%COMP%]{overflow:hidden}.node-drop-slot[_ngcontent-%COMP%]{display:block;height:2px}.node-drop-slot.is-dragging-over[_ngcontent-%COMP%]{background:#dfe;height:20px;border:2px dotted #888}.toggle-children-wrapper-expanded[_ngcontent-%COMP%]   .toggle-children[_ngcontent-%COMP%]{transform:rotate(90deg)}.toggle-children-wrapper-collapsed[_ngcontent-%COMP%]   .toggle-children[_ngcontent-%COMP%]{transform:rotate(0)}.toggle-children-wrapper[_ngcontent-%COMP%]{padding:2px 3px 5px 1px}.toggle-children[_ngcontent-%COMP%]{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAASCAYAAABSO15qAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkYzRkRFQjcxODUzNTExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkYzRkRFQjcwODUzNTExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTk5NzA1OGEtZDI3OC00NDZkLWE4ODgtNGM4MGQ4YWI1NzNmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzRkZmQxMGMtY2NlNS0xMTc4LWE5OGQtY2NkZmM5ODk5YWYwIi8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z2x5cGhpY29uczwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+5iogFwAAAGhJREFUeNpiYGBgKABigf///zOQg0EARH4A4gZyDIIZ8B/JoAJKDIDhB0CcQIkBRBtEyABkgxwoMQCGD6AbRKoBGAYxQgXIBRuZGKgAKPIC3QLxArnRSHZCIjspk52ZKMrOFBUoAAEGAKnq593MQAZtAAAAAElFTkSuQmCC");height:8px;width:9px;background-size:contain;background-repeat:no-repeat;background-position:50%}.toggle-children[_ngcontent-%COMP%], .toggle-children-placeholder[_ngcontent-%COMP%]{display:inline-block;position:relative;top:1px}.toggle-children-placeholder[_ngcontent-%COMP%]{height:10px;width:10px;padding-right:3px}.node-content-wrapper[_ngcontent-%COMP%]{display:inline-block;padding:2px 5px;border-radius:2px;transition:background-color .15s,box-shadow .15s}.node-wrapper[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.node-content-wrapper-active[_ngcontent-%COMP%], .node-content-wrapper-active.node-content-wrapper-focused[_ngcontent-%COMP%], .node-content-wrapper.node-content-wrapper-active[_ngcontent-%COMP%]:hover{background:#beebff}.node-content-wrapper-focused[_ngcontent-%COMP%]{background:#e7f4f9}.node-content-wrapper[_ngcontent-%COMP%]:hover{background:#f7fbff}.node-content-wrapper-active[_ngcontent-%COMP%], .node-content-wrapper-focused[_ngcontent-%COMP%], .node-content-wrapper[_ngcontent-%COMP%]:hover{box-shadow:inset 0 0 1px #999}.node-content-wrapper.is-dragging-over[_ngcontent-%COMP%]{background:#dfe;box-shadow:inset 0 0 1px #999}.node-content-wrapper.is-dragging-over-disabled[_ngcontent-%COMP%]{opacity:.5}tree-viewport[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent;height:100%}.tree-children[_ngcontent-%COMP%]{padding-left:20px}.empty-tree-drop-slot[_ngcontent-%COMP%]   .node-drop-slot[_ngcontent-%COMP%]{height:20px;min-width:100px}.angular-tree-component[_ngcontent-%COMP%]{width:100%;position:relative;display:inline-block;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}tree-root[_ngcontent-%COMP%]   .angular-tree-component-rtl[_ngcontent-%COMP%]{direction:rtl}tree-root[_ngcontent-%COMP%]   .angular-tree-component-rtl[_ngcontent-%COMP%]   .toggle-children-wrapper-collapsed[_ngcontent-%COMP%]   .toggle-children[_ngcontent-%COMP%]{transform:rotate(180deg)!important}tree-root[_ngcontent-%COMP%]   .angular-tree-component-rtl[_ngcontent-%COMP%]   .tree-children[_ngcontent-%COMP%]{padding-right:20px;padding-left:0}tree-node-checkbox[_ngcontent-%COMP%]{padding:1px}.expand_tree[_ngcontent-%COMP%]   .example-tree-invisible[_ngcontent-%COMP%]{display:none}.example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .expand_tree[_ngcontent-%COMP%]   .example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.expand_tree[_ngcontent-%COMP%]   .example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{cursor:pointer}.spinner[_ngcontent-%COMP%]{position:absolute!important;left:5%;top:35%}.redirect-link[_ngcontent-%COMP%]{cursor:pointer;font-size:14px;margin-top:5px}.expand_tree[_ngcontent-%COMP%]   .node-content-wrapper[_ngcontent-%COMP%], .tree-children[_ngcontent-%COMP%]{position:relative}.expand_tree[_ngcontent-%COMP%]   .node-content-wrapper[_ngcontent-%COMP%]:before, .tree-children[_ngcontent-%COMP%]:after{content:"";position:absolute}.expand_tree[_ngcontent-%COMP%]   .node-content-wrapper[_ngcontent-%COMP%]:before{border-bottom:1px solid #d3d3d3;border-left:1px solid #d3d3d3;height:28px;top:-17px;width:20px;left:-28px}.expand_tree[_ngcontent-%COMP%]   .tree-node-level-1[_ngcontent-%COMP%] > tree-node-wrapper[_ngcontent-%COMP%] > .node-wrapper[_ngcontent-%COMP%] > .node-content-wrapper[_ngcontent-%COMP%]:before{display:none}.expand_tree[_ngcontent-%COMP%]   .tree-node-leaf[_ngcontent-%COMP%] > .node-wrapper[_ngcontent-%COMP%] > .node-content-wrapper[_ngcontent-%COMP%]:before{width:25px}.expand_tree[_ngcontent-%COMP%]   .tree-children[_ngcontent-%COMP%]:after{border-left:1px solid #d3d3d3;height:100%;top:-15px;left:-15px}.expand_tree[_ngcontent-%COMP%]   tree-node[_ngcontent-%COMP%]:last-child > .tree-node[_ngcontent-%COMP%] > .tree-children[_ngcontent-%COMP%]:after{border-left:none}.expand_tree[_ngcontent-%COMP%]   .toggle-children[_ngcontent-%COMP%]{z-index:1}tree-viewport[_ngcontent-%COMP%]{overflow:auto;display:block;min-height:30%!important;max-height:100%!important}']}),t})();var Ui=o("WeB1"),$i=o("sYmb"),Hi=o("S8xs"),Vi=o("psEu"),zi=o("s3T5"),Qi=o("LYaK"),Zi=o("+Cnu"),Yi=o("hzby"),Wi=o("dZIy"),Ji=o("K3ix"),Xi=o("Lm2G"),tn=o("yyhP"),en=o("jLjo"),on=o("44PX"),an=o("kUHs"),nn=o("Mfq2"),rn=o("EDFS"),sn=o("qCdp"),cn=o("NCSQ"),ln=o("SP0p"),dn=o("wNA8"),un=o("KI+Z"),bn=o("SItC"),pn=o("MgAP"),mn=o("zQvE"),hn=o("x3Qb"),fn=o("/1cH"),gn=o("vxfF"),Sn=o("cH1L"),Tn=o("jaxi"),yn=o("7EHt"),In=o("zkoq"),wn=o("ihCf"),Cn=o("MutI"),kn=o("f0Cb"),vn=o("STbY"),_n=o("XhcP"),Dn=o("1jcm"),Fn=o("5RNC"),On=o("wZkO"),Bn=o("/t3+"),Nn=o("/3uh"),Gn=o("biqx"),xn=o("wKC1"),Mn=o("ia2u"),Pn=o("jCJ1"),Kn=o("hi0L"),An=o("g+ir"),Rn=o("j0Ka");const En=[{path:"dataconnection",component:ae},{path:"dataset",component:so},{path:"dataflow",component:ca}];let qn=(()=>{class t{}return t.\u0275mod=b.Lb({type:t}),t.\u0275inj=b.Kb({factory:function(e){return new(e||t)},imports:[[a.c,de.c.withComponents([Ui.a]),J.i.forChild(En),Ya.h,la.a,X.b]]}),t})();b.Ac(R,[a.q,a.r,a.s,a.t,a.A,a.w,a.x,a.y,a.z,a.u,a.v,de.a,de.b,J.j,J.f,J.h,J.g,J.k,Ya.e,Ya.l,Ya.m,Ya.b,Ya.g,Ya.f,Ya.o,Ya.j,Ya.n,Ya.k,Ya.q,Ya.p,Ya.i,Ya.d,Ya.r,l.K,l.z,l.J,l.d,l.A,l.D,l.a,l.G,l.H,l.C,l.u,l.v,l.F,l.q,l.p,l.B,l.b,l.e,l.x,l.y,l.w,l.j,l.m,l.k,l.n,l.g,$i.a,Hi.a,Hi.c,Vi.a,zi.a,zi.b,zi.c,Qi.c,Qi.a,Zi.a,Yi.l,Yi.m,Yi.o,Yi.p,Yi.q,Yi.a,Yi.b,Yi.c,Yi.d,Yi.e,Yi.g,Yi.h,Yi.i,Yi.j,Yi.k,Wi.b,Wi.d,Wi.a,Ji.a,Ji.b,Xi.a,Xi.b,tn.a,tn.b,en.a,on.b,on.e,on.c,on.a,an.a,nn.a,rn.a,sn.a,sn.b,m.a,cn.a,ln.a,dn.a,un.a,tt.a,bn.a,pn.a,mn.a,hn.a,fn.a,fn.d,fn.c,gn.a,le.o,le.n,Sn.b,Q.b,Q.a,Tn.b,Tn.a,V.a,V.f,V.n,V.d,V.m,V.l,V.b,V.e,V.k,V.i,V.h,V.g,V.o,V.c,Ia.b,Ia.d,ne.d,ne.a,ne.c,ne.e,ne.b,ne.f,r.o,r.i,r.k,r.c,r.b,r.n,r.e,r.g,r.h,r.a,r.d,r.j,r.m,r.f,r.l,r.r,wo.a,wo.b,wo.f,wo.g,wo.h,wo.j,wo.k,wo.m,wo.p,wo.n,wo.c,wo.d,wo.o,wo.l,wo.e,d.f,d.e,d.j,d.g,d.d,yn.a,yn.c,yn.d,yn.g,yn.h,yn.f,yn.e,Y.b,Y.c,Y.f,Y.g,Y.h,Y.i,Y.j,In.b,In.d,In.g,le.k,In.f,In.e,In.a,Z.a,wn.b,wn.c,W.b,W.d,Cn.a,Cn.h,Cn.d,Cn.b,Cn.c,Cn.g,le.r,Cn.i,Cn.f,kn.a,vn.e,vn.b,vn.d,vn.a,i.a,da.a,ce.a,ce.c,se.c,se.b,le.t,re.a,re.c,_n.a,_n.b,_n.c,_n.d,_n.e,_n.f,Dn.c,Dn.a,Fn.a,g.d,n.a,n.b,On.c,On.d,On.a,On.f,On.e,On.b,Bn.a,Bn.c,z.b,z.d,uo.a,uo.j,uo.b,uo.d,uo.e,uo.h,uo.i,uo.c,uo.f,Qa.a,Qa.f,Qa.h,Qa.i,Qa.b,Qa.e,Qa.g,ie.a,Nn.a,Gn.a,xn.a,Mn.a,Pn.b,Pn.f,X.a,ae,so,ca,R,Ta,Va,Li,Be,Io],[a.b,a.G,a.p,a.k,a.E,a.g,a.C,a.F,a.d,a.f,a.i,a.j,a.l,$i.d,ue.a,Kn.a,An.a,xe.a,Rn.a,wa.a])}}]);
//# sourceMappingURL=19-es2015.8979bcc9885504ea7d71.js.map