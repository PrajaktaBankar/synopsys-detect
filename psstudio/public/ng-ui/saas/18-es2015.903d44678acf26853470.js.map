{"version":3,"sources":["webpack:///src/app/shared/pipes/drop-file-extension.pipe.ts","webpack:///src/app/routes/training/dialog-handler/dialog-handler.component.html","webpack:///src/app/routes/training/dialog-handler/dialog-handler.component.ts","webpack:///src/app/routes/training/training.component.html","webpack:///src/app/routes/training/training.component.ts","webpack:///src/app/routes/training/training.module.ts"],"names":["DropFileExtensionPipe","value","fileSource","substr","lastIndexOf","swal","Plotly","DialogHandlerComponent","dialogData","_localStorage","_spinner","_training","_toaster","_utils","_snackBar","_sanitizer","_dialog","_trainingDialogRef","fb","hyperParaAlgoControl","required","clusterAlgorithm","unsubscribe$","Subject","nGramOptions","name","showNgramSlider","showSpinner","appType","environment","modelAlgorithmArray","nlpConfigs","mySelections","selectionArray","isDuplicate","isValid","showFaq","affinity","linkageOptions","option_label","linkage","hptForm","this","group","project","getItem","type","clusterAlgo","modelAlgorithms","filter","item","status","dialogHeading","algo","includes","indexNlp","findIndex","x","colName","selectedFeature","nlpFeatureExt","nlpFeatureConfig","nlpFeatureExtractionMethod","decodeError","nFeatureCount","nGram","nlpLanguage","stripAccents","ngramSliderVal","undefined","nlpDefaultConfigData","partialClusterData","clusterReqObj","ordinalEncoderData","oeMapData","itemFound","mapping","Array","from","length","mapperDatas","_","i","selected","selectedAlgoName","hptPreference","prefillForm","newPreference","dynamicFields","algoName","createFormAndAddValidation","fields","dynamicFormFields","getOriginalFormFields","projectStatus","prevTrainingData","data","showSnackBar","addPreference","saveFeatureConfiguration","maxNoClusters","getOptimalClusters","Object","keys","saveOrdinalEncoder","message","button","snackBarRef","open","horizontalPosition","verticalPosition","notFound","element","map","push","closeModal","title","text","icon","className","stopSpinner","trigram","find","ngram","newConfig","checkNgramSettings","forEach","config","cluster","Number","isInteger","baseImg","optimiseClusterGraph","plotType","findOptimalClusters","_id","pipe","takeUntil","subscribe","res","document","getElementById","deleteTraces","graphContent","layout","template","xanchor","y","yanchor","xaxis","linecolor","yaxis","plot","base64","safeUrl","bypassSecurityTrustResourceUrl","dendogramImage","error","err","a","createElement","href","download","click","featureName","featureConfig","val","dupArr","key","Set","size","ordinalEncMap","col","ordinalEncoder","algorithm","JSON","parse","stringify","item1","item2","close","controls","control","validatorsToAdd","entries","validators","min","requiredTrue","email","minLength","maxLength","pattern","String","nullValidator","max","addControl","next","unsubscribe","dismiss","ondownload","$event","stopPropagation","selection","TrainingComponent","_data","_socket","_textAnalysis","_router","_fb","_cdr","colors","sparkOptions1","barColor","height","width","barSpacing","featureDataSource","stationaryDataSource","displayedColumns","stationaryDisplayedColumns","pageSizeOptions","dataSetControl","algorithmControl","pairwiseLinearOption","pairwisePolynomialOption","univariatePolynomialOption","explicitPairWiseOption","operation","typeOfAutoFeatureGen","epwMethods","decomposition","normalizationMethod","fsMethod","stationarityMethod","sampling","backGround","foreGround","pacfMethod","stationarityTestMethod","showClass","estimatorRegAlgo","estimatorClassAlgo","categoricalEncoders","dateOperations","normalizationOptions","componentGraphTypes","componentsTabs","nlpLanguages","nFeatureCounts","methodConstants","tsFrequencies","showAdvanceOptions","explicitPairwise","isNlp","correlationIsMultilabel","showTSTabs","testSize","scale","nFeaturesToSelect","timesteps","nlags","components","featurePercentage","uploadFileSize","kfold","deafultTestSize","clusters","agglomerativeCluster","selectedTabIndex","period","scalar","featureStep","nSteps","cv","dataSetsList","prevTrainingInfo","catEnc","featureList","indepVariables","dateComponent","tempfeat","autoFeatureGenTasks","featuresToTransform","samplingData","tempSelected","tempFeatures","tableData","textOrCategoricalFeatures","scoringFunctionArray","samplingdat","stationaryTestData","periodFreq","isTargetChanged","applyToTarget","allowedTrainingAdvanceOptions","algoCount","paginator","sort","initSocket","ALGORITHMS_ARRAY","getAlgorithms","user","psFeatures","allowedFeaturesList","trainingAlgoCount","featureScalingOption","getAllFiles","selectedFrequency","generateNumericArray","detectChanges","getAllProjectDatas","getPreviousTraining","getPreviousTrainingDetails","setValue","algorithms","timeseriesInfo","exogVariables","indepVariable","edaData","edaId","originalFileId","updateValueAndValidity","targetVarDetails","edaSummary","feature","depVariable","maxnStep","lenLongGrp","onChangeDataset","dataSetId","fdropMethod","targetList","univariatePolynomial","pairwisePolynomial","pairwiseLinear","split","pcaFeatures","clusterPcaFeatures","showAdvancedOptions","showlog","selectedDataSet","metaInfo","fileName","filename","generateScoringFunctionArray","getAllChildDatasets","resp","taFeatureConfig","taExperiment","childFileData","currentEdaId","algoType","isMultilabel","test","result","constantFeature","highCardinalityFeature","mostlyMissing","dataType","o1","some","o2","isMultipleTimeseries","timeseriesIds","getModelAlgorithms","taExperimentId","newFeature","flat","isHighDimensional","setNlpFeatureDefaults","buildTrainingTable","onClusteringAlgoChange","setModelData","onTsAlgoChange","predictiveModelingInfo","hasOwnProperty","tempEdaData","showTrainingTable","featureScores","isSelected","score","reset","onTargetChange","targetFeature","getTargetDetails","projectId","afterEdaDataFilePath","dependentFeaturetype","targetDetails","targetResponse","classNames","targetDistribution","targetLength","getOwnPropertyNames","dateColumnSelected","preprocessedFilepath","methodSelected","method","stationaryMethod","featureScaling","stationaryColumns","stationaryPaginator","stationarySort","featureTemp","ordinalEncoderMap","exogVariable","estimatorAlgo","kFold","featureSelectionMethod","featureSelectionCV","featureSelectionStep","scoringFunction","estimator","featureSelectionEstimator","customFeatureChecked","customFeatures","scalarValue","showscalar","samplingPercentage","showButton","output","record","initValue","row","select","dropOriginal","exponent","delimiter","featureSplitCount","generateIndepVariableList","clusteringInfo","numericFeatures","target","tSelected","k","clear","dateExcludedFeatures","_updateChangeSubscription","featureVal","featureExists","nlpFeature","option","model","getEPCFeatures","problemType","featureScore","encoder","dateComponentList","indep","splice","indexOf","featureSort","featurePaginator","encoderData","reqObj","openDialog","getUniqueCategories","body","index","toLowerCase","multilabel","useGPU","colnameFeature","colname","temp","getAFGoptions","featureScoreData","categoricalColNames","isError","fileData","getFeatures","noOfCols","scaleValue","parentFileId","parentPipelineFilename","tasks","currentPipelineFilename","fileSchema","pId","originalFileName","indexPath","noOfCol","paragraphColNames","dimReductionFitSize","datetimeColumnName","isImbalanced","rootFileName","step","calculateFeatureScore","calculatePercentage","calculateSamplingPercentage","s","assign","operator","percenatge","doc","intColNames","allFeatures","dataTypes","extFeatures","foundFeatureData","tempFeature","usingGPU","finalOrdinalEncoderMap","featureSelected","found","trainClusteringProject","trainTimeseriesProject","trainPredictiveProject","createTimeseriesReqData","startTimeseriesTraining","info","trainingReqData","sData","stationarity","filterOridinalEncoderMap","dataSetInfo","isDataValid","validateClusteringTrainingData","createClusteringReqData","startClusteringTraining","validatePredictiveTrainingData","createPredictiveReqData","startPredictiveTraining","samplingPer","samplingdict","targetType","selectedGraphType","frequency","tab","visualizationModel","getVisualizeComponentPlot","stationarityTest","startStationarityTest","getAutoCorrelationGraph","autoCorrelationGraph","generateConfigureData","roles","generateClusterData","minWidth","maxWidth","afterClosed","obj","parseFloat","isAllSelected","filterFeatures","arr","event","tableName","filterValue","trim","firstPage","listen","success","navigate","removeListener","TrainingModule","forChild","path","component"],"mappings":"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","file":"x","sourcesContent":["import { Pipe, PipeTransform } from '@angular/core';\n/**\n * Removes the extesion from a filename\n * Accepts file name as a parameter\n * Usage:\n *  value|dropFileExtension\n * Example:\n *  {{ 'example.txt' | dropFileExtension: fileSource }}\n *  formats to example\n */\n@Pipe({ name: 'dropFileExtension' })\nexport class DropFileExtensionPipe implements PipeTransform {\n  transform(value: string, fileSource: string) {\n    return fileSource && value ? value.substr(0, value.lastIndexOf('.')) : value;\n  }\n}\n","<!-- HEADING -->\n<h2 mat-dialog-title>\n  {{ dialogHeading }}\n</h2>\n<div class=\"col-md-12\">\n  <div style=\"margin-left: 85%\">\n    <mat-icon class=\"fa-solid fa-arrow-down-to-line\" (click)=\"ondownload()\" #tooltip=\"matTooltip\" matTooltip=\"\"\n      matTooltipPosition=\"above\" matTooltipHideDelay=\"1000\" style=\"cursor: pointer; font-size: 16px\"></mat-icon>\n  </div>\n  <button *ngIf=\"dialogData.type ==='optimalClusters' && clusterAlgorithm.value === 'Agglomerative' && !showFaq\"\n    mat-flat-button class=\"btn-primary\" type=\"submit\" (click)=\"faq('faq')\" style=\"margin-left: 93%;\">\n    FAQ\n  </button>\n  <button *ngIf=\"dialogData.type === 'optimalClusters' && showFaq\" mat-stroked-button style=\"margin-left: 93%;\"\n    (click)=\"faq('back')\">Back</button>\n</div>\n<!-- <button *ngIf=\"dialogData.type ==='optimalClusters' && clusterAlgorithm.value === 'Agglomerative' && !showFaq\"\n  mat-flat-button class=\"btn-primary\" type=\"submit\" (click)=\"faq('back')\">\n  Back\n</button> -->\n<!-- BODY (HPT)-->\n<mat-dialog-content *ngIf=\"dialogData.type === 'hpt'\" class=\"mat-typography\">\n  <!-- SELECT (algorithm) -->\n  <mat-form-field appearance=\"outline\">\n    <mat-label>Select an algorithm</mat-label>\n    <mat-select [formControl]=\"hyperParaAlgoControl\" (selectionChange)=\"onHyperParamAlgoChange($event.value)\">\n      <mat-option *ngFor=\"let algo of modelAlgorithmArray\" [value]=\"algo.name\" [disabled]=\"algo.status === false\">{{\n        algo.name }}\n      </mat-option>\n    </mat-select>\n    <mat-error *ngIf=\"\n        hyperParaAlgoControl.hasError('required') &&\n        (hyperParaAlgoControl.dirty || hyperParaAlgoControl.touched)\n      \">Algorithm is required.</mat-error>\n  </mat-form-field>\n  <!-- DYNAMIC FORM -->\n  <div *ngIf=\"hyperParaAlgoControl.value\" class=\"row mt-4\" [formGroup]=\"hptForm\">\n    <div *ngFor=\"let field of dynamicFields?.fields\" class=\"col-md-6\">\n      <!-- SELECT -->\n      <mat-form-field *ngIf=\"field?.type === 'select'\" appearance=\"outline\">\n        <mat-label>{{ field.placeholder_text ? field.placeholder_text : field.name }}</mat-label>\n        <mat-select [(ngModel)]=\"field.data\" [formControlName]=\"field?.name\">\n          <mat-option *ngFor=\"let opt of field.select_options\" [value]=\"opt.value\">{{\n            opt.option_label\n            }}</mat-option>\n        </mat-select>\n      </mat-form-field>\n      <!-- NUMBER & TEXT-->\n      <mat-form-field *ngIf=\"field?.type === 'number' || field?.type === 'text'\" appearance=\"outline\">\n        <mat-label>{{ field?.label }}</mat-label>\n        <input matInput [type]=\"field?.type\" (change)=\"onChangeFields(field)\" [placeholder]=\"field?.placeholder_text\"\n          [name]=\"field.name\" [(ngModel)]=\"field.data\" [formControlName]=\"field?.name\" />\n      </mat-form-field>\n      <!-- dynamic errors based on the errs returned by the formcontrols. -->\n      <!-- hptForm.invalid && (hptForm.dirty || hptForm.touched) -->\n      <mat-error *ngIf=\"hptForm.get(field?.name).errors?.required\">\n        This field is required.\n      </mat-error>\n      <mat-error *ngIf=\"hptForm.get(field?.name).errors?.minLength\">\n        No of characters are less than minimum length.\n      </mat-error>\n      <mat-error *ngIf=\"hptForm.get(field?.name).errors?.min\">\n        Value is less than minimum.\n      </mat-error>\n      <mat-error *ngIf=\"hptForm.get(field?.name).errors?.max\">\n        Value is greater than maximum.\n      </mat-error>\n      <mat-error *ngIf=\"hptForm.get(field?.name).errors?.maxLength\">\n        No of characters are more than maximum length.\n      </mat-error>\n      <mat-error *ngIf=\"hptForm.get(field?.name).errors?.pattern\">\n        Value type is not proper.\n      </mat-error>\n      <!-- RADIO -->\n      <label *ngIf=\"field.type === 'radio'\">{{ field.name }}</label>\n      <br />\n      <mat-radio-group *ngIf=\"field.type === 'radio'\" [(ngModel)]=\"field.data\" [formControlName]=\"field?.name\">\n        <mat-radio-button class=\"ml-4\" *ngFor=\"let radio of field.radio_btns\" [value]=\"radio.value\">{{ radio.radio_label\n          }}</mat-radio-button>\n      </mat-radio-group>\n    </div>\n  </div>\n</mat-dialog-content>\n\n<!-- BODY (configure feature)-->\n<mat-dialog-content *ngIf=\"dialogData.type === 'configureFeature' && nlpDefaultConfigData\" class=\"mat-typography\">\n  <div class=\"h5 d-flex align-items-center\">\n    Selected feature:\n    <mat-chip-list>\n      <mat-chip class=\"ml-2\">{{ dialogData.selectedFeature }}</mat-chip>\n    </mat-chip-list>\n  </div>\n  <!-- FORM -->\n  <div class=\"row mt-4\">\n    <!-- RADIO -->\n    <div class=\"col-md-6\">\n      <mat-label id=\"extraction\">NLP Feature Extraction</mat-label>\n      <mat-radio-group class=\"radio-group\" aria-labelledby=\"extraction\" [(ngModel)]=\"nlpFeatureExt\">\n        <mat-radio-button class=\"ml-4\" value=\"CountVectorizer\">Count Vectorizer</mat-radio-button>\n        <mat-radio-button class=\"ml-4\" value=\"TfidfVectorizer\">TfidfVectorizer</mat-radio-button>\n      </mat-radio-group>\n    </div>\n    <!-- SELECT -->\n    <div class=\"col-md-6\">\n      <mat-form-field appearance=\"outline\">\n        <mat-label>Select language</mat-label>\n        <mat-select [(ngModel)]=\"nlpLanguage\">\n          <mat-option *ngFor=\"let lang of dialogData.nlpLanguages\" [value]=\"lang\">{{\n            lang\n            }}</mat-option>\n        </mat-select>\n      </mat-form-field>\n    </div>\n  </div>\n  <div class=\"row mt-4\">\n    <!-- RADIO -->\n    <div class=\"col-md-6\">\n      <mat-label id=\"accents\">Strip Accents</mat-label>\n      <mat-radio-group class=\"radio-group\" aria-labelledby=\"accents\" [(ngModel)]=\"stripAccents\">\n        <mat-radio-button class=\"ml-4\" value=\"none\">None</mat-radio-button>\n        <mat-radio-button class=\"ml-4\" value=\"ascii\">Ascii</mat-radio-button>\n        <mat-radio-button class=\"ml-4\" value=\"unicode\">Unicode</mat-radio-button>\n      </mat-radio-group>\n    </div>\n    <!-- RADIO -->\n    <div class=\"col-md-6\">\n      <mat-label id=\"decode\">Decode Error</mat-label>\n      <mat-radio-group class=\"radio-group\" aria-labelledby=\"decode\" [(ngModel)]=\"decodeError\">\n        <mat-radio-button class=\"ml-4\" value=\"strict\">Strict</mat-radio-button>\n        <mat-radio-button class=\"ml-4\" value=\"ignore\">Ignore</mat-radio-button>\n        <mat-radio-button class=\"ml-4\" value=\"replace\">Replace</mat-radio-button>\n      </mat-radio-group>\n    </div>\n  </div>\n  <div class=\"row mt-4\">\n    <!-- SELECT -->\n    <div class=\"col-md-6\">\n      <mat-form-field appearance=\"outline\">\n        <mat-label>N Gram</mat-label>\n        <mat-select [compareWith]=\"compareWithFn\" [(ngModel)]=\"nGram\" (selectionChange)=\"nGramChanged()\" multiple>\n          <mat-option *ngFor=\"let opt of nGramOptions\" [value]=\"opt\">{{ opt.name }}</mat-option>\n        </mat-select>\n      </mat-form-field>\n      <!-- SLIDER -->\n      <h4 *ngIf=\"showNgramSlider\" class=\"mt-3\">\n        <label>N Gram value: {{ngramSliderVal }}</label>\n        <br />\n        <mat-slider thumbLabel class=\"w-100\" color=\"primary\" min=\"1\" max=\"5\" step=\"1\" [(ngModel)]=\"ngramSliderVal\">\n        </mat-slider>\n      </h4>\n    </div>\n    <!-- INPUT (number) -->\n    <div class=\"col-md-6\">\n      <mat-form-field appearance=\"outline\">\n        <mat-label>NLP feature count</mat-label>\n        <input matInput type=\"number\" placeholder=\"Enter the value\" [(ngModel)]=\"nFeatureCount\" />\n      </mat-form-field>\n    </div>\n  </div>\n</mat-dialog-content>\n\n<!-- BODY (optimal clusters) -->\n<mat-dialog-content *ngIf=\"dialogData.type === 'optimalClusters'\" class=\"mat-typography mt-2\">\n  <!-- INPUT (number) -->\n  <div class=\"row\" *ngIf=\"!showFaq\">\n    <div class=\"col-md-6\">\n      <mat-form-field class=\"w-100\" appearance=\"outline\">\n        <mat-label>Select algorithm</mat-label>\n        <mat-select [formControl]=\"clusterAlgorithm\">\n          <mat-option *ngFor=\"let algo of clusterAlgo\" [value]=\"algo.name\">{{ algo.name }}</mat-option>\n        </mat-select>\n      </mat-form-field>\n    </div>\n    <div class=\"col-md-6\" *ngIf=\"clusterAlgorithm.value == 'KMeans'\">\n      <mat-form-field class=\"w-100\" appearance=\"outline\" [matTooltip]=\"_utils.getTootip('optimisedCluster')\">\n        <mat-label>Choose max number to get optimal k value</mat-label>\n        <input matInput type=\"number\" min=\"2\" max=\"10\" placeholder=\"Enter the value\"\n          (change)=\"onFocusOut(maxNoClusters)\" [(ngModel)]=\"maxNoClusters\" />\n        <mat-hint>Cluster value should be between 2 to 10.</mat-hint>\n      </mat-form-field>\n    </div>\n    <div class=\"col-md-12\" *ngIf=\"clusterAlgorithm.value == 'Agglomerative'\">\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <mat-form-field appearance=\"outline\">\n            <mat-label>Affinity</mat-label>\n            <input matInput type=\"text\" placeholder=\"Enter Affinity\" name=\"affinity\" [(ngModel)]=\"affinity\" />\n          </mat-form-field>\n        </div>\n        <div class=\"col-md-6\">\n          <mat-form-field appearance=\"outline\">\n            <mat-label>Linkage</mat-label>\n            <mat-select [(ngModel)]=\"linkage\">\n              <mat-option *ngFor=\"let opt of linkageOptions\" [value]=\"opt.value\">{{\n                opt.value}}</mat-option>\n            </mat-select>\n          </mat-form-field>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div *ngIf=\"showFaq\" class=\"row\">\n    <div class=\"col-md-6\">\n      <mat-card class=\"infographics-card\">\n        <img mat-card-image src=\"../../../../assets/img/dendrogram_gif.gif\" alt=\"dendogram\" />\n      </mat-card>\n    </div>\n    <div class=\"col-md-6\">\n      <mat-accordion>\n        <mat-expansion-panel class=\"my-3\" [expanded]=\"1\">\n          <mat-expansion-panel-header>\n            <mat-panel-title> FAQ's </mat-panel-title>\n          </mat-expansion-panel-header>\n          <ul>\n            <li><b>What do the x-axis and y-axis represent?</b></li>\n            <p>\n              The x-axis represents objects. The y-axis represents the distance metric.\n            </p>\n            <li><b>What do the vertical and horizontal lines in a dendrogram represent?</b></li>\n            <p>The vertical lines represent the distance between objects prior to merging. The horizontal lines\n              represent the merging of\n              objects. The higher the vertical lines, larger the distance between clusters/objects.</p>\n            <li><b>How to interpret a dendrogram?</b></li>\n            <p>\n              Optimal clusters have high inter-cluster and low intra-cluster distance. The dendrogram represents the\n              inter-cluster\n              distance matrix. The longest vertical line without any other external extended horizontal line passing\n              through it\n              represents the distance between the farthest clusters prior to merging. The optimal number of clusters is\n              given by the\n              number of vertical lines intersected by the drawn horizontal line cutting the longest vertical line.\n              Sent from Android device\n\n            </p>\n          </ul>\n        </mat-expansion-panel>\n      </mat-accordion>\n    </div>\n    <div class=\"card-deck justify-content-center\">\n    </div>\n  </div>\n  <!-- Progress Spinner -->\n  <app-progress-spinner class=\"spinner\" *ngIf=\"showSpinner\"></app-progress-spinner>\n  <!-- PLOT -->\n  <div class=\"d-flex justify-content-center\" id=\"optimiseClusterGraph\" *ngIf=\"clusterAlgorithm.value =='KMeans'\"></div>\n  <button\n    *ngIf=\"dialogData.type ==='optimalClusters' && clusterAlgorithm.value === 'Agglomerative' && !showFaq && baseImg !== undefined\"\n    mat-flat-button class=\"btn-primary\" type=\"submit\" (click)=\"ondownload()\" style=\"margin-left: 88%;\">\n    Download\n  </button>\n  <div class=\"text-center\" *ngIf=\"clusterAlgorithm.value =='Agglomerative'\">\n    <img width=\"100%\" [src]=\"dendogramImage\" class=\"imgbor\" />\n  </div>\n\n</mat-dialog-content>\n\n<!-- BODY (ordinal encoder) -->\n<mat-dialog-content *ngIf=\"dialogData.type === 'ordinalEncoder'\" class=\"mat-typography\">\n  <div class=\"h5 d-flex align-items-center\">\n    Selected feature:\n    <mat-chip-list>\n      <mat-chip class=\"ml-2\">{{ ordinalEncoderData.colName }}</mat-chip>\n    </mat-chip-list>\n  </div>\n  <!-- Dynamic form -->\n  <div class=\"row mt-4\">\n    <div *ngFor=\"let mapData of ordinalEncoderData.mapperDatas\" class=\"col-md-6\">\n      <mat-form-field appearance=\"outline\">\n        <mat-label>{{ mapData }}</mat-label>\n        <mat-select (selectionChange)=\"verifyDuplicateOridinalWeight(oeMapData[mapData])\"\n          [(ngModel)]=\"oeMapData[mapData]\" required>\n          <mat-option *ngFor=\"let opt of selectionArray\" [value]=\"opt.value\">{{\n            opt.value\n            }}</mat-option>\n        </mat-select>\n        <mat-error *ngIf=\"!oeMapData[mapData]\">Field is required.</mat-error>\n      </mat-form-field>\n    </div>\n    <mat-error class=\"col-md-12\" *ngIf=\"!isValid\">Please enter all the inputs.</mat-error>\n    <mat-error class=\"col-md-12\" *ngIf=\"isDuplicate\">Duplicate values are not allowed.</mat-error>\n  </div>\n</mat-dialog-content>\n<hr />\n<!-- FOOTER -->\n<mat-dialog-actions class=\"justify-content-end m-auto\">\n  <button mat-stroked-button\n    [class]=\"dialogData.type === 'hpt' || dialogData.type === 'optimalClusters' ? 'mr-auto' : ''\"\n    (click)=\"closeModal()\">\n    Cancel\n  </button>\n  <button *ngIf=\"dialogData.type === 'hpt' && hyperParaAlgoControl.value\" mat-stroked-button\n    (click)=\"resetForm(hyperParaAlgoControl.value)\">\n    Reset\n  </button>\n  <!-- HPT preference -->\n  <button *ngIf=\"dialogData.type === 'hpt'\" mat-flat-button class=\"btn-primary\" type=\"submit\"\n    (click)=\"onSubmitForm(dialogData.type)\" [disabled]=\"hyperParaAlgoControl.invalid || hptForm.invalid\">\n    Submit\n  </button>\n  <!-- configure feature -->\n  <button *ngIf=\"dialogData.type === 'configureFeature'\" mat-flat-button class=\"btn-primary\" type=\"submit\"\n    (click)=\"onSubmitForm(dialogData.type)\"\n    [disabled]=\"!nlpDefaultConfigData.nFeatureCount || !nlpDefaultConfigData.nGram.length\">\n    Submit\n  </button>\n  <!-- optimal clusters -->\n  <button *ngIf=\"dialogData.type === 'optimalClusters' && !showFaq\" mat-flat-button class=\"btn-primary\" type=\"submit\"\n    (click)=\"onSubmitForm(dialogData.type)\" [disabled]=\"clusterAlgorithm.value == 'KMeans' && !maxNoClusters\">\n    Submit\n  </button>\n  <!-- Ordinal encoder -->\n  <button *ngIf=\"dialogData.type === 'ordinalEncoder'\" mat-flat-button class=\"btn-primary\" type=\"submit\"\n    (click)=\"onSubmitForm(dialogData.type)\" [disabled]=\"isDuplicate\">\n    Submit\n  </button>\n</mat-dialog-actions>","import { ToastrService } from 'ngx-toastr';\nimport { TrainingService } from './../training.service';\nimport { Component, Inject, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { LocalStorageService } from 'src/app/shared/local-storage.service';\nimport { HPT_FORM_FIELDS } from 'src/assets/data/hpt-form-fields';\nimport { TrainingComponent } from '../training.component';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { UtilsService } from 'src/app/shared/utils.service';\nimport { SpinnerService } from 'src/app/shared/spinner.service';\nimport { MatSnackBar, MatSnackBarRef } from '@angular/material/snack-bar';\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\nimport { environment } from 'src/environments/environment';\n\nconst swal = require('sweetalert');\nconst Plotly = require('plotly.js-dist');\n@Component({\n  selector: 'app-dialog-handler',\n  templateUrl: './dialog-handler.component.html',\n  styleUrls: ['./dialog-handler.component.scss'],\n})\nexport class DialogHandlerComponent implements OnInit {\n  /** Form control instance */\n  hyperParaAlgoControl = new FormControl('', Validators.required);\n  clusterAlgorithm = new FormControl('', Validators.required);\n  /** Usubscription subject */\n  unsubscribe$ = new Subject<boolean>();\n\n  /** Variables with default values */\n  nGramOptions: Array<any> = [\n    { name: 'Unigram', value: 1 },\n    { name: 'Bigram', value: 2 },\n    { name: 'Trigram', value: 3 },\n    { name: 'Ngram', value: 1 },\n  ];\n  showNgramSlider: boolean = false;\n  showSpinner: boolean = false;\n\n  // saas variable\n  appType: string = environment.appType;\n  dialogHeading: string;\n  project: any;\n  modelAlgorithmArray: Array<string> = [];\n  dynamicFields: any;\n  nlpDefaultConfigData: any;\n  nlpConfigs: Array<any> = [];\n  mySelections: Array<any> = [];\n  selectedFeature: string;\n  partialClusterData: any;\n  maxNoClusters: any;\n  ordinalEncoderData: any;\n  oeMapData: any;\n  selectionArray: Array<any> = [];\n  isDuplicate: boolean = false;\n  snackBarRef: MatSnackBarRef<any>;\n  isValid: boolean = true;\n  clusterAlgo;\n  base64: string;\n  imageData: SafeResourceUrl;\n  safeUrl: SafeResourceUrl;\n  dendogramImage: any;\n  showFaq: boolean = false;\n  affinity: any = 'euclidean';\n  linkageOptions = [\n    { option_label: 'ward', value: 'ward' },\n    { option_label: 'complete', value: 'complete' },\n    { option_label: 'average', value: 'average' },\n    { option_label: 'single', value: 'single' },\n  ];\n  linkage: any = 'ward';\n  nlpFeatureExt: any;\n  nFeatureCount: any;\n  ngramSliderVal: any;\n  nGram: any;\n  decodeError: any;\n  stripAccents: any;\n  nlpLanguage: any;\n  indexNlp: any;\n  baseImg: any;\n  // formgroup for hpt forms.\n  hptForm: FormGroup = this.fb.group({});\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public dialogData: any,\n    private _localStorage: LocalStorageService,\n    private _spinner: SpinnerService,\n    private _training: TrainingService,\n    private _toaster: ToastrService,\n    public _utils: UtilsService,\n    private _snackBar: MatSnackBar,\n    private _sanitizer: DomSanitizer,\n    private _dialog: MatDialog,\n    private _trainingDialogRef: MatDialogRef<TrainingComponent>,\n    private fb: FormBuilder\n  ) { }\n\n  /**\n   * Initializes all the required data\n   */\n  ngOnInit(): void {\n    this.project = this._localStorage.getItem('project');\n    if (this.project.type === 'clustering' && this.dialogData.type === 'optimalClusters') {\n      this.clusterAlgo = this.dialogData.modelAlgorithms.filter((item) => {\n        if (item.name !== 'DBSCAN' && item.status === true) {\n          return item.name;\n        }\n      });\n    }\n    switch (this.dialogData.type) {\n      case 'hpt':\n        this.dialogHeading = 'Algorithm Parameters';\n        this.modelAlgorithmArray = this.dialogData.modelAlgorithms.filter((algo) => {\n          if (\n            algo.name !== 'KMeans' &&\n            !algo.name.includes('Bagging') &&\n            !algo.name.includes('bagging') &&\n            !algo.name.includes('Boosting') &&\n            algo.status === true\n          ) {\n            return algo;\n          }\n        });\n        break;\n      case 'configureFeature':\n        this.dialogHeading = 'Feature Configuration';\n        this.indexNlp = this.dialogData.nlpConfigs.findIndex(\n          (x) => x.colName === this.dialogData.selectedFeature\n        );\n        this.nlpFeatureExt =\n          this.dialogData.nlpConfigs[this.indexNlp].nlpFeatureConfig.nlpFeatureExtractionMethod;\n        this.decodeError = this.dialogData.nlpConfigs[this.indexNlp].nlpFeatureConfig.decodeError;\n        this.nFeatureCount =\n          this.dialogData.nlpConfigs[this.indexNlp].nlpFeatureConfig.nFeatureCount;\n        this.nGram = this.dialogData.nlpConfigs[this.indexNlp].nlpFeatureConfig.nGram;\n        this.nlpLanguage = this.dialogData.nlpConfigs[this.indexNlp].nlpFeatureConfig.nlpLanguage;\n        this.stripAccents = this.dialogData.nlpConfigs[this.indexNlp].nlpFeatureConfig.stripAccents;\n        this.ngramSliderVal = this.nGram.filter(item => { return item.name === 'Ngram' })[0];\n        this.ngramSliderVal = this.ngramSliderVal !== undefined ? this.ngramSliderVal.value : null;\n        this.nlpDefaultConfigData = this.dialogData.nlpDefaultConfigData;\n        this.showNgramSlider = this.dialogData.showNgramSlider;\n        this.mySelections = this.dialogData.nlpDefaultConfigData.nGram;\n        this.selectedFeature = this.dialogData.selectedFeature;\n        break;\n      case 'optimalClusters':\n        this.dialogHeading = 'Optimise Cluster';\n        this.partialClusterData = this.dialogData.clusterReqObj;\n        break;\n      case 'ordinalEncoder':\n        this.dialogHeading = `Ordinal Encoder Mapper`;\n        this.ordinalEncoderData = this.dialogData.ordinalEncoderData;\n        this.oeMapData = this.ordinalEncoderData.itemFound\n          ? this.ordinalEncoderData.itemFound.mapping\n          : {};\n        this.selectionArray = Array.from(\n          { length: this.ordinalEncoderData.mapperDatas.length },\n          (_, i) => ({\n            selected: false,\n            value: ++i,\n          })\n        );\n    }\n  }\n\n  /**\n   * Fetchs the hyper parameter tuning algorithm form fields\n   * @param algorithm\n   */\n  onHyperParamAlgoChange(selectedAlgoName: any): void {\n    if (this.dialogData.hptPreference !== undefined && this.dialogData.hptPreference.length) {\n      this.prefillForm(selectedAlgoName);\n    } else {\n      this.newPreference(selectedAlgoName);\n    }\n  }\n\n  /**\n   * Checks whether preference is already present for a particular algorithm\n   */\n  prefillForm(selectedAlgoName: any): void {\n    this.dynamicFields = this.dialogData.hptPreference.filter(\n      (item: any) => item.algoName === selectedAlgoName\n    )[0];\n    this.dynamicFields ? this.createFormAndAddValidation(this.dynamicFields?.fields) : this.newPreference(selectedAlgoName);\n  }\n\n  /**\n   * Saves the new preference\n   */\n  newPreference(selectedAlgoName: any): void {\n    const dynamicFormFields = this.getOriginalFormFields();\n    if (this.project.projectStatus === 'Model Generated') {\n      // Get previously trained data and set it to formFields\n      if (this.dialogData.prevTrainingData[0].hptPreference) {\n        this.dynamicFields = this.dialogData.prevTrainingData[0].hptPreference.filter(\n          (algo: any) => algo.algoName === selectedAlgoName\n        )[0];\n      } else {\n        this.dynamicFields = dynamicFormFields.filter(\n          (algo: any) => algo.algoName === selectedAlgoName\n        )[0];\n      }\n    } else {\n      this.dynamicFields = dynamicFormFields.filter(\n        (algo: any) => algo.algoName === selectedAlgoName\n      )[0];\n    }\n    this.createFormAndAddValidation(this.dynamicFields?.fields);\n  }\n\n  onChangeFields(data: any) {\n    if (data.name === 'lags') {\n      this.dynamicFields.fields[1].data = data.data;\n    } else if (data.name === 'lags_past_covariates') {\n      this.dynamicFields.fields[1].data = this.dynamicFields.fields[0].data;\n      this.showSnackBar('lags and lags_past_covariates should be same', 'OK');\n    }\n  }\n  /**\n   * Handles the form submission\n   */\n  onSubmitForm(type: string): void {\n    if (type === 'hpt') {\n      this.addPreference();\n    } else if (type === 'configureFeature') {\n      this.nlpConfigs = this.dialogData.nlpConfigs;\n      this.saveFeatureConfiguration();\n    } else if (type === 'optimalClusters') {\n      if (this.maxNoClusters < 2 || this.maxNoClusters > 10) {\n        this.showSnackBar('Clusters value should be between 2 and 10', 'OK');\n      } else {\n        this.getOptimalClusters();\n      }\n    } else if (type === 'ordinalEncoder') {\n      if (Object.keys(this.oeMapData).length !== this.ordinalEncoderData.mapperDatas.length) {\n        this.isValid = false;\n        return;\n      } else {\n        this.isValid = true;\n      }\n      this.saveOrdinalEncoder();\n    }\n  }\n\n  /**\n   * Renders the snackbar\n   */\n  showSnackBar(message: string, button: string): void {\n    this.snackBarRef = this._snackBar.open(message, button, {\n      horizontalPosition: 'right',\n      verticalPosition: 'bottom',\n    });\n  }\n\n  /**\n   * Adds the new HPT preferences\n   */\n  addPreference(): void {\n    let notFound: boolean = false;\n    if (\n      this.dynamicFields.algoName == 'Agglomerative' &&\n      this.dynamicFields.fields[1].data == 'ward' &&\n      this.dynamicFields.fields[0].data !== 'euclidean'\n    ) {\n      this.dynamicFields.fields[0].data = 'euclidean';\n      this.showSnackBar('Ward can only work with euclidean distances', 'OK');\n      return;\n    }\n    if (\n      this.dynamicFields.algoName === 'Agglomerative' &&\n      this.dynamicFields.fields[0].data === ''\n    ) {\n      this.showSnackBar('Please enter all inputs', 'OK');\n      return;\n    }\n    if (this.dynamicFields.algoName === 'Agglomerative' && (this.dynamicFields.fields[0].data === 'wminkowski' ||\n      this.dynamicFields.fields[0].data === 'haversine' || this.dynamicFields.fields[0].data === 'kulsinki')) {\n      this.dynamicFields.fields[0].data = 'euclidean';\n      this._spinner.stopSpinner();\n      this.showSnackBar('wminkowski,haversine & kulsinki distance metric are not supported by agglomerative algorithm.', 'OK');\n      return;\n    }\n    let blankData = this.dynamicFields.fields.filter((element) => {\n      if (element.data === '') {\n        return element;\n      }\n    });\n    if (blankData.length) {\n      this.showSnackBar('Please enter all inputs', 'OK');\n      return;\n    }\n    if (this.dialogData.hptPreference.length) {\n      this.dialogData.hptPreference.map((item: any) => {\n        if (item.algoName === this.dynamicFields.algoName) {\n          item = this.dynamicFields;\n          notFound = true;\n        }\n        return item;\n      });\n      if (!notFound) {\n        this.dialogData.hptPreference.push(this.dynamicFields);\n      } else {\n        this.dialogData.hptPreference.push(this.dynamicFields);\n      }\n      this.closeModal({ hptPreference: this.dialogData.hptPreference });\n    } else {\n      this.dialogData.hptPreference.push(this.dynamicFields);\n      this.closeModal({ hptPreference: this.dialogData.hptPreference });\n    }\n    swal({\n      title: 'HPT Preference',\n      text: `${this.hyperParaAlgoControl.value} preference saved successfully`,\n      icon: 'success',\n      className: 'custom-alert',\n    });\n  }\n\n  /**\n   * Creates the nlpfeatureconfig object to parse\n   */\n  saveFeatureConfiguration(): void {\n    let trigram;\n    trigram = this.nGram.find(item => {\n      if (item.name === 'Trigram') {\n        return item;\n      }\n    });\n    if (trigram == undefined) {\n      //if (trigram.name !== 'Trigram') {\n      trigram = this.nGram.find(item => {\n        if (item.name === 'Bigram') {\n          return item;\n        }\n      });\n      if (trigram !== undefined && trigram.name !== 'Bigram') {\n        trigram = this.nGram.find(item => {\n          if (item.name === 'Unigram') {\n            return item;\n          }\n        });\n      } else if (trigram == undefined) {\n        trigram = this.nGram.find(item => {\n          if (item.name === 'Unigram') {\n            return item;\n          }\n        });\n      }\n    }\n    let ngram = this.nGram.filter(item => { return item.name === 'Ngram' })[0];\n    if (ngram !== undefined) {\n      if (ngram.name === 'Ngram' && trigram.name === 'Trigram' && trigram.value < 3) {\n        this.showSnackBar('Ngram value should be greater than 3', 'OK');\n        return;\n      } else if (ngram.name === 'Ngram' && trigram.name === 'Bigram' && trigram.value < 2) {\n        this.showSnackBar('Ngram value should be greater than 2', 'OK');\n        return;\n      } else if (ngram.name === 'Ngram' && trigram.name === 'Unigram' && trigram.value < 1) {\n        this.showSnackBar('Ngram value should be greater than 1', 'OK');\n        return;\n      }\n    }\n    if (!this.nGram.length) {\n      this.showSnackBar('Please select Ngram value', 'OK');\n      return;\n    }\n    if (this.nFeatureCount == undefined) {\n      this.showSnackBar('Please select NLP feature count value', 'OK');\n      return;\n    }\n    let newConfig = {\n      nlpFeatureExtractionMethod: this.nlpFeatureExt,\n      decodeError: this.decodeError,\n      nFeatureCount: this.nFeatureCount,\n      nGram: this.nGram,\n      nlpLanguage: this.nlpLanguage,\n      stripAccents: this.stripAccents,\n      ngramSliderVal: this.ngramSliderVal,\n    };\n    this.dialogData.nlpConfigs.map((i) => {\n      if (i.colName === this.dialogData.selectedFeature) {\n        i.nlpFeatureConfig = newConfig;\n      }\n      return i;\n    });\n\n    this.checkNgramSettings(this.selectedFeature);\n    if (this.dialogData.nlpConfigs.length > 0) {\n      this.dialogData.nlpConfigs.forEach((config) => {\n        if (config.nlpFeatureConfig.ngramSliderVal) {\n          delete config.nlpFeatureConfig.ngramSliderVal;\n        }\n      });\n    }\n    this.closeModal({ nlpConfigs: this.dialogData.nlpConfigs });\n  }\n\n  onFocusOut(cluster) {\n    if (!Number.isInteger(cluster)) {\n      this.showSnackBar('Number of optimal cluster should be integer', 'OK');\n      this.maxNoClusters = '';\n      return;\n    }\n  }\n\n  /**\n   * Get the optimal clusters graph\n   */\n  getOptimalClusters(): void {\n    this.baseImg = undefined;\n    this._spinner.showSpinner();\n    if (this.clusterAlgorithm.value === '') {\n      this.showSnackBar('Please enter the inputs', 'OK');\n      this._spinner.stopSpinner();\n      return;\n    }\n    if (\n      this.clusterAlgorithm.value === 'Agglomerative' &&\n      this.linkage === 'ward' &&\n      this.affinity === ''\n    ) {\n      this.affinity = 'euclidean';\n      this._spinner.stopSpinner();\n      this.showSnackBar('Ward can only work with euclidean distances', 'OK');\n      return;\n    }\n    if (this.clusterAlgorithm.value === 'Agglomerative' && this.affinity === '') {\n      this.showSnackBar('Please enter the inputs', 'OK');\n      this._spinner.stopSpinner();\n      return;\n    }\n    if (this.clusterAlgorithm.value === 'Agglomerative' && (this.affinity === 'wminkowski' ||\n      this.affinity === 'haversine' || this.affinity === 'kulsinki')) {\n      this.affinity = 'euclidean';\n      this._spinner.stopSpinner();\n      this.showSnackBar('wminkowski,haversine & kulsinki distance metric are not supported by agglomerative algorithm.', 'OK');\n      return;\n    }\n    if (\n      this.clusterAlgorithm.value === 'Agglomerative' &&\n      this.linkage === 'ward' &&\n      this.affinity !== 'euclidean'\n    ) {\n      this.affinity = 'euclidean';\n      this._spinner.stopSpinner();\n      this.showSnackBar('Ward can only work with euclidean distances', 'OK');\n      return;\n    }\n    if (this.clusterAlgorithm.value === 'KMeans') {\n      this.partialClusterData.plotType = 'elbow';\n      this.partialClusterData.maxNoClusters = this.maxNoClusters;\n    } else {\n      this.partialClusterData.plotType = 'dendogram';\n      this.partialClusterData.affinity = this.affinity;\n      this.partialClusterData.linkage = this.linkage;\n    }\n    let optimiseClusterGraph: any;\n    this._training\n      .findOptimalClusters(this.project._id, this.partialClusterData)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res) => {\n          if (res) {\n            if (this.partialClusterData.plotType === 'elbow') {\n              optimiseClusterGraph = document.getElementById('optimiseClusterGraph');\n              while (optimiseClusterGraph.data && optimiseClusterGraph.data.length > 0) {\n                Plotly.deleteTraces(optimiseClusterGraph, [0]);\n              }\n              res.graphContent.layout.template.layout.title.xanchor = 'center';\n              res.graphContent.layout.template.layout.title.y = 0.9;\n              res.graphContent.layout.template.layout.title.x = 0.5;\n              res.graphContent.layout.template.layout.title.yanchor = 'top';\n              res.graphContent.layout.xaxis.linecolor = 'black';\n              res.graphContent.layout.yaxis.linecolor = 'black';\n              Plotly.plot(optimiseClusterGraph, res.graphContent.data, res.graphContent.layout);\n            } else {\n              this.baseImg = res.graphContent;\n              this.base64 = `data:image/png;base64,${res.graphContent}`;\n              this.safeUrl = this._sanitizer.bypassSecurityTrustResourceUrl(this.base64);\n              this.dendogramImage = this.safeUrl;\n            }\n          } else {\n            this._toaster.error('Cannot generate optimal clusters graph', 'Train Model');\n          }\n          this._spinner.stopSpinner();\n        },\n        (err) => {\n          this._spinner.stopSpinner();\n          this._toaster.error(`Server Error: ${err.error.graphContent} `, 'Train Model');\n        }\n      );\n  }\n\n  /**\n   * function to download dendogram \n   */\n  ondownload() {\n    this._spinner.showSpinner();\n    var a = document.createElement(\"a\"); //Create <a>\n    a.href = \"data:image/png;base64,\" + this.baseImg; //Image Base64 Goes here\n    a.download = \"Dendogram.png\"; //File name Here\n    a.click(); //Downloaded file\n    this._spinner.stopSpinner();\n  }\n  /**\n   * Check the ngram options selected and modify if required\n   * @param featureName\n   */\n  checkNgramSettings(featureName: string): void {\n    // Update the ngramslider value if ngram option is selected\n    if (this.showNgramSlider) {\n      if (this.dialogData.nlpConfigs && this.dialogData.nlpConfigs.length > 0) {\n        this.dialogData.nlpConfigs.forEach((featureConfig) => {\n          if (featureConfig.colName === featureName) {\n            featureConfig.nlpFeatureConfig.nGram.map((item: any) => {\n              if (item.name === 'Ngram') {\n                item.value = this.ngramSliderVal;\n              }\n            });\n          }\n        });\n      } else {\n        this.nlpDefaultConfigData.nGram.map((val: any) => {\n          if (val.name === 'Ngram') {\n            val.value = this.ngramSliderVal;\n          }\n        });\n      }\n    }\n    // If ngramSelection array is empty pass default value\n    if (!this.nlpDefaultConfigData.nGram.length) {\n      this.nlpDefaultConfigData.nGram = [this.nGramOptions[0]];\n    }\n  }\n\n  /**\n   * Called when N Gram is changed\n   */\n  nGramChanged(): void {\n    // limits the user for selecting at most 2 options\n    if (this.nGram.length < 3) {\n      this.mySelections = this.nGram;\n    } else {\n      this.nlpDefaultConfigData.nGram = [...this.mySelections];\n    }\n\n    let trigram;\n    trigram = this.nGram.find(item => {\n      if (item.name === 'Trigram') {\n        return item;\n      }\n    });\n    if (trigram == undefined) {\n      //if (trigram.name !== 'Trigram') {\n      trigram = this.nGram.find(item => {\n        if (item.name === 'Bigram') {\n          return item;\n        }\n      });\n      if (trigram !== undefined && trigram.name !== 'Bigram') {\n        trigram = this.nGram.find(item => {\n          if (item.name === 'Unigram') {\n            return item;\n          }\n        });\n      } else if (trigram == undefined) {\n        trigram = this.nGram.find(item => {\n          if (item.name === 'Unigram') {\n            return item;\n          }\n        });\n      }\n    }\n    this.nGram.forEach((item: any) => {\n      if (item.name === 'Ngram' && trigram.name === 'Trigram') {\n        this.showNgramSlider = true;\n        this.ngramSliderVal = 4;\n      } else if (item.name === 'Ngram' && trigram.name === 'Bigram') {\n        this.showNgramSlider = true;\n        this.ngramSliderVal = 3;\n      } else if (item.name === 'Ngram' && trigram.name === 'Unigram') {\n        this.showNgramSlider = true;\n        this.ngramSliderVal = 2;\n      } else {\n        this.showNgramSlider = false;\n        this.ngramSliderVal = null;\n      }\n    });\n  }\n\n  /**\n   * Function to verify dupicate ordinal weight is there or not\n   * @param value\n   */\n  verifyDuplicateOridinalWeight(value: any): void {\n    let dupArr: Array<any> = [];\n    this.isDuplicate = false;\n    // push all items\n    for (let key in this.oeMapData) {\n      dupArr.push(this.oeMapData[key]);\n    }\n    // check array contains duplicate item or not\n    if (new Set(dupArr).size !== dupArr.length) {\n      this.isDuplicate = true;\n    }\n    if (this.isDuplicate === false) {\n      this.isValid = true;\n    }\n  }\n\n  faq(type) {\n    this.showFaq = type === 'faq' ? true : false;\n    // this.showBack = type === 'back' ?  : true;\n  }\n  /**\n   * Saves the ordinal encoder\n   */\n  saveOrdinalEncoder(): void {\n    this.ordinalEncoderData.ordinalEncMap = this.ordinalEncoderData.ordinalEncMap.filter(\n      (item: any) => item.col !== this.ordinalEncoderData.colName\n    );\n    this.ordinalEncoderData.ordinalEncMap.push({\n      col: this.ordinalEncoderData.colName,\n      mapping: this.oeMapData,\n    });\n    this.closeModal({ ordinalEncoder: this.ordinalEncoderData.ordinalEncMap });\n  }\n\n  /**\n   * Resets the form values\n   */\n  resetForm(algorithm: any): void {\n    const dynamicFormFields = this.getOriginalFormFields();\n    this.dynamicFields = dynamicFormFields.filter((algo: any) => algo.algoName === algorithm)[0];\n  }\n\n  /**\n   * Retursn the original form fields array\n   * @returns\n   */\n  getOriginalFormFields(): Array<any> {\n    return JSON.parse(JSON.stringify(HPT_FORM_FIELDS));\n  }\n\n  /**\n   * Binds the object to the drop down (N Gram)\n   * @param item1\n   * @param item2\n   * @returns\n   */\n  compareWithFn(item1: any, item2: any): boolean {\n    return item1 && item2 ? item1.name === item2.name : item1 === item2;\n  }\n\n  /**\n   * Closes the current opened dialog\n   */\n  closeModal(data?: any): void {\n    this._trainingDialogRef.close(data);\n  }\n\n\n  /**\n   * function to create form controls and then attach the validators.\n  */\n  createFormAndAddValidation(controls: any): void {\n    for (const control of controls) {\n      const validatorsToAdd = [];\n      for (const [key, value] of Object.entries(control.validators)) {\n        switch (key) {\n          case 'min':\n            validatorsToAdd.push(Validators.min(Number(value)));\n            break;\n          case 'required':\n            if (value) {\n              validatorsToAdd.push(Validators.required);\n            }\n            break;\n          case 'requiredTrue':\n            if (value) {\n              validatorsToAdd.push(Validators.requiredTrue);\n            }\n            break;\n          case 'email':\n            if (value) {\n              validatorsToAdd.push(Validators.email);\n            }\n            break;\n          case 'minLength':\n            validatorsToAdd.push(Validators.minLength(Number(value)));\n            break;\n          case 'maxLength':\n            validatorsToAdd.push(Validators.maxLength(Number(value)));\n            break;\n          case 'pattern':\n            validatorsToAdd.push(Validators.pattern(String(value)));\n            break;\n          case 'nullValidator':\n            if (value) {\n              validatorsToAdd.push(Validators.nullValidator);\n            }\n            break;\n          default:\n            if (this.appType === 'saas' && key === 'saasMax' && value) {\n              validatorsToAdd.push(Validators.max(Number(value)));\n            } else if (this.appType === 'enterprise' && key === 'entMax' && value) {\n              validatorsToAdd.push(Validators.max(Number(value)));\n            }\n            break;\n        }\n      }\n      this.hptForm.addControl(control.name, this.fb.control(control.data, validatorsToAdd));\n    }\n    this._spinner.stopSpinner();\n  }\n\n\n\n  /**\n   * Perform operations when the module is destroyed\n   */\n  ngOnDestroy() {\n    this.unsubscribe$.next(false);\n    this.unsubscribe$.unsubscribe();\n    this.snackBarRef ? this.snackBarRef.dismiss() : '';\n  }\n}\n","<div class=\"fluid-container\">\n  <!-- heading section (Train Model) -->\n  <mat-card class=\"heading\">\n    <mat-card-header>\n      <div mat-card-avatar>\n        <mat-icon class=\"folder-icon\">flash_on</mat-icon>\n      </div>\n      <mat-card-title>Train Model</mat-card-title>\n    </mat-card-header>\n    <mat-card-content *ngIf=\"dataSetsList.length\">\n      <!-- Training form -->\n      <div class=\"row mt-5 mb-3\">\n        <!-- Select dataset -->\n        <div class=\"col-md-3\">\n          <div class=\"col-md-12\">\n            <mat-form-field appearance=\"outline\">\n              <mat-label [matTooltip]=\"_utils.getTootip('selectDataSetTraining')\" for=\"eda file\">Select a dataset\n              </mat-label>\n              <mat-select [formControl]=\"dataSetControl\" (selectionChange)=\"onChangeDataset($event.value)\" required>\n                <mat-option *ngFor=\"let dataItem of dataSetsList\" [value]=\"dataItem._id\">\n                  {{ dataItem.filename | dropFileExtension: dataItem.fileSource }}\n                </mat-option>\n              </mat-select>\n              <mat-error *ngIf=\"\n                dataSetControl.hasError('required') &&\n                (dataSetControl.dirty || dataSetControl.touched)\n              \">File is requried.</mat-error>\n              <mat-hint *ngIf=\"edaData?.isHighDimensional\">Training with this dataset might take some time. Please\n                consider reducing the\n                dimensions of the data through the \"Feature Reduction\" option.</mat-hint>\n            </mat-form-field>\n          </div>\n          <div class=\"col-md-12\"\n            *ngIf=\"project.type === 'timeseries' && edaData?.isMultipleTimeseries && dataSetControl?.value\">\n            <mat-form-field appearance=\"outline\">\n              <mat-label [matTooltip]=\"_utils.getTootip('forecastHorizon')\">Number of steps</mat-label>\n              <input matInput type=\"number\" min=\"1\" name='cluster' [max]=\"maxnStep\"\n                placeholder=\"Enter the number of group\" [(ngModel)]=\"nSteps\" />\n              <mat-hint>Number of steps value should be between 1 to {{maxnStep}}.</mat-hint>\n            </mat-form-field>\n          </div>\n        </div>\n        <div class=\"col-md-4\">\n          <!-- Select algorithms -->\n          <div class=\"\" *ngIf=\"dataSetControl?.value\">\n            <mat-form-field appearance=\"outline\">\n              <mat-label [matTooltip]=\"_utils.getTootip('selectAlgorithm')\">Select algorithm(s)</mat-label>\n              <mat-select [formControl]=\"algorithmControl\" (selectionChange)=\"algoChangeHandler()\" required multiple>\n                <mat-option *ngFor=\"let algo of modelAlgorithmArray\" [value]=\"algo.name\" [disabled]=\"\n                    (appType === 'saas' &&\n                      !user?.roles?.includes('super_admin') &&\n                      !user?.roles?.includes('admin') &&\n                      algorithmControl?.value?.length > algoCount - 1 &&\n                      !algorithmControl?.value?.includes(algo.name)) ||\n                    algo.status === false\n                  \">\n                  {{ algo.name }}\n                  <span *ngIf=\"algo.status === false\">(Algorithm is temporary disabled)</span>\n                </mat-option>\n              </mat-select>\n              <mat-error *ngIf=\"\n                  algorithmControl.hasError('required') &&\n                  (algorithmControl.dirty || algorithmControl.touched)\n                \">Algorithm(s) is required.</mat-error>\n            </mat-form-field>\n          </div>\n        </div>\n        <div class=\"col-md-5\" *ngIf=\"project.type === 'clustering'\">\n          <!-- Select clusters -->\n          <div class=\"row\">\n            <div [ngClass]=\"\n                algorithmControl?.value?.includes('Agglomerative') &&\n                algorithmControl?.value?.includes('KMeans')\n                  ? 'col-md-6'\n                  : 'col-md-8'\n              \" *ngIf=\"\n                algorithmControl?.value?.length &&\n                algorithmControl?.value?.includes('KMeans') &&\n                project.type === 'clustering'\n              \">\n              <mat-form-field appearance=\"outline\">\n                <mat-label>Clusters for KMeans</mat-label>\n                <input matInput type=\"number\" min=\"2\" name='cluster' #cluster max=\"10\"\n                  placeholder=\"Enter the number of clusters\" [(ngModel)]=\"clusters\"\n                  (change)=\"onFocusOut('kmeans',clusters)\" />\n                <div *ngIf=\"cluster.errors?.min || cluster.errors?.max\">Invalid Name</div>\n                <mat-hint>Cluster value should be between 2 to 10.</mat-hint>\n              </mat-form-field>\n            </div>\n            <div [ngClass]=\"\n                algorithmControl?.value?.includes('Agglomerative') &&\n                algorithmControl?.value?.includes('KMeans')\n                  ? 'col-md-6'\n                  : 'col-md-8'\n              \" *ngIf=\"\n                algorithmControl?.value?.length &&\n                algorithmControl?.value?.includes('Agglomerative') &&\n                project.type === 'clustering'\n              \">\n              <mat-form-field appearance=\"outline\">\n                <mat-label>Clusters for Agglomerative</mat-label>\n                <input matInput type=\"number\" min=\"2\" max=\"10\" placeholder=\"Enter the number of clusters\"\n                  [(ngModel)]=\"agglomerativeCluster\" (change)=\"onFocusOut('agglo',agglomerativeCluster)\" />\n                <mat-hint>Cluster value should be between 2 to 10.</mat-hint>\n              </mat-form-field>\n            </div>\n            <p *ngIf=\"\n                algorithmControl?.value?.includes('KMeans') ||\n                algorithmControl?.value?.includes('Agglomerative')\n              \" class=\"col-md-12 mt-4 text-sm mb-0 ml-2\">\n              <i class=\"fas fa-info-circle mr-1\" style=\"font-size: 14px\"></i>\n              To choose the optimal number of clusters click\n              <a id=\"optimal-cluster-link\" (click)=\"dialogHandler('optimalClusters')\" [ngClass]=\"\n                  appType === 'enterprise' ||\n                  (appType === 'saas' &&\n                    (user?.roles?.includes('super_admin') || user?.roles?.includes('admin')))\n                    ? 'text-app-orange text-decoration-none'\n                    : 'text-muted disable-Btn'\n                \"><span matBadge [matBadgeIcon]=\"'ENT'\" matBadgeOverlap=\"false\">here</span></a>\n            </p>\n          </div>\n        </div>\n        <div class=\"col-md-4 border-left ml-5\" *ngIf=\"project.type === 'timeseries' && targetDetails\">\n          <div class=\"card ml-5\">\n            <div class=\"card-body text-center p-0\">\n              <div style=\"background-color: lightcyan\" class=\"p-3\">\n                <h3 class=\"\">{{ edaData.depVariable }}</h3>\n                <p class=\"mb-0\">Target</p>\n              </div>\n              <div class=\"bg-primary p-3\">\n                <em class=\"fas fa-bullseye fa-2x text-alpha\"></em>\n              </div>\n            </div>\n          </div>\n          <!-- <div class=\"card border-0\">\n            <div class=\"row row-flush\">\n              <div\n                class=\"col-md-3 bg-primary text-center d-flex align-items-center justify-content-center rounded-left\"\n              >\n                <em class=\"fas fa-bullseye fa-2x\"></em>\n              </div>\n              <div class=\"col-md-9\">\n                <div class=\"text-center my-3\">\n                  <p class=\"bold m-0\">{{ edaData.depVariable }}</p>\n                  <span class=\"text-muted\">Target</span>\n                </div>\n              </div>\n            </div>\n          </div> -->\n        </div>\n      </div>\n    </mat-card-content>\n  </mat-card>\n\n  <!-- FIRST TIME -->\n  <h4 *ngIf=\"!dataSetsList.length\" class=\"text-center mt-5 font-weight-normal\">\n    You don't have any data set with EDA,\n    <a class=\"text-decoration-none\" href=\"#\" [routerLink]=\"['/project/eda']\"> perform EDA now.</a>\n  </h4>\n\n  <div class=\"row mt-5\" *ngIf=\"project?.type !== 'timeseries' && targetDetails\">\n    <div class=\"col-md-12\">\n      <mat-card-title>Target Details</mat-card-title>\n    </div>\n    <div class=\"col-xl-3 col-lg-6\">\n      <!-- START card-->\n      <div class=\"card bg-primary border-0\">\n        <div class=\"row align-items-center mx-0\">\n          <div class=\"col-4 text-center\">\n            <em class=\"fas fa-bullseye fa-3x\"></em>\n          </div>\n          <div class=\"col-8 py-4 rounded-right wordSpace card-font\">\n            <div class=\"m-0 text-bold\">{{ edaData.depVariable }}</div>\n            <br *ngIf=\"targetLength > 3\" />\n            <div class=\"mb-1\">Target</div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"col-xl-3 col-lg-6\">\n      <!-- START card-->\n      <div class=\"card bg-primary border-0\">\n        <div class=\"row align-items-center mx-0\">\n          <div class=\"col-4 text-center\">\n            <em class=\"fas fa-cubes fa-3x\"></em>\n          </div>\n          <div class=\"col-8 py-4 rounded-right wordSpace card-font\">\n            <div class=\"m-0 text-bold\">{{ targetDetails.targetType }}</div>\n            <br *ngIf=\"targetLength > 3\" />\n            <div class=\"mb-1\">Target Type</div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"col-xl-6 col-lg-12\" *ngIf=\"project.type !== 'timeseries' && targetDistribution !== undefined\">\n      <!-- START card-->\n      <div class=\"card bg-primary border-0\">\n        <div class=\"row align-items-center mx-0\">\n          <div class=\"col-4 text-center\">\n            <em class=\"fas fa-info fa-3x\"></em>\n          </div>\n          <div class=\"col-8 py-4 rounded-right wordSpace card-font\">\n            <div class=\"row m-0 mb-1\">\n              <div class=\"text-bold d-flex mr-4\" *ngFor=\"let i of targetDistribution | keyvalue\">\n                {{ i.key }}: {{ i.value }}%\n              </div>\n            </div>\n            <div class=\"\">Class Names</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- Heading section (Advance options) -->\n  <div *ngIf=\"dataSetControl?.value && clusters && algorithmControl?.value?.length\"\n    class=\"row mt-5 mb-2 d-flex align-items-center justify-content-between\">\n    <div class=\"col-md-3 d-flex align-items-center\">\n      <button mat-icon-button (click)=\"showAdvanceOptions = !showAdvanceOptions\" class=\"bg-grey-300 mr-3\">\n        <mat-icon class=\"chevron-icon\" *ngIf=\"!showAdvanceOptions\">chevron_right</mat-icon>\n        <mat-icon class=\"chevron-icon\" *ngIf=\"showAdvanceOptions\">expand_more</mat-icon>\n      </button>\n      <h5 class=\"mb-0\" style=\"color: #07509d\">Advanced options</h5>\n    </div>\n  </div>\n\n  <!-- Advance options tabs -->\n  <mat-card *ngIf=\"showAdvanceOptions\" class=\"mt-4 p-4\">\n    <mat-card-content>\n      <mat-tab-group *ngIf=\"showAdvanceOptions\" dynamicHeight mat-align-tabs=\"start\">\n        <!-- Transformation -->\n        <mat-tab [disabled]=\"\n            appType === 'saas' &&\n            !user?.roles?.includes('super_admin') &&\n            !user?.roles?.includes('admin') &&\n            !allowedTrainingAdvanceOptions.includes('transformation')\n          \">\n          <!-- TAB LABEL -->\n          <ng-template mat-tab-label>\n            <mat-label matBadge [matBadgeIcon]=\"allowedTrainingAdvanceOptions.includes('transformation') ? '' : 'PRO'\"\n              matBadgeOverlap=\"false\" [matTooltip]=\"_utils.getTootip('transformation')\" [ngClass]=\"\n                appType === 'enterprise' ||\n                (appType === 'saas' &&\n                  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) ||\n                allowedTrainingAdvanceOptions.includes('transformation')\n                  ? ''\n                  : 'disable-Btn'\n              \">\n              Transformation\n            </mat-label>\n          </ng-template>\n          <div class=\"row m-3\">\n            <div class=\"col-md-7\">\n              <label id=\"feature-scaling\" [matTooltip]=\"_utils.getTootip('featureScaling')\">Feature scaling\n                options</label>\n              <mat-radio-group class=\"d-flex mt-2\" aria-labelledby=\"feature-scaling\" [(ngModel)]=\"featureScalingOption\"\n                (change)=\"onFeatureScalingOptionChange()\">\n                <mat-radio-button class=\"ml-4\" value=\"none\">None</mat-radio-button>\n                <mat-radio-button class=\"ml-4\" value=\"standard_scaler\"\n                  [matTooltip]=\"_utils.getTootip('standardScaler')\">\n                  Standard Scaler</mat-radio-button>\n                <mat-radio-button class=\"ml-4\" value=\"robust_scaler\" [matTooltip]=\"_utils.getTootip('robustScaler')\">\n                  Robust Scaler</mat-radio-button>\n              </mat-radio-group>\n              <hr />\n              <label class=\"mt-2 mb-3\" id=\"feature-scaling\"\n                [matTooltip]=\"_utils.getTootip('normalizationMethod')\">Normalization methods</label>\n              <mat-radio-group class=\"mt-3\" aria-labelledby=\"feature-scaling\" [(ngModel)]=\"normalizationMethod\"\n                (change)=\"onNormalizationChange(normalizationMethod)\">\n                <mat-radio-button *ngFor=\"let feature of normalizationOptions | normalizationOptions: project\"\n                  class=\"d-flex ml-4\" [value]=\"feature.value\" [matTooltip]=\"_utils.getTootip(feature.value)\">{{\n                  feature.name }}</mat-radio-button>\n              </mat-radio-group>\n            </div>\n            <div class=\"col-md-5 border-left\" *ngIf=\"featureScalingOption != 'none' || normalizationMethod != 'none'\">\n              <!-- SELECT (for log transform) -->\n              <div class=\"d-flex flex-column ml-3\">\n                <mat-form-field class=\"w-75\" appearance=\"outline\"\n                  [matTooltip]=\"_utils.getTootip('logTransformationColumns')\" *ngIf=\"selection.selected.length\">\n                  <mat-label>Select feature </mat-label>\n                  <mat-select [(ngModel)]=\"featuresToTransform\" multiple>\n                    <mat-option *ngFor=\"let feature of tempfeat\" [value]=\"feature\">{{\n                      feature\n                      }}</mat-option>\n                  </mat-select>\n                </mat-form-field>\n                <mat-checkbox class=\"mt-2 mb-3\" *ngIf=\"project.type != 'clustering' && algoType != 'classification'\"\n                  [(ngModel)]=\"applyToTarget\">Apply to Target\n                </mat-checkbox>\n                <mat-form-field class=\"w-75\" *ngIf=\"normalizationMethod == 'log_transform'\" appearance=\"outline\"\n                  [matTooltip]=\"_utils.getTootip('scalarValue')\">\n                  <mat-label>Select scalar</mat-label>\n                  <mat-select [(ngModel)]=\"scale\">\n                    <mat-option *ngFor=\"let val of tsFrequencies\" [value]=\"val\">{{\n                      val\n                      }}</mat-option>\n                  </mat-select>\n                </mat-form-field>\n              </div>\n            </div>\n          </div>\n        </mat-tab>\n        <!-- Feature Generation -->\n        <mat-tab *ngIf=\"project.type === 'predictive_modeling'\" [disabled]=\"\n            appType === 'saas' &&\n            !user?.roles?.includes('super_admin') &&\n            !user?.roles?.includes('admin') &&\n            !allowedTrainingAdvanceOptions.includes('featureGeneration')\n          \">\n          <!-- TAB LABEL -->\n          <ng-template mat-tab-label>\n            <mat-label matBadge [matBadgeIcon]=\"\n                allowedTrainingAdvanceOptions.includes('featureGeneration') ? '' : 'PRO'\n              \" matBadgeOverlap=\"false\" [matTooltip]=\"_utils.getTootip('featureGeneration')\" [ngClass]=\"\n                appType === 'enterprise' ||\n                (appType === 'saas' &&\n                  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) ||\n                allowedTrainingAdvanceOptions.includes('featureGeneration')\n                  ? ''\n                  : 'disable-Btn'\n              \">\n              Feature Generation</mat-label>\n          </ng-template>\n          <div class=\"row mx-2 my-4\">\n            <!-- CHECKBOX GROUP -->\n            <div [class]=\"\n                pairwiseLinear || pairwisePolynomial || univariatePolynomial || explicitPairwise\n                  ? 'col-md-8 border-right'\n                  : 'col-md-6'\n              \">\n              <h6 class=\"mb-4\">Auto feature generation</h6>\n              <!-- CHECKBOX (pairwise linear) -->\n              <section class=\"d-flex flex-column my-1\">\n                <mat-checkbox class=\"m-0 w-50\" (change)=\"onAFGOptionSelection('pairwiseLinear', pairwiseLinear)\"\n                  [(ngModel)]=\"pairwiseLinear\" id=\"pairwiseLinear\" name=\"pairwiseLinear\"\n                  [matTooltip]=\"_utils.getTootip('pairWiseLinear')\">Pairwise linear combination\n                </mat-checkbox>\n                <mat-radio-group *ngIf=\"pairwiseLinear\" class=\"ml-4 my-2\" aria-label=\"Select an option\"\n                  [(ngModel)]=\"pairwiseLinearOption\">\n                  <mat-radio-button class=\"mr-3\" value=\"addition\">Addition</mat-radio-button>\n                  <mat-radio-button class=\"mr-3\" value=\"subtraction\">Subtraction</mat-radio-button>\n                </mat-radio-group>\n              </section>\n              <!-- CHECKBOX (pairwise polynomial) -->\n              <section class=\"d-flex flex-column my-1\">\n                <mat-checkbox class=\"m-0 w-50\" (change)=\"onAFGOptionSelection('pairwisePolynomial', pairwisePolynomial)\"\n                  [(ngModel)]=\"pairwisePolynomial\" id=\"pairwisePolynomial\" name=\"pairwisePolynomial\"\n                  [matTooltip]=\"_utils.getTootip('pairWisePolynomial')\">Pairwise polynomial combination</mat-checkbox>\n                <mat-radio-group *ngIf=\"pairwisePolynomial\" class=\"ml-4 my-2\" aria-label=\"Select an option\"\n                  [(ngModel)]=\"pairwisePolynomialOption\">\n                  <mat-radio-button class=\"mr-3\" value=\"multiply\" checked>Multiply</mat-radio-button>\n                </mat-radio-group>\n              </section>\n              <!-- CHECKBOX (univariate polynomial) -->\n              <section class=\"d-flex flex-column my-1\">\n                <mat-checkbox class=\"m-0 w-50\"\n                  (change)=\"onAFGOptionSelection('univariatePolynomial', univariatePolynomial)\"\n                  [(ngModel)]=\"univariatePolynomial\" id=\"univariatePolynomial\" name=\"univariatePolynomial\"\n                  [matTooltip]=\"_utils.getTootip('univariatePolynomial')\">Univariate polynomial generation\n                </mat-checkbox>\n                <!-- RADIO -->\n                <mat-radio-group *ngIf=\"univariatePolynomial\" class=\"ml-4 my-2\" aria-label=\"Select an option\"\n                  [(ngModel)]=\"univariatePolynomialOption\">\n                  <mat-radio-button class=\"mr-3\" value=\"power\" checked>Power</mat-radio-button>\n                </mat-radio-group>\n                <!-- INPUT (exponent) -->\n                <mat-form-field *ngIf=\"univariatePolynomial\" class=\"ml-4 my-2 w-50\" appearance=\"outline\">\n                  <mat-label>Exponent</mat-label>\n                  <input matInput type=\"number\" [(ngModel)]=\"exponent\" placeholder=\"Enter the value\" />\n                  <mat-hint>Value should be greater than zero.</mat-hint>\n                </mat-form-field>\n              </section>\n              <!-- CHECKBOX (explicit) -->\n              <section class=\"my-1\">\n                <mat-checkbox class=\"m-0\" (change)=\"onAFGOptionSelection('explicitPairwise', explicitPairwise)\"\n                  [(ngModel)]=\"explicitPairwise\" id=\"explicitPairwise\" name=\"explicitPairwise\">\n                  Explicit feature generation</mat-checkbox>\n                <!-- FORM -->\n                <div *ngIf=\"explicitPairwise\" class=\"my-3 mx-4\">\n                  <div *ngFor=\"let opt of explicitPairWiseOption; let i = index\" class=\"d-flex\">\n                    <!-- SELECT (operaion) -->\n                    <div>\n                      <mat-form-field appearance=\"outline\" class=\"w-75\">\n                        <mat-label>Select an operation</mat-label>\n                        <mat-select [(ngModel)]=\"opt.operation\">\n                          <mat-option *ngFor=\"let epw of epwMethods\" [value]=\"epw.value\">{{\n                            epw.name\n                            }}</mat-option>\n                        </mat-select>\n                      </mat-form-field>\n                    </div>\n                    <!-- SELECT (feature-0) -->\n                    <div *ngIf=\"\n                        opt.operation === 'addition' ||\n                        opt.operation === 'multiply' ||\n                        opt.operation === 'subtraction' ||\n                        opt.operation === 'power'\n                      \">\n                      <mat-form-field appearance=\"outline\" class=\"w-75\">\n                        <mat-label>Select a feature</mat-label>\n                        <mat-select [(ngModel)]=\"opt.colName[0]\">\n                          <mat-option *ngFor=\"let feature of tempFeatures\" [value]=\"feature.colName\">{{ feature.colName\n                            }}</mat-option>\n                        </mat-select>\n                      </mat-form-field>\n                    </div>\n                    <!-- SELECT (feature-1) -->\n                    <div *ngIf=\"\n                        opt.operation === 'addition' ||\n                        opt.operation === 'multiply' ||\n                        opt.operation === 'subtraction'\n                      \">\n                      <mat-form-field appearance=\"outline\" class=\"w-75\">\n                        <mat-label>Select a feature</mat-label>\n                        <mat-select [(ngModel)]=\"opt.colName[1]\">\n                          <mat-option *ngFor=\"let feature of tempFeatures\" [value]=\"feature.colName\">{{ feature.colName\n                            }}</mat-option>\n                        </mat-select>\n                      </mat-form-field>\n                    </div>\n                    <!-- INPUT (exponent) -->\n                    <div *ngIf=\"opt.operation === 'power'\">\n                      <mat-form-field appearance=\"outline\" class=\"w-75\">\n                        <mat-label>Exponent</mat-label>\n                        <input matInput type=\"number\" [(ngModel)]=\"opt.exponent\" placeholder=\"Enter the value\" />\n                        <mat-hint>Value must be greater than 0.</mat-hint>\n                      </mat-form-field>\n                    </div>\n                    <!-- INPUT (delimeter) -->\n                    <div *ngIf=\"opt.operation === 'split'\">\n                      <mat-form-field appearance=\"outline\" class=\"w-75\">\n                        <mat-label>Delimeter</mat-label>\n                        <input matInput type=\"text\" [(ngModel)]=\"opt.delimiter\" placeholder=\"Ex:_,-,.\" />\n                      </mat-form-field>\n                    </div>\n                    <!-- INPUT (split count) -->\n                    <div *ngIf=\"opt.operation === 'split'\">\n                      <mat-form-field appearance=\"outline\" class=\"w-75\">\n                        <mat-label>Feature split count</mat-label>\n                        <input matInput type=\"number\" [(ngModel)]=\"opt.featureSplitCount\"\n                          placeholder=\"Enter the value\" />\n                        <mat-hint>Value must be greater than 0.</mat-hint>\n                      </mat-form-field>\n                    </div>\n                    <!-- BUTTON (remove) -->\n                    <div *ngIf=\"i > 0\" class=\"ml-n4\">\n                      <button class=\"mt-2\" mat-icon-button>\n                        <mat-icon (click)=\"removeItem(i)\">close</mat-icon>\n                      </button>\n                    </div>\n                  </div>\n                  <button class=\"my-1\" mat-stroked-button type=\"button\" (click)=\"addItem()\">\n                    <mat-icon class=\"mr-1\">add</mat-icon>Add\n                  </button>\n                </div>\n              </section>\n            </div>\n            <!-- RADIO (drop original) -->\n            <div class=\"col-md-3 ml-4 d-flex flex-column\" *ngIf=\"\n                pairwiseLinear || pairwisePolynomial || univariatePolynomial || explicitPairwise\n              \">\n              <label id=\"drop-original\" [matTooltip]=\"_utils.getTootip('dropOriginal')\">Drop original features</label>\n              <mat-radio-group class=\"my-2\" aria-labelledby=\"drop-original\" [(ngModel)]=\"fdropMethod\"\n                (change)=\"dropChange()\">\n                <mat-radio-button class=\"mr-3\" name=\"fdropMethod\" id=\"fdropMethod1\" value=\"true\" selected>True\n                </mat-radio-button>\n                <mat-radio-button class=\"mr-3\" name=\"fdropMethod\" id=\"fdropMethod2\" value=\"false\">False\n                </mat-radio-button>\n              </mat-radio-group>\n            </div>\n          </div>\n        </mat-tab>\n        <!-- Feature Reduction -->\n        <mat-tab *ngIf=\"project.type !== 'timeseries'\" [disabled]=\"\n            appType === 'saas' &&\n            !user?.roles?.includes('super_admin') &&\n            !user?.roles?.includes('admin') &&\n            !allowedTrainingAdvanceOptions.includes('featureReduction')\n          \">\n          <!-- TAB LABEL -->\n          <ng-template mat-tab-label>\n            <mat-label matBadge [matBadgeIcon]=\"\n                allowedTrainingAdvanceOptions.includes('featureReduction') ? '' : 'PRO'\n              \" matBadgeOverlap=\"false\" [ngClass]=\"\n                appType === 'enterprise' ||\n                (appType === 'saas' &&\n                  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) ||\n                allowedTrainingAdvanceOptions.includes('featureReduction')\n                  ? ''\n                  : 'disable-Btn'\n              \" [matTooltip]=\"_utils.getTootip('featureReduction')\">Feature Reduction</mat-label>\n          </ng-template>\n          <div class=\"row mx-2 my-3\">\n            <!-- SECTION-1 -->\n            <div *ngIf=\"!isMultilabel && project.type !== 'clustering'\" class=\"col-md-6 border-right\">\n              <label id=\"feature-selection\" [matTooltip]=\"_utils.getTootip('featureselection')\">Feature selection\n                method</label>\n              <mat-radio-group class=\"d-flex mt-2\" aria-labelledby=\"feature-selection\" [(ngModel)]=\"fsMethod\"\n                (change)=\"onFSMethodChange(algoType, fsMethod)\">\n                <mat-radio-button class=\"ml-4\" value=\"none\">None</mat-radio-button>\n                <mat-radio-button class=\"ml-4\" value=\"SelectKBest\" [matTooltip]=\"_utils.getTootip('selectKbest')\">\n                  SelectKBest</mat-radio-button>\n                <mat-radio-button class=\"ml-4\" value=\"SelectPercentile\"\n                  [matTooltip]=\"_utils.getTootip('selectPercentile')\">\n                  SelectPercentile</mat-radio-button>\n                <mat-radio-button class=\"ml-4\" value=\"RFE\" [matTooltip]=\"_utils.getTootip('rfe')\">RFE</mat-radio-button>\n              </mat-radio-group>\n              <div *ngIf=\"fsMethod !== 'none'\">\n                <hr />\n                <!-- RADIO -->\n                <label id=\"feature-selection\" [matTooltip]=\"_utils.getTootip('scoringFunction')\">Scoring\n                  function</label>\n                <mat-radio-group class=\"d-flex mt-2\" aria-labelledby=\"feature-selection\" [(ngModel)]=\"scoringFunction\">\n                  <mat-radio-button class=\"ml-4\" *ngFor=\"let val of scoringFunctionArray\" [value]=\"val.value\"\n                    [matTooltip]=\"_utils.getTootip(val.value)\">{{ val.name }}\n                  </mat-radio-button>\n                </mat-radio-group>\n                <br />\n                <mat-hint *ngIf=\"scoringFunction === 'chi2'\">chi2 doesn't support negative values present in the\n                  dataset.\n                </mat-hint>\n                <!-- INPUTS (step, CV, estimator) -->\n                <div *ngIf=\"fsMethod === 'RFE'\" class=\"row mt-3\">\n                  <div class=\"col-md-4\">\n                    <mat-form-field appearance=\"outline\">\n                      <mat-label>Step</mat-label>\n                      <input matInput type=\"number\" min=\"1\" max=\"100\" [(ngModel)]=\"featureStep\"\n                        placeholder=\"Enter the value\" />\n                      <mat-hint>Step should be Min. 1 and Max. 100</mat-hint>\n                    </mat-form-field>\n                  </div>\n                  <div class=\"col-md-4\">\n                    <mat-form-field appearance=\"outline\">\n                      <mat-label>CV</mat-label>\n                      <input matInput type=\"number\" min=\"1\" max=\"5\" [(ngModel)]=\"cv\" placeholder=\"Enter the value\" />\n                      <mat-hint>CV should be Min. 1 and Max. 5</mat-hint>\n                    </mat-form-field>\n                  </div>\n                  <div class=\"col-md-4\">\n                    <mat-form-field appearance=\"outline\">\n                      <mat-label>Select estimator</mat-label>\n                      <mat-select [(ngModel)]=\"estimator\">\n                        <mat-option *ngFor=\"let algo of estimatorAlgo\" [value]=\"algo\">{{\n                          algo\n                          }}</mat-option>\n                      </mat-select>\n                    </mat-form-field>\n                  </div>\n                </div>\n                <!-- SLIDER (feature percentage)-->\n                <br />\n                <label class=\"h5 mt-4\">Percentage of features: {{ featurePercentage }}%</label>\n                <br />\n                <mat-slider thumbLabel class=\"w-50\" color=\"primary\" min=\"5\" max=\"100\" step=\"1\"\n                  [(ngModel)]=\"featurePercentage\" [ngModelOptions]=\"{ standalone: true }\"></mat-slider>\n              </div>\n              <!-- BUTTON (calculate)-->\n              <button class=\"mt-4\" *ngIf=\"fsMethod !== 'none'\"\n                [disabled]=\"fsMethod === 'RFE' && (estimator === 'none' || !estimator)\"\n                [matTooltip]=\"_utils.getTootip('calculateFeatureScore')\" mat-stroked-button\n                (click)=\"calculateFeatureScore()\">\n                Calculate Feature Score\n              </button>\n            </div>\n            <!-- SECTION-2 -->\n            <div [class]=\"project.type === 'clustering' ? 'col-md-12' : 'col-md-5 ml-4'\">\n              <!-- RADIO -->\n              <label id=\"dimension-reduction\" [matTooltip]=\"_utils.getTootip('dimensionalityReduction')\">Dimensionality\n                reduction options\n              </label>\n              <mat-radio-group class=\"d-flex mt-2\" aria-labelledby=\"dimension-reduction\" [(ngModel)]=\"decomposition\"\n                (change)=\"onDecompositionChange()\">\n                <mat-radio-button class=\"ml-4\" value=\"none\">None</mat-radio-button>\n                <mat-radio-button class=\"ml-4\" value=\"pca\" [matTooltip]=\"_utils.getTootip('PCA')\">PCA</mat-radio-button>\n                <mat-radio-button class=\"ml-4\" value=\"factoranalysis\" [matTooltip]=\"_utils.getTootip('factorAnalysis')\">\n                  Factor Analysis</mat-radio-button>\n              </mat-radio-group>\n              <!-- INPUTS (component, custom feature) -->\n              <div *ngIf=\"decomposition !== 'none'\">\n                <mat-form-field [class]=\"project.type === 'clustering' ? 'mt-4 w-25' : 'mt-4 w-50'\"\n                  appearance=\"outline\">\n                  <mat-label>Components</mat-label>\n                  <input matInput type=\"number\" [(ngModel)]=\"components\" placeholder=\"Enter the value\" />\n                </mat-form-field>\n                <br />\n                <div *ngIf=\"tempfeat.length\">\n                  <mat-slide-toggle class=\"my-2\" labelPosition=\"before\" color=\"primary\"\n                    [matTooltip]=\"_utils.getTootip('customFeatureChecked')\" [(ngModel)]=\"customFeatureChecked\">\n                    Select custom feature\n                  </mat-slide-toggle>\n                  <br />\n                  <mat-form-field *ngIf=\"customFeatureChecked && selection.selected.length\"\n                    [class]=\"project.type === 'clustering' ? 'mt-4 w-25' : 'mt-4 w-50'\" appearance=\"outline\">\n                    <mat-label>Select custom feature</mat-label>\n                    <mat-select [(ngModel)]=\"customFeatures\" multiple>\n                      <ng-container *ngIf=\"project.type !== 'clustering'\">\n                        <mat-option *ngFor=\"let feature of tempfeat\" [value]=\"feature\">{{\n                          feature\n                          }}</mat-option>\n                      </ng-container>\n                      <ng-container *ngIf=\"project.type === 'clustering'\">\n                        <mat-option *ngFor=\"let feature of tempfeat\" [value]=\"feature\">{{ feature }}\n                        </mat-option>\n                      </ng-container>\n                    </mat-select>\n                  </mat-form-field>\n                </div>\n              </div>\n            </div>\n          </div>\n        </mat-tab>\n        <!-- Sampling -->\n        <mat-tab *ngIf=\"\n            !project.useGPU &&\n            algoType !== 'regression' &&\n            !isMultilabel &&\n            project.type === 'predictive_modeling'\n          \" [disabled]=\"\n            appType === 'saas' &&\n            !user?.roles?.includes('super_admin') &&\n            !user?.roles?.includes('admin') &&\n            !allowedTrainingAdvanceOptions.includes('sampling')\n          \">\n          <!-- TAB LABEL -->\n          <ng-template mat-tab-label>\n            <mat-label matBadge [matBadgeIcon]=\"allowedTrainingAdvanceOptions.includes('sampling') ? '' : 'PRO'\"\n              matBadgeOverlap=\"false\" [ngClass]=\"\n                appType === 'enterprise' ||\n                (appType === 'saas' &&\n                  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) ||\n                allowedTrainingAdvanceOptions.includes('sampling')\n                  ? ''\n                  : 'disable-Btn'\n              \" [matTooltip]=\"_utils.getTootip('sampling')\">Sampling</mat-label>\n          </ng-template>\n          <div class=\"mx-2 my-3\">\n            <div class=\"row\">\n              <div [class]=\"samplingData?.length ? 'col-md-6 border-right' : 'col-md-6'\">\n                <label id=\"sampling\" [matTooltip]=\"_utils.getTootip('imbalanceDatasetHandling')\">Imbalanced dataset\n                  handling</label>\n                <mat-radio-group class=\"d-flex mt-2\" aria-labelledby=\"sampling\" [(ngModel)]=\"sampling\"\n                  (change)=\"ischeckSampling(sampling)\">\n                  <mat-radio-button class=\"ml-4\" value=\"none\">None</mat-radio-button>\n                  <mat-radio-button class=\"ml-4\" value=\"over_sampling\" [matTooltip]=\"_utils.getTootip('overSampling')\">\n                    Over Sampling</mat-radio-button>\n                  <mat-radio-button class=\"ml-4\" value=\"under_sampling\"\n                    [matTooltip]=\"_utils.getTootip('underSampling')\">\n                    Under Sampling</mat-radio-button>\n                </mat-radio-group>\n                <!-- BUTTON (calculate)-->\n                <button class=\"my-4\" *ngIf=\"sampling !== 'none'\" mat-stroked-button (click)=\"calculatePercentage()\">\n                  Calculate Sampling Percentage\n                </button>\n              </div>\n              <div class=\"col-md-6\">\n                <!-- BUTTONS (inc/dec) -->\n                <div *ngIf=\"\n                    (sampling === 'over_sampling' || sampling === 'under_sampling') &&\n                    samplingData &&\n                    samplingData.length\n                  \" class=\"d-flex\">\n                  <div *ngFor=\"let item of samplingData\">\n                    <h4 class=\"mx-5 my-4\">{{ item.colName }} : {{ item.value }}%</h4>\n                    <div class=\"d-flex align-items-center justify-content-center\"\n                      *ngIf=\"this.sampling == 'over_sampling'\">\n                      <button mat-icon-button (click)=\"sample(item.value, item.initValue, 'sub', item.colName)\"\n                        *ngIf=\"this.sampling == 'over_sampling' && item.initValue < item.value\">\n                        <mat-icon>remove_circle_outline</mat-icon>\n                      </button>\n                      <mat-chip-list>\n                        <mat-chip class=\"m-2\">{{ item.value }}</mat-chip>\n                      </mat-chip-list>\n                      <button mat-icon-button (click)=\"sample(item.value, item.initValue, 'add', item.colName)\">\n                        <mat-icon>add_circle_outline</mat-icon>\n                      </button>\n                    </div>\n                    <div class=\"d-flex align-items-center justify-content-center\"\n                      *ngIf=\"this.sampling == 'under_sampling'\">\n                      <button mat-icon-button (click)=\"sample(item.value, item.initValue, 'sub', item.colName)\">\n                        <mat-icon>remove_circle_outline</mat-icon>\n                      </button>\n                      <mat-chip-list>\n                        <mat-chip class=\"m-2\">{{ item.value }}</mat-chip>\n                      </mat-chip-list>\n                      <button mat-icon-button (click)=\"sample(item.value, item.initValue, 'add', item.colName)\"\n                        *ngIf=\"this.sampling == 'under_sampling' && item.initValue > item.value\">\n                        <mat-icon>add_circle_outline</mat-icon>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"col-md-12 mt-2\">\n                <mat-hint>\n                  Note :\n                  <ul>\n                    <li>\n                      Under Sampling- under sampling percentage can not be increased more than base\n                      percentage\n                    </li>\n                    <li>\n                      Over Sampling - over sampling percentage can not be decreased more than base\n                      percentage\n                    </li>\n                  </ul>\n                </mat-hint>\n              </div>\n            </div>\n          </div>\n        </mat-tab>\n        <!-- HPT -->\n        <mat-tab *ngIf=\"\n            algorithmControl?.value?.includes('DBSCAN') ||\n            (algorithmControl?.value?.includes('Agglomerative') && project.type === 'clustering') ||\n            project.type === 'predictive_modeling' || project.type === 'timeseries'\" [disabled]=\"\n            appType === 'saas' &&\n            !user?.roles?.includes('super_admin') &&\n            !user?.roles?.includes('admin') &&\n            !allowedTrainingAdvanceOptions.includes('algorithmParameters')\n          \">\n          <!-- TAB LABEL -->\n          <ng-template mat-tab-label>\n            <mat-label matBadge [matBadgeIcon]=\"\n                allowedTrainingAdvanceOptions.includes('algorithmParameters') ? '' : 'PRO'\n              \" matBadgeOverlap=\"false\" [ngClass]=\"\n                appType === 'enterprise' ||\n                (appType === 'saas' &&\n                  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) ||\n                allowedTrainingAdvanceOptions.includes('algorithmParameters')\n                  ? ''\n                  : 'disable-Btn'\n              \" [matTooltip]=\"_utils.getTootip('algorithmParameters')\">Algorithm Parameters</mat-label>\n          </ng-template>\n          <div class=\"mx-2 my-3\">\n            <!-- BUTTON (calculate)-->\n            <button class=\"my-3 hpt-btn\" type=\"button\" mat-stroked-button (click)=\"dialogHandler('hpt')\"\n              [matTooltip]=\"_utils.getTootip('algorithmParameters')\">\n              Algorithm Parameters\n            </button>\n          </div>\n        </mat-tab>\n        <!-- NLP -->\n        <mat-tab *ngIf=\"edaData.paragraphColNames.length\" [disabled]=\"\n            appType === 'saas' &&\n            !user?.roles?.includes('super_admin') &&\n            !user?.roles?.includes('admin') &&\n            !allowedTrainingAdvanceOptions.includes('nlp')\n          \">\n          <!-- TAB LABEL -->\n          <ng-template mat-tab-label>\n            <mat-label matBadge [matBadgeIcon]=\"allowedTrainingAdvanceOptions.includes('nlp') ? '' : 'PRO'\"\n              [matTooltip]=\"_utils.getTootip('NLP')\">NLP</mat-label>\n          </ng-template>\n          <mat-form-field class=\"w-25 mt-2\" appearance=\"outline\">\n            <mat-label>Select feature</mat-label>\n            <mat-select [(ngModel)]=\"feature\" (selectionChange)=\"onChangeFeature(feature)\">\n              <mat-option *ngFor=\"let item of featureList\" [value]=\"item\">\n                {{ item }}\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n          <br />\n          <!-- BUTTON (configure)-->\n          <button [disabled]=\"!feature\" [matTooltip]=\"_utils.getTootip('nlpFeatureConfig')\" type=\"button\"\n            mat-stroked-button (click)=\"dialogHandler('configureFeature')\">\n            Configure Feature\n          </button>\n        </mat-tab>\n        <!-- Components -->\n        <mat-tab *ngIf=\"project.type === 'timeseries'\" [disabled]=\"\n            appType === 'saas' &&\n            !user?.roles?.includes('super_admin') &&\n            !user?.roles?.includes('admin') &&\n            !allowedTrainingAdvanceOptions.includes('visualiseComponent')\n          \">\n          <!-- TAB LABEL -->\n          <ng-template mat-tab-label>\n            <mat-label matBadge [matBadgeIcon]=\"\n                allowedTrainingAdvanceOptions.includes('visualiseComponent') ? '' : 'PRO'\n              \" matBadgeOverlap=\"false\" [ngClass]=\"\n                appType === 'enterprise' ||\n                (appType === 'saas' &&\n                  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) ||\n                allowedTrainingAdvanceOptions.includes('visualiseComponent')\n                  ? ''\n                  : 'disable-Btn'\n              \" [matTooltip]=\"_utils.getTootip('visualiseComponent')\">Components</mat-label>\n          </ng-template>\n          <div class=\"d-flex align-items-center mx-2 my-3\">\n            <!-- SELECT -->\n            <mat-form-field class=\"w-25 mt-2\" appearance=\"outline\" [matTooltip]=\"_utils.getTootip('seasonalComponent')\">\n              <mat-label>Select seasonal component</mat-label>\n              <mat-select [(ngModel)]=\"visualizationModel\" #visualize=\"ngModel\" required>\n                <mat-option value=\"Additive\">Additive</mat-option>\n                <mat-option value=\"Multiplicative\">Multiplicative</mat-option>\n              </mat-select>\n              <mat-error *ngIf=\"visualize.invalid || visualize.touched\">Seasonal component is required.</mat-error>\n            </mat-form-field>\n            <!-- SELECT -->\n            <mat-form-field class=\"w-25 mt-2 ml-4\" appearance=\"outline\" [matTooltip]=\"_utils.getTootip('frequency')\">\n              <mat-label>Select frequency</mat-label>\n              <mat-select [(ngModel)]=\"selectedFrequency\" #frequency=\"ngModel\" required>\n                <mat-option *ngFor=\"let freq of tsFrequencies\" [value]=\"freq\">{{\n                  freq\n                  }}</mat-option>\n              </mat-select>\n              <mat-error *ngIf=\"frequency.invalid || frequency.touched\">Frequency is required.</mat-error>\n            </mat-form-field>\n            <!-- SELECT -->\n            <mat-form-field class=\"w-25 mt-2 ml-4\" appearance=\"outline\">\n              <mat-label>Select graph type</mat-label>\n              <mat-select [(ngModel)]=\"selectedGraphType\" #graphType=\"ngModel\" required>\n                <mat-option *ngFor=\"let type of componentGraphTypes\" [value]=\"type\">{{\n                  type | titlecase\n                  }}</mat-option>\n              </mat-select>\n              <mat-error *ngIf=\"graphType.invalid || graphType.touched\">Graph type is required.</mat-error>\n            </mat-form-field>\n            <!-- BUTTON (show plot)-->\n            <button class=\"show-plot-btn ml-4\"\n              [disabled]=\"!visualizationModel || !selectedFrequency || !selectedGraphType\" type=\"button\"\n              mat-stroked-button (click)=\"visualizeComponents()\">\n              Show Plot\n            </button>\n          </div>\n          <!-- TABS (plot) -->\n          <mat-tab-group *ngIf=\"showTSTabs\" class=\"mx-2 my-3\" [selectedIndex]=\"selectedTabIndex\" dynamicHeight\n            mat-align-tabs=\"start\">\n            <mat-tab *ngFor=\"let tab of componentsTabs\" [label]=\"tab | titlecase\">\n              <div id=\"{{ tab }}\"></div>\n            </mat-tab>\n          </mat-tab-group>\n        </mat-tab>\n        <!-- Stationary test -->\n        <mat-tab *ngIf=\"project.type === 'timeseries'\" [disabled]=\"\n            appType === 'saas' &&\n            !user?.roles?.includes('super_admin') &&\n            !user?.roles?.includes('admin') &&\n            !allowedTrainingAdvanceOptions.includes('stationarityTest')\n          \">\n          <!-- TAB LABEL -->\n          <ng-template mat-tab-label>\n            <mat-label matBadge [matBadgeIcon]=\"\n                allowedTrainingAdvanceOptions.includes('stationarityTest') ? '' : 'PRO'\n              \" matBadgeOverlap=\"false\" [ngClass]=\"\n                appType === 'enterprise' ||\n                (appType === 'saas' &&\n                  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) ||\n                allowedTrainingAdvanceOptions.includes('stationarityTest')\n                  ? ''\n                  : 'disable-Btn'\n              \" [matTooltip]=\"_utils.getTootip('stationarityTest')\">Stationarity Test</mat-label>\n          </ng-template>\n          <div class=\"row mx-3 my-4\">\n            <div class=\"col-md-4\">\n              <!-- RADIO (augmented) -->\n              <mat-radio-group class=\"d-flex\" [(ngModel)]=\"stationarityTestMethod\">\n                <mat-radio-button value=\"adf\" [matTooltip]=\"_utils.getTootip('stationarityTest')\">Augmented\n                  Dickey-Fuller Test</mat-radio-button>\n              </mat-radio-group>\n              <!-- BUTTON (perform test)-->\n              <button class=\"mt-3\" [disabled]=\"!stationarityTestMethod\" type=\"button\" mat-stroked-button\n                (click)=\"doSationarityTest()\">\n                Perform Test\n              </button>\n            </div>\n            <!-- RADIO (make data stationary) -->\n            <div *ngIf=\"stationaryTestData.length\" class=\"col-md-8 pl-4 border-left\">\n              <label id=\"make-stationary\">Make Data Stationary</label>\n              <mat-radio-group class=\"d-flex mt-2\" aria-labelledby=\"make-stationary\" [(ngModel)]=\"stationarityMethod\">\n                <mat-radio-button class=\"ml-3\" value=\"none\">None</mat-radio-button>\n                <mat-radio-button class=\"ml-3\" value=\"differencing\" [matTooltip]=\"_utils.getTootip('differencing')\">\n                  Differencing</mat-radio-button>\n                <mat-radio-button class=\"ml-3\" value=\"log_transformation\"\n                  [matTooltip]=\"_utils.getTootip('log_transform')\">Log Transformation</mat-radio-button>\n                <mat-radio-button class=\"ml-3\" value=\"differencing_with_log_transformation\"\n                  [matTooltip]=\"_utils.getTootip('differencing_with_log_transformation')\">Differencing With Log\n                  Transformation</mat-radio-button>\n              </mat-radio-group>\n              <!-- SELECT -->\n              <div class=\"d-flex my-4 mx-3\" *ngIf=\"stationarityMethod !== 'none'\">\n                <div class=\"mr-4\" *ngIf=\"\n                    stationarityMethod === 'differencing' ||\n                    stationarityMethod === 'differencing_with_log_transformation'\n                  \">\n                  <mat-form-field appearance=\"outline\">\n                    <mat-label>Select period</mat-label>\n                    <mat-select [(ngModel)]=\"period\">\n                      <mat-option *ngFor=\"let val of periodFreq\" [value]=\"val\">{{\n                        val\n                        }}</mat-option>\n                    </mat-select>\n                  </mat-form-field>\n                </div>\n                <div *ngIf=\"\n                    stationarityMethod === 'log_transformation' ||\n                    stationarityMethod === 'differencing_with_log_transformation'\n                  \">\n                  <mat-form-field appearance=\"outline\">\n                    <mat-label>Select scalar</mat-label>\n                    <mat-select [(ngModel)]=\"scalar\">\n                      <mat-option *ngFor=\"let freq of tsFrequencies\" [value]=\"freq\">{{\n                        freq\n                        }}</mat-option>\n                    </mat-select>\n                  </mat-form-field>\n                </div>\n              </div>\n            </div>\n          </div>\n          <!-- TABLE (staionarity) -->\n          <div [hidden]=\"!stationaryTestData.length\" class=\"mx-2\">\n            <!-- Search bar -->\n            <mat-form-field class=\"search-input\">\n              <mat-label>Search</mat-label>\n              <input matInput (keyup)=\"applyFilter($event, 'stationarity')\" #input />\n            </mat-form-field>\n            <table #stationarySort=\"matSort\" mat-table [dataSource]=\"stationaryDataSource\" matSort\n              matSortActive=\"colName\" matSortDirection=\"asc\" matSortDisableClear>\n              <!-- feature name column -->\n              <ng-container matColumnDef=\"featureName\">\n                <th mat-header-cell *matHeaderCellDef mat-sort-header>Feature Name</th>\n                <td mat-cell *matCellDef=\"let row\">\n                  {{ row.colName }}\n                </td>\n              </ng-container>\n              <!-- stationary column -->\n              <ng-container matColumnDef=\"stationarity\">\n                <th mat-header-cell *matHeaderCellDef mat-sort-header>Stationarity</th>\n                <td mat-cell *matCellDef=\"let row\">\n                  {{ row.stationarity }}\n                </td>\n              </ng-container>\n\n              <tr mat-header-row *matHeaderRowDef=\"stationaryDisplayedColumns\"></tr>\n              <tr mat-row *matRowDef=\"let row; columns: stationaryDisplayedColumns\"></tr>\n\n              <!-- Row shown when there is no matching data -->\n              <tr class=\"mat-row\" *matNoDataRow>\n                <td class=\"mat-cell\" colspan=\"4\">\n                  No data matching the filter \"{{ input.value }}\"\n                </td>\n              </tr>\n            </table>\n            <!-- Paginator -->\n            <mat-paginator #stationaryPaginator [pageSizeOptions]=\"pageSizeOptions\"></mat-paginator>\n          </div>\n        </mat-tab>\n        <!-- Resampling -->\n        <!-- <mat-tab *ngIf=\"project.type === 'timeseries'\" [disabled]=\"\n            appType === 'saas' &&\n            !user?.roles?.includes('super_admin') &&\n            !user?.roles?.includes('admin') &&\n            !allowedTrainingAdvanceOptions.includes('resampling')\n          \">\n          <!-- TAB LABEL -->\n        <!-- <ng-template mat-tab-label>\n            <mat-label matBadge [matBadgeIcon]=\"allowedTrainingAdvanceOptions.includes('resampling') ? '' : 'PRO'\"\n              matBadgeOverlap=\"false\" [ngClass]=\"\n                appType === 'enterprise' ||\n                (appType === 'saas' &&\n                  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) ||\n                allowedTrainingAdvanceOptions.includes('resampling')\n                  ? ''\n                  : 'disable-Btn'\n              \" [matTooltip]=\"_utils.getTootip('resampling')\">Resampling</mat-label>\n          </ng-template>\n          <div class=\"mx-2 my-3\"> -->\n        <!-- SELECT -->\n        <!-- <mat-form-field class=\"w-25 mr-4\" appearance=\"outline\">\n              <mat-label>Select resampling frequency</mat-label>\n              <mat-select [(ngModel)]=\"resamplingMethod\" [disabled]=\"!resamplingConstants.length\">\n                <mat-option *ngFor=\"let const of resamplingConstants\" [value]=\"const.value\">\n                  {{ const.desc }}\n                </mat-option>\n              </mat-select>\n            </mat-form-field> -->\n        <!-- SELECT -->\n        <!-- <mat-form-field *ngIf=\"resamplingMethod\" class=\"w-25\" appearance=\"outline\">\n              <mat-label>Select method</mat-label>\n              <mat-select [(ngModel)]=\"aggregationFunction\">\n                <mat-option *ngFor=\"let const of methodConstants\" [value]=\"const.value\">\n                  {{ const.desc }}\n                </mat-option>\n              </mat-select>\n            </mat-form-field>\n          </div>\n        </mat-tab> -->\n        <!-- Auto correlation -->\n        <mat-tab *ngIf=\"project.type === 'timeseries'\" [disabled]=\"\n            appType === 'saas' &&\n            !user?.roles?.includes('super_admin') &&\n            !user?.roles?.includes('admin') &&\n            !allowedTrainingAdvanceOptions.includes('autoCorrelation')\n          \">\n          <!-- TAB LABEL -->\n          <ng-template mat-tab-label>\n            <mat-label matBadge [matBadgeIcon]=\"\n                allowedTrainingAdvanceOptions.includes('autoCorrelation') ? '' : 'PRO'\n              \" matBadgeOverlap=\"false\" [ngClass]=\"\n                appType === 'enterprise' ||\n                (appType === 'saas' &&\n                  (user?.roles?.includes('super_admin') || user?.roles?.includes('admin'))) ||\n                allowedTrainingAdvanceOptions.includes('autoCorrelation')\n                  ? ''\n                  : 'disable-Btn'\n              \" [matTooltip]=\"_utils.getTootip('autoCorrelation')\">Auto Correlation</mat-label>\n          </ng-template>\n          <div class=\"m-3\">\n            <!-- RADIO -->\n            <label id=\"pacf\">Select PACF method</label>\n            <mat-radio-group aria-labelledby=\"pacf\" class=\"d-flex mt-2\" [(ngModel)]=\"pacfMethod\">\n              <mat-radio-button class=\"ml-3\" value=\"ywadjusted\" [matTooltip]=\"_utils.getTootip('ywunbiased')\">ywadjusted\n              </mat-radio-button>\n              <mat-radio-button class=\"ml-3\" value=\"ywmle\" [matTooltip]=\"_utils.getTootip('ywmle')\">ywmle\n              </mat-radio-button>\n              <mat-radio-button class=\"ml-3\" value=\"ols\" [matTooltip]=\"_utils.getTootip('ols')\">ols</mat-radio-button>\n            </mat-radio-group>\n            <br />\n            <!-- SLIDER -->\n            <h5 class=\"mt-3\">\n              <label>Number of Lags: {{ nlags }} </label>\n              <br />\n              <mat-slider thumbLabel class=\"w-25\" color=\"primary\" min=\"5\" max=\"100\" step=\"5\" [(ngModel)]=\"nlags\">\n              </mat-slider>\n            </h5>\n            <br />\n            <!-- BUTTON (perform test)-->\n            <button type=\"button\" mat-stroked-button (click)=\"getAutoCorrelation()\">\n              Get Correlation\n            </button>\n            <!-- PLOT -->\n            <div id=\"autoCorrelationGraph\"></div>\n          </div>\n        </mat-tab>\n      </mat-tab-group>\n    </mat-card-content>\n  </mat-card>\n\n  <!-- FEATURE TABLE -->\n  <mat-card *ngIf=\"tableData && (algorithmControl?.value?.length || dataSetControl?.value)\"\n    [hidden]=\"!showTrainingTable\" class=\"heading mt-5\">\n    <mat-card-header>\n      <div mat-card-avatar>\n        <mat-icon class=\"folder-icon\">table_chart</mat-icon>\n      </div>\n      <mat-card-title>Features</mat-card-title>\n    </mat-card-header>\n    <mat-card-content class=\"mt-4\">\n      <!-- Search bar -->\n      <mat-form-field class=\"search-input\">\n        <mat-label>Search</mat-label>\n        <input matInput (keyup)=\"applyFilter($event, 'feature')\" #input />\n      </mat-form-field>\n      <!-- Feature table -->\n      <div>\n        <table #featureSort=\"matSort\" mat-table [dataSource]=\"featureDataSource\" matSort matSortActive=\"colName\"\n          matSortDirection=\"asc\" matSortDisableClear>\n          <ng-container [matColumnDef]=\"col\" *ngFor=\"let col of displayedColumns\">\n            <th mat-header-cell *matHeaderCellDef mat-sort-header [disabled]=\"col === 'select'\">\n              {{ generateProperColNames(col) }}\n              <!-- checkbox on header -->\n              <mat-checkbox *ngIf=\"col == 'select'\" (change)=\"$event ? masterToggle() : null\"\n                [checked]=\"selection.hasValue() && isAllSelected()\"\n                [indeterminate]=\"selection.hasValue() && !isAllSelected()\">\n              </mat-checkbox>\n            </th>\n\n            <!-- checkbox column -->\n            <ng-container *ngIf=\"col === 'select'\">\n              <td mat-cell *matCellDef=\"let element\">\n                <mat-checkbox (click)=\"$event.stopPropagation()\"\n                  (change)=\"$event ? selection.toggle(element) : null; propagationMethod(element)\"\n                  [checked]=\"selection.isSelected(element)\" [disabled]=\"element?.isTargetVariable\">\n                </mat-checkbox>\n              </td>\n            </ng-container>\n\n            <!-- Independent feature column -->\n            <ng-container *ngIf=\"col === 'colName'\">\n              <td mat-cell *matCellDef=\"let element\">{{ element.colName }}</td>\n            </ng-container>\n\n            <!-- Categorical/Date column -->\n            <ng-container *ngIf=\"col === 'categoricalDateOperation'\">\n              <td mat-cell *matCellDef=\"let element; let i = index\">\n                <!-- categorical -->\n                <mat-form-field *ngIf=\"element.dataType === 'Categorical'\" class=\"custom-dropdown\" appearance=\"outline\">\n                  <mat-label>Select strategy</mat-label>\n                  <mat-select [(ngModel)]=\"element.encoder\" (selectionChange)=\"\n                      onChangeCatEncoding(element.encoder, element.colName, element)\n                    \">\n                    <!-- Options without (OneHot encoder) -->\n                    <div *ngIf=\"element.highCardinalityFeature\">\n                      <mat-option *ngFor=\"\n                          let encoderType of categoricalEncoders.splice(\n                            categoricalEncoders.indexOf('OneHot encoder'),\n                            1\n                          )\n                        \" [value]=\"encoderType\">\n                        {{ encoderType }}\n                      </mat-option>\n                    </div>\n                    <!-- Options with (OneHot encoder) -->\n                    <div *ngIf=\"!element.highCardinalityFeature\">\n                      <mat-option *ngFor=\"let encoderType of categoricalEncoders\" [value]=\"encoderType\">\n                        {{ encoderType }}\n                      </mat-option>\n                    </div>\n                  </mat-select>\n                </mat-form-field>\n                <!-- date/time -->\n                <mat-form-field *ngIf=\"element.dataType === 'Datetime'\" class=\"custom-dropdown\" appearance=\"outline\">\n                  <mat-label>Select strategy</mat-label>\n                  <mat-select [(ngModel)]=\"element.dateComponent\" (selectionChange)=\"\n                      onChangeCatEncoding(element.encoder, element.colName, element)\n                    \" multiple>\n                    <mat-option *ngFor=\"let opt of element.dateComponentList\" [value]=\"opt\">\n                      {{ opt }}\n                    </mat-option>\n                  </mat-select>\n                </mat-form-field>\n              </td>\n            </ng-container>\n\n            <!-- Is important column -->\n            <ng-container *ngIf=\"col === 'isImportant'\">\n              <td mat-cell *matCellDef=\"let element\">\n                <mat-icon [style.color]=\"element.isSelected ? 'green' : 'red'\" [matTooltip]=\"\n                    element.isSelected\n                      ? 'This feature is ideal for model building.'\n                      : 'This feature is not ideal for model building.'\n                  \">{{ element.isSelected ? 'task_alt' : 'highlight_off' }}</mat-icon>\n              </td>\n            </ng-container>\n\n            <!-- Feature score column -->\n            <ng-container *ngIf=\"col === 'score'\">\n              <td mat-cell *matCellDef=\"let element\">{{ element.score | number: '0.0-2' }}</td>\n            </ng-container>\n          </ng-container>\n\n          <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n          <tr mat-row *matRowDef=\"let row; columns: displayedColumns\"></tr>\n\n          <!-- Row shown when there is no matching data -->\n          <tr class=\"mat-row\" *matNoDataRow>\n            <td class=\"mat-cell\" colspan=\"4\">No data matching the filter \"{{ input.value }}\"</td>\n          </tr>\n        </table>\n        <!-- Paginator -->\n        <mat-paginator #featurePaginator [pageSizeOptions]=\"pageSizeOptions\"></mat-paginator>\n      </div>\n    </mat-card-content>\n  </mat-card>\n\n  <!-- Sticky button (start training) -->\n  <div *ngIf=\"algorithmControl?.value?.length\" class=\"sticky-button\">\n    <button mat-raised-button class=\"btn-primary start-training-btn\" type=\"submit\" (click)=\"trainingHandler()\">\n      <mat-icon>bolt</mat-icon> Start Training\n    </button>\n  </div>\n</div>","import { HttpErrorResponse } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { TrainingService } from './training.service';\nimport { ChangeDetectorRef, Component, OnInit, ViewChild } from '@angular/core';\nimport { FormControl, FormGroup, Validators, FormBuilder } from '@angular/forms';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { SocketIoService } from 'src/app/core/socket-io.service';\nimport { LocalStorageService } from 'src/app/shared/local-storage.service';\nimport { SpinnerService } from 'src/app/shared/spinner.service';\nimport { DataService } from '../data/data.service';\nimport { TextAnalysisService } from '../text-analysis/text-analysis.service';\nimport { MatSnackBar, MatSnackBarRef } from '@angular/material/snack-bar';\nimport {\n  FREQUENCIES,\n  METHOD_CONSTANTS,\n  NLP_FEATURE_COUNTS,\n  NLP_LANGUAGES,\n  RESAMPLING_CONSTANTS,\n} from 'src/assets/data/timeseries-nlp';\nimport { DialogHandlerComponent } from '../training/dialog-handler/dialog-handler.component';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { UtilsService } from 'src/app/shared/utils.service';\nimport { ColorsService } from '../../shared/colors/colors.service';\nimport { environment } from 'src/environments/environment';\nconst Plotly = require('plotly.js-dist');\n@Component({\n  selector: 'app-training',\n  templateUrl: './training.component.html',\n  styleUrls: ['./training.component.scss'],\n})\nexport class TrainingComponent implements OnInit {\n  sparkOptions1 = {\n    barColor: '#fff',\n    height: 65,\n    width: '100%',\n    barSpacing: 2,\n  };\n  /** Data table setting */\n  featureDataSource: MatTableDataSource<[]> = new MatTableDataSource();\n  stationaryDataSource: MatTableDataSource<[]> = new MatTableDataSource();\n  targetDetails: any;\n  targetDistribution: any;\n  targetLength: any;\n  @ViewChild('featurePaginator') set featurePaginator(value: MatPaginator) {\n    this.featureDataSource.paginator = value;\n  }\n  @ViewChild('featureSort') set featureSort(value: MatSort) {\n    this.featureDataSource.sort = value;\n  }\n  // @ViewChild('featurePaginator') featurePaginator: MatPaginator;\n  @ViewChild('stationaryPaginator') stationaryPaginator: MatPaginator;\n\n  //@ViewChild('featureSort') featureSort: MatSort;\n  @ViewChild('stationarySort') stationarySort: MatSort;\n\n  displayedColumns: Array<string> = [];\n  stationaryDisplayedColumns: Array<any> = [];\n\n  pageSizeOptions: Array<number> = [10, 15, 20];\n\n  /** Multi selection angular cdk instance */\n  selection = new SelectionModel<any>(true, []);\n\n  /** Usubscription subject */\n  unsubscribe$ = new Subject<boolean>();\n\n  /** Training input form cotrol instances */\n  dataSetControl = new FormControl('', Validators.required);\n  //targetControl = new FormControl('', Validators.required);\n  algorithmControl = new FormControl('', Validators.required);\n\n  /** Auto feature generation variables with default values */\n  pairwiseLinearOption: string = 'addition';\n  pairwisePolynomialOption: string = 'multiply';\n  univariatePolynomialOption: string = 'power';\n  explicitPairWiseOption: Array<any> = [\n    {\n      operation: 'addition',\n      colName: [],\n      typeOfAutoFeatureGen: 'explicitPairwiseCombination',\n    },\n  ];\n  epwMethods: Array<any> = [\n    { name: 'Addition', value: 'addition' },\n    { name: 'Multiply', value: 'multiply' },\n    { name: 'Subtraction', value: 'subtraction' },\n    { name: 'Power', value: 'power' },\n  ];\n\n  /** Variables with default values */\n  decomposition: string = 'none';\n  normalizationMethod: string = 'none';\n  fsMethod: string = 'none';\n  stationarityMethod: string = 'none';\n  sampling: string = 'none';\n  backGround: string = '#ffffff';\n  foreGround: string = '#08509d';\n  pacfMethod: string = 'ywadjusted';\n  stationarityTestMethod: string = 'adf';\n  showClass: boolean = false;\n  estimatorRegAlgo: Array<string> = ['Random Forest Regression', 'Linear Regression'];\n  estimatorClassAlgo: Array<string> = ['Random Forest Classification', 'Logistic Regression'];\n  nGramOptions: Array<any> = [\n    { name: 'Unigram', value: 1 },\n    { name: 'Bigram', value: 2 },\n    { name: 'Trigram', value: 3 },\n    { name: 'Ngram', value: 1 },\n  ];\n  categoricalEncoders: Array<string> = [\n    'OneHot encoder',\n    'Ordinal encoder',\n    'Binary encoder',\n    'Hashing encoder',\n    'Target encoder',\n    'Leave one out encoder',\n  ];\n  dateOperations: Array<string> = [\n    'year',\n    'quarter',\n    'month_name',\n    'day',\n    'day_name',\n    'hour',\n    'minute',\n    'second',\n  ];\n  normalizationOptions: Array<any> = [\n    { name: 'None', value: 'none' },\n    { name: 'Min Max', value: 'minmax_scaler' },\n    { name: 'Quantile Transform', value: 'quantile_transform' },\n    { name: 'Power Transform', value: 'power_transform' },\n    { name: 'Log Transform', value: 'log_transform' },\n  ];\n  componentGraphTypes: Array<any> = ['trend', 'seasonal', 'residuals', 'observed'];\n  componentsTabs: Array<any> = [];\n  nlpLanguages = NLP_LANGUAGES;\n  nFeatureCounts = NLP_FEATURE_COUNTS;\n  methodConstants = METHOD_CONSTANTS;\n  tsFrequencies = FREQUENCIES;\n  showAdvanceOptions: boolean = false;\n  explicitPairwise: boolean = false;\n  isNlp: boolean = false;\n  correlationIsMultilabel: boolean = false;\n  showTSTabs: boolean = false;\n  testSize: number = 20;\n  scale: number = 1;\n  nFeaturesToSelect: number = 70;\n  timesteps: number = 60;\n  nlags: number = 40;\n  components: number = 2;\n  featurePercentage: number = 70;\n  uploadFileSize: number = 500;\n  kfold: number = 10;\n  deafultTestSize: number = 20;\n  clusters: number = 2;\n  agglomerativeCluster: number = 2;\n  selectedTabIndex: any = 0;\n  period: number = 1;\n  scalar: number = 1;\n  // ! Has multiple data type value (string & number)\n  featureStep: any = 10;\n  nSteps = 1;\n  cv: any = 1;\n  project: any;\n  user: any;\n  dataSetsList: Array<any> = [];\n  prevTrainingInfo: Array<any> = [];\n  nlpConfigs: Array<any> = [];\n  selectedDataSet: any;\n  catEnc: any = {};\n  edaData: any;\n  childFileData: any;\n  featureList: Array<any> = [];\n  targetList: any;\n  isMultilabel: boolean;\n  modelAlgorithmArray: Array<any> = [];\n  targetVarDetails: any;\n  indepVariables: Array<any> = [];\n  dateComponent: any = {};\n  selectAll: boolean;\n  showTrainingTable: boolean;\n  selected: Array<any> = [];\n  nlpDefaultConfigData: any = {};\n  showNgramSlider: boolean;\n  feature: string;\n  tempfeat: any = {};\n  showAdvancedOptions: boolean;\n  pcaFeatures: any[];\n  clusterPcaFeatures: any[];\n  split: boolean;\n  pairwiseLinear: boolean;\n  pairwisePolynomial: boolean;\n  univariatePolynomial: boolean;\n  autoFeatureGenTasks: Array<any> = [];\n  featuresToTransform: Array<any> = [];\n  fdropMethod: string;\n  samplingData: any = {};\n  tempSelected: Array<any> = [];\n  isImbalanced: any;\n  classNames: any;\n  algoType: any;\n  dateColumnSelected: any;\n  preprocessedFilepath: any;\n  stationaryMethod: any;\n  featureScalingOption: string;\n  exogVariable: any;\n  methodSelected: any;\n  scoringFunction: any;\n  customFeatureChecked: any;\n  customFeatures: any;\n  estimator: any;\n  estimatorAlgo: any;\n  showlog: boolean;\n  showscalar: boolean;\n  showButton: boolean;\n  exponent: any;\n  delimiter: any;\n  featureSplitCount: any;\n  tempFeatures: Array<any> = [];\n  tableData: Array<any> = [];\n  textOrCategoricalFeatures: Array<any> = [];\n  ordinalEncMap: Array<any> = [];\n  numericFeatures: any;\n  algorithm: number;\n  snackBarRef: MatSnackBarRef<any>;\n  scoringFunctionArray: Array<any> = [];\n  scaleValue: any;\n  hptPreference: Array<any> = [];\n  samplingdat: Array<any> = [];\n  tempFeature: string;\n  visualizationModel: string;\n  selectedFrequency: number;\n  selectedGraphType: string;\n  stationaryTestData: Array<any> = [];\n  periodFreq: Array<any> = [];\n  extFeatures: any[];\n  targetInfo: any[];\n  isTargetChanged: Boolean = false;\n  applyToTarget: boolean = false;\n  // restriction variables\n  allowedTrainingAdvanceOptions: Array<any> = null;\n  appType: string = environment.appType;\n  algoCount: number = null;\n  ALGORITHMS_ARRAY: Array<any>;\n  unsupportedAlgo: any[];\n  featureTemp: any;\n  maxnStep: number;\n  constructor(\n    private _spinner: SpinnerService,\n    private _localStorage: LocalStorageService,\n    private _toaster: ToastrService,\n    private _data: DataService,\n    private _dialog: MatDialog,\n    private _socket: SocketIoService,\n    private _textAnalysis: TextAnalysisService,\n    private _training: TrainingService,\n    private _router: Router,\n    private _snackBar: MatSnackBar,\n    private _fb: FormBuilder,\n    public _utils: UtilsService,\n    private _cdr: ChangeDetectorRef,\n    public colors: ColorsService\n  ) { }\n\n  /**\n   * Initializes all the required data for this page\n   */\n  async ngOnInit(): Promise<any> {\n    this._spinner.showSpinner();\n    this.initSocket();\n    this.ALGORITHMS_ARRAY = await this._utils.getAlgorithms();\n    this.project = this._localStorage.getItem('project');\n    this.user = this._localStorage.getItem('user');\n    // setting the allowed advance options to the array.\n    this.allowedTrainingAdvanceOptions = this.user?.psFeatures?.allowedFeaturesList || [];\n    this.algoCount = this.user?.psFeatures?.trainingAlgoCount;\n    this.project.type === 'clustering'\n      ? (this.featureScalingOption = 'standard_scaler')\n      : (this.featureScalingOption = 'none');\n\n    this.displayedColumns = ['select', 'colName', 'categoricalDateOperation'];\n    this.stationaryDisplayedColumns = ['featureName', 'stationarity'];\n    this.getAllFiles();\n    // this.getPreviousTraining();\n    this.selectedFrequency = this.algorithmControl.value.includes('Prophet') ? 12 : 1;\n    this.periodFreq = this.generateNumericArray(10);\n  }\n\n  ngAfterViewInit(): void {\n    this._cdr.detectChanges();\n  }\n  /**\n   * Fetches all the files\n   * @param projectId\n   */\n  getAllFiles(): void {\n    this._data\n      .getAllProjectDatas(this.project._id, 'dataset_with_eda')\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res) => {\n          if (res) {\n            this.dataSetsList = res;\n            this.getPreviousTraining();\n          } else {\n            this._toaster.error('Cannot fetch files list', 'Train Model');\n          }\n          this._spinner.stopSpinner();\n        },\n        (err) => {\n          this._spinner.stopSpinner();\n          this._toaster.error('Server Error', 'Train Model');\n        }\n      );\n  }\n\n  /**\n   * Fetches the previous training details\n   * @param projectId\n   */\n  getPreviousTraining(): void {\n    this._training\n      .getPreviousTrainingDetails(this.project._id, true)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res) => {\n          this.prevTrainingInfo = res;\n          // Check conditions with localstorage trainings\n          if (this.prevTrainingInfo[0]) {\n            this.catEnc = this.prevTrainingInfo[0].categoricalEncoders || {};\n            this.algorithmControl.setValue(this.prevTrainingInfo[0].algorithms);\n          }\n          if (res.length) {\n            if (this.project.type === 'timeseries') {\n              this.indepVariables = this.prevTrainingInfo[0].timeseriesInfo.exogVariables;\n            } else {\n              this.indepVariables = this.prevTrainingInfo[0].indepVariable;\n            }\n            this.edaData = res[0].edaId;\n            this.dataSetControl.setValue(this.prevTrainingInfo[0].originalFileId);\n            this.dataSetControl.updateValueAndValidity();\n            this.targetVarDetails = this.edaData.edaSummary.find(\n              (feature: any) => this.prevTrainingInfo[0].depVariable === feature.colName\n            );\n            this.maxnStep = this.edaData.lenLongGrp;\n            this._spinner.stopSpinner();\n            this.onChangeDataset(this.prevTrainingInfo[0].originalFileId, 'fc');\n          }\n          this._spinner.stopSpinner();\n        },\n        (err) => {\n          this._spinner.stopSpinner();\n          this._toaster.error('Server Error', 'Train Model');\n        }\n      );\n  }\n\n  /**\n   * Called when the data set is changed\n   * @param dataSetId\n   * @param type\n   */\n  onChangeDataset(dataSetId: any, type?: string): void {\n    this._spinner.showSpinner();\n    this.tableData = [];\n    this.featureDataSource ? (this.featureDataSource.data = []) : null;\n    this.showAdvanceOptions = false;\n    this.feature = '';\n    this.featureList = [];\n    this.tempfeat = [];\n    this.fsMethod = 'none';\n    this.stationarityMethod = 'none';\n    this.fdropMethod = '';\n    this.normalizationMethod = 'none';\n    this.featureScalingOption = 'none';\n    this.sampling = 'none';\n    this.samplingData = {};\n    this.tempSelected = [];\n    this.featuresToTransform = [];\n    this.dateComponent = {};\n    this.targetList = [];\n    this.applyToTarget = false;\n    this.autoFeatureGenTasks = [];\n    this.univariatePolynomial = false;\n    this.pairwisePolynomial = false;\n    this.pairwiseLinear = false;\n    this.split = false;\n    this.components = 2;\n    this.agglomerativeCluster = 2;\n    this.clusters = 2;\n    this.pcaFeatures = [];\n    this.clusterPcaFeatures = [];\n    this.decomposition = 'none';\n    this.showAdvancedOptions = false;\n    this.showlog = false;\n    this.scale = 1;\n    this.nlpConfigs = [];\n    this.nlpDefaultConfigData = {};\n    this.selectedDataSet = this.dataSetsList.find((data) => data._id === dataSetId);\n    if (\n      this.selectedDataSet &&\n      this.prevTrainingInfo[0]?.metaInfo?.fileName !==\n      (this.selectedDataSet.name || this.selectedDataSet.filename)\n    ) {\n      this.catEnc = {};\n    }\n    this.generateScoringFunctionArray();\n    // API call\n    this._data\n      .getAllChildDatasets(this.project._id, dataSetId)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        async (resp) => {\n          let taFeaturesToExclude = [];\n          let taFeatureConfig: any;\n          let taExperiment: any;\n          this.childFileData = resp[0];\n          this.edaData = resp[0].currentEdaId;\n          this.algoType = this.edaData.algoType;\n          this.isMultilabel = this.edaData.isMultilabel;\n          if (this.prevTrainingInfo.length) {\n            this.tempfeat = {};\n            let test: Array<any> = [];\n            let result: Array<any> = [];\n            let temp = this.prevTrainingInfo[0].edaId.edaSummary;\n            let filterFeatures = temp.filter((feature: any) => {\n              if (\n                !feature.constantFeature &&\n                !feature.highCardinalityFeature &&\n                !feature.mostlyMissing &&\n                feature.colName !== this.prevTrainingInfo[0].depVariable &&\n                (feature.dataType === 'Decimal' ||\n                  feature.dataType === 'Integer' ||\n                  feature.dataType === 'Numeric')\n              ) {\n                return feature;\n              }\n            });\n            filterFeatures.forEach((item) => {\n              test.push({ colName: item.colName });\n            });\n            result = test.filter((o1) => {\n              return !this.tempSelected.some((o2) => o1.colName === o2.colName);\n            });\n            this.tempfeat = result.map((feature) => feature.colName);\n            // Filter the timeseriesIds from features list\n            if (this.project.type === 'timeseries' && this.edaData.isMultipleTimeseries) {\n              this.tempfeat = this.tempfeat.filter((i: any) =>\n                !this.edaData.timeseriesIds.includes(i) ? i : null\n              );\n            }\n            this.isTargetChanged =\n              this.project.type != 'clustering' &&\n                this.selectedDataSet.filename == this.prevTrainingInfo[0].metaInfo.fileName &&\n                this.edaData.depVariable !== this.prevTrainingInfo[0].depVariable\n                ? true\n                : false;\n          }\n          if (this.project.type == 'timeseries') {\n            this.getModelAlgorithms('timeseries', false);\n            this.maxnStep = this.edaData.lenLongGrp;\n          } else if (this.project.type == 'clustering') {\n            this.getModelAlgorithms('clustering', false);\n          } else {\n            this.getModelAlgorithms(this.edaData.algoType, this.edaData.isMultilabel);\n          }\n\n          // If experiment id is present for the selected file, fetch the details\n          if (this.selectedDataSet?.taExperimentId) {\n            this._textAnalysis\n              .taExperiment(this.selectedDataSet.taExperimentId)\n              .pipe(takeUntil(this.unsubscribe$))\n              .subscribe(\n                (res) => {\n                  res ? (taExperiment = res) : (taExperiment = null);\n                },\n                (err) => {\n                  this._spinner.stopSpinner();\n                }\n              );\n          }\n          taFeatureConfig = (await taExperiment?.taFeatureConfig) || [];\n          // If taFeatureConfig is present, needs to exclude those features from target list\n          if (taFeatureConfig?.length) {\n            taFeaturesToExclude = taFeatureConfig.filter((item: any) => item.newFeature).flat();\n          }\n          if (this.edaData.isHighDimensional) {\n            this.decomposition = 'pca';\n          }\n          this.edaData.edaSummary.forEach((data: any) => {\n            if (data.dataType === 'Text') {\n              this.featureList.push(data.colName);\n            }\n          });\n          this.setNlpFeatureDefaults();\n          if (this.project.type === 'predictive_modeling') {\n            this.buildTrainingTable(\n              this.edaData.edaSummary,\n              this.project.type,\n              'without_feature_score'\n            );\n          }\n          this.pcaFeatures = this.edaData.edaSummary.filter(\n            (feature: any) =>\n              feature.colName !== this.edaData.depVariable &&\n              feature.dataType !== 'Unstructured' &&\n              !feature.constantFeature &&\n              !feature.mostlyMissing\n          );\n          this.clusterPcaFeatures = this.edaData.edaSummary.filter(\n            (feature: any) => !feature.constantFeature && !feature.mostlyMissing\n          );\n          this.explicitPairWiseOption = [\n            {\n              operation: 'addition',\n              colName: [],\n              typeOfAutoFeatureGen: 'explicitPairwiseCombination',\n            },\n          ];\n          if (type === 'fc') {\n            // Clustring does not have any target columns, so call the setData to set all the previous datas.\n            if (this.project.type === 'clustering') {\n              this.getModelAlgorithms('clustering', this.isMultilabel);\n              this.onClusteringAlgoChange();\n              this.prevTrainingInfo[0] ? this.setModelData() : null;\n            } else if (this.project.type === 'timeseries') {\n              let target = this.targetList.find(\n                (data: any) => data.colName === this.targetVarDetails.colName\n              );\n              this.explicitPairWiseOption = [\n                {\n                  operation: 'addition',\n                  colName: [],\n                  typeOfAutoFeatureGen: 'explicitPairwiseCombination',\n                },\n              ];\n              this.onTsAlgoChange();\n            } else {\n              let target = this.targetList.find(\n                (data: any) => data.colName === this.targetVarDetails.colName\n              );\n            }\n            this.setModelData();\n            if (\n              this.prevTrainingInfo[0] &&\n              this.prevTrainingInfo[0].predictiveModelingInfo?.hasOwnProperty('featureScores')\n            ) {\n              let tempEdaData: Array<any> = [];\n              let edaSummary: Array<any> = [];\n              this.showTrainingTable = false;\n              tempEdaData = [...this.edaData.edaSummary];\n              edaSummary = tempEdaData.map((data) => {\n                let item = this.prevTrainingInfo[0].predictiveModelingInfo.featureScores.find(\n                  (item: any) => item.colName === data.colName\n                );\n                if (item) {\n                  data.isSelected = item.isSelected;\n                  data.score = item.score;\n                }\n                return data;\n              });\n              this.buildTrainingTable(\n                this.edaData.edaSummary,\n                this.project.type,\n                'with_feature_score'\n              );\n            }\n            if (this.isTargetChanged) {\n              this.algorithmControl.reset();\n              this.algorithmControl.updateValueAndValidity();\n            }\n          } else {\n            this.algorithmControl.setValue('');\n            this.algorithmControl.updateValueAndValidity();\n            this.showTrainingTable = false;\n            this.selected = [];\n            this.indepVariables.length = 0;\n          }\n          if (this.project.type !== 'clustering') {\n            this.onTargetChange();\n          }\n          // this.featureTransform();\n          this._spinner.stopSpinner();\n        },\n        (err) => {\n          this._spinner.stopSpinner();\n          this._toaster.error('Server Error', 'Training');\n        }\n      );\n  }\n\n  /**\n   * Called when the target is changed\n   * @param event\n   * @param target\n   */\n  onTargetChange(): void {\n    let targetFeature = this.edaData.edaSummary.filter((item) => {\n      return item.colName == this.edaData.depVariable;\n    });\n    let reqObj: any = {\n      afterEdaDataFilePath: this.selectedDataSet.filename,\n      depVariable: this.edaData.depVariable,\n      dependentFeaturetype: targetFeature[0].dataType,\n    };\n    // API call\n    this._training\n      .getTargetDetails(this.selectedDataSet.projectId, reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res) => {\n          this.targetDetails = res.targetResponse;\n          this.showClass = res.targetResponse.classNames ? true : false;\n          this.targetDistribution = res.targetResponse.targetDistribution;\n          this.targetLength =\n            this.targetDistribution !== undefined\n              ? Object.getOwnPropertyNames(this.targetDistribution).length\n              : 0;\n        },\n        (err) => {\n          this._spinner.stopSpinner();\n          this._toaster.error('Something went wrong while fetching target details', 'Train Model');\n        }\n      );\n  }\n\n  /**\n   * Set model data before navigating to TrainModel page\n   */\n  setModelData(): void {\n    this.algorithmControl.setValue(this.prevTrainingInfo[0].algorithms);\n    this.algorithmControl.updateValueAndValidity();\n    this.nlpConfigs = this.prevTrainingInfo[0].nlpConfigs;\n    this.hptPreference = this.prevTrainingInfo[0].hptPreference !== undefined ? this.prevTrainingInfo[0].hptPreference : [];\n    this.generateScoringFunctionArray();\n    if (this.project.type === 'timeseries' && this.isTargetChanged === false) {\n      this.dateColumnSelected = this.prevTrainingInfo[0].dateColumnSelected;\n      this.preprocessedFilepath = this.prevTrainingInfo[0].preprocessedFilepath;\n      this.testSize = this.prevTrainingInfo[0].testSize || 20;\n      if (this.prevTrainingInfo[0].timeseriesInfo) {\n        // ! Unused variable\n        this.methodSelected = this.prevTrainingInfo[0].timeseriesInfo.method;\n        this.stationarityMethod = this.prevTrainingInfo[0].timeseriesInfo.stationaryMethod;\n        this.period = this.prevTrainingInfo[0].timeseriesInfo.period;\n        this.scalar = this.prevTrainingInfo[0].timeseriesInfo.scalar;\n        this.featureScalingOption = this.prevTrainingInfo[0].timeseriesInfo.featureScaling;\n        this.normalizationMethod = this.prevTrainingInfo[0].timeseriesInfo.normalizationMethod;\n      }\n      if (this.prevTrainingInfo[0].timeseriesInfo.stationaryMethod) {\n        this.stationaryTestData = this.prevTrainingInfo[0].timeseriesInfo.stationaryColumns;\n        this.stationaryDataSource = new MatTableDataSource(\n          this.prevTrainingInfo[0].timeseriesInfo.stationaryColumns\n        );\n        this.stationaryDataSource.paginator = this.stationaryPaginator;\n        this.stationaryDataSource.sort = this.stationarySort;\n      }\n      this.tempfeat = {};\n      let test: Array<any> = [];\n      let result: Array<any> = [];\n      let temp = this.prevTrainingInfo[0].edaId.edaSummary;\n      let colname = temp.filter((feature: any) => {\n        if (\n          !feature.constantFeature &&\n          !feature.highCardinalityFeature &&\n          !feature.mostlyMissing &&\n          feature.colName !== this.prevTrainingInfo[0].depVariable &&\n          (feature.dataType === 'Decimal' ||\n            feature.dataType === 'Integer' ||\n            feature.dataType === 'Numeric')\n        ) {\n          return feature;\n        }\n      });\n      colname.forEach((item) => {\n        test.push({ colName: item.colName });\n      });\n      result = test.filter((o1) => {\n        return this.indepVariables.some((o2) => o1.colName === o2.colName);\n      });\n      this.tempfeat = result.map((feature) => feature.colName);\n      // Filter the timeseriesIds from features list\n      if (this.edaData.isMultipleTimeseries) {\n        this.tempfeat = this.tempfeat.filter((i: any) =>\n          !this.edaData.timeseriesIds.includes(i) ? i : null\n        );\n      }\n      this.featureTemp = this.tempfeat;\n      this.featuresToTransform = this.prevTrainingInfo[0].timeseriesInfo.featuresToTransform;\n      this.ordinalEncMap = this.prevTrainingInfo[0].ordinalEncoderMap;\n      this.applyToTarget = this.prevTrainingInfo[0].timeseriesInfo.applyToTarget;\n      this.nSteps = this.prevTrainingInfo[0].nSteps;\n      if (\n        this.algorithmControl.value.includes('Sarimax') ||\n        this.algorithmControl.value.includes('Random Forest')\n      ) {\n        // ! Unused variable\n        this.exogVariable = this.prevTrainingInfo[0].timeseriesInfo.exogVariables;\n        this.tempSelected = this.prevTrainingInfo[0].timeseriesInfo.exogVariables;\n      }\n      this.onTsAlgoChange();\n    } else if (this.project.type === 'predictive_modeling' && this.isTargetChanged == false) {\n      this.tempSelected = [];\n      let algo = this.prevTrainingInfo[0].algoType;\n      if (algo === 'regression') {\n        this.estimatorAlgo = this.estimatorRegAlgo;\n      } else if (algo === 'classification') {\n        this.estimatorAlgo = this.estimatorClassAlgo;\n      }\n      this.indepVariables = this.prevTrainingInfo[0].indepVariable;\n      this.kfold = this.prevTrainingInfo[0].kFold;\n      this.testSize = this.prevTrainingInfo[0].testSize;\n      this.featureScalingOption = this.prevTrainingInfo[0].predictiveModelingInfo.featureScaling;\n      this.normalizationMethod =\n        this.prevTrainingInfo[0].predictiveModelingInfo.normalizationMethod;\n      this.sampling = this.prevTrainingInfo[0].sampling;\n      this.decomposition = this.prevTrainingInfo[0].predictiveModelingInfo.decomposition;\n      this.components = this.prevTrainingInfo[0].predictiveModelingInfo.components;\n      this.fsMethod = this.prevTrainingInfo[0].predictiveModelingInfo.featureSelectionMethod;\n      this.cv = this.prevTrainingInfo[0].predictiveModelingInfo.featureSelectionCV;\n      this.featureStep = this.prevTrainingInfo[0].predictiveModelingInfo.featureSelectionStep;\n      this.scoringFunction = this.prevTrainingInfo[0].predictiveModelingInfo.scoringFunction;\n      this.featurePercentage = this.prevTrainingInfo[0].predictiveModelingInfo.featurePercentage;\n      this.estimator = this.prevTrainingInfo[0].predictiveModelingInfo.featureSelectionEstimator;\n      this.tempfeat = {};\n      let test: Array<any> = [];\n      let result: Array<any> = [];\n      let temp = this.prevTrainingInfo[0].edaId.edaSummary;\n      let colname = temp.filter((feature: any) => {\n        if (\n          !feature.constantFeature &&\n          !feature.highCardinalityFeature &&\n          !feature.mostlyMissing &&\n          feature.colName !== this.prevTrainingInfo[0].depVariable &&\n          (feature.dataType === 'Decimal' ||\n            feature.dataType === 'Integer' ||\n            feature.dataType === 'Numeric')\n        ) {\n          return feature;\n        }\n      });\n      colname.forEach((item) => {\n        test.push({ colName: item.colName });\n      });\n      result = test.filter((o1) => {\n        return this.indepVariables.some((o2) => o1.colName === o2.colName);\n      });\n      this.tempfeat = result.map((feature) => feature.colName);\n      this.featureTemp = this.tempfeat;\n      this.featuresToTransform =\n        this.prevTrainingInfo[0].predictiveModelingInfo.featuresToTransform;\n      this.applyToTarget = this.prevTrainingInfo[0].predictiveModelingInfo.applyToTarget;\n      this.customFeatureChecked =\n        this.prevTrainingInfo[0].predictiveModelingInfo.customFeatureChecked;\n      this.customFeatures = this.customFeatureChecked\n        ? this.prevTrainingInfo[0].predictiveModelingInfo.customFeatures\n        : [];\n      if (this.normalizationMethod === 'log_transform') {\n        this.scale = this.prevTrainingInfo[0].predictiveModelingInfo.scalarValue;\n        this.showlog = true;\n        this.showscalar = true;\n      }\n      if (\n        (this.sampling === 'under_sampling' || this.sampling === 'over_sampling') &&\n        this.prevTrainingInfo[0].samplingPercentage\n      ) {\n        let output: Array<any> = [];\n        this.showButton = true;\n        this.samplingData = this.prevTrainingInfo[0].samplingPercentage;\n        Object.keys(this.samplingData).forEach((record) => {\n          output.push({\n            colName: record,\n            value: this.samplingData[record],\n            initValue: this.samplingData[record],\n          });\n        });\n        this.samplingData = output;\n        this.samplingdat = output;\n      } else {\n        this.showButton = false;\n      }\n      if (this.prevTrainingInfo[0]) {\n        this.tempSelected = this.indepVariables;\n      }\n      //All features are selected\n      if (this.edaData.edaSummary.length - 1 === this.indepVariables.length) {\n        this.featureDataSource?.data.forEach((row) => this.selection.select(row));\n      }\n      if (this.prevTrainingInfo[0].autoFeatureGenTasks) {\n        if (this.prevTrainingInfo[0].dropOriginal) {\n          this.fdropMethod = 'true';\n        } else if (!this.prevTrainingInfo[0].dropOriginal) {\n          this.fdropMethod = 'false';\n        }\n        this.explicitPairWiseOption = [];\n        this.prevTrainingInfo[0].autoFeatureGenTasks.forEach((data: any) => {\n          if (data.typeOfAutoFeatureGen === 'pairwiseLinear') {\n            this.pairwiseLinear = true;\n            this.pairwiseLinearOption = data.operation;\n          } else if (data.typeOfAutoFeatureGen === 'pairwisePolynomial') {\n            this.pairwisePolynomial = true;\n            this.pairwisePolynomialOption = data.operation;\n          } else if (data.typeOfAutoFeatureGen === 'univariatePolynomial') {\n            this.univariatePolynomial = true;\n            this.exponent = data.exponent;\n          } else if (data.typeOfAutoFeatureGen === 'split') {\n            this.split = true;\n            this.delimiter = data.delimiter;\n            this.featureSplitCount = data.featureSplitCount;\n          } else if (data.typeOfAutoFeatureGen === 'explicitPairwiseCombination') {\n            this.tempFeatures = this.indepVariables.filter((item: any) => {\n              let dataType = this.tableData.find(\n                (data: any) => data.colName === item.colName\n              ).dataType;\n              if (dataType === 'Integer' || dataType === 'Decimal') {\n                return true;\n              } else {\n                return false;\n              }\n            });\n            this.tempSelected = this.generateIndepVariableList(this.edaData.depVariable, 'lOb');\n            this.textOrCategoricalFeatures = this.tempSelected.filter((item: any) => {\n              let dataType = this.tableData.find(\n                (data: any) => data.colName === item.colName\n              ).dataType;\n              if (dataType === 'Text' || dataType === 'Categorical') {\n                return true;\n              } else {\n                return false;\n              }\n            });\n            this.explicitPairwise = true;\n            this.explicitPairWiseOption.push(data);\n          }\n        });\n      }\n      this.ordinalEncMap = this.prevTrainingInfo[0].ordinalEncoderMap;\n    } else if (this.project.type === 'clustering') {\n      this.customFeatureChecked = this.prevTrainingInfo[0].clusteringInfo.customFeatureChecked;\n      this.customFeatures = this.customFeatureChecked\n        ? this.prevTrainingInfo[0].clusteringInfo.customFeatures\n        : [];\n      if (this.edaData.edaSummary.length === this.indepVariables.length) {\n        this.featureDataSource?.data.forEach((row) => this.selection.select(row));\n      }\n      this.onClusteringAlgoChange();\n      // All features are selected\n      if (this.prevTrainingInfo[0].clusteringInfo) {\n        const datatype = typeof this.prevTrainingInfo[0].clusteringInfo.clusters;\n        if (datatype === 'number') {\n          this.clusters = this.clusters = this.prevTrainingInfo[0].clusteringInfo.clusters;\n        } else {\n          this.prevTrainingInfo[0].algorithms.forEach((element) => {\n            if (element.includes('KMeans')) {\n              this.clusters = this.prevTrainingInfo[0].clusteringInfo.clusters['KMeans'];\n            } else if (element.includes('Agglomerative')) {\n              this.agglomerativeCluster =\n                this.prevTrainingInfo[0].clusteringInfo.clusters['Agglomerative'];\n            }\n          });\n        }\n        this.decomposition = this.prevTrainingInfo[0].clusteringInfo.decomposition;\n        this.components = this.prevTrainingInfo[0].clusteringInfo.components;\n        this.numericFeatures = this.prevTrainingInfo[0].clusteringInfo.numericFeatures;\n        this.normalizationMethod = this.prevTrainingInfo[0].clusteringInfo.normalizationMethod;\n        this.featureScalingOption = this.prevTrainingInfo[0].clusteringInfo.featureScaling;\n      }\n      let test: Array<any> = [];\n      let result: Array<any> = [];\n      let temp = this.prevTrainingInfo[0].edaId.edaSummary;\n      let colname = temp.filter((feature: any) => {\n        if (\n          !feature.constantFeature &&\n          !feature.highCardinalityFeature &&\n          !feature.mostlyMissing &&\n          (feature.dataType === 'Decimal' ||\n            feature.dataType === 'Integer' ||\n            feature.dataType === 'Numeric')\n        ) {\n          return feature;\n        }\n      });\n      colname.forEach((item) => {\n        test.push({ colName: item.colName });\n      });\n      result = test.filter((o1) => {\n        return this.indepVariables.some((o2) => o1.colName === o2.colName);\n      });\n      this.tempfeat = result.map((feature) => feature.colName);\n      this.featureTemp = this.tempfeat;\n      this.featuresToTransform = this.prevTrainingInfo[0].clusteringInfo.featuresToTransform;\n      // this.applyToTarget = this.prevTrainingInfo[0].clusteringInfo.applyToTarget;\n      if (this.normalizationMethod === 'log_transform') {\n        this.scale = this.prevTrainingInfo[0].clusteringInfo.scalarValue;\n        this.showlog = true;\n        this.showscalar = true;\n      }\n      this.ordinalEncMap = this.prevTrainingInfo[0].ordinalEncoderMap;\n    }\n  }\n\n  /**\n   * Function to form independent variable list\n   * @param target\n   * @param type\n   * @returns\n   */\n  generateIndepVariableList(target: any, type: string): Array<any> {\n    const tSelected: Array<any> = [];\n    const selectedFeatures: Array<any> = this.selection.selected;\n    // lOb - list of objects, which will convert to list of objects\n    if (type === 'lOb') {\n      selectedFeatures.forEach((item: any) => {\n        if (item.colName !== target.colName) {\n          tSelected.push({ colName: item.colName });\n        }\n        // Updates the selected array with new features\n        for (var k in this.selected) {\n          this.selected[k] === item.colName\n            ? (this.selected[item.colName] = true)\n            : (this.selected[item.colName] = false);\n        }\n      });\n    } else {\n      selectedFeatures.forEach((item: any) => {\n        tSelected.push({ colName: item.colName });\n        // Updates the selected array with new features\n        for (var k in this.selected) {\n          this.selected[k] === item.colName\n            ? (this.selected[item.colName] = true)\n            : (this.selected[item.colName] = false);\n        }\n      });\n    }\n    return tSelected;\n  }\n\n  /**\n   * Called when timeseries algo changes\n   */\n  onTsAlgoChange(): void {\n    this.selection.clear();\n    var dateExcludedFeatures = this.edaData.edaSummary.filter(\n      (feature: any) =>\n        feature.dataType !== 'Datetime' && feature.colName !== this.edaData.depVariable\n    );\n    if (this.edaData.isMultipleTimeseries) {\n      dateExcludedFeatures = dateExcludedFeatures.filter((i: any) => {\n        return !this.edaData.timeseriesIds.includes(i.colName) ? i : null\n      });\n    }\n    // if (this.edaData.isMultipleTimeseries === true) {\n    //   dateExcludedFeatures = dateExcludedFeatures.filter((item: any) => item.dataType !== 'Categorical');\n    // }\n    if (this.algorithmControl.value.length && this.algorithmControl.value[0] !== 'Prophet') {\n      this.buildTrainingTable(dateExcludedFeatures, this.project.type, 'without_feature_score');\n    } else {\n      this.featureDataSource.data = [];\n      this.featureDataSource._updateChangeSubscription();\n      this.showTrainingTable = false;\n    }\n  }\n\n  /**\n   * Calls when the algorithm is changed\n   */\n  onClusteringAlgoChange(): void {\n    // ! Deprecated event key\n    // if (event != 'fc') {\n    //   this.selectAll = false;\n    // }\n    if (this.project.type === 'clustering') {\n      this.buildTrainingTable(this.edaData.edaSummary, this.project.type, 'without_feature_score');\n    }\n  }\n\n  /**\n   * Sets the default value as unigram for n gram, default data for nlp feature\n   */\n  setNlpFeatureDefaults(): void {\n\n    let featureVal: any = {};\n    let featureExists: boolean = false;\n    this.nlpDefaultConfigData = {\n      nlpFeatureExtractionMethod: 'CountVectorizer',\n      nlpLanguage: 'English',\n      nFeatureCount: 100,\n      stripAccents: 'none',\n      decodeError: 'strict',\n      nGram: [this.nGramOptions[0]],\n    };\n    this.featureList.forEach((feature) => {\n      featureVal = {\n        colName: feature,\n        nlpFeatureConfig: this.nlpDefaultConfigData,\n      };\n      if (this.nlpConfigs.length) {\n        this.nlpConfigs.forEach((nlpFeature) => {\n          if (nlpFeature.colName === featureVal.colName) {\n            featureExists = true;\n          }\n        });\n        if (!featureExists) {\n          this.nlpConfigs.push(featureVal);\n        }\n      } else {\n        this.nlpConfigs.push(featureVal);\n      }\n    });\n    this.showNgramSlider = false;\n  }\n\n  /**\n   * On auto feature generation option changes\n   * @param option\n   * @param model\n   * @returns\n   */\n  onAFGOptionSelection(option: any, model: any): void {\n    if (\n      (option === 'pairwiseLinear' ||\n        option === 'pairwisePolynomial' ||\n        option === 'univariatePolynomial' ||\n        option === 'explicitPairwise') &&\n      model\n    ) {\n      this.fdropMethod = 'true';\n    } else {\n      this.fdropMethod = '';\n      this.normalizationMethod = 'none';\n      this.showlog = false;\n    }\n    if (option === 'explicitPairwise') {\n      this.tempSelected = this.generateIndepVariableList(this.edaData.depVariable, 'lOb');\n      if (!this.tempSelected.length) {\n        this.showSnackBar('Please select features first', 'OK');\n        this.explicitPairwise = false;\n      } else {\n        this.getEPCFeatures();\n        this.univariatePolynomial = false;\n        this.pairwisePolynomial = false;\n        this.pairwiseLinear = false;\n        this.split = false;\n        this.explicitPairWiseOption = [\n          {\n            operation: 'addition',\n            colName: [],\n            typeOfAutoFeatureGen: 'explicitPairwiseCombination',\n          },\n        ];\n      }\n    } else {\n      this.explicitPairwise = false;\n    }\n  }\n\n  /**\n   * Generates EPC features\n   */\n  getEPCFeatures(): void {\n    this.tempSelected = this.generateIndepVariableList(this.edaData.depVariable, 'lOb');\n    this.tempFeatures = this.tempSelected.filter((item: any) => {\n      var dataType = this.tableData.find((data: any) => data.colName === item.colName).dataType;\n      if (dataType === 'Integer' || dataType === 'Decimal') {\n        return true;\n      } else {\n        return false;\n      }\n    });\n    this.textOrCategoricalFeatures = this.tempSelected.filter((item: any) => {\n      var dataType = this.tableData.find((data: any) => data.colName === item.colName).dataType;\n      if (dataType === 'Text' || dataType === 'Categorical') {\n        return true;\n      } else {\n        return false;\n      }\n    });\n  }\n\n  /**\n   * Generates the training feature selection table\n   * @param edaSummary\n   * @param problemType predictive_modeling / timeseries / clustering\n   * @param featureScore\n   */\n  buildTrainingTable(edaSummary: any, problemType: string, featureScore: string): void {\n    this.tableData = [];\n    this.selection.clear();\n    if (problemType === 'clustering') {\n      edaSummary.map((feature: any) => {\n        if (\n          !feature.constantFeature &&\n          !feature.highCardinalityFeature &&\n          feature.colName !== this.edaData.depVariable &&\n          !feature.mostlyMissing\n        ) {\n          if (this.prevTrainingInfo[0] && this.prevTrainingInfo[0].categoricalEncoders) {\n            if (this.prevTrainingInfo[0].categoricalEncoders[feature.colName]) {\n              feature.encoder = this.prevTrainingInfo[0].categoricalEncoders[feature.colName];\n            } else if (feature.highCardinalityFeature) {\n              feature.encoder = 'Binary encoder';\n            } else {\n              feature.encoder = 'Binary encoder';\n            }\n          } else if (feature.highCardinalityFeature) {\n            feature.encoder = 'Binary encoder';\n          } else {\n            feature.encoder = 'Binary encoder';\n          }\n          if (feature.dataType === 'Categorical') {\n            this.catEnc[feature.colName] = feature.encoder;\n          }\n          if (feature.dataType === 'Datetime') {\n            feature.dateComponentList = this.dateOperations;\n            if (this.prevTrainingInfo[0]?.dateComponent) {\n              feature.dateComponent = this.prevTrainingInfo[0].dateComponent[feature.colName];\n            } else {\n              feature.dateComponentList = this.dateOperations.filter(function (o1) {\n                // return the ones with equal id\n                return feature.dateComponent.some((o2) => o1 === o2);\n              });\n            }\n          }\n          this.tableData.push(feature);\n        }\n      });\n    } else {\n      edaSummary.map((feature: any) => {\n        if (\n          !feature.constantFeature &&\n          !feature.highCardinalityFeature &&\n          feature.colName !== this.edaData.depVariable &&\n          !feature.mostlyMissing\n        ) {\n          if (this.prevTrainingInfo[0] && this.prevTrainingInfo[0].categoricalEncoders) {\n            if (this.prevTrainingInfo[0].categoricalEncoders[feature.colName]) {\n              feature.encoder = this.prevTrainingInfo[0].categoricalEncoders[feature.colName];\n            } else if (feature.highCardinalityFeature) {\n              feature.encoder = 'Binary encoder';\n            } else {\n              feature.encoder = 'Binary encoder';\n            }\n          } else if (feature.highCardinalityFeature) {\n            feature.encoder = 'Binary encoder';\n          } else {\n            feature.encoder = 'Binary encoder';\n          }\n          if (feature.dataType === 'Categorical') {\n            this.catEnc[feature.colName] = feature.encoder;\n          }\n          if (feature.dataType === 'Datetime') {\n            feature.dateComponentList = this.dateOperations;\n            if (this.prevTrainingInfo[0]?.dateComponent) {\n              feature.dateComponent = this.prevTrainingInfo[0].dateComponent[feature.colName];\n            } else {\n              feature.dateComponentList = this.dateOperations.filter(function (o1) {\n                // return the ones with equal id\n                return feature.dateComponent.some((o2) => o1 === o2);\n              });\n            }\n          }\n          this.tableData.push(feature);\n        }\n      });\n      this.tableData = this.tableData.filter((item) => {\n        return item.colName !== this.edaData.depVariable;\n      });\n    }\n    if (this.project.projectStatus === 'Model Generated') {\n      // All features are selected\n      if (this.tableData.length === this.indepVariables.length) {\n        this.featureDataSource.data.forEach((row) => this.selection.select(row));\n      }\n    }\n    // Generates dateComponent object, only if dataType is Datetime\n    this.tableData.filter((item) => {\n      if (item?.dataType === 'Datetime') {\n        this.dateComponent[item.colName] = item.dateComponent;\n      }\n    });\n    // Generates the indepVariables selected features array\n    this.tableData.forEach((item: any) => {\n      let itemFound: boolean = true;\n      this.indepVariables.forEach((indep) => {\n        if (indep.colName === item.colName) {\n          // Checks the checkbox for particular selected feature name\n          this.selection.select(item);\n          this.selected[item.colName] = true;\n        }\n        if (!itemFound) {\n          this.selected[item.colName] = false;\n        }\n      });\n    });\n    // Excludes all the features having unstructured data type\n    this.tableData = this.tableData.filter((item) => item.dataType !== 'Unstructured');\n\n    // Datatable coulmns for clustering and timeseries\n    if (problemType === 'clustering' || problemType === 'timeseries') {\n      if (this.categoricalEncoders.includes('Leave one out encoder')) {\n        this.categoricalEncoders.splice(\n          this.categoricalEncoders.indexOf('Leave one out encoder'),\n          1\n        );\n      }\n      if (this.categoricalEncoders.includes('Target encoder')) {\n        this.categoricalEncoders.splice(this.categoricalEncoders.indexOf('Target encoder'), 1);\n      }\n      this.featureDataSource.data = this.tableData;\n      this.featureDataSource._updateChangeSubscription();\n      this.featureDataSource.sort = this.featureSort;\n      this.featureDataSource.paginator = this.featurePaginator;\n    } else {\n      // Datatable coulmns for predictive modeling\n      this.featureDataSource.data = this.tableData;\n      this.featureDataSource._updateChangeSubscription();\n      this.featureDataSource.sort = this.featureSort;\n      this.featureDataSource.paginator = this.featurePaginator;\n      if (featureScore === 'with_feature_score') {\n        // Adds the new columns in the table, if not exists\n        this.displayedColumns.includes('isImportant')\n          ? this.displayedColumns\n          : this.displayedColumns.push('isImportant');\n        this.displayedColumns.includes('score')\n          ? this.displayedColumns\n          : this.displayedColumns.push('score');\n        this.featureDataSource.data = this.tableData;\n        this.featureDataSource._updateChangeSubscription();\n        this.featureDataSource.sort = this.featureSort;\n        this.featureDataSource.paginator = this.featurePaginator;\n      } else if (featureScore === 'without_feature_score') {\n        if (this.displayedColumns.includes('isImportant')) {\n          this.displayedColumns.splice(this.displayedColumns.indexOf('isImportant'), 1);\n        }\n        if (this.displayedColumns.includes('score')) {\n          this.displayedColumns.splice(this.displayedColumns.indexOf('score'), 1);\n        }\n        this.featureDataSource.data = this.tableData;\n        this.featureDataSource._updateChangeSubscription();\n        this.featureDataSource.sort = this.featureSort;\n        this.featureDataSource.paginator = this.featurePaginator;\n      }\n    }\n    this.showTrainingTable = true;\n  }\n\n  /**\n   * Called when categorical encoder selection changes\n   * @param encoder\n   * @param colName\n   */\n  onChangeCatEncoding(encoder: string, colName: string, feature: any): void {\n    let mapperDatas: Array<any> = [];\n    let itemFound: any;\n    let encoderData: any;\n    let reqObj: any;\n    if (encoder === 'Ordinal encoder') {\n      itemFound = this.ordinalEncMap.find((item) => item.col === colName);\n      if (itemFound) {\n        mapperDatas = Object.keys(itemFound.mapping);\n        encoderData = {\n          colName: colName,\n          mapperDatas: mapperDatas,\n          itemFound: itemFound,\n          ordinalEncMap: this.ordinalEncMap,\n        };\n        this._spinner.stopSpinner();\n        // Open ordinal encoder mapper pop up\n        this.openDialog('ordinalEncoder', encoderData);\n      } else {\n        this._spinner.showSpinner();\n        reqObj = {\n          filename: this.selectedDataSet.filename,\n          colName: colName,\n          projectId: this.project._id,\n        };\n        // API call\n        this._training\n          .getUniqueCategories(reqObj)\n          .pipe(takeUntil(this.unsubscribe$))\n          .subscribe(\n            (res) => {\n              if (res) {\n                this._spinner.stopSpinner();\n                mapperDatas = res.body;\n                encoderData = {\n                  colName: colName,\n                  mapperDatas: mapperDatas,\n                  itemFound: itemFound,\n                  ordinalEncMap: this.ordinalEncMap,\n                };\n                // Open ordinal encoder mapper pop up\n                this.openDialog('ordinalEncoder', encoderData);\n              } else {\n                this._spinner.stopSpinner();\n                mapperDatas = [];\n                this._toaster.error('Cannot fetch unique categories', 'Train Model');\n              }\n            },\n            (err) => {\n              mapperDatas = [];\n              this._spinner.stopSpinner();\n              this._toaster.error('Server Error', 'Train Model');\n            }\n          );\n      }\n    } else {\n      this.ordinalEncMap.map((item) => {\n        if (item.col == colName) {\n          let index = this.ordinalEncMap.findIndex((item) => {\n            return item.col == colName;\n          });\n          this.ordinalEncMap.splice(index, 1);\n        }\n      });\n    }\n    // Updates the dateComponent object, if it is changed\n    if (feature.dataType === 'Datetime') {\n      this.dateComponent[feature.colName] = feature.dateComponent;\n    } else if (feature.dataType === 'Categorical') {\n      this.catEnc[feature.colName] = feature.encoder;\n    }\n  }\n\n  /**\n   * Fetches all the algorithms\n   * @param algoType\n   * @param isMultilabel\n   */\n  getModelAlgorithms(algoType: string, isMultilabel: boolean): void {\n    this.modelAlgorithmArray = this.ALGORITHMS_ARRAY.filter((algorithm) => {\n      if (isMultilabel) {\n        return (\n          algorithm.type === algoType.toLowerCase() &&\n          algorithm.multilabel === (isMultilabel ? isMultilabel : false)\n        );\n      } else {\n        return (\n          algorithm.type === algoType.toLowerCase() &&\n          algorithm.useGPU === (this.project.useGPU || false)\n        );\n      }\n    });\n    if (this.project.type == 'timeseries' && this.edaData.isMultipleTimeseries) {\n      this.modelAlgorithmArray = this.modelAlgorithmArray.filter((item) => {\n        return (item.name === 'Random Forest' || item.name === 'Linear Regression Ts');\n      });\n    } else if (this.project.type == 'timeseries' && !this.edaData.isMultipleTimeseries) {\n      this.modelAlgorithmArray = this.modelAlgorithmArray.filter((item) => {\n        return (item.name !== 'Random Forest' && item.name !== 'Linear Regression Ts');\n      });\n    }\n  }\n\n  /**\n   * Called when - drop original feature, is changed\n   */\n  dropChange(): void {\n    this.normalizationMethod = 'none';\n    // this.showlog = false;\n  }\n\n  /**\n   * On feature scaling option changes\n   */\n  onFeatureScalingOptionChange(): void {\n    if (this.featureScalingOption !== 'none') {\n      this.normalizationMethod = 'none';\n    }\n  }\n\n  featureTransform() {\n    let colnameFeature: Array<any> = [];\n    let colname: Array<any> = [];\n    let test: Array<any> = [];\n    let result: Array<any> = [];\n    let temp: Array<any> = [];\n    if (this.project.type === 'predictive_modeling') {\n      this.showlog = true;\n      this.getAFGoptions();\n      if (this.autoFeatureGenTasks.length > 0 && this.fdropMethod === 'true') {\n        this.tempfeat = {};\n        colnameFeature = this.edaData.edaSummary;\n        colname = colnameFeature.filter((feature: any) => {\n          return (\n            !feature.constantFeature &&\n            !feature.highCardinalityFeature &&\n            !feature.mostlyMissing &&\n            feature.colName !== this.edaData.depVariable &&\n            (feature.dataType === 'Decimal' ||\n              feature.dataType === 'Integer' ||\n              feature.dataType === 'Numeric')\n          );\n        });\n        colname.forEach((item) => {\n          test.push({ colName: item.colName });\n        });\n        result = test.filter((o1) => {\n          return !this.tempSelected.some((o2) => o1.colName === o2.colName);\n        });\n        this.tempfeat = result.map((feature) => feature.colName);\n        // if (this.tempfeat.length < 1) {\n        //   this.showSnackBar('Sorry! No independent feature(s) is available for transformer.', 'OK');\n        //   this.showlog = false;\n        //   // this.showLoading = false;\n        // }\n      } else {\n        temp = this.edaData.edaSummary;\n        temp = temp.filter((feature) => {\n          return (\n            !feature.constantFeature &&\n            !feature.highCardinalityFeature &&\n            !feature.mostlyMissing &&\n            feature.colName !== this.edaData.depVariable &&\n            (feature.dataType === 'Decimal' ||\n              feature.dataType === 'Integer' ||\n              feature.dataType === 'Numeric')\n          );\n        });\n        this.tempfeat = temp.map((feature) => feature.colName);\n        // if (this.tempfeat.length < 1) {\n        //   this.showSnackBar('Sorry! No independent feature(s) is available for transformer.', 'OK');\n        //   this.showlog = false;\n        //   // this.showLoading = false;\n        // }\n        this.showlog = true;\n      }\n    } else if (this.project.type === 'clustering') {\n      this.showlog = true;\n      temp = this.edaData.edaSummary;\n      temp = temp.filter((feature) => {\n        return (\n          !feature.constantFeature &&\n          !feature.highCardinalityFeature &&\n          !feature.mostlyMissing &&\n          (feature.dataType === 'Decimal' ||\n            feature.dataType === 'Integer' ||\n            feature.dataType === 'Numeric')\n        );\n      });\n      this.tempfeat = temp.map((feature) => feature.colName);\n      this.showlog = true;\n    } else {\n      this.showlog = false;\n    }\n  }\n  /**\n   * On normalization method changes\n   * @param method\n   * @returns\n   */\n  onNormalizationChange(method: string): void {\n    if (this.normalizationMethod !== 'none') {\n      this.featureScalingOption = 'none';\n    }\n  }\n\n  /**\n   * Function triggerd on selection of feature selction methods\n   * @param algoType\n   * @param fsMethod\n   */\n  onFSMethodChange(algoType: string, fsMethod: string): void {\n    if (fsMethod !== 'RFE' && algoType === 'regression') {\n      this.featureStep = 'none';\n      this.cv = 'none';\n      this.scoringFunction = 'f_regression';\n    } else if (fsMethod === 'RFE' && algoType === 'regression') {\n      this.scoringFunction = 'Rmse';\n      this.estimatorAlgo = this.estimatorRegAlgo;\n      this.featureStep = 10;\n      this.cv = 1;\n    } else if (fsMethod === 'RFE' && algoType === 'classification') {\n      this.scoringFunction = 'accuracy';\n      this.estimatorAlgo = this.estimatorClassAlgo;\n      this.featureStep = 10;\n      this.cv = 1;\n    } else {\n      this.featureStep = 'none';\n      this.cv = 'none';\n      this.estimator = '';\n      this.scoringFunction = 'f_classif';\n    }\n    this.generateScoringFunctionArray();\n  }\n\n  /**\n   * Changed when decomposition changes\n   */\n  onDecompositionChange(): void {\n    // When selects pca featureScalingOption options is set to standard_scaler\n    if (this.project.type === 'clustering') {\n      this.featureScalingOption =\n        this.decomposition === 'pca' && this.normalizationMethod === 'none'\n          ? 'standard_scaler'\n          : this.featureScalingOption;\n    } else {\n      this.featureScalingOption =\n        this.decomposition === 'pca' && this.normalizationMethod === 'none'\n          ? 'standard_scaler'\n          : 'none';\n    }\n  }\n\n  /**\n   * Generates the scoring function array dynamically\n   */\n  generateScoringFunctionArray(): void {\n    if (this.fsMethod !== 'RFE' && this.algoType === 'regression') {\n      this.scoringFunctionArray = [\n        { name: 'f_regression', value: 'f_regression' },\n        { name: 'f_classif', value: 'f_classif' },\n        { name: 'mutual_info_regression', value: 'mutual_info_regression' },\n      ];\n    } else if (this.fsMethod !== 'RFE' && this.algoType === 'classification') {\n      this.scoringFunctionArray = [\n        { name: 'chi2', value: 'chi2' },\n        { name: 'f_classif', value: 'f_classif' },\n        { name: 'mutual_info_classif', value: 'mutual_info_classif' },\n      ];\n    } else if (this.fsMethod === 'RFE' && this.algoType === 'regression') {\n      this.scoringFunctionArray = [\n        { name: 'RMSE', value: 'Root Mean Square Error' },\n        { name: 'MAE', value: 'Mean Absolute Error' },\n      ];\n    } else if (this.fsMethod === 'RFE' && this.algoType === 'classification') {\n      this.scoringFunctionArray = [\n        { name: 'Accuracy', value: 'accuracy' },\n        { name: 'F1_Score', value: 'f1' },\n      ];\n    }\n  }\n\n  /**\n   * Calculates the feature score by triggering API\n   */\n  calculateFeatureScore(): void {\n    let featureScoreData: any = null;\n    let categoricalColNames: Array<any> = [];\n    let isError: Boolean = false;\n    let fileData = this.dataSetsList.find((item) => item._id === this.selectedDataSet._id);\n    this.getAFGoptions();\n    categoricalColNames = this.getFeatures(\n      this.edaData.edaSummary,\n      'Categorical',\n      this.edaData.depVariable\n    );\n    this.indepVariables = this.generateIndepVariableList(this.edaData.depVariable, 'lOb');\n    // Predictive modeling\n    if (this.indepVariables.length < 1) {\n      this.showSnackBar('Please select features', 'OK');\n      isError = true;\n    }\n    if (!this.featureStep) {\n      this.showSnackBar('Feature steps should be between 0-1', 'OK');\n      isError = true;\n    }\n    if (!this.cv) {\n      this.showSnackBar('CV should be between 0-5', 'OK');\n      isError = true;\n    }\n    if (\n      (this.decomposition === 'pca' || this.decomposition === 'factoranalysis') &&\n      (this.components < 2 || this.components > fileData.noOfCols)\n    ) {\n      this.showSnackBar(\n        `Dimensional reduction components should be between 2 and ${fileData.noOfCols}`,\n        'OK'\n      );\n      isError = true;\n    }\n    if (this.customFeatureChecked && this.decomposition !== 'none') {\n      if (!this.customFeatures) {\n        this.showSnackBar('Custom features cannot be empty', 'OK');\n        isError = true;\n      }\n      if (this.customFeatures.length <= this.components) {\n        this.showSnackBar('No. of custom features should be greater than components', 'OK');\n        isError = true;\n      }\n    }\n    if (\n      this.normalizationMethod == 'log_transform' &&\n      this.featuresToTransform.length < 1 &&\n      this.applyToTarget == false\n    ) {\n      this.showSnackBar('Please select independent feature or target for feature transform', 'OK');\n      isError = true;\n    }\n    if (\n      this.normalizationMethod == 'log_transform' &&\n      (this.featuresToTransform.length > 0 || this.applyToTarget)\n    ) {\n      this.scaleValue = this.scale;\n    }\n\n    featureScoreData = {\n      parentFileId: this.childFileData._id,\n      parentPipelineFilename: this.edaData.tasks[0].currentPipelineFilename,\n      fileSchema: this.childFileData.fileSchema,\n      depVariable: this.edaData.depVariable,\n      indepVariable: this.indepVariables,\n      algorithms: this.algorithmControl.value,\n      testSize: this.testSize,\n      pId: this.project._id,\n      hptPreference: this.hptPreference,\n      categoricalColNames: categoricalColNames || [],\n      originalFileName: this.selectedDataSet.filename,\n      indexPath: this.edaData.indexPath,\n      afterEdaDataFilePath: this.edaData.afterEdaDataFilePath,\n      noOfCol: this.edaData.edaSummary.length,\n      paragraphColNames: this.edaData.paragraphColNames,\n      dimReductionFitSize: this.edaData.dimReductionFitSize || 1.0,\n      algoType: this.algoType,\n      isMultilabel: this.isMultilabel,\n      backGround: this.backGround,\n      foreGround: this.foreGround,\n      edaId: this.edaData._id,\n      datetimeColumnName: this.edaData.datetimeColumnName,\n      problemType: this.edaData.problemType,\n      isImbalanced: this.isImbalanced,\n      sampling: this.sampling,\n      autoFeatureGenTasks: this.autoFeatureGenTasks.length ? this.autoFeatureGenTasks : null,\n      rootFileName: this.selectedDataSet.filename,\n      categoricalEncoders: this.catEnc || [],\n      dateComponent: this.dateComponent,\n      predictiveModelingInfo: {\n        decomposition: this.decomposition,\n        components: this.components,\n        featureSelectionMethod: this.fsMethod || 'none',\n        scoringFunction: this.scoringFunction || 'none',\n        featurePercentage: this.featurePercentage,\n        nFeaturesToSelect: this.nFeaturesToSelect,\n        featuresToTransform: this.featuresToTransform || {},\n        applyToTarget: this.applyToTarget,\n        // ! Replaced this.step with this.featureStep (unused variable this.step)\n        step: this.featureStep,\n        customFeatureChecked: this.customFeatureChecked,\n        customFeatures: this.customFeatures,\n        featureScaling: this.featureScalingOption || 'none',\n        normalizationMethod: this.normalizationMethod,\n        featureSelectionEstimator: this.estimator || 'none',\n        featureSelectionStep: this.featureStep || 'none',\n        featureSelectionCV: this.cv || 'none',\n        scalarValue: this.scaleValue || {},\n      },\n      nlpConfigs: this.nlpConfigs,\n    };\n    if (this.fsMethod !== 'RFE') {\n      featureScoreData.predictiveModelingInfo.featureSelectionEstimator = 'none';\n      featureScoreData.predictiveModelingInfo.featureSelectionStep = 'none';\n      featureScoreData.predictiveModelingInfo.featureSelectionCV = 'none';\n    }\n    if (featureScoreData.predictiveModelingInfo.normalizationMethod !== 'log_transform') {\n      delete featureScoreData.predictiveModelingInfo['scalarValue'];\n    }\n    // API call\n    if (!isError) {\n      this._spinner.showSpinner();\n      this._training\n        .calculateFeatureScore(this.project._id, featureScoreData)\n        .pipe(takeUntil(this.unsubscribe$))\n        .subscribe(\n          (res) => {\n            if (res) {\n              let tempEdaData: Array<any> = [];\n              let edaSummary: Array<any> = [];\n              this.showTrainingTable = false;\n              tempEdaData = [...this.edaData.edaSummary];\n              edaSummary = tempEdaData.map((data) => {\n                const item = res.featureScores.find((item: any) => item.colName === data.colName);\n                if (item) {\n                  data.isSelected = item.isSelected;\n                  data.score = item.score;\n                }\n                return data;\n              });\n              this.buildTrainingTable(edaSummary, this.project.type, 'with_feature_score');\n            } else {\n              this._toaster.error('Cannot calculate feature score', 'Train Model');\n            }\n            this._spinner.stopSpinner();\n          },\n          (err) => {\n            this._spinner.stopSpinner();\n            this._toaster.error(err.error.message, 'Train Model');\n          }\n        );\n    }\n  }\n\n  /**\n   * Function for sampling percentage increment or decrement depending on sampling type\n   // tslint:disable-next-line: no-redundant-jsdoc\n   * @param sampling\n   */\n  ischeckSampling(sampling: any): void {\n    if (sampling === 'over_sampling' || sampling === 'under_sampling') {\n      if (this.samplingdat && this.samplingdat.length) {\n        this.calculatePercentage();\n      }\n    } else {\n      this.samplingdat = [];\n      this.samplingData = [];\n    }\n  }\n\n  /**\n   * Calculates the sampling percentage\n   * @returns\n   */\n  calculatePercentage(): void {\n    this.samplingData = {};\n    if (this.tempSelected.length == 0) {\n      this.showSnackBar('Please select features.', 'OK');\n    } else {\n      this._spinner.showSpinner();\n      let reqObj = {\n        projectId: this.project._id,\n        depVariable: this.edaData.depVariable,\n        rootFileName: this.selectedDataSet.filename,\n        indexPath: this.edaData.indexPath,\n        parentPipelineFilename: this.edaData.tasks[0].currentPipelineFilename,\n        isMultilabel: this.isMultilabel,\n        testSize: this.testSize,\n        indepVariable: this.tempSelected,\n      };\n      // API call\n      this._training\n        .calculateSamplingPercentage(this.project._id, reqObj)\n        .pipe(takeUntil(this.unsubscribe$))\n        .subscribe(\n          (res) => {\n            if (res) {\n              this.samplingdat = res.data;\n              this.samplingdat = this.samplingdat.map((item: any) => {\n                let s = Object.assign({}, item);\n                s.initValue = item.value;\n                return s;\n              });\n              this.samplingData = res.data;\n              this.samplingData = this.samplingData.map((item: any) => {\n                var s = Object.assign({}, item);\n                s.initValue = item.value;\n                return s;\n              });\n            } else {\n              this._toaster.error('Cannot calculate sampling percentage', 'Train Model');\n            }\n            this._spinner.stopSpinner();\n          },\n          (err) => {\n            this._spinner.stopSpinner();\n            this._toaster.error('Server Error', 'Train Model');\n          }\n        );\n    }\n  }\n\n  /**\n   * Calls on increment/decrement buttons and update the value\n   * @param item\n   * @param value\n   * @param operator\n   * @param colName\n   */\n  sample(item: any, value: any, operator: string, colName: string) {\n    if (operator === 'add') {\n      item = item + 1;\n    } else if (operator === 'sub') {\n      item = item - 1;\n    }\n    let percenatge = this.samplingData.findIndex((doc: any) => doc.colName === colName);\n    if (this.sampling === 'over_sampling') {\n      if (item < value) {\n        this.samplingData[percenatge].value = value;\n      } else {\n        this.samplingData[percenatge].value = item;\n      }\n    } else if (this.sampling === 'under_sampling') {\n      if (item < value) {\n        this.samplingData[percenatge].value = item;\n      } else {\n        this.samplingData[percenatge].value = value;\n      }\n      // if (item < value) {\n      //   this.samplingData[percenatge].value = value;\n      // } else {\n      //   this.samplingData[percenatge].value = item;\n      // }\n    }\n  }\n\n  /**\n   * Checks the train-split ratio percentage change\n   * @param size\n   * @returns\n   */\n  testsizeChange(size: number): void {\n    if (this.deafultTestSize !== size && this.sampling !== 'none') {\n      this.showSnackBar('Calucalute sampling percentage again', 'OK');\n    }\n  }\n\n  /**\n   * Create an empty array for k-fold\n   * @param data\n   * @returns\n   */\n  getArray(data: any): Array<any> {\n    return new Array(data);\n  }\n\n  /**\n   * Function to get all the auto feature generation options\n   */\n  getAFGoptions(): void {\n    let select = [];\n    this.autoFeatureGenTasks = [];\n    let intColNames: Array<any> = [];\n    intColNames = this.getFeatures(\n      this.edaData.edaSummary,\n      ['Integer', 'Decimal'],\n      this.edaData.depVariable\n    );\n    this.selection.selected.forEach((item) => {\n      select[item.colName] = true;\n    });\n    intColNames = intColNames.filter((feature) => {\n      if (select[feature]) {\n        return true;\n      }\n    });\n    if (this.pairwiseLinear) {\n      if (intColNames.length > 1) {\n        this.autoFeatureGenTasks.push({\n          operation: this.pairwiseLinearOption,\n          colName: intColNames,\n          typeOfAutoFeatureGen: 'pairwiseLinear',\n        });\n      }\n    }\n    if (this.pairwisePolynomial) {\n      if (intColNames.length > 1) {\n        this.autoFeatureGenTasks.push({\n          operation: this.pairwisePolynomialOption,\n          colName: intColNames,\n          typeOfAutoFeatureGen: 'pairwisePolynomial',\n        });\n      }\n    }\n    if (this.univariatePolynomial) {\n      if (this.exponent > 0) {\n        this.autoFeatureGenTasks.push({\n          operation: this.univariatePolynomialOption,\n          colName: intColNames,\n          exponent: this.exponent,\n          typeOfAutoFeatureGen: 'univariatePolynomial',\n        });\n      }\n    }\n    // if (this.split) {\n    //   var textCols = this.getFeatures(\n    //     this.edaData.edaSummary,\n    //     ['Text'],\n    //     this.edaData.depVariable\n    //   ).filter((feature) => (this.selected[feature] ? true : false));\n    //   if (this.featureSplitCount && this.delimiter) {\n    //     this.autoFeatureGenTasks.push({\n    //       operation: 'split',\n    //       colName: textCols,\n    //       featureSplitCount: this.featureSplitCount,\n    //       delimiter: this.delimiter,\n    //       typeOfAutoFeatureGen: 'split',\n    //     });\n    //   }\n    // }\n    if (this.explicitPairwise) {\n      this.autoFeatureGenTasks = this.explicitPairWiseOption;\n    }\n  }\n\n  /**\n   * Return features of a particular data type\n   * @param allFeatures\n   * @param dataTypes\n   * @param target\n   * @returns\n   */\n  getFeatures(allFeatures: any, dataTypes: any, target: any): Array<any> {\n    this.extFeatures = [];\n    allFeatures.forEach((feature: any) => {\n      // If target is present exclude it\n      if (target) {\n        if (dataTypes.indexOf(feature.dataType) !== -1 && feature.colName !== target) {\n          this.extFeatures.push(feature.colName);\n        }\n      } else {\n        if (dataTypes.indexOf(feature.dataType) !== -1) {\n          this.extFeatures.push(feature.colName);\n        }\n      }\n    });\n    return this.extFeatures;\n  }\n\n  /**\n   * Handles the feature change functionality\n   * @param featureName\n   */\n  onChangeFeature(featureName: string): void {\n    let foundFeatureData: boolean = false;\n    // this.nlpConfigs.forEach((item) => {\n    //   if (item.colName !== featureName) {\n    //     let featureCon = {\n    //       colName: featureName,\n    //       nlpFeatureConfig: this.nlpDefaultConfigData,\n    //     };\n    //     this.nlpConfigs.push(featureCon);\n    //   }\n    // });\n    this.nlpConfigs.forEach((item) => {\n      if (item.colName === featureName) {\n        item.nlpFeatureConfig.nGram.forEach((val: any) => {\n          if (val.name === 'Ngram') {\n            this.nlpDefaultConfigData.ngramSliderVal = val.value;\n            this.showNgramSlider = true;\n          } else {\n            this.showNgramSlider = false;\n          }\n        });\n      }\n    });\n    if (featureName !== this.tempFeature) {\n      this.nlpConfigs.forEach((featureConfig: any) => {\n        if (featureConfig.colName === featureName) {\n          this.nlpDefaultConfigData = featureConfig.nlpFeatureConfig;\n          foundFeatureData = true;\n        }\n      });\n      if (!foundFeatureData) {\n        this.setNlpFeatureDefaults();\n      }\n    } else {\n      this.nlpConfigs.forEach((featureConfig: any) => {\n        if (featureConfig.colName === featureName) {\n          this.nlpDefaultConfigData = featureConfig.nlpFeatureConfig;\n        }\n      });\n    }\n  }\n\n  /**\n   * Generates all the required data and then opens the dialog\n   */\n  generateConfigureData(type: string): void {\n    this.tempFeature = this.feature;\n    this.nlpConfigs.forEach((feature) => {\n      if (feature.colName === this.feature) {\n        feature.nlpFeatureConfig.nGram.forEach((item: any) => {\n          if (item.name === 'Ngram') {\n            this.nlpDefaultConfigData.ngramSliderVal = item.value;\n            this.showNgramSlider = true;\n          } else {\n            this.showNgramSlider = false;\n          }\n        });\n      }\n    });\n    this.openDialog(type);\n  }\n\n  /**\n   * Generates all the required data and then opens the dialog\n   */\n  generateClusterData(type: string): void {\n    let isError: Boolean = false;\n    let numericFeatures: Array<any> = [];\n    let reqObj: any;\n    let categoricalColNames: Array<any> = [];\n\n    categoricalColNames = this.getFeatures(this.edaData.edaSummary, 'Categorical', null);\n    if (this.decomposition === 'pca' && (this.components < 2 || this.components > 50)) {\n      this.showSnackBar('PCA Value should be between 2-50', 'OK');\n      isError = true;\n    }\n    if (this.clusters < 2 || this.clusters > 10) {\n      this.showSnackBar('Cluster value should be between 2-10', 'OK');\n      isError = true;\n    }\n    numericFeatures = this.edaData.edaSummary.filter(\n      (feature: any) => feature.dataType === 'Integer' || feature.dataType === 'Decimal'\n    );\n    this.tempSelected = this.generateIndepVariableList(this.edaData.depVariable, 'clustering');\n    if (this.tempSelected.length < 1) {\n      this.showSnackBar('Please select features', 'OK');\n      isError = true;\n    }\n    if (!isError) {\n      reqObj = {\n        originalFileId: this.selectedDataSet._id,\n        parentFileId: this.childFileData._id,\n        parentPipelineFilename: this.edaData.tasks[0].currentPipelineFilename,\n        fileSchema: this.childFileData.fileSchema,\n        algorithms: this.algorithmControl.value,\n        algoType: 'clustering',\n        edaId: this.edaData._id,\n        pId: this.project._id,\n        hptPreference: this.hptPreference,\n        categoricalColNames: categoricalColNames || [],\n        indexPath: this.edaData.indexPath,\n        paragraphColNames: this.edaData.paragraphColNames,\n        indepVariable: this.tempSelected,\n        backGround: this.backGround,\n        foreGround: this.foreGround,\n        rootFileName: this.selectedDataSet.filename,\n        problemType: this.project.type,\n        datetimeColumnName: this.edaData.datetimeColumnName,\n        usingGPU: this.project.useGPU || false,\n        categoricalEncoders: this.catEnc || {},\n        dateComponent: this.dateComponent || {},\n        clusteringInfo: {\n          decomposition: this.decomposition,\n          components: this.components,\n          clusters: Number(this.clusters),\n          numericFeatures: numericFeatures,\n          scalarValue: this.scaleValue || {},\n          featuresToTransform: this.featuresToTransform || {},\n          normalizationMethod: this.normalizationMethod,\n          featureScaling: this.featureScalingOption,\n          // applyToTarget: this.applyToTarget,\n        },\n        nlpConfigs: this.nlpConfigs,\n      };\n      if (reqObj.clusteringInfo.normalizationMethod !== 'log_transform') {\n        delete reqObj.clusteringInfo['scalarValue'];\n      }\n      this.openDialog(type, reqObj);\n    }\n  }\n\n  /**\n   * Filter and return ordinal encoder map according to the selected indep feature\n   * @returns\n   */\n  filterOridinalEncoderMap(): Array<any> {\n    let finalOrdinalEncoderMap: Array<any> = [];\n    if (this.ordinalEncMap.length && this.tempSelected.length) {\n      this.ordinalEncMap.forEach((item) => {\n        let itemFound = this.tempSelected.find((featureSelected) => {\n          return featureSelected.colName === item.col;\n        });\n        if (itemFound) {\n          finalOrdinalEncoderMap.push(item);\n        }\n      });\n    }\n    return finalOrdinalEncoderMap;\n  }\n\n  /**\n   * Training execution handler\n   * @returns\n   */\n  trainingHandler(): void {\n    this.tempSelected = [];\n    // if (window.d3 && window.d3.version == '3.5.12') {\n    //   NVD3Config.setMplD3Object(window.d3);\n    // }\n    if (\n      this.featuresToTransform &&\n      this.featuresToTransform.length &&\n      this.normalizationMethod == 'log_transform'\n    ) {\n      this.scaleValue = this.scale;\n    }\n    let algo = [];\n    this.modelAlgorithmArray.forEach((element) => {\n      let found = this.algorithmControl.value.filter((item) => {\n        return item === element.name && element.status === true;\n      });\n      if (found.length) {\n        algo.push(found[0]);\n      }\n    });\n    this.algorithmControl.setValue(algo);\n    if (algo.length === 0) {\n      this.showSnackBar('Select algorithm which are not disabled', 'OK');\n      return;\n    }\n    // Clustering project\n    if (this.project.type === 'clustering') {\n      this.trainClusteringProject();\n    } else {\n      if (this.edaData.depVariable) {\n        // checkThemeColor();\n        // Timeseries project\n        if (this.project.type === 'timeseries') {\n          this.trainTimeseriesProject();\n        }\n        // Predictive modeling\n        else {\n          this.trainPredictiveProject();\n        }\n      } else {\n        this.showSnackBar('Please select target variable', 'OK');\n      }\n    }\n  }\n\n  /**\n   * Execute training for timeseries project type\n   */\n  trainTimeseriesProject(): void {\n    const reqObj: any = this.createTimeseriesReqData();\n    if (reqObj) {\n      this._spinner.showSpinner();\n      // API call\n      this._training\n        .startTimeseriesTraining(this.project._id, reqObj)\n        .pipe(takeUntil(this.unsubscribe$))\n        .subscribe(\n          (res) => {\n            if (res) {\n              this._toaster.info('Training started', 'Train Model');\n            }\n          },\n          (err: HttpErrorResponse) => {\n            this._spinner.stopSpinner();\n            if (typeof err.error === 'string') {\n              err = JSON.parse(err.error);\n            }\n            this._toaster.error(err?.message, 'Train Model');\n          }\n        );\n    }\n  }\n\n  /**\n   * Generates a timeseries request data to parse in the API call of training\n   */\n  createTimeseriesReqData(): any {\n    this.tempSelected = this.generateIndepVariableList(this.edaData.depVariable, 'timeseries');\n    if (this.edaData.isMultipleTimeseries) {\n      if (this.nSteps < 1) {\n        this.showSnackBar('Number of steps can not be less than 1', 'OK');\n        return;\n      }\n      if (!Number.isInteger(this.nSteps)) {\n        this.showSnackBar('Number of steps should be an integer', 'OK');\n        return;\n      }\n      if (this.nSteps > this.maxnStep) {\n        this.showSnackBar(`Number of steps can not be greater than ${this.maxnStep}`, 'OK');\n        return;\n      }\n    }\n    if (this.algorithmControl.value.length === 1) {\n      this.algorithm = 1;\n    }\n    let trainingReqData: any;\n    let finalOrdinalEncoderMap: Array<any> = [];\n    let stationaryColumns: Array<any> = [];\n    let categoricalColNames: Array<any> = [];\n    categoricalColNames = this.getFeatures(this.edaData.edaSummary, 'Categorical', null);\n    if (this.stationaryTestData.length) {\n      stationaryColumns = this.stationaryTestData.filter((sData: any) => sData.stationarity);\n    }\n    if (!this.project.useGPU) {\n      this.tempSelected = this.generateIndepVariableList(this.edaData.depVariable, 'lOb');\n      if (this.tempSelected.length) {\n        finalOrdinalEncoderMap = this.filterOridinalEncoderMap();\n      } else {\n        finalOrdinalEncoderMap = this.ordinalEncMap;\n      }\n    }\n    if (this.featureScalingOption == 'none' && this.normalizationMethod == 'none') {\n      this.applyToTarget = false;\n    }\n    trainingReqData = {\n      originalFileId: this.selectedDataSet._id,\n      depVariable: this.edaData.depVariable,\n      testSize: this.edaData.dataSetInfo.testSize,\n      algorithms: this.algorithmControl.value,\n      hptPreference: this.hptPreference,\n      pId: this.project._id,\n      exogVariables: this.tempSelected || [],\n      parentFileId: this.selectedDataSet._id,\n      parentPipelineFilename: this.edaData.tasks[0].currentPipelineFilename,\n      categoricalColNames: categoricalColNames || [],\n      noOfCol: this.edaData.edaSummary.length,\n      paragraphColNames: this.edaData.paragraphColNames,\n      algoType: this.algoType,\n      backGround: this.backGround,\n      foreGround: this.foreGround,\n      edaId: this.edaData._id,\n      edaSummary: this.edaData.edaSummary,\n      fileSchema: this.selectedDataSet.fileSchema,\n      dateColumnSelected: this.dateColumnSelected,\n      problemType: this.project.type,\n      preprocessedFilepath: this.preprocessedFilepath,\n      rootFileName: this.selectedDataSet.filename,\n      usingGPU: this.project['useGPU'] ? this.project['useGPU'] : false,\n      categoricalEncoders: this.catEnc || {},\n      ordinalEncoderMap: finalOrdinalEncoderMap,\n      dateComponent: this.dateComponent,\n      classNames: this.edaData.classNames,\n      indexPath: this.edaData.indexPath,\n      timeseriesIds: this.edaData.timeseriesIds,\n      isMultipleTimeseries: this.edaData.isMultipleTimeseries,\n      nSteps: this.edaData.isMultipleTimeseries ? this.nSteps : null,\n      timeseriesInfo: {\n        exogVariables: this.tempSelected || [],\n        timesteps: this.timesteps || null,\n        stationaryColumns: stationaryColumns || [],\n        stationaryMethod: this.stationarityMethod || 'none',\n        featureScaling: this.featureScalingOption || 'none',\n        normalizationMethod: this.normalizationMethod,\n        featuresToTransform: this.featuresToTransform,\n        applyToTarget: this.applyToTarget,\n        scalarValue: this.scaleValue,\n      },\n      nlpConfigs: this.nlpConfigs,\n    };\n    if (trainingReqData.timeseriesInfo.normalizationMethod !== 'log_transform') {\n      delete trainingReqData.timeseriesInfo['scalarValue'];\n    }\n    if (this.stationarityMethod) {\n      trainingReqData.timeseriesInfo.period = this.period;\n      trainingReqData.timeseriesInfo.scalar = this.scalar;\n    }\n    return trainingReqData;\n  }\n\n  /**\n   * Execute training for clustering project type\n   */\n  trainClusteringProject(): void {\n    let isDataValid: boolean;\n    isDataValid = this.validateClusteringTrainingData();\n    if (!isDataValid) {\n      this._spinner.showSpinner();\n      let reqObj = this.createClusteringReqData();\n      // API call\n      this._training\n        .startClusteringTraining(this.project._id, reqObj)\n        .pipe(takeUntil(this.unsubscribe$))\n        .subscribe(\n          (res) => {\n            if (res) {\n              this._toaster.info('Training started', 'Train Model');\n            }\n          },\n          (err: HttpErrorResponse) => {\n            this._spinner.stopSpinner();\n            if (typeof err.error === 'string') {\n              err = JSON.parse(err.error);\n            }\n            this._toaster.error(err?.message, 'Train Model');\n          }\n        );\n    }\n  }\n\n  /**\n   * Performs validation on the whole clustering training data before starting training\n   */\n  validateClusteringTrainingData(): boolean {\n    let isError: boolean = false;\n    let fileData = this.dataSetsList.find((item) => item._id === this.selectedDataSet._id);\n    this.tempSelected = this.generateIndepVariableList(this.edaData.depVariable, 'clustering');\n    if (this.tempSelected.length < 1) {\n      this.showSnackBar('Please select feature(s)', 'OK');\n      isError = true;\n    }\n    if (this.algorithmControl.value.length === 1) {\n      this.algorithm = 1;\n    }\n    if (this.customFeatureChecked && this.decomposition !== 'none') {\n      if (!this.customFeatures) {\n        this.showSnackBar('Custom features cannot be empty', 'OK');\n        isError = true;\n      }\n      if (this.customFeatures.length <= this.components) {\n        this.showSnackBar('No. of custom features should be greater than components', 'OK');\n        isError = true;\n      }\n    }\n    if (\n      (this.decomposition === 'pca' || this.decomposition === 'factoranalysis') &&\n      (this.components < 2 || this.components > fileData.noOfCols)\n    ) {\n      this.showSnackBar(\n        `Dimensional reduction components should be between 2 and ${fileData.noOfCols}`,\n        'OK'\n      );\n      isError = true;\n    }\n    if (this.clusters < 2 || this.clusters > 10) {\n      this.showSnackBar('Clusters value should be between 2 and 10', 'OK');\n      isError = true;\n    }\n    if (this.agglomerativeCluster < 2 || this.agglomerativeCluster > 10) {\n      this.showSnackBar('Clusters value should be between 2 and 10', 'OK');\n      isError = true;\n    }\n    if (\n      this.normalizationMethod == 'log_transform' &&\n      this.featuresToTransform.length < 1 &&\n      this.applyToTarget == false\n    ) {\n      this.showSnackBar('Please select independent feature or target for feature transform', 'OK');\n      isError = true;\n    }\n    return isError;\n  }\n\n  /**\n   * Generates a clustering request data to parse in the API call of training\n   */\n  createClusteringReqData(): any {\n    let trainingReqData: any;\n    let categoricalColNames: Array<any> = [];\n    let finalOrdinalEncoderMap: Array<any> = [];\n    let numericFeatures: Array<any> = [];\n    categoricalColNames = this.getFeatures(this.edaData.edaSummary, 'Categorical', null);\n    numericFeatures = this.edaData.edaSummary.filter(function (feature) {\n      return feature.dataType === 'Integer' || feature.dataType === 'Decimal';\n    });\n    finalOrdinalEncoderMap = this.filterOridinalEncoderMap();\n    trainingReqData = {\n      originalFileId: this.selectedDataSet._id,\n      parentFileId: this.edaData._id,\n      parentPipelineFilename: this.edaData.tasks[0].currentPipelineFilename,\n      fileSchema: this.selectedDataSet.fileSchema,\n      algorithms: this.algorithmControl.value,\n      algoType: 'clustering',\n      edaId: this.edaData._id,\n      edaSummary: this.edaData.edaSummary,\n      pId: this.project._id,\n      hptPreference: this.hptPreference,\n      categoricalColNames: categoricalColNames || [],\n      afterEdaDataFilePath: this.edaData.afterEdaDataFilePath,\n      paragraphColNames: this.edaData.paragraphColNames,\n      indepVariable: this.tempSelected,\n      backGround: this.backGround,\n      foreGround: this.foreGround,\n      rootFileName: this.selectedDataSet.filename,\n      problemType: this.project.type,\n      datetimeColumnName: this.edaData.datetimeColumnName,\n      usingGPU: this.project.useGPU || false,\n      categoricalEncoders: this.catEnc || {},\n      ordinalEncoderMap: finalOrdinalEncoderMap,\n      classNames: this.edaData.classNames,\n      dateComponent: this.dateComponent,\n      indexPath: this.edaData.indexPath,\n      clusteringInfo: {\n        scalarValue: this.scaleValue,\n        featuresToTransform: this.featuresToTransform,\n        normalizationMethod: this.normalizationMethod,\n        decomposition: this.decomposition,\n        clusters: {},\n        components: this.components,\n        numericFeatures: numericFeatures,\n        customFeatureChecked: this.customFeatureChecked,\n        customFeatures: this.customFeatures,\n        featureScaling: this.featureScalingOption,\n      },\n      nlpConfigs: this.nlpConfigs,\n    };\n    trainingReqData.algorithms.forEach((element) => {\n      if (element === 'KMeans') {\n        trainingReqData.clusteringInfo.clusters['KMeans'] = this.clusters;\n      } else if (element === 'Agglomerative') {\n        trainingReqData.clusteringInfo.clusters['Agglomerative'] = this.agglomerativeCluster;\n      }\n    });\n    if (trainingReqData.clusteringInfo.normalizationMethod !== 'log_transform') {\n      delete trainingReqData.clusteringInfo['scalarValue'];\n    }\n    return trainingReqData;\n  }\n\n  /**\n   * Execute training for prodictive modelling project type\n   */\n  trainPredictiveProject(): void {\n    let isDataValid: boolean;\n    this.getAFGoptions();\n    isDataValid = this.validatePredictiveTrainingData();\n    if (!isDataValid) {\n      this._spinner.showSpinner();\n      let reqObj = this.createPredictiveReqData();\n      // API call\n      this._training\n        .startPredictiveTraining(this.project._id, reqObj)\n        .pipe(takeUntil(this.unsubscribe$))\n        .subscribe(\n          (res) => {\n            if (res) {\n              this._toaster.info('Training started', 'Train Model');\n            }\n          },\n          (err: any) => {\n            this._spinner.stopSpinner();\n            if (typeof err.error === 'string') {\n              err = JSON.parse(err.error);\n            }\n            this._toaster.error(err?.message, 'Train Model');\n          }\n        );\n    }\n  }\n\n  /**\n   * Performs validation on the whole predictive training data before starting training\n   */\n  validatePredictiveTrainingData(): boolean {\n    let isError: boolean = false;\n    let fileData = this.dataSetsList.find((item) => item._id === this.selectedDataSet._id);\n    this.tempSelected = this.generateIndepVariableList(this.edaData.depVariable, 'lOb');\n    if (this.algorithmControl.value.length === 1) {\n      this.algorithm = 1;\n    }\n    if (this.tempSelected.length < 1) {\n      this.showSnackBar('Please select feature(s)', 'OK');\n      isError = true;\n    }\n    if (!this.featureStep) {\n      this.showSnackBar('Feature steps should be between 0-1', 'OK');\n      isError = true;\n    }\n    if (!this.cv) {\n      this.showSnackBar('CV should be between 0-5', 'OK');\n      isError = true;\n    }\n    if (\n      (this.decomposition === 'pca' || this.decomposition === 'factoranalysis') &&\n      (this.components < 2 || this.components > fileData.noOfCols)\n    ) {\n      this.showSnackBar(\n        `Dimensional reduction components should be between 2 and ${fileData.noOfCols}`,\n        'OK'\n      );\n      isError = true;\n    }\n    if (this.customFeatureChecked && this.decomposition !== 'none') {\n      if (!this.customFeatures) {\n        this.showSnackBar('Custom features cannot be empty', 'OK');\n        isError = true;\n      }\n      if (this.customFeatures.length <= this.components) {\n        this.showSnackBar('No. of custom features should be greater than components', 'OK');\n        isError = true;\n      }\n    }\n    if (this.sampling !== 'none' && !this.samplingData.length) {\n      this.showSnackBar('Please complete sampling percentage calculation', 'OK');\n      isError = true;\n    }\n    this.autoFeatureGenTasks.forEach((item) => {\n      if (item.exponent <= 0) {\n        this.showSnackBar('Exponent value must be greater than 0', 'OK');\n        isError = true;\n      } else if (item.featureSplitCount <= 0) {\n        this.showSnackBar('Feature split count value must be greater than 0', 'OK');\n        isError = true;\n      }\n    });\n    if (this.fsMethod === 'RFE') {\n      if (this.featureStep === 'none' || this.featureStep < 1 || this.featureStep > 100) {\n        this.showSnackBar('Feature Reduction - Step value must be in between 1 and 100', 'OK');\n        isError = true;\n      }\n      if (this.cv === 'none' || this.cv < 1 || this.cv > 5) {\n        this.showSnackBar('Feature Reduction - CV value must be in between 1 and 5', 'OK');\n        isError = true;\n      }\n      if (!this.estimator) {\n        this.showSnackBar('Feature Reduction - Estimator is required', 'OK');\n        isError = true;\n      }\n    }\n    if (\n      this.normalizationMethod === 'log_transform' &&\n      this.featuresToTransform.length < 1 &&\n      this.applyToTarget === false\n    ) {\n      this.showSnackBar('Please select independent feature or target for feature transform', 'OK');\n      isError = true;\n    }\n    return isError;\n  }\n\n  /**\n   * Generates a predictive request data to parse in the API call of training\n   */\n  createPredictiveReqData(): any {\n    let samplingPer: Array<any> = [];\n    let samplingdict: any = {};\n    let categoricalColNames: Array<any> = [];\n    let finalOrdinalEncoderMap: Array<any> = [];\n    let trainingReqData: any;\n    if (this.samplingdat?.length) {\n      for (var i = 0; i < this.samplingData.length; i++) {\n        let obj = {\n          colName: this.samplingData[i].colName,\n          value: this.samplingData[i].value,\n        };\n        samplingPer.push(obj);\n      }\n      samplingPer.forEach((item) => {\n        samplingdict[item.colName] = item.value;\n      });\n    }\n    categoricalColNames = this.getFeatures(\n      this.edaData.edaSummary,\n      'Categorical',\n      this.edaData.depVariable\n    );\n    if (this.algorithmControl.value.length === 1) {\n      this.algorithm = 1;\n    }\n    finalOrdinalEncoderMap = this.filterOridinalEncoderMap();\n    if (this.featureScalingOption == 'none' && this.normalizationMethod == 'none') {\n      this.applyToTarget = false;\n    }\n    trainingReqData = {\n      targetType: this.targetDetails.targetType,\n      originalFileId: this.selectedDataSet._id,\n      parentFileId: this.selectedDataSet._id,\n      parentPipelineFilename: this.edaData.tasks[0].currentPipelineFilename,\n      fileSchema: this.selectedDataSet.fileSchema,\n      depVariable: this.edaData.depVariable,\n      indepVariable: this.tempSelected,\n      algorithms: this.algorithmControl.value,\n      testSize: this.edaData.dataSetInfo.testSize,\n      pId: this.project._id,\n      hptPreference: this.hptPreference,\n      categoricalColNames: categoricalColNames || [],\n      noOfCol: this.edaData.edaSummary.length,\n      paragraphColNames: this.edaData.paragraphColNames,\n      algoType: this.algoType,\n      isMultilabel: this.isMultilabel,\n      backGround: this.backGround,\n      foreGround: this.foreGround,\n      edaId: this.edaData._id,\n      edaSummary: this.edaData.edaSummary,\n      datetimeColumnName: this.edaData.datetimeColumnName,\n      problemType: this.project.type,\n      isImbalanced: this.isImbalanced,\n      sampling: this.sampling,\n      autoFeatureGenTasks: this.autoFeatureGenTasks.length ? this.autoFeatureGenTasks : null,\n      rootFileName: this.selectedDataSet.filename,\n      dimReductionFitSize: this.edaData.dimReductionFitSize || 1.0,\n      usingGPU: this.project.useGPU || false,\n      categoricalEncoders: this.catEnc || {},\n      ordinalEncoderMap: finalOrdinalEncoderMap,\n      dateComponent: this.dateComponent,\n      classNames: this.edaData.classNames,\n      dropOriginal: this.fdropMethod || false,\n      indexPath: this.edaData.indexPath,\n      predictiveModelingInfo: {\n        scalarValue: this.scaleValue,\n        featuresToTransform: this.featuresToTransform,\n        applyToTarget: this.applyToTarget,\n        decomposition: this.decomposition,\n        components: this.components,\n        featureSelectionMethod: this.fsMethod || 'none',\n        scoringFunction: this.scoringFunction || 'none',\n        featurePercentage: this.featurePercentage,\n        nFeaturesToSelect: this.nFeaturesToSelect,\n        // ! Replaced this.step with this.featureStep (unused variable this.step)\n        step: this.featureStep,\n        customFeatureChecked: this.customFeatureChecked,\n        customFeatures: this.customFeatures,\n        featureScaling: this.featureScalingOption || 'none',\n        normalizationMethod: this.normalizationMethod,\n        featureSelectionEstimator: this.estimator || 'none',\n        featureSelectionStep: this.featureStep || 'none',\n        featureSelectionCV: this.cv || 'none',\n      },\n      samplingPercentage: samplingdict || {},\n      nlpConfigs: this.nlpConfigs,\n    };\n    if (trainingReqData.predictiveModelingInfo.normalizationMethod !== 'log_transform') {\n      delete trainingReqData.predictiveModelingInfo['scalarValue'];\n    }\n    if (this.fsMethod != 'RFE') {\n      trainingReqData.predictiveModelingInfo.featureSelectionEstimator = 'none';\n      trainingReqData.predictiveModelingInfo.featureSelectionStep = 'none';\n      trainingReqData.predictiveModelingInfo.featureSelectionCV = 'none';\n    }\n    return trainingReqData;\n  }\n\n  /**\n   * Visualize components\n   */\n  visualizeComponents(): void {\n    let reqObj: any;\n    this.showTSTabs = true;\n    // checkThemeColor();\n    this.tempSelected = this.generateIndepVariableList(this.edaData.depVariable, 'lOb');\n    // Pushes the new graph type in tabs and select it\n    if (!this.componentsTabs.includes(this.selectedGraphType)) {\n      this.componentsTabs.push(this.selectedGraphType);\n      this.selectedTabIndex = this.componentsTabs.length - 1;\n    } else {\n      this.componentsTabs.forEach((item: any, i: number) =>\n        item === this.selectedGraphType ? (this.selectedTabIndex = i) : 0\n      );\n    }\n    reqObj = {\n      projectId: this.project._id,\n      indexPath: this.edaData.indexPath,\n      filename: this.selectedDataSet.filename,\n      parentPipelineFilename: this.edaData.tasks[0].currentPipelineFilename,\n      afterEdaDataFilePath: this.edaData.afterEdaDataFilePath,\n      foreGround: this.foreGround,\n      target: this.edaData.depVariable,\n      timeseriesInfo: {\n        frequency: this.selectedFrequency || null,\n        tab: this.selectedGraphType || 'trend',\n        model: this.visualizationModel,\n        exogVariables: this.tempSelected || [],\n      },\n      fileSchema: this.childFileData.fileSchema,\n      timeseriesIds: this.edaData.timeseriesIds\n    };\n    // API call\n    this._training\n      .getVisualizeComponentPlot(this.project._id, reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res) => {\n          if (res) {\n            let element: any = document.getElementById(this.selectedGraphType);\n            while (element.data && element.data.length > 0) {\n              Plotly.deleteTraces(element, [0]);\n            }\n            Plotly.plot(element, res.graphContent.data, res.graphContent.layout);\n          }\n        },\n        (err: HttpErrorResponse) => {\n          this._spinner.stopSpinner();\n          this._toaster.error(err.error.message, 'Train Model');\n        }\n      );\n  }\n\n  /**\n   * Function to trigger stationarity check API\n   */\n  doSationarityTest(): void {\n    this._spinner.showSpinner();\n    let reqObj: any;\n    reqObj = {\n      afterEdaDataFilePath: this.edaData.afterEdaDataFilePath,\n      target: this.edaData.depVariable,\n      indexPath: this.edaData.indexPath,\n      filename: this.selectedDataSet.filename,\n      fileSchema: this.selectedDataSet.fileSchema,\n      stationarityTest: this.stationarityTestMethod,\n      parentPipelineFilename: this.edaData.tasks[0].currentPipelineFilename,\n      projectId: this.project._id,\n      timeseriesInfo: {\n        exogVariables: this.generateIndepVariableList(this.edaData.depVariable, 'lOb'),\n      },\n      timeseriesIds: this.edaData.timeseriesIds\n    };\n    // API call\n    this._training\n      .startStationarityTest(this.project._id, reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res) => {\n          if (res) {\n            this.stationaryTestData = res.data;\n            // Assigns the data to mat-table\n            this.stationaryDataSource = new MatTableDataSource(res.data);\n            this.stationaryDataSource.paginator = this.stationaryPaginator;\n            this.stationaryDataSource.sort = this.stationarySort;\n          } else {\n            this._toaster.error('Cannot perform stationarity test', 'Train Model');\n          }\n          this._spinner.stopSpinner();\n        },\n        (err: Error) => {\n          this._spinner.stopSpinner();\n          this._toaster.error(`Server Error - ${err.message}`, 'Train Model');\n        }\n      );\n  }\n\n  /**\n   * Generates auto correlation graph\n   */\n  getAutoCorrelation(): void {\n    this._spinner.showSpinner();\n    let reqObj: any;\n    // checkThemeColor();\n    reqObj = {\n      projectId: this.project._id,\n      nlags: this.nlags,\n      foreGround: this.foreGround,\n      depVariable: this.edaData.depVariable,\n      indexPath: this.edaData.indexPath,\n      filename: this.selectedDataSet.filename,\n      pacfMethod: this.pacfMethod,\n      parentPipelineFilename: this.edaData.tasks[0].currentPipelineFilename,\n      afterEdaDataFilePath: this.edaData.afterEdaDataFilePath,\n      timeseriesIds: this.edaData.timeseriesIds\n    };\n    // API call\n    this._training\n      .getAutoCorrelationGraph(this.project._id, reqObj)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(\n        (res) => {\n          if (res) {\n            let autoCorrelationGraph: any = document.getElementById('autoCorrelationGraph');\n            while (autoCorrelationGraph.data && autoCorrelationGraph.data.length > 0) {\n              Plotly.deleteTraces(autoCorrelationGraph, [0]);\n            }\n            Plotly.plot(autoCorrelationGraph, res.graphContent.data, res.graphContent.layout);\n          } else {\n            this._toaster.error('Cannot generate auto correlation graph', 'Train Model');\n          }\n          this._spinner.stopSpinner();\n        },\n        (err: HttpErrorResponse) => {\n          this._spinner.stopSpinner();\n          this._toaster.error(\n            err.error.graphContent || 'Cannot generate auto correlation graph',\n            'Train Model'\n          );\n        }\n      );\n  }\n\n  /**\n   * Called when the target is changed\n   */\n  // targetChangeHandler(target: any): void {\n  //   if (this.project.type === 'predictive_modeling') {\n  //     this.onTargetChange(target);\n  //   } else if (this.project.type === 'timeseries') {\n  //     this.onTsTargetChange();\n  //   } else {\n  //     return;\n  //   }\n  // }\n\n  /**\n   * Called when algorithm is changed\n   */\n  algoChangeHandler(): void {\n    if (this.project.type === 'clustering') {\n      this.onClusteringAlgoChange();\n    } else if (this.project.type === 'timeseries') {\n      this.onTsAlgoChange();\n    } else {\n      this.buildTrainingTable(this.edaData.edaSummary, this.project.type, 'without_feature_score');\n    }\n  }\n\n  /**\n   * Opens the dynamic dialog\n   * @param type\n   */\n  dialogHandler(type: string): void {\n    if (type === 'configureFeature') {\n      this.generateConfigureData(type);\n    } else if (type === 'optimalClusters') {\n      (environment.appType === 'enterprise' ||\n        (environment.appType === 'saas' &&\n          (this.user?.roles?.includes('super_admin') || this.user?.roles?.includes('admin')))) &&\n        this.generateClusterData(type);\n      environment.appType === 'saas' &&\n        !this.user?.roles?.includes('super_admin') &&\n        !this.user?.roles?.includes('admin') &&\n        this.showSnackBar('Selected feature is under premium subscription', 'OK');\n    } else if (type === 'hpt') {\n      this.openDialog(type);\n    }\n  }\n\n  /**\n   * Opens the dialog\n   */\n  openDialog(type: string, reqObj?: any): void {\n    let t = this.nlpConfigs;\n    this._dialog\n      .open(DialogHandlerComponent, {\n        minWidth: type === 'optimalClusters' ? '80vw' : '50vw',\n        maxWidth: type === 'optimalClusters' ? '80vw' : '50vw',\n        data: {\n          type: type,\n          algorithm: this.modelAlgorithmArray,\n          // Filters only the selected algorithms\n          modelAlgorithms: this.modelAlgorithmArray.filter((x: any) =>\n            this.algorithmControl.value.map((y: any) => y).includes(x.name)\n          ),\n          prevTrainingData: this.prevTrainingInfo,\n          hptPreference: this.hptPreference,\n          selectedFeature: this.feature,\n          nlpDefaultConfigData: this.nlpDefaultConfigData,\n          showNgramSlider: this.showNgramSlider,\n          nlpConfigs: this.nlpConfigs,\n          nlpLanguages: NLP_LANGUAGES,\n          clusterReqObj: reqObj,\n          ordinalEncoderData: reqObj,\n        },\n      })\n      .afterClosed()\n      .subscribe((data: any) => {\n        if (data) {\n          if (data.hptPreference?.length) {\n            // Converts the HPT form data values into integer, if type is integer.\n            data.hptPreference.forEach((item: any) => {\n              if (item.fields.length) {\n                item.fields = item.fields.map((obj: any) => {\n                  if (obj.type === 'number' && typeof obj.data === 'string') {\n                    obj.data = parseFloat(obj.data);\n                  }\n                  return obj;\n                });\n              }\n            });\n            this.hptPreference = [...data.hptPreference];\n          } else if (data.nlpConfigs?.length) {\n            this.nlpConfigs = [...data.nlpConfigs];\n          } else if (data.ordinalEncoder?.length) {\n            this.ordinalEncMap = [...data.ordinalEncoder];\n          }\n        } else {\n          // If canceled, reset the strategy to old one\n          this.tableData.map((item: any) => {\n            if (item && item.colName === reqObj?.colName) {\n              item.encoder = 'Binary encoder';\n            }\n            return item;\n          });\n          this.featureDataSource = new MatTableDataSource(this.tableData);\n          this.featureDataSource.sort = this.featureSort;\n          this.featureDataSource.paginator = this.featurePaginator;\n          this.featureDataSource._updateChangeSubscription();\n          this.catEnc[reqObj?.colName] = 'Binary encoder';\n        }\n      });\n  }\n\n  /**\n   * Adds the new item in the form array\n   */\n  addItem(): void {\n    if (this.explicitPairWiseOption.length > 10) {\n      this.showSnackBar('You can add only 10 custom option', 'OK');\n    } else {\n      this.explicitPairWiseOption.push({\n        operation: 'addition',\n        colName: [],\n        typeOfAutoFeatureGen: 'explicitPairwiseCombination',\n      });\n    }\n  }\n\n  /**\n   * Removes the item from form array\n   */\n  removeItem(index: number): void {\n    this.explicitPairWiseOption.splice(this.explicitPairWiseOption.indexOf(index), 1);\n  }\n\n  /**\n   * Creates and returns a new form structure\n   * @returns\n   */\n  createItem(): FormGroup {\n    return this._fb.group({\n      operation: 'addition',\n      colName: [],\n      exponent: '',\n      typeOfAutoFeatureGen: 'explicitPairwiseCombination',\n    });\n  }\n\n  /**\n   * Renders the snackbar\n   */\n  showSnackBar(message: string, button: string): void {\n    this.snackBarRef = this._snackBar.open(message, button, {\n      horizontalPosition: 'right',\n      verticalPosition: 'bottom',\n    });\n  }\n\n  /**\n   * Returns the proper colum names\n   * @param colName\n   * @returns\n   */\n  generateProperColNames(colName: string): string {\n    switch (colName) {\n      case 'colName':\n        if (this.project.type === 'clustering') {\n          return 'Feature Name';\n        } else if (this.project.type === 'predictive_modeling') {\n          return 'Independent Feature';\n        } else {\n          return 'Exogenous Feature';\n        }\n      case 'categoricalDateOperation':\n        return 'Categorical/Date Operation';\n      case 'isImportant':\n        return 'Is Important';\n      case 'score':\n        return 'Feature Score';\n    }\n  }\n\n  /**\n   * Selects all rows if they are not all selected; otherwise clear selection\n   */\n  masterToggle() {\n    this.isAllSelected()\n      ? this.selection.clear()\n      : this.featureDataSource.data.forEach((row) => this.selection.select(row));\n    if (this.project.type !== 'clustering') {\n      this.tempSelected = this.generateIndepVariableList(this.edaData.depVariable, 'lOb');\n    }\n    let colname = this.selection.selected.filter((feature: any) => {\n      if (\n        !feature.constantFeature &&\n        !feature.highCardinalityFeature &&\n        !feature.mostlyMissing &&\n        feature.colName !== this.edaData.depVariable &&\n        (feature.dataType === 'Decimal' ||\n          feature.dataType === 'Integer' ||\n          feature.dataType === 'Numeric')\n      ) {\n        return feature;\n      }\n    });\n    this.tempfeat = colname.map((feature) => feature.colName);\n    if (this.project.type === 'timeseries' && this.edaData.isMultipleTimeseries) {\n      this.tempfeat = this.tempfeat.filter((i: any) =>\n        !this.edaData.timeseriesIds.includes(i) ? i : null\n      );\n    }\n  }\n\n  propagationMethod(row) {\n    //$event.stopPropagation();\n    let filterFeatures = this.selection.selected.filter((feature: any) => {\n      if (\n        !feature.constantFeature &&\n        !feature.highCardinalityFeature &&\n        !feature.mostlyMissing &&\n        feature.colName !== this.edaData.depVariable &&\n        (feature.dataType === 'Decimal' ||\n          feature.dataType === 'Integer' ||\n          feature.dataType === 'Numeric')\n      ) {\n        return feature;\n      }\n    });\n    this.tempfeat = filterFeatures.map((feature) => feature.colName);\n    // Filter the timeseriesIds from features list\n    if (this.project.type === 'timeseries' && this.edaData.isMultipleTimeseries) {\n      this.tempfeat = this.tempfeat.filter((i: any) =>\n        !this.edaData.timeseriesIds.includes(i) ? i : null\n      );\n    }\n    // this.tempSelected = this.generateIndepVariableList(this.edaData.depVariable, 'lOb');\n  }\n\n  /**\n   * Whether the number of selected elements matches the total number of rows.\n   */\n  isAllSelected() {\n    const numSelected = this.selection.selected.length;\n    const numRows = this.featureDataSource.data.length;\n    return numSelected === numRows;\n  }\n\n  /**\n   * Generates the number array with limit\n   * @param max\n   * @returns\n   */\n  generateNumericArray(max: number): Array<any> {\n    let arr: Array<any> = [];\n    for (var i = 1; i <= max; i++) {\n      arr.push(i);\n    }\n    return arr;\n  }\n\n  /**\n   * Called when any string is entered in search box\n   * @param event keyup event\n   */\n  applyFilter(event: Event, tableName: string): void {\n    const filterValue = (event.target as HTMLInputElement).value;\n    if (tableName === 'stationarity') {\n      this.stationaryDataSource.filter = filterValue.trim().toLowerCase();\n      if (this.stationaryDataSource.paginator) {\n        this.stationaryDataSource.paginator.firstPage();\n      }\n    } else if (tableName === 'feature') {\n      this.featureDataSource.filter = filterValue.trim().toLowerCase();\n      if (this.featureDataSource.paginator) {\n        this.featureDataSource.paginator.firstPage();\n      }\n    }\n  }\n\n  onFocusOut(algo, cluster) {\n    if (!Number.isInteger(cluster)) {\n      this.showSnackBar('Number of optimal cluster should be integer', 'OK');\n      this.clusters = algo == 'kmeans' ? 2 : this.clusters;\n      this.agglomerativeCluster = algo == 'agglo' ? 2 : this.agglomerativeCluster;\n      return;\n    }\n  }\n  /**\n   * Initializes the socket to listen events when emmited\n   */\n  initSocket(): void {\n    // Listens to the TrainingProgress event\n    this._socket.listen('TrainingProgress').subscribe(\n      (data: any) => {\n        if (data) {\n          if (data.status === 'training_failed') {\n            this._spinner.stopSpinner();\n            this._toaster.error(data.message, 'Train Model');\n          } else {\n            this._spinner.stopSpinner();\n            if (this.algorithm === 1 && data.status === 'model_failed') {\n              this._toaster.error(`Model training failed for ${data.algoName}. ${data.message}`, 'Train Model');\n            } else if (this.algorithm !== 1 && data.status === 'model_failed') {\n              this._toaster.error(`Model training failed for ${data.algoName}. ${data.message}`, 'Train Model');\n              this._toaster.success('Model training completed', 'Train Model');\n              this._router.navigate(['/project/models']);\n            } else {\n              this._toaster.success('Model training completed', 'Train Model');\n              this._router.navigate(['/project/models']);\n            }\n          }\n        } else {\n          this._spinner.stopSpinner();\n        }\n      },\n      (err: Error) => {\n        this._spinner.stopSpinner();\n        this._toaster.error('Socket Error', 'Train Model');\n      }\n    );\n  }\n\n  /**\n   * Perform operations when the module is destroyed\n   */\n  ngOnDestroy() {\n    this._socket.removeListener('TrainingProgress');\n    this.snackBarRef ? this.snackBarRef.dismiss() : '';\n    this.unsubscribe$.next(false);\n    this.unsubscribe$.unsubscribe();\n  }\n}\n","import { SharedModule } from 'src/app/shared/shared.module';\nimport { TrainingComponent } from './training.component';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { DialogHandlerComponent } from './dialog-handler/dialog-handler.component';\nimport { MatBadgeModule } from '@angular/material/badge';\n\n@NgModule({\n  declarations: [TrainingComponent, DialogHandlerComponent],\n  imports: [\n    CommonModule,\n    SharedModule,\n    RouterModule.forChild([{\n      path: '', component: TrainingComponent,\n    }]),\n    MatBadgeModule\n  ]\n})\nexport class TrainingModule { }\n"]}