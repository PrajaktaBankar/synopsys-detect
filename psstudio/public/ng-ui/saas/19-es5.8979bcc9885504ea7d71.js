!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{Zjxd:function(e,o,n){"use strict";n.r(o),n.d(o,"DataModule",(function(){return Xi}));var i=n("ofXK"),r=n("M9IT"),c=n("Dh3D"),s=n("+0xr"),l=n("XNiG"),d=n("mrSG"),u=n("3Pt+"),b=n("0IaG"),p=n("AytR"),m=n("fXoL"),f=n("kYjS"),h=n("5eHb"),g=n("mLz/"),S=n("4xDO"),v=n("dNgK");function T(t,e){if(1&t&&(m.Tb(0,"h2",6),m.Kc(1),m.Sb()),2&t){var a=m.ec();m.Bb(1),m.Mc(" ",a.dialogHeading,"\n")}}function y(t,e){if(1&t&&(m.Tb(0,"h2",6),m.Kc(1),m.Sb()),2&t){var a=m.ec();m.Bb(1),m.Mc(" ",a.isEdit?"Update Connection":"Connection","\n")}}function k(t,e){if(1&t&&(m.Tb(0,"h2",6),m.Kc(1),m.Sb()),2&t){var a=m.ec();m.Bb(1),m.Mc(" ",a.isEdit?"Update folder":"Create folder","\n")}}function I(t,e){if(1&t){var a=m.Ub();m.Tb(0,"mat-dialog-content",7),m.Tb(1,"legend",8),m.Tb(2,"span",9),m.Ob(3,"em",10),m.Kc(4," Choose any data source "),m.Sb(),m.Sb(),m.Ob(5,"hr"),m.Tb(6,"div",11),m.Tb(7,"div",12),m.Tb(8,"mat-card",13,14),m.ac("click",(function(){return m.wc(a),m.ec().formUIHandler("upload")})),m.Tb(10,"mat-card-content",15),m.Ob(11,"br"),m.Tb(12,"picture",16),m.Ob(13,"img",17),m.Ob(14,"mat-icon",18),m.Sb(),m.Tb(15,"h4",19),m.Kc(16,"Upload"),m.Sb(),m.Tb(17,"p",20),m.Kc(18,"Upload local files (.csv, .pkl, .xlsx)"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(19,"div",12),m.Tb(20,"mat-card",13,21),m.ac("click",(function(){return m.wc(a),m.ec().formUIHandler("url")})),m.Tb(22,"mat-card-content",15),m.Ob(23,"br"),m.Tb(24,"picture",16),m.Ob(25,"img",22),m.Ob(26,"mat-icon",23),m.Sb(),m.Tb(27,"h4",19),m.Kc(28,"URL"),m.Sb(),m.Tb(29,"p",20),m.Kc(30,"Pull data from an open URL"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(31,"div",12),m.Tb(32,"mat-card",13,24),m.ac("click",(function(){return m.wc(a),m.ec().formUIHandler("mssql")})),m.Tb(34,"mat-card-content",15),m.Tb(35,"div",25),m.Tb(36,"span",26),m.Kc(37,"ver-2019"),m.Sb(),m.Sb(),m.Tb(38,"picture",16),m.Ob(39,"img",27),m.Ob(40,"mat-icon",28),m.Sb(),m.Tb(41,"h4",19),m.Kc(42,"MS-SQL"),m.Sb(),m.Tb(43,"p",20),m.Kc(44,"Query data from mssql"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(45,"div",12),m.Tb(46,"mat-card",13,29),m.ac("click",(function(){return m.wc(a),m.ec().formUIHandler("mysql")})),m.Tb(48,"mat-card-content",15),m.Tb(49,"div",25),m.Tb(50,"span",26),m.Kc(51,"ver-8.0.27"),m.Sb(),m.Sb(),m.Tb(52,"picture",16),m.Ob(53,"img",30),m.Ob(54,"mat-icon",31),m.Sb(),m.Tb(55,"h4",19),m.Kc(56,"MySQL"),m.Sb(),m.Tb(57,"p",20),m.Kc(58,"Query data from mysql"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(59,"div",12),m.Tb(60,"mat-card",13,32),m.ac("click",(function(){return m.wc(a),m.ec().formUIHandler("postgresql")})),m.Tb(62,"mat-card-content",15),m.Tb(63,"div",25),m.Tb(64,"span",26),m.Kc(65,"ver-14.1"),m.Sb(),m.Sb(),m.Tb(66,"picture",16),m.Ob(67,"img",33),m.Ob(68,"mat-icon",34),m.Sb(),m.Tb(69,"h4",19),m.Kc(70,"PostgreSQL"),m.Sb(),m.Tb(71,"p",20),m.Kc(72,"Query data from postgresql"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(73,"div",12),m.Tb(74,"mat-card",13,35),m.ac("click",(function(){return m.wc(a),m.ec().formUIHandler("sftp")})),m.Tb(76,"mat-card-content",15),m.Ob(77,"br"),m.Tb(78,"picture",16),m.Ob(79,"img",36),m.Ob(80,"mat-icon",37),m.Sb(),m.Tb(81,"h4",19),m.Kc(82,"SFTP"),m.Sb(),m.Tb(83,"p",20),m.Kc(84,"Pull from SFTP server"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(85,"div",12),m.Tb(86,"mat-card",13,38),m.ac("click",(function(){return m.wc(a),m.ec().formUIHandler("snowflake")})),m.Tb(88,"mat-card-content",15),m.Ob(89,"br"),m.Tb(90,"picture",16),m.Ob(91,"img",39),m.Ob(92,"mat-icon",40),m.Sb(),m.Tb(93,"h4",19),m.Kc(94,"Snowflake"),m.Sb(),m.Tb(95,"p",20),m.Kc(96,"Pull from data cloud"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(97,"div",12),m.Tb(98,"mat-card",13,41),m.ac("click",(function(){return m.wc(a),m.ec().formUIHandler("s3")})),m.Tb(100,"mat-card-content",15),m.Ob(101,"br"),m.Tb(102,"picture",16),m.Ob(103,"img",42),m.Ob(104,"mat-icon",43),m.Sb(),m.Tb(105,"h4",19),m.Kc(106,"Amazon S3"),m.Sb(),m.Tb(107,"p",20),m.Kc(108,"Pull from cloud object storage"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(109,"div",12),m.Tb(110,"mat-card",13),m.ac("click",(function(){return m.wc(a),m.ec().formUIHandler("bigquery")})),m.Tb(111,"mat-card-content",15),m.Ob(112,"br"),m.Tb(113,"picture",16),m.Ob(114,"img",44),m.Ob(115,"mat-icon",43),m.Sb(),m.Tb(116,"h4",19),m.Kc(117,"Google BigQuery"),m.Sb(),m.Tb(118,"p",20),m.Kc(119," Runs query from multicloud data warehouse "),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb()}if(2&t){var o=m.ec();m.Bb(2),m.kc("matTooltip",o._utils.getTootip("dataSources")),m.Bb(6),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("upload")?"source-type-card pro-restrict":"source-type-card")("matTooltip",o._utils.getTootip("fileUpload")),m.Bb(6),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("upload")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("upload")&&o.enterpriseConnectionList.includes("upload")?"ENT":"PRO"),m.Bb(6),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("url")?"source-type-card pro-restrict":"source-type-card")("matTooltip",o._utils.getTootip("pullUrl")),m.Bb(6),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("url")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("url")&&o.enterpriseConnectionList.includes("url")?"ENT":"PRO"),m.Bb(6),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("mssql")?"source-type-card pro-restrict":"source-type-card")("matTooltip",o._utils.getTootip("msSql")),m.Bb(8),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("mssql")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("mssql")&&o.enterpriseConnectionList.includes("mssql")?"ENT":"PRO"),m.Bb(6),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("mysql")?"source-type-card pro-restrict":"source-type-card")("matTooltip",o._utils.getTootip("mySql")),m.Bb(8),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("mysql")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("mysql")&&o.enterpriseConnectionList.includes("mysql")?"ENT":"PRO"),m.Bb(6),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("postgresql")?"source-type-card pro-restrict":"source-type-card")("matTooltip",o._utils.getTootip("postgre")),m.Bb(8),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("postgresql")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("postgresql")&&o.enterpriseConnectionList.includes("postgresql")?"ENT":"PRO"),m.Bb(6),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("sftp")?"source-type-card pro-restrict":"source-type-card")("matTooltip",o._utils.getTootip("Sftp")),m.Bb(6),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("sftp")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("sftp")&&o.enterpriseConnectionList.includes("sftp")?"ENT":"PRO"),m.Bb(6),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("snowflake")?"source-type-card pro-restrict":"source-type-card")("matTooltip",o._utils.getTootip("snowflake")),m.Bb(6),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("snowflake")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("snowflake")&&o.enterpriseConnectionList.includes("snowflake")?"ENT":"PRO"),m.Bb(6),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("s3")?"source-type-card pro-restrict":"source-type-card")("matTooltip",o._utils.getTootip("s3")),m.Bb(6),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("s3")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("s3")&&o.enterpriseConnectionList.includes("s3")?"ENT":"PRO"),m.Bb(6),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("bigquery")?"source-type-card pro-restrict":"source-type-card")("matTooltip",o._utils.getTootip("bigquery")),m.Bb(5),m.kc("ngClass",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("bigquery")?"material-icons-outlined pro-flag":"d-none")("innerText",null!=o.connectionsToRestrict&&o.connectionsToRestrict.includes("bigquery")&&o.enterpriseConnectionList.includes("bigquery")?"ENT":"PRO")}}function w(t,e){if(1&t&&(m.Tb(0,"h4",48),m.Tb(1,"picture",49),m.Ob(2,"img",50),m.Sb(),m.Kc(3),m.Sb()),2&t){var a=m.ec(2);m.Bb(2),m.Ec(a.getHeadingIconSize()),m.kc("src",a.iconType,m.zc)("alt",a.sourceType),m.Bb(1),m.Mc(" ",a.formHeading," ")}}function C(t,e){1&t&&m.Ob(0,"hr")}function _(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",51),m.Tb(1,"app-file-upload-form",52),m.ac("goBackFlag",(function(t){return m.wc(a),m.ec(2).showConnectionTypes=t})),m.Sb(),m.Sb()}if(2&t){var o=m.ec(2);m.Bb(1),m.kc("dataGroupsArray",o.dialogData.dataGroups)("currentDataGroup",o.dialogData.currentDataGroup)}}function D(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",51),m.Tb(1,"app-database-form",53),m.ac("goBackFlag",(function(t){return m.wc(a),m.ec(2).showConnectionTypes=t})),m.Sb(),m.Sb()}if(2&t){var o=m.ec(2);m.Bb(1),m.kc("dataGroupsArray",o.dialogData.dataGroups)("schedularsArray",o.dialogData.schedulars)("sourceType",o.sourceType)("data",o.dialogData.data)("currentDataGroup",o.dialogData.currentDataGroup)}}function F(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",51),m.Tb(1,"app-sftp-and-url-form",53),m.ac("goBackFlag",(function(t){return m.wc(a),m.ec(2).showConnectionTypes=t})),m.Sb(),m.Sb()}if(2&t){var o=m.ec(2);m.Bb(1),m.kc("dataGroupsArray",o.dialogData.dataGroups)("schedularsArray",o.dialogData.schedulars)("sourceType",o.sourceType)("data",o.dialogData.data)("currentDataGroup",o.dialogData.currentDataGroup)}}function O(t,e){if(1&t&&(m.Tb(0,"mat-dialog-content",45),m.Ic(1,w,4,5,"h4",46),m.Ic(2,C,1,0,"hr",4),m.Ic(3,_,2,2,"div",47),m.Ic(4,D,2,5,"div",47),m.Ic(5,F,2,5,"div",47),m.Sb()),2&t){var a=m.ec();m.Bb(1),m.kc("ngIf",!a.isEdit),m.Bb(1),m.kc("ngIf",!a.isEdit),m.Bb(1),m.kc("ngIf","upload"===a.sourceType),m.Bb(1),m.kc("ngIf","mysql"===a.sourceType||"mssql"===a.sourceType||"postgresql"===a.sourceType||"snowflake"===a.sourceType||"bigquery"===a.sourceType),m.Bb(1),m.kc("ngIf","sftp"===a.sourceType||"url"===a.sourceType||"s3"===a.sourceType)}}function B(t,e){if(1&t&&m.Ob(0,"mat-progress-spinner",63),2&t){var a=m.ec(2);m.kc("color",a.color)("mode",a.mode)("diameter",a.diameter)}}function N(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Folder name is required."),m.Sb())}function x(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Only alphanumeric characters are allowed. "),m.Sb())}function G(t,e){if(1&t&&(m.Tb(0,"mat-option",64),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a._id),m.Bb(1),m.Lc(a.name)}}function P(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Parent name is required."),m.Sb())}function M(t,e){if(1&t&&(m.Tb(0,"mat-dialog-content",54),m.Ic(1,B,1,3,"mat-progress-spinner",55),m.Tb(2,"form",56),m.Tb(3,"div",57),m.Tb(4,"mat-form-field",58),m.Tb(5,"mat-label",59),m.Kc(6,"Folder name"),m.Sb(),m.Ob(7,"input",60),m.Ic(8,N,2,0,"mat-error",4),m.Ic(9,x,2,0,"mat-error",4),m.Sb(),m.Sb(),m.Tb(10,"div",57),m.Tb(11,"mat-form-field",58),m.Tb(12,"mat-label"),m.Kc(13,"Select parent folder"),m.Sb(),m.Tb(14,"mat-select",61),m.Ic(15,G,2,2,"mat-option",62),m.Sb(),m.Ic(16,P,2,0,"mat-error",4),m.Sb(),m.Sb(),m.Sb(),m.Sb()),2&t){var a=m.ec();m.Bb(1),m.kc("ngIf",a.showSpinner),m.Bb(1),m.kc("formGroup",a.dataGroupForm),m.Bb(6),m.kc("ngIf",a.dataGroupForm.get("name").hasError("required")&&(a.dataGroupForm.get("name").dirty||a.dataGroupForm.get("name").touched)),m.Bb(1),m.kc("ngIf",a.dataGroupForm.get("name").hasError("pattern")),m.Bb(6),m.kc("ngForOf",a.dialogData.dataGroups),m.Bb(1),m.kc("ngIf",a.dataGroupForm.get("parentId").hasError("required")&&(a.dataGroupForm.get("parentId").dirty||a.dataGroupForm.get("parentId").touched))}}function K(t,e){1&t&&m.Ob(0,"hr")}function A(t,e){1&t&&m.Ob(0,"hr")}function R(t,e){1&t&&(m.Tb(0,"mat-dialog-actions",65),m.Tb(1,"button",66),m.Kc(2,"Cancel"),m.Sb(),m.Sb())}function E(t,e){if(1&t){var a=m.Ub();m.Tb(0,"mat-dialog-actions",65),m.Tb(1,"button",67),m.ac("click",(function(){return m.wc(a),m.ec().closeModal()})),m.Kc(2,"Cancel"),m.Sb(),m.Tb(3,"button",68),m.ac("click",(function(){m.wc(a);var t=m.ec();return t.onSubmitDataGroup(t.dataGroupForm.value)})),m.Kc(4),m.Sb(),m.Sb()}if(2&t){var o=m.ec();m.Bb(3),m.kc("disabled",o.dataGroupForm.invalid),m.Bb(1),m.Mc(" ",o.isEdit?"Update":"Create"," ")}}var q,j=((q=function(){function e(a,o,n,i,r,c,s,l,d){var b,m,f,h,g,S,v,T;t(this,e),this.dialogData=a,this._data=n,this._toaster=i,this.dialogRef=r,this._localStorage=c,this._utils=s,this.renderer=l,this._snackbar=d,this.proConnectionList=null,this.enterpriseConnectionList=null,this.connectionsToRestrict=null,this.allConnectionsList=null,this.allowedNoOfRows=0,this.allowedNoOfColumns=0,this.appType=p.a.appType,this.color="primary",this.mode="indeterminate",this.diameter=100,this.exportProjectDiameter=50,this.showSpinner=!1,this.isEdit=!1,this.showConnectionTypes=!0,this.user=this._localStorage.getItem("user"),this.enterpriseConnectionList=(null===(m=null===(b=this.user)||void 0===b?void 0:b.psFeatures)||void 0===m?void 0:m.enterpriseConnectionList)||[],this.allConnectionsList=(null===(h=null===(f=this.user)||void 0===f?void 0:f.psFeatures)||void 0===h?void 0:h.allConnectionsList)||[],this.allowedNoOfColumns=null===(S=null===(g=this.user)||void 0===g?void 0:g.psFeatures)||void 0===S?void 0:S.allowedNoOfColumns,this.allowedNoOfRows=null===(T=null===(v=this.user)||void 0===v?void 0:v.psFeatures)||void 0===T?void 0:T.allowedNoOfRows,this.fileUploadForm=o.group({name:["",u.I.required]}),this.dataGroupForm=o.group({name:["",[u.I.required,u.I.pattern("^[^\\s][A-Za-z0-9_ ]+$")]],parentId:["",u.I.required]})}return a(e,[{key:"ngOnInit",value:function(){var t,e,a,o,n;switch(this.project=this._localStorage.getItem("project"),"dataSource"!=this.dialogData.formType&&this.formUIHandler(this.dialogData.formType),this.dialogData.formType){case"dataSource":this.dialogHeading="Data Source",this.showConnectionTypes=!0,"saas"===p.a.appType&&!(null===(e=null===(t=this.user)||void 0===t?void 0:t.roles)||void 0===e?void 0:e.includes("super_admin"))&&!(null===(o=null===(a=this.user)||void 0===a?void 0:a.roles)||void 0===o?void 0:o.includes("admin"))&&this.setRestrictions(null===(n=this.dialogData)||void 0===n?void 0:n.allowedConnectionsList);break;case"mysql":case"mssql":case"postgresql":case"sftp":case"url":case"s3":case"snowflake":case"bigquery":this.sourceType=this.dialogData.formType,this.dialogData.formType="dataSource",this.showConnectionTypes=!1;case"dataGroup":this.showConnectionTypes=!1,this.prefillDataGroupForm(this.dialogData.data);break;default:this.prefillDataGroupForm(this.dialogData.data)}}},{key:"setRestrictions",value:function(t){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.connectionsToRestrict=this.allConnectionsList.filter((function(e){return!t.includes(e)})),this.proConnectionList=this.connectionsToRestrict.filter((function(t){return!a.enterpriseConnectionList.includes(t)}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"prefillDataGroupForm",value:function(t){t?(this.isEdit=!0,this.connectionIdToUpdate=t._id,this.dataGroupForm.patchValue({name:t.name,parentId:t.parentId})):(this.dataGroupForm.get("parentId").setValue(this.dialogData.currentDataGroup),this.dataGroupForm.get("name").reset(),this.isEdit=!1)}},{key:"onSubmitDataGroup",value:function(t){this.isEdit?this.updateDataGroupHandler(t):this.createDataGroupHandler(t)}},{key:"updateDataGroupHandler",value:function(t){var e=this;delete this.dialogData.data.name;var a=Object.assign(Object.assign({},this.dialogData.data),{name:t.name});this.dataConnection$=this._data.updateDataGroup(a).subscribe((function(t){t&&(e._toaster.success("Folder name updated successfully","Data Connection"),e.closeModal(t))}),(function(t){e._toaster.error("Server Error","Data Connection")}))}},{key:"createDataGroupHandler",value:function(t){var e=this,a=Object.assign(Object.assign({},t),{projectId:this.project._id});this.dataConnection$=this._data.createNewDataGroup(a).subscribe((function(t){t&&(e._toaster.success(t.name+" folder created successfully","Data Connection"),e.closeModal(t))}),(function(t){e._toaster.error("Server Error","Data Connection")}))}},{key:"formUIHandler",value:function(t){var e,a,o,n,i,r;if("enterprise"===p.a.appType||(null===(a=null===(e=this.user)||void 0===e?void 0:e.roles)||void 0===a?void 0:a.includes("super_admin"))||(null===(n=null===(o=this.user)||void 0===o?void 0:o.roles)||void 0===n?void 0:n.includes("admin"))||this.connectionsToRestrict&&!this.connectionsToRestrict.includes(t))switch(this.showConnectionTypes=!1,this.sourceType=t,t){case"upload":this.formHeading="Upload a file",this.iconType="../../../../../assets/img/icons/upload.svg";break;case"mysql":this.formHeading="Pull data from MYSQL server",this.iconType="../../../../../assets/img/icons/mysql.svg";break;case"mssql":this.formHeading="Pull data from MSSQL server",this.iconType="../../../../../assets/img/icons/mssql.svg";break;case"postgresql":this.formHeading="Pull data from PostgreSQl server",this.iconType="../../../../../assets/img/icons/postgresql.svg";break;case"snowflake":this.formHeading="Pull from data cloud",this.iconType="../../../../../assets/img/snow.png";break;case"sftp":this.formHeading="Pull data from SFTP server",this.iconType="../../../../../assets/img/icons/sftp.svg";break;case"url":this.formHeading="Data Downloader (Note: Works for dataset < 2MB)",this.iconType="../../../../../assets/img/icons/url.svg";break;case"s3":this.formHeading="Pull data from Amazon S3 server",this.iconType="../../../../../assets/img/s3.svg";break;case"bigquery":this.formHeading="Pull data from Google BigQuery",this.iconType="../../../../../assets/img/bigquery.png"}else((null===(i=this.proConnectionList)||void 0===i?void 0:i.includes(t))||(null===(r=this.enterpriseConnectionList)||void 0===r?void 0:r.includes(t)))&&this._snackbar.open("Selected feature is under premium subscription ","OK",{horizontalPosition:"right",verticalPosition:"bottom"})}},{key:"getHeadingIconSize",value:function(){switch(this.sourceType){case"upload":case"mysql":case"mssql":case"postgresql":case"snowflake":case"sftp":case"url":case"s3":case"bigquery":return"height: 20px; width:20px"}}},{key:"closeModal",value:function(t){this.dialogRef.close(t)}},{key:"ngOnDestroy",value:function(){this.dataConnection$&&this.dataConnection$.unsubscribe()}}]),e}()).\u0275fac=function(t){return new(t||q)(m.Nb(b.a),m.Nb(u.h),m.Nb(f.a),m.Nb(h.c),m.Nb(b.i),m.Nb(g.a),m.Nb(S.a),m.Nb(m.G),m.Nb(v.c))},q.\u0275cmp=m.Hb({type:q,selectors:[["app-dialog-handler"]],decls:10,vars:10,consts:[["mat-dialog-title","",4,"ngIf"],["class","data-sources-container",4,"ngIf"],["class","connection-form",4,"ngIf"],["class","mat-typography",4,"ngIf"],[4,"ngIf"],["class","justify-content-end m-auto",4,"ngIf"],["mat-dialog-title",""],[1,"data-sources-container"],[2,"font-size","20px","margin-top","10px"],[3,"matTooltip"],[1,"far","fa-folder",2,"margin-right","15px"],[1,"row","m-1"],[1,"col-md-4"],[3,"ngClass","matTooltip","click"],["fileUploadCard",""],[1,"text-center"],[1,"img-thumbnail","circle","thumb96"],["src","../../../../../assets/img/icons/upload.svg","alt","File Upload",2,"height","25px"],["id","upload",3,"ngClass","innerText"],[2,"margin-top","10px"],[1,"text-muted",2,"margin-top","16px"],["pullUrlCard",""],["src","../../../../../assets/img/icons/url.svg","alt","URl Upload",2,"height","25px"],["id","url",3,"ngClass","innerText"],["mssqlCard",""],[1,"text-right","mb-2"],[1,"text-muted","text-sm"],["src","../../../../../assets/img/icons/mssql.svg","alt","MSSQL Upload",2,"height","50px"],["id","mssql",3,"ngClass","innerText"],["mysqlCard",""],["src","../../../../../assets/img/icons/mysql.svg","alt","MYSQL Upload",2,"height","32px"],["id","mysql",3,"ngClass","innerText"],["postgreSqlCard",""],["src","../../../../../assets/img/icons/postgresql.svg","alt","PostgreSQL Upload",2,"height","45px"],["id","postgresql",3,"ngClass","innerText"],["sftpCard",""],["src","../../../../../assets/img/icons/sftp.svg","alt","SFTP Upload",2,"height","50px"],["id","sftp",3,"ngClass","innerText"],["snowflakeCard",""],["src","../../../../../assets/img/snow.png","alt","snowflake",2,"height","70px"],["id","snowflake",3,"ngClass","innerText"],["s3Card",""],["src","../../../../../assets/img/s3.svg","alt","s3",2,"height","70px"],["id","s3",3,"ngClass","innerText"],["src","../../../../../assets/img/bigquery.png","alt","bigquery",2,"height","70px"],[1,"connection-form"],["class","d-flex align-items-center mt-3 font-weight-normal",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"d-flex","align-items-center","mt-3","font-weight-normal"],[1,"mr-3","img-thumbnail","circle","thumb96"],[3,"src","alt"],[1,"mt-4"],[3,"dataGroupsArray","currentDataGroup","goBackFlag"],[3,"dataGroupsArray","schedularsArray","sourceType","data","currentDataGroup","goBackFlag"],[1,"mat-typography"],["class","spinner",3,"color","mode","diameter",4,"ngIf"],["role","form","name","dataGroupForm",1,"form-validate",3,"formGroup"],[1,"form-group"],["appearance","outline"],["for","name"],["matInput","","type","text","name","name","formControlName","name","id","name","placeholder","Enter folder name","autocomplete","","required",""],["formControlName","parentId","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"spinner",3,"color","mode","diameter"],[3,"value"],[1,"justify-content-end","m-auto"],["mat-stroked-button","","mat-dialog-close",""],["mat-stroked-button","",3,"click"],["mat-flat-button","","type","submit",1,"btn-primary",3,"disabled","click"]],template:function(t,e){1&t&&(m.Ic(0,T,2,1,"h2",0),m.Ic(1,y,2,1,"h2",0),m.Ic(2,k,2,1,"h2",0),m.Ic(3,I,120,37,"mat-dialog-content",1),m.Ic(4,O,6,5,"mat-dialog-content",2),m.Ic(5,M,17,6,"mat-dialog-content",3),m.Ic(6,K,1,0,"hr",4),m.Ic(7,A,1,0,"hr",4),m.Ic(8,R,3,0,"mat-dialog-actions",5),m.Ic(9,E,5,2,"mat-dialog-actions",5)),2&t&&(m.kc("ngIf","dataSource"===e.dialogData.formType&&e.showConnectionTypes),m.Bb(1),m.kc("ngIf","dataSource"===e.dialogData.formType&&!e.showConnectionTypes),m.Bb(1),m.kc("ngIf","dataGroup"===e.dialogData.formType||!e.dialogData.formType),m.Bb(1),m.kc("ngIf","dataSource"===e.dialogData.formType&&e.showConnectionTypes),m.Bb(1),m.kc("ngIf","dataSource"===e.dialogData.formType&&!e.showConnectionTypes),m.Bb(1),m.kc("ngIf","dataGroup"===e.dialogData.formType||!e.dialogData.formType),m.Bb(1),m.kc("ngIf","dataGroup"===e.dialogData.formType||!e.dialogData.formType),m.Bb(1),m.kc("ngIf","dataSource"===e.dialogData.formType&&e.showConnectionTypes),m.Bb(1),m.kc("ngIf","dataSource"===e.dialogData.formType&&e.showConnectionTypes),m.Bb(1),m.kc("ngIf","dataGroup"===e.dialogData.formType||!e.dialogData.formType))},styles:[".data-sources-container[_ngcontent-%COMP%]   .source-type-card[_ngcontent-%COMP%]{box-shadow:unset;background-color:#eff7ff;margin-top:20px;transition-duration:0s}.data-sources-container[_ngcontent-%COMP%]   .source-type-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .img-thumbnail[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center}.data-sources-container[_ngcontent-%COMP%]   .source-type-card[_ngcontent-%COMP%]:hover{box-shadow:0 0 12px 0 #07509d;cursor:pointer}.connection-form[_ngcontent-%COMP%]   .img-thumbnail[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;height:45px!important;width:45px!important}.linkText[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}"]}),q),L=n("1G5W"),U=n("hct1"),H=n("/mf7"),V=n("EiqI"),z=n("THC6"),Q=n("aXhh"),Z=n("Wp6s"),Y=n("Qu3c"),W=n("bTqV"),J=n("NFeN"),X=n("kmnG"),tt=n("qFsG"),et=n("tyNb"),at=n("TU8p"),ot=n("3M9v"),nt=["ConnFilesPaginator"],it=["ConnFilesSort"];function rt(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",14),m.Tb(1,"mat-icon",15),m.Kc(2,"chevron_right"),m.Sb(),m.Tb(3,"h3",16),m.ac("click",(function(){m.wc(a);var t=e.$implicit;return m.ec().breadcrumbHandler(t,!0)})),m.Kc(4),m.Sb(),m.Sb()}if(2&t){var o=e.$implicit,n=e.last;m.Bb(3),m.Db(n?"breadcrumb-name":"heading-with-breadcrumb ml-0"),m.Bb(1),m.Mc(" ",o.name," ")}}function ct(t,e){if(1&t){var a=m.Ub();m.Tb(0,"button",17),m.ac("click",(function(){return m.wc(a),m.ec().openModalHandler("dataSource")})),m.Kc(1," Data Sources "),m.Sb()}if(2&t){var o=m.ec();m.kc("matTooltip",o._utils.getTootip("createDataConnections"))}}function st(t,e){if(1&t){var a=m.Ub();m.Tb(0,"mat-card",18),m.Tb(1,"mat-card-content",19),m.Tb(2,"div",20),m.Tb(3,"div",21),m.Tb(4,"h3",22),m.Kc(5),m.Sb(),m.Tb(6,"p",23),m.Kc(7," Data is my fuel, connect with wide variety of data sources to pull data and build a fruitful model. "),m.Sb(),m.Tb(8,"div"),m.Tb(9,"button",24),m.ac("click",(function(){return m.wc(a),m.ec().openModalHandler("dataSource")})),m.Kc(10," Data Sources "),m.Sb(),m.Sb(),m.Sb(),m.Tb(11,"div",25),m.Ob(12,"img",26),m.Sb(),m.Sb(),m.Sb(),m.Sb()}if(2&t){var o=m.ec();m.Bb(5),m.Mc("Hi ",o.user.displayName,"!")}}function lt(t,e){1&t&&m.Ob(0,"th",48)}function dt(t,e){if(1&t&&(m.Tb(0,"td",49),m.Ob(1,"i",50),m.Sb()),2&t){var a=e.$implicit,o=m.ec(2);m.Bb(1),m.kc("ngClass",o.getIcon(a.type))}}function ut(t,e){1&t&&(m.Tb(0,"th",51),m.Kc(1,"Name"),m.Sb())}function bt(t,e){if(1&t){var a=m.Ub();m.Tb(0,"td",52),m.ac("click",(function(){m.wc(a);var t=e.$implicit;return m.ec(2).breadcrumbHandler(t)})),m.Kc(1),m.Sb()}if(2&t){var o=e.$implicit;m.Fb("clickable",!o.type),m.Bb(1),m.Mc(" ",o.name," ")}}function pt(t,e){1&t&&(m.Tb(0,"th",51),m.Kc(1,"Source"),m.Sb())}function mt(t,e){if(1&t){var a=m.Ub();m.Tb(0,"td",52),m.ac("click",(function(){m.wc(a);var t=e.$implicit,o=m.ec(2),n=m.tc(18);return o.openFilesModal(n,t)})),m.Kc(1),m.Sb()}if(2&t){var o=e.$implicit;m.Fb("clickable","upload"!==o.type&&"notebook"!==o.type),m.Bb(1),m.Mc(" ",o.type?o.type:"-"," ")}}function ft(t,e){1&t&&(m.Tb(0,"th",48),m.Kc(1,"Parsed"),m.Sb())}function ht(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div"),m.Tb(1,"button",55),m.ac("click",(function(){m.wc(a);var t=m.ec().$implicit;return m.ec(2).showMessage(t.message)})),m.Ob(2,"i",56),m.Sb(),m.Sb()}}function gt(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div"),m.Tb(1,"button",55),m.ac("click",(function(){m.wc(a);var t=m.ec().$implicit;return m.ec(2).showMessage(t.message)})),m.Ob(2,"i",57),m.Sb(),m.Sb()}}function St(t,e){1&t&&(m.Tb(0,"div"),m.Tb(1,"button",58),m.Kc(2,"-"),m.Sb(),m.Sb())}function vt(t,e){if(1&t&&(m.Tb(0,"td",49),m.Tb(1,"div",53),m.Ic(2,ht,3,0,"div",54),m.Ic(3,gt,3,0,"div",54),m.Ic(4,St,3,0,"div",54),m.Sb(),m.Sb()),2&t){var a=e.$implicit;m.Bb(2),m.kc("ngIf",0==a.parsed),m.Bb(1),m.kc("ngIf",1==a.parsed),m.Bb(1),m.kc("ngIf",null==a.parsed)}}function Tt(t,e){1&t&&(m.Tb(0,"th",51),m.Kc(1,"Schedule"),m.Sb())}function yt(t,e){if(1&t&&(m.Tb(0,"td",49),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.Bb(1),m.Mc(" ",a.schedule_id?a.schedule_id.scheduleName:"-"," ")}}function kt(t,e){1&t&&(m.Tb(0,"th",51),m.Kc(1,"Created At"),m.Sb())}function It(t,e){if(1&t&&(m.Tb(0,"td",49),m.Kc(1),m.fc(2,"date"),m.Sb()),2&t){var a=e.$implicit;m.Bb(1),m.Mc(" ",m.hc(2,1,a.createdAt,"medium")," ")}}function wt(t,e){1&t&&(m.Tb(0,"th",48),m.Kc(1,"Actions"),m.Sb())}function Ct(t,e){1&t&&(m.Tb(0,"button",69),m.Ob(1,"i",70),m.Sb())}function _t(t,e){1&t&&m.Ob(0,"i",71)}var Dt=function(){return["/project/data/dataflow"]},Ft=function(t){return{connectionId:t}};function Ot(t,e){if(1&t&&(m.Tb(0,"button",72),m.Ob(1,"i",73),m.Sb()),2&t){var a=m.ec(2).$implicit,o=m.ec(2);m.kc("routerLink",m.mc(5,Dt))("queryParams",m.nc(6,Ft,a._id))("disabled",!("saas"!==o.appType||null!=o.user&&null!=o.user.roles&&o.user.roles.includes("super_admin")||null!=o.user&&null!=o.user.roles&&o.user.roles.includes("admin"))),m.Bb(1),m.kc("matBadgeIcon","ENT")("ngClass","enterprise"===o.appType||"saas"===o.appType&&(null!=o.user&&null!=o.user.roles&&o.user.roles.includes("super_admin")||null!=o.user&&null!=o.user.roles&&o.user.roles.includes("admin"))?"":"disable-Btn")}}var Bt=function(t){return{dataFlowId:t}};function Nt(t,e){if(1&t&&(m.Tb(0,"button",74),m.Ob(1,"i",75),m.Sb()),2&t){var a=m.ec(2).$implicit;m.kc("routerLink",m.mc(2,Dt))("queryParams",m.nc(3,Bt,a.dataflowId))}}function xt(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div"),m.Ic(1,Ct,2,0,"button",63),m.Tb(2,"button",64),m.ac("click",(function(){m.wc(a);var t=m.ec().$implicit;return m.ec(2).pullConnectionData(t)})),m.Ob(3,"i",65),m.Ic(4,_t,1,0,"i",66),m.Sb(),m.Ic(5,Ot,2,8,"button",67),m.Ic(6,Nt,2,5,"button",68),m.Sb()}if(2&t){var o=m.ec().$implicit,n=m.ec(2);m.Bb(1),m.kc("ngIf",o.isPulling),m.Bb(1),m.kc("hidden",o.isPulling)("matTooltip",n.dataFlowToolTip)("matTooltipClass",n.isDataFlowFailed?"nodered-error-tooltip-custom":""),m.Bb(2),m.kc("ngIf",n.isDataFlowFailed&&!n.callFromStartFlow&&n.flowIdCheck==o.name),m.Bb(1),m.kc("ngIf",!o.dataflowId),m.Bb(1),m.kc("ngIf",o.dataflowId)}}function Gt(t,e){if(1&t){var a=m.Ub();m.Tb(0,"button",76),m.ac("click",(function(){m.wc(a);var t=m.ec().$implicit;return m.ec(2).downloadFile(t)})),m.Ob(1,"i",77),m.Sb()}}function Pt(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div"),m.Tb(1,"button",78),m.ac("click",(function(){m.wc(a);var t=m.ec().$implicit;return m.ec(2).openModalHandler(t.type,t)})),m.Ob(2,"i",79),m.Sb(),m.Sb()}}function Mt(t,e){if(1&t){var a=m.Ub();m.Tb(0,"td",49),m.Tb(1,"div",59),m.Ic(2,xt,7,7,"div",54),m.Ic(3,Gt,2,0,"button",60),m.Ic(4,Pt,3,0,"div",54),m.Tb(5,"button",61),m.ac("click",(function(){m.wc(a);var t=e.$implicit;return m.ec(2).deleteHandler(t._id,t.type)})),m.Ob(6,"i",62),m.Sb(),m.Sb(),m.Sb()}if(2&t){var o=e.$implicit;m.Bb(2),m.kc("ngIf","url"===o.type||"mysql"===o.type||"mssql"===o.type||"sftp"===o.type||"postgresql"===o.type||"s3"===o.type||"snowflake"===o.type||"bigquery"===o.type),m.Bb(1),m.kc("ngIf","upload"===o.type||"notebook"===o.type),m.Bb(1),m.kc("ngIf","url"===o.type||"mysql"===o.type||"mssql"===o.type||"sftp"===o.type||"postgresql"===o.type||"s3"===o.type||"snowflake"===o.type||"bigquery"===o.type)}}function Kt(t,e){1&t&&m.Ob(0,"tr",80)}function At(t,e){1&t&&m.Ob(0,"tr",81)}function Rt(t,e){if(1&t&&(m.Tb(0,"tr",82),m.Tb(1,"td",83),m.Kc(2),m.Sb(),m.Sb()),2&t){m.ec();var a=m.tc(6);m.Bb(2),m.Mc('No data matching the filter "',a.value,'"')}}function Et(t,e){if(1&t){var a=m.Ub();m.Tb(0,"mat-card",27),m.Tb(1,"mat-card-content"),m.Tb(2,"mat-form-field",28),m.Tb(3,"mat-label"),m.Kc(4,"Search"),m.Sb(),m.Tb(5,"input",29,30),m.ac("keyup",(function(t){return m.wc(a),m.ec().applyFilter(t,"connections")})),m.Sb(),m.Sb(),m.Tb(7,"table",31),m.Rb(8,32),m.Ic(9,lt,1,0,"th",33),m.Ic(10,dt,2,1,"td",34),m.Qb(),m.Rb(11,35),m.Ic(12,ut,2,0,"th",36),m.Ic(13,bt,2,3,"td",37),m.Qb(),m.Rb(14,38),m.Ic(15,pt,2,0,"th",36),m.Ic(16,mt,2,3,"td",37),m.Qb(),m.Rb(17,39),m.Ic(18,ft,2,0,"th",33),m.Ic(19,vt,5,3,"td",34),m.Qb(),m.Rb(20,40),m.Ic(21,Tt,2,0,"th",36),m.Ic(22,yt,2,1,"td",34),m.Qb(),m.Rb(23,41),m.Ic(24,kt,2,0,"th",36),m.Ic(25,It,3,4,"td",34),m.Qb(),m.Rb(26,42),m.Ic(27,wt,2,0,"th",33),m.Ic(28,Mt,7,3,"td",34),m.Qb(),m.Ic(29,Kt,1,0,"tr",43),m.Ic(30,At,1,0,"tr",44),m.Ic(31,Rt,3,1,"tr",45),m.Sb(),m.Ob(32,"mat-paginator",46,47),m.Sb(),m.Sb()}if(2&t){var o=m.ec();m.Bb(7),m.kc("dataSource",o.dataSource),m.Bb(22),m.kc("matHeaderRowDef",o.displayedColumns),m.Bb(1),m.kc("matRowDefColumns",o.displayedColumns),m.Bb(2),m.kc("pageSizeOptions",o.pageSizeOptions)}}function qt(t,e){1&t&&(m.Tb(0,"th",51),m.Kc(1,"Name"),m.Sb())}function jt(t,e){if(1&t&&(m.Tb(0,"td",49),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.Bb(1),m.Lc(a.name)}}function Lt(t,e){1&t&&(m.Tb(0,"th",48),m.Kc(1,"Parsed"),m.Sb())}function Ut(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div"),m.Tb(1,"button",55),m.ac("click",(function(){m.wc(a);var t=m.ec().$implicit;return m.ec(2).showMessage(t.message)})),m.Ob(2,"i",56),m.Sb(),m.Sb()}}function $t(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div"),m.Tb(1,"button",55),m.ac("click",(function(){m.wc(a);var t=m.ec().$implicit;return m.ec(2).showMessage(t.message)})),m.Ob(2,"i",57),m.Sb(),m.Sb()}}function Ht(t,e){1&t&&(m.Tb(0,"div"),m.Tb(1,"button",58),m.Kc(2,"-"),m.Sb(),m.Sb())}function Vt(t,e){if(1&t&&(m.Tb(0,"td",49),m.Tb(1,"div",53),m.Ic(2,Ut,3,0,"div",54),m.Ic(3,$t,3,0,"div",54),m.Ic(4,Ht,3,0,"div",54),m.Sb(),m.Sb()),2&t){var a=e.$implicit;m.Bb(2),m.kc("ngIf",0==a.parsed),m.Bb(1),m.kc("ngIf",1==a.parsed),m.Bb(1),m.kc("ngIf",null==a.parsed)}}function zt(t,e){1&t&&(m.Tb(0,"th",51),m.Kc(1,"Created At"),m.Sb())}function Qt(t,e){if(1&t&&(m.Tb(0,"td",49),m.Kc(1),m.fc(2,"date"),m.Sb()),2&t){var a=e.$implicit;m.Bb(1),m.Mc(" ",m.hc(2,1,a.createdAt,"medium")," ")}}function Zt(t,e){1&t&&(m.Tb(0,"th",48),m.Kc(1,"Actions"),m.Sb())}function Yt(t,e){1&t&&m.Ob(0,"i",71)}function Wt(t,e){if(1&t){var a=m.Ub();m.Tb(0,"button",95),m.ac("click",(function(){m.wc(a);var t=m.ec().$implicit;return m.ec(2).executeDataFlow(t)})),m.Ob(1,"i",96),m.Ic(2,Yt,1,0,"i",66),m.Sb()}if(2&t){var o=m.ec().$implicit,n=m.ec(2);m.kc("matTooltip",n.urlFlowPlayBtnToolTip)("matTooltipClass",n.isDataFlowFailed&&n.callFromStartFlow&&n.flowIdCheck==o.name?"nodered-error-tooltip-custom":""),m.Bb(2),m.kc("ngIf",n.isDataFlowFailed&&n.callFromStartFlow&&n.flowIdCheck==o.name)}}function Jt(t,e){if(1&t){var a=m.Ub();m.Tb(0,"td",49),m.Tb(1,"div",59),m.Tb(2,"p"),m.Kc(3),m.Sb(),m.Ic(4,Wt,3,3,"button",92),m.Tb(5,"button",93),m.ac("click",(function(){m.wc(a);var t=e.$implicit;return m.ec(2).downloadFile(t)})),m.Ob(6,"i",77),m.Sb(),m.Tb(7,"button",94),m.ac("click",(function(){m.wc(a);var t=e.$implicit;return m.ec(2).deleteRawFile(t._id,t.connId,"connectionFile")})),m.Ob(8,"i",62),m.Sb(),m.Sb(),m.Sb()}if(2&t){var o=e.$implicit,n=m.ec(2);m.Bb(3),m.Lc(o.dataflowId),m.Bb(1),m.kc("ngIf",n.isDataFlowPresent)}}function Xt(t,e){1&t&&m.Ob(0,"tr",80)}function te(t,e){1&t&&m.Ob(0,"tr",81)}function ee(t,e){if(1&t&&(m.Tb(0,"tr",82),m.Tb(1,"td",83),m.Kc(2),m.Sb(),m.Sb()),2&t){m.ec();var a=m.tc(8);m.Bb(2),m.Mc('No data matching the filter "',a.value,'"')}}function ae(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",84),m.Tb(1,"h2",85),m.Kc(2,"Files"),m.Sb(),m.Tb(3,"mat-dialog-content"),m.Tb(4,"mat-form-field",28),m.Tb(5,"mat-label"),m.Kc(6,"Search"),m.Sb(),m.Tb(7,"input",29,30),m.ac("keyup",(function(t){return m.wc(a),m.ec().applyFilter(t,"connectionFiles")})),m.Sb(),m.Sb(),m.Tb(9,"table",86,87),m.Rb(11,35),m.Ic(12,qt,2,0,"th",36),m.Ic(13,jt,2,1,"td",34),m.Qb(),m.Rb(14,39),m.Ic(15,Lt,2,0,"th",33),m.Ic(16,Vt,5,3,"td",34),m.Qb(),m.Rb(17,41),m.Ic(18,zt,2,0,"th",36),m.Ic(19,Qt,3,4,"td",34),m.Qb(),m.Rb(20,42),m.Ic(21,Zt,2,0,"th",33),m.Ic(22,Jt,9,2,"td",34),m.Qb(),m.Ic(23,Xt,1,0,"tr",43),m.Ic(24,te,1,0,"tr",44),m.Ic(25,ee,3,1,"tr",45),m.Sb(),m.Ob(26,"mat-paginator",88,89),m.Sb(),m.Tb(28,"mat-dialog-actions",90),m.Tb(29,"button",91),m.Kc(30,"Close"),m.Sb(),m.Sb(),m.Sb()}if(2&t){var o=m.ec();m.Bb(9),m.kc("dataSource",o.filesDataSource),m.Bb(14),m.kc("matHeaderRowDef",o.displayedColumnsFiles),m.Bb(1),m.kc("matRowDefColumns",o.displayedColumnsFiles),m.Bb(2),m.kc("pageSizeOptions",o.pageSizeOptions)}}function oe(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",100),m.Tb(1,"mat-card",101),m.Tb(2,"mat-card-header"),m.Tb(3,"div",102),m.Tb(4,"mat-icon",103),m.Kc(5,"dashboard"),m.Sb(),m.Sb(),m.Tb(6,"mat-card-title"),m.Tb(7,"h3"),m.Kc(8),m.fc(9,"titlecase"),m.Sb(),m.Sb(),m.Sb(),m.Tb(10,"mat-card-content",104),m.Tb(11,"h3"),m.Kc(12," Type : "),m.Tb(13,"label"),m.Kc(14),m.fc(15,"titlecase"),m.Sb(),m.Sb(),m.Tb(16,"p",105),m.Kc(17),m.Sb(),m.Sb(),m.Tb(18,"mat-card-actions"),m.Tb(19,"button",106),m.ac("click",(function(){m.wc(a);var t=e.$implicit;return m.ec(2).importSampleDataset(t.file)})),m.Kc(20," Import\xa0"),m.Ob(21,"i",107),m.Sb(),m.Sb(),m.Sb(),m.Sb()}if(2&t){var o=e.$implicit;m.Bb(8),m.Lc(m.gc(9,3,o.name)),m.Bb(6),m.Mc(" ","predictive_modeling"===o.domain?"Predictive Modeling":m.gc(15,5,o.domain),""),m.Bb(3),m.Lc(o.description)}}function ne(t,e){if(1&t&&(m.Tb(0,"h1",85),m.Kc(1,"Sample Dataset"),m.Sb(),m.Tb(2,"mat-dialog-content",97),m.Tb(3,"div",98),m.Ic(4,oe,22,7,"div",99),m.Sb(),m.Sb(),m.Tb(5,"mat-dialog-actions",90),m.Tb(6,"button",91),m.Kc(7,"Close"),m.Sb(),m.Sb()),2&t){var a=m.ec();m.Bb(4),m.kc("ngForOf",a.allSampleDatasets)}}var ie,re=n("GUC0"),ce=((ie=function(){function e(a,o,n,i,r,c,d,u,b,m,f){var h,g;t(this,e),this._toaster=a,this._data=o,this._localStorage=n,this._spinner=i,this._dialog=r,this._schedular=c,this._window=d,this._snackBar=u,this._socket=b,this._utils=m,this._sampleDataset=f,this.dataSource=new s.p,this.filesDataSource=new s.p,this.pageSizeOptions=[10,15,20],this.displayedColumns=[],this.displayedColumnsFiles=[],this.unsubscribe$=new l.b,this.tempArray=[],this.breadcrumbArray=[],this.breadArray=[],this.dataListArray=[],this.isDataFlowFailed=!1,this.count=0,this.callFromStartFlow=!1,this.flowIdCheck=null,this.dataFlowToolTip="Pull data",this.urlFlowPlayBtnToolTip="Execute data flow",this.planType=null,this.allowedConnectionsList=null,this.appType=p.a.appType,this.percentDone=0,this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this.allowedConnectionsList=(null===(g=null===(h=this.user)||void 0===h?void 0:h.psFeatures)||void 0===g?void 0:g.allowedFeaturesList)||[],this.displayedColumns=["icon","name","parsed","type","schedular","createdAt","actions"],this.displayedColumnsFiles=["name","parsed","createdAt","actions"]}return a(e,[{key:"paginator",set:function(t){this.dataSource.paginator=t}},{key:"sort",set:function(t){this.dataSource.sort=t}},{key:"connFilesPaginator",set:function(t){this.filesDataSource.paginator=t}},{key:"connFilesSort",set:function(t){this.filesDataSource.sort=t}},{key:"ngOnInit",value:function(){this._spinner.showSpinner(),this.initSocket(),this.getAllConnectionsData(),this.getDataGroupList(),this.getAllSampleDatasets(),this.schedularList()}},{key:"getAllSampleDatasets",value:function(){var t=this;this._sampleDataset.getAllDatasets().pipe(Object(L.a)(this.unsubscribe$)).subscribe((function(e){e.data&&(t.allSampleDatasets=e.data,t.filterSampleDatasets=t.allSampleDatasets.sort((function(t,e){return new Date(e.createdAt).valueOf()-new Date(t.createdAt).valueOf()})),t._spinner.stopSpinner())}),(function(e){t._spinner.stopSpinner(),t._toaster.error(e.error.message||"Server Error","Project Management")}))}},{key:"importSampleDataset",value:function(t){var e=this;this._spinner.showSpinner(),this._data.uploadFile({encoding:"utf_8",projectId:this.project._id,dataGroupId:this.currentDataGroup||this.dataList[0]._id,dataFolderName:this.currentDataGroup||this.dataList[0]._id,parentFolderName:"",file:t,uploadType:"importDataset"}).subscribe((function(t){e.datasetDialog.close(),e._spinner.stopSpinner(),e._utils.showSnackBar(U.b.fileUpload)}),(function(t){e._toaster.error(t.error.message||"Server Error","Data Connection"),e._spinner.stopSpinner(),e._utils.dismissSnackBar()}))}},{key:"getAllConnectionsData",value:function(){var t=this,e=[];this.dataListArray.length=0,this.breadArray.length=0,this.breadcrumbArray.length=0,this._data.getAllConnectionsData(this.project._id).pipe(Object(L.a)(this.unsubscribe$)).subscribe((function(a){if(a){t.dataGroupsList=a[0].datagroupList,t.connectionsList=a[0].connection,t.rawFilesList=a[0].filesdata,t.filesData=a[0].pklfilesdata,t.dataListArray=t.dataListArray.concat(t.dataGroupsList,t.connectionsList,t.rawFilesList),e=(e=t.dataListArray.filter((function(t){return!Object.keys(t).includes("parentId")&&!Object.keys(t).includes("datagroup_id")})))[0]._id;var o=t.dataListArray.filter((function(t){return"upload_retrained"!==t.type&&(t.parentId===e||t.datagroup_id===e)})).filter((function(t){return!Object.keys(t).includes("connId")}));t.parentFolderData=o,t.fArr=o,t.dataSource.data=t.fArr,t.dataSource._updateChangeSubscription(),t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort,t._spinner.stopSpinner()}else t._spinner.stopSpinner(),t._toaster.error("Cannot fetch connections list","Data Connection");t._utils.dismissSnackBar()}),(function(e){t._spinner.stopSpinner(),t._toaster.error("Server Error","Data Connection")}))}},{key:"showMessage",value:function(t){this.snackBarRef=this._snackBar.open(t,"OK",{verticalPosition:"bottom",horizontalPosition:"end"})}},{key:"getDataGroupList",value:function(){var t=this;this._data.getDataGroupsList(this.project._id).pipe(Object(L.a)(this.unsubscribe$)).subscribe((function(e){e&&(t.dataList=e)}),(function(e){t._toaster.error("Server Error","Data Connection")}))}},{key:"schedularList",value:function(){var t=this;this._schedular.getSchedularsList().pipe(Object(L.a)(this.unsubscribe$)).subscribe((function(e){e&&(t.schedularArray=e)}),(function(e){t._toaster.error("Server Error","Data Connection")}))}},{key:"openDatasetModal",value:function(t){this.datasetDialog=this._dialog.open(t,{minWidth:"50vw",maxWidth:"75vw"})}},{key:"openModalHandler",value:function(t,e){var a=this;this._dialog.open(j,{minWidth:"60vw",maxWidth:"60vw",data:{formType:t,dataGroups:this.dataList,schedulars:this.schedularArray,data:e,currentDataGroup:this.currentDataGroup||this.dataList[0]._id,allowedConnectionsList:this.allowedConnectionsList||[]}}).afterClosed().subscribe((function(t){t&&(a.breadArray.length=0,a.getAllConnectionsData(),a.getDataGroupList(),a.schedularList())}))}},{key:"pullConnectionData",value:function(t){var e=this;this.isDataFlowFailed=!1,this.callFromStartFlow=!1,this.flowIdCheck=t.name,this._utils.showSnackBar(U.b.pullData),this.selectedConnToPull=t._id,this.fArr=this.fArr.map((function(e){return e.isPulling=e._id===t._id,e})),this._data.pullSingleData(t._id).pipe(Object(L.a)(this.unsubscribe$)).subscribe((function(a){a||(e.fArr=e.fArr.map((function(e){return e._id===t._id&&(e.isPulling=!1),e})))}),(function(a){e._utils.dismissSnackBar(),e.fArr=e.fArr.map((function(e){return e._id===t._id&&(e.isPulling=!1),e}))}))}},{key:"downloadFile",value:function(t){this._window.open("".concat(p.a.serverBaseUrl,"/api/project/").concat(this.project._id,"/download/").concat(t.name),"_blank")}},{key:"deleteHandler",value:function(t,e){switch(e){case"upload":case"notebook":case"connectionFile":this.deleteRawFile(t,"",e);break;case"mysql":case"mssql":case"postgresql":case"sftp":case"url":case"s3":case"snowflake":case"bigquery":this.deleteDataConnetion(t,e);break;default:this.deleteDataGroup(t)}}},{key:"deleteRawFile",value:function(t,e,a){var o=this;re({title:"Are you sure?",text:"You will not be able to recover this file!",icon:"warning",buttons:{cancel:{text:"Cancel",value:null,visible:!0,className:""},confirm:{text:"Yes, delete it!",value:!0,visible:!0,className:"bg-danger"}}}).then((function(n){var i;n&&(o.breadArray.length=0,o._data.deleteRawFile(o.project._id,t).pipe(Object(L.a)(o.unsubscribe$)).subscribe((function(n){n?(o.getAllConnectionsData(),o._toaster.success("File deleted successfully","Data Connection"),"connectionFile"===a?(i=o.rawFilesList.filter((function(a){if(a._id!==t&&a.connId===e)return a})),o.filesDataSource.data=i,o.filesDataSource._updateChangeSubscription(),o.filesDataSource.paginator=o.paginator,o.filesDataSource.sort=o.sort):(i=o.fArr.filter((function(e){return e._id!==t})),o.dataSource.data=i,o.dataSource._updateChangeSubscription(),o.dataSource.paginator=o.paginator,o.dataSource.sort=o.sort)):o._toaster.error("Cannot delete file","Data Connection")}),(function(t){o._toaster.error("Server Error","Data Connection")})))}))}},{key:"deleteDataGroup",value:function(t){var e=this;this.breadArray.length=0;var a=[],o=[],n=[],i=this.dataGroupsList.filter((function(a){return a.parentId!==t&&a._id!==t||e.tempArray.push(a),a.parentId===t}));this.filterDataGroup(i),this.connectionsList.map((function(t){void 0!==e.tempArray.find((function(e){return t.datagroup_id===e._id}))&&a.push(t)})),this.rawFilesList.map((function(t){void 0!==e.tempArray.find((function(e){return t.datagroup_id==e._id}))&&o.push(t)})),this.filesData.map((function(t){void 0!==e.tempArray.find((function(e){return t.datagroup_id==e._id}))&&n.push(t)})),re({title:"Are you sure?",text:"You will not be able to recover this data!",icon:"warning",buttons:{cancel:{text:"Cancel",value:null,visible:!0,className:""},confirm:{text:"Yes, delete it!",value:!0,visible:!0,className:"bg-danger"}}}).then((function(i){i&&e._data.deleteDataGroup(e.project._id,t,{projectId:e.project._id,dataId:t,datagroup:e.tempArray,dataconnection:a,rawFiles:o,files:n}).pipe(Object(L.a)(e.unsubscribe$)).subscribe((function(a){a?(e._toaster.success("Folder deleted successfully","Data Connection"),e.fArr=e.fArr.filter((function(e){return e._id!=t})),e.dataList=e.dataList.filter((function(e){return e._id!=t})),e.dataSource.data=e.fArr,e.dataSource._updateChangeSubscription(),e.dataSource.paginator=e.paginator,e.dataSource.sort=e.sort):e._toaster.error("Cannot delete folder","Data Connection")}),(function(t){e._toaster.error("Server Error","Data Connection")}))}))}},{key:"deleteDataConnetion",value:function(t,e){var a=this;re({title:"Are you sure?",text:"You will not be able to recover this data!",icon:"warning",buttons:{cancel:{text:"Cancel",value:null,visible:!0,className:""},confirm:{text:"Yes, delete it!",value:!0,visible:!0,className:"bg-danger"}}}).then((function(o){o&&(a.breadArray.length=0,a._data.deleteDataConnection(a.project._id,t).pipe(Object(L.a)(a.unsubscribe$)).subscribe((function(o){o?(a._toaster.success(e.toUpperCase()+" connection deleted successfully","Data Connection"),a.fArr=a.fArr.filter((function(e){return e._id!=t})),a.dataSource.data=a.fArr,a.dataSource._updateChangeSubscription(),a.dataSource.paginator=a.paginator,a.dataSource.sort=a.sort):a._toaster.error("Cannot delete file","Data Connection")}),(function(t){a._toaster.error("Server Error","Data Connection")})))}))}},{key:"openFilesModal",value:function(t,e){var a;this.isDataFlowPresent=e.dataflowId,"upload"!==e.type&&"notebook"!==e.type&&(a=this.rawFilesList.filter((function(t){if(t.connId===e._id&&!t.isDeleted)return t})),this.filesDataSource.data=a,this.filesDataSource._updateChangeSubscription(),this._dialog.open(t,{height:"auto",width:"60%"}))}},{key:"executeDataFlow",value:function(t){var e=this;this.callFromStartFlow=!0,this.flowIdCheck=t.name,this._data.executeDataFlow(this.project._id,t.connId,t.name).pipe(Object(L.a)(this.unsubscribe$)).subscribe((function(t){t&&e._toaster.success("Flow execution started","Data Connection")}),(function(t){e._toaster.error("Server Error","Data Connection")}))}},{key:"breadcrumbHandler",value:function(t,e){if(!t.type){var a,o=t._id||t.id;if(this._spinner.showSpinner(),this.currentDataGroup=o,e){var n=this.breadArray.findIndex((function(t){return t.id==o}));this.breadArray.splice(n+1),t||this.getAllConnectionsData()}else this.breadArray.push({id:o,name:t.name});this.breadcrumbArray=this.breadArray,a=this.dataListArray.filter((function(t){return t.parentId===o||t.datagroup_id===o})).filter((function(t){return!Object.keys(t).includes("connId")})),this.fArr=a,this.dataSource.data=a,this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this._spinner.stopSpinner()}}},{key:"filterDataGroup",value:function(t){for(var e,a=this,o=0;o<t.length;o++)e=this.dataGroupsList.filter((function(e){return e.parentId==t[o]._id&&a.tempArray.push(e),e.parentId==t[o]._id})),this.callRecursive(e)}},{key:"callRecursive",value:function(t){t.length>0&&this.filterDataGroup(t)}},{key:"getIcon",value:function(t){switch(t){case"mysql":case"mssql":case"postgresql":case"sftp":case"s3":case"snowflake":case"bigquery":return"fa fa-database icons";case"upload":case"notebook":return"fa fa-file-alt icons";case"url":return"fa fa-link icons";default:return"fa fa-folder icons"}}},{key:"applyFilter",value:function(t,e){var a=t.target.value;"connections"===e?(this.dataSource.filter=a.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()):"connectionFiles"===e&&(this.filesDataSource.filter=a.trim().toLowerCase(),this.filesDataSource.paginator&&this.filesDataSource.paginator.firstPage())}},{key:"initSocket",value:function(){var t=this;this._socket.listen("pullData").subscribe((function(e){"pull_success"===e.status?(t._utils.dismissSnackBar(),e.data.parsed?e.data.projectId===t.project._id&&t._toaster.success("Data uploaded successfully","Data Connection"):e.data.projectId===t.project._id&&t._toaster.info(e.data.message,"Data Connection"),t.getAllConnectionsData()):(t.fArr=t.fArr.map((function(a){return a._id===t.selectedConnToPull&&(a.isPulling=!1,"sftp"!==a.type&&"s3"!==a.type||"No updated files"!==e.status?t._toaster.error(e.status,"Data Connection"):t._toaster.info(e.status,"Data Connection")),a})),"No updated files"===e.status?t._toaster.info(e.status.message||e.status||"Could not complete the operation","Data Connection"):t._toaster.error(e.status.message||e.status||"Could not complete the operation","Data Connection"),t._spinner.stopSpinner(),t._utils.dismissSnackBar()),t._utils.dismissSnackBar(),t._spinner.stopSpinner()}),(function(e){t._spinner.stopSpinner(),t._utils.dismissSnackBar(),t._toaster.error("Socket Error","Data Connection")})),this._socket.listen("nodeRedFlowExecution").subscribe((function(e){"flow_execution_failed"===e.status&&(t.isDataFlowFailed=!0,t.dataFlowToolTip="Data Flow Execution Failed",t.urlFlowPlayBtnToolTip="Data Flow Execution Failed"),t.isDataFlowFailed&&(t.count<1&&t._toaster.error("Data Flow Execution Failed","Data Flow"),t.count++),t._spinner.stopSpinner()}),(function(e){t._spinner.stopSpinner(),t._toaster.error("Socket Error","Data Connection")}))}},{key:"ngOnDestroy",value:function(){this._socket.removeListener("pullData"),this._socket.removeListener("nodeRedFlowExecution"),this._utils.dismissSnackBar(),this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}]),e}()).\u0275fac=function(t){return new(t||ie)(m.Nb(h.c),m.Nb(f.a),m.Nb(g.a),m.Nb(H.a),m.Nb(b.c),m.Nb(V.a),m.Nb(Window),m.Nb(v.c),m.Nb(z.a),m.Nb(S.a),m.Nb(Q.a))},ie.\u0275cmp=m.Hb({type:ie,selectors:[["app-data-connection"]],viewQuery:function(t,e){var a;1&t&&(m.Oc(r.a,!0),m.Oc(c.a,!0),m.Oc(nt,!0),m.Oc(it,!0)),2&t&&(m.sc(a=m.bc())&&(e.paginator=a.first),m.sc(a=m.bc())&&(e.sort=a.first),m.sc(a=m.bc())&&(e.connFilesPaginator=a.first),m.sc(a=m.bc())&&(e.connFilesSort=a.first))},decls:21,vars:9,consts:[[1,"fluid-container"],[1,"heading"],["mat-card-avatar",""],[1,"far","fa-folder","folder-icon"],[2,"cursor","pointer",3,"matTooltip","click"],["class","d-flex align-items-center",4,"ngFor","ngForOf"],[1,"ml-auto"],["type","button","mat-raised-button","","class","bg-primary","style","float: right",3,"matTooltip","click",4,"ngIf"],["type","button","mat-raised-button","",1,"bg-primary","mr-3",2,"float","right",3,"matTooltip","click"],["type","button","mat-stroked-button","",2,"float","right","margin-right","15px",3,"matTooltip","click"],["class","first-user-widget",4,"ngIf"],["class","connection-listing mt-5 p-4",4,"ngIf"],["connectionFilesTemplate",""],["importDataset",""],[1,"d-flex","align-items-center"],[1,"align-middle"],[3,"click"],["type","button","mat-raised-button","",1,"bg-primary",2,"float","right",3,"matTooltip","click"],[1,"first-user-widget"],[1,"px-5","py-3"],[1,"row","align-items-center"],[1,"col-md-7","align-middle","p-lg"],[2,"font-size","22px"],[2,"font-size","22px","margin","30px 0"],["type","button","mat-flat-button","",1,"btn-primary",2,"font-size","22px","height","48px",3,"click"],[1,"col-md-5","text-right"],["src","../../../../assets/img/data-connection-infographic.svg","alt","Data Connection Types"],[1,"connection-listing","mt-5","p-4"],[1,"search-input"],["matInput","",3,"keyup"],["input",""],["mat-table","","matSort","","matSortActive","createdAt","matSortDirection","desc","matSortDisableClear","",1,"mt-2",3,"dataSource"],["matColumnDef","icon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"clickable","click",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","parsed"],["matColumnDef","schedular"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mt-2",3,"pageSizeOptions"],["conListPaginator",""],["mat-header-cell",""],["mat-cell",""],[3,"ngClass"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",3,"click"],[1,"actions-buttons"],[4,"ngIf"],["mat-icon-button","",3,"click"],["aria-hidden","true",1,"fa","fa-times-circle","danger-icon"],["aria-hidden","true",1,"fa","fa-check-circle","success-icon"],["mat-icon-button",""],[1,"action-buttons","d-flex"],["mat-icon-button","","matTooltip","Download file","class","text-value",3,"click",4,"ngIf"],["matTooltip","Delete","mat-icon-button","",1,"delete-button",3,"click"],[1,"fa","fa-trash"],["mat-icon-button","","style","background-color: inherit; font-size: 18px",4,"ngIf"],["mat-icon-button","",3,"hidden","matTooltip","matTooltipClass","click"],[1,"fa","fa-magnet"],["class","nodered-error fas fa-exclamation-circle",4,"ngIf"],["mat-icon-button","","matTooltip","Data flow",3,"routerLink","queryParams","disabled",4,"ngIf"],["mat-icon-button","","matTooltip","Data flow",3,"routerLink","queryParams",4,"ngIf"],["mat-icon-button","",2,"background-color","inherit","font-size","18px"],[1,"fa","fa-cog","fa-spin"],[1,"nodered-error","fas","fa-exclamation-circle"],["mat-icon-button","","matTooltip","Data flow",3,"routerLink","queryParams","disabled"],["matBadge","","matBadgeOverlap","false",1,"fa","fa-random",3,"matBadgeIcon","ngClass"],["mat-icon-button","","matTooltip","Data flow",3,"routerLink","queryParams"],[1,"fa","fa-random"],["mat-icon-button","","matTooltip","Download file",1,"text-value",3,"click"],[1,"fa","fa-download"],["mat-icon-button","","matTooltip","Edit",3,"click"],[1,"fa","fa-edit"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"],[1,"connection-listing"],["mat-dialog-title",""],["mat-table","","matSort","","matSortActive","createdAt","matSortDirection","desc","matSortDisableClear","",3,"dataSource"],["ConnFilesSort","matSort"],[3,"pageSizeOptions"],["ConnFilesPaginator",""],[1,"justify-content-end","m-auto"],["mat-stroked-button","","mat-dialog-close","","color","basic"],["mat-icon-button","","class","text-value",3,"matTooltip","matTooltipClass","click",4,"ngIf"],["mat-icon-button","","matTooltip","Download File",1,"text-value",3,"click"],["mat-icon-button","","matTooltip","Click to remove the file.",1,"delete-button",3,"click"],["mat-icon-button","",1,"text-value",3,"matTooltip","matTooltipClass","click"],[1,"fa","fa-play"],[1,"mat-typography"],[1,"d-flex","flex-wrap","justify-content-start","my-4","row"],["class","col-md-4 mb-4 d-flex",4,"ngFor","ngForOf"],[1,"col-md-4","mb-4","d-flex"],[1,"template-proj-card","d-flex","flex-column",2,"background-color","whitesmoke","width","350px"],["mat-card-avatar","",1,"example-header-image"],[2,"font-size","35px","color","orange"],[1,"flex-grow-1"],[1,"font-weight-normal"],["mat-stroked-button","","matTooltip","Click to import dataset",1,"mb-3","mr-3",2,"float","right","font-size","medium",3,"click"],[1,"fas","fa-file-import"]],template:function(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",0),m.Tb(1,"mat-card",1),m.Tb(2,"mat-card-header"),m.Tb(3,"div",2),m.Ob(4,"i",3),m.Sb(),m.Tb(5,"mat-card-title"),m.Tb(6,"h3",4),m.ac("click",(function(){return e.breadcrumbHandler("",!0)})),m.Kc(7," Data Connections "),m.Sb(),m.Ic(8,rt,5,3,"div",5),m.Sb(),m.Tb(9,"span",6),m.Ic(10,ct,2,1,"button",7),m.Tb(11,"button",8),m.ac("click",(function(){m.wc(a);var t=m.tc(20);return e.openDatasetModal(t)})),m.Kc(12," Sample Datasets "),m.Sb(),m.Tb(13,"button",9),m.ac("click",(function(){return e.openModalHandler("dataGroup")})),m.Kc(14," Create Folder "),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Ic(15,st,13,1,"mat-card",10),m.Ic(16,Et,34,4,"mat-card",11),m.Sb(),m.Ic(17,ae,31,4,"ng-template",null,12,m.Jc),m.Ic(19,ne,8,1,"ng-template",null,13,m.Jc)}2&t&&(m.Bb(6),m.Db(e.breadcrumbArray.length?"heading-with-breadcrumb":"heading-title"),m.kc("matTooltip",e._utils.getTootip("dataConnections")),m.Bb(2),m.kc("ngForOf",e.breadcrumbArray),m.Bb(2),m.kc("ngIf",e.fArr&&e.fArr.length>0),m.Bb(1),m.kc("matTooltip","Choose and import sample datasets."),m.Bb(2),m.kc("matTooltip",e._utils.getTootip("createDataGroup")),m.Bb(2),m.kc("ngIf",e.fArr&&0===e.fArr.length),m.Bb(1),m.kc("ngIf",e.fArr&&e.fArr.length>0))},directives:[Z.a,Z.f,Z.c,Z.m,Y.b,i.s,i.t,W.b,J.a,Z.d,X.c,X.g,tt.b,s.o,c.a,s.c,s.i,s.b,s.k,s.n,s.l,r.a,s.h,s.a,i.q,c.b,et.f,at.a,ot.a,s.j,s.m,b.j,b.g,b.d,b.e,Z.b],pipes:[i.f,i.F],styles:[".fluid-container[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover{color:#fff!important}.fluid-container[_ngcontent-%COMP%]   .connection-listing[_ngcontent-%COMP%]   .clickable[_ngcontent-%COMP%]{cursor:pointer;color:#07509d!important}.nodered-error[_ngcontent-%COMP%]{color:red;position:absolute;right:-1px;z-index:1;top:-4px}.nodered-error-tooltip-custom[_ngcontent-%COMP%]{background:#b71c1c!important}.success-icon[_ngcontent-%COMP%]{color:green!important}.danger-icon[_ngcontent-%COMP%]{color:red!important}"]}),ie),se=n("WUEe"),le=n("A5z7"),de=n("d3UM"),ue=n("QibW"),be=n("Xa2L"),pe=n("FKr1"),me=n("cWTo"),fe=n("8NN1");function he(t,e){1&t&&(m.Tb(0,"small"),m.Kc(1,"(Note: Preview of first 5 records only)"),m.Sb())}function ge(t,e){if(1&t&&m.Ob(0,"mat-progress-spinner",24),2&t){var a=m.ec(2);m.kc("color",a.color)("mode",a.mode)("diameter",a.diameter)}}function Se(t,e){if(1&t&&(m.Tb(0,"mat-option",25),m.Kc(1),m.fc(2,"dropFileExtension"),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a._id),m.Bb(1),m.Lc(m.hc(2,2,a.filename,a.fileSource))}}function ve(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Data set is required."),m.Sb())}function Te(t,e){if(1&t&&(m.Tb(0,"mat-option",25),m.Kc(1),m.fc(2,"titlecase"),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a),m.Bb(1),m.Lc(m.gc(2,2,a))}}function ye(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Join type is required."),m.Sb())}function ke(t,e){if(1&t&&(m.Tb(0,"div",12),m.Tb(1,"div",26),m.Tb(2,"mat-form-field",14),m.Tb(3,"mat-label"),m.Kc(4,"Select join type"),m.Sb(),m.Tb(5,"mat-select",27),m.Ic(6,Te,3,4,"mat-option",17),m.Sb(),m.Ic(7,ye,2,0,"mat-error",1),m.Sb(),m.Sb(),m.Sb()),2&t){var a=m.ec(2);m.Bb(6),m.kc("ngForOf",a.joinTypeArray),m.Bb(1),m.kc("ngIf",a.mergeForm.get("joinType").hasError("required")&&(a.mergeForm.get("joinType").dirty||a.mergeForm.get("joinType").touched))}}function Ie(t,e){if(1&t&&(m.Tb(0,"mat-option",25),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a.colName),m.Bb(1),m.Lc(a.colName)}}function we(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"This field is required."),m.Sb())}function Ce(t,e){if(1&t&&(m.Tb(0,"mat-option",25),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a.colName),m.Bb(1),m.Mc("",a.colName," ")}}function _e(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"This field is required."),m.Sb())}function De(t,e){if(1&t&&(m.Tb(0,"div",12),m.Tb(1,"div",26),m.Tb(2,"mat-form-field",14),m.Tb(3,"mat-label"),m.Kc(4,"On which column(s) you want to merge ?"),m.Sb(),m.Tb(5,"mat-select",28),m.Ic(6,Ie,2,2,"mat-option",17),m.Sb(),m.Ic(7,we,2,0,"mat-error",1),m.Sb(),m.Sb(),m.Tb(8,"div",26),m.Tb(9,"mat-form-field",14),m.Tb(10,"mat-label"),m.Kc(11,"Select column(s) to merge"),m.Sb(),m.Tb(12,"mat-select",29),m.Ic(13,Ce,2,2,"mat-option",17),m.Sb(),m.Ic(14,_e,2,0,"mat-error",1),m.Sb(),m.Sb(),m.Sb()),2&t){var a=m.ec(2);m.Bb(6),m.kc("ngForOf",a.commonColumns),m.Bb(1),m.kc("ngIf",a.mergeForm.get("commonColumn").hasError("required")&&(a.mergeForm.get("commonColumn").dirty||a.mergeForm.get("commonColumn").touched)),m.Bb(6),m.kc("ngForOf",a.avalialbleColumnsToMerge),m.Bb(1),m.kc("ngIf",a.mergeForm.get("columnsToMerge").hasError("required")&&(a.mergeForm.get("columnsToMerge").dirty||a.mergeForm.get("columnsToMerge").touched))}}function Fe(t,e){1&t&&(m.Tb(0,"mat-hint"),m.Kc(1,"Note : There are no common columns to merge."),m.Sb())}var Oe=function(){return{standalone:!0}};function Be(t,e){if(1&t){var a=m.Ub();m.Tb(0,"mat-dialog-content",7),m.Tb(1,"h4",8),m.Kc(2," Selected Data Set : "),m.Tb(3,"mat-chip-list",9),m.Tb(4,"mat-chip"),m.Kc(5),m.Sb(),m.Sb(),m.Sb(),m.Ic(6,ge,1,3,"mat-progress-spinner",10),m.Tb(7,"form",11),m.Tb(8,"div",12),m.Tb(9,"div",13),m.Tb(10,"mat-form-field",14),m.Tb(11,"mat-label",15),m.Kc(12,"Select data set to merge"),m.Sb(),m.Tb(13,"mat-select",16),m.ac("selectionChange",(function(t){return m.wc(a),m.ec().dataSetChanged(t.value)})),m.Ic(14,Se,3,5,"mat-option",17),m.Sb(),m.Ic(15,ve,2,0,"mat-error",1),m.Sb(),m.Sb(),m.Sb(),m.Tb(16,"div",12),m.Tb(17,"div",18),m.Tb(18,"label",19),m.Kc(19,"How do you want to merge data ?"),m.Sb(),m.Tb(20,"mat-radio-group",20),m.ac("ngModelChange",(function(t){return m.wc(a),m.ec().mergeType=t}))("change",(function(){m.wc(a);var t=m.ec();return t.mergeTypeChanged(t.mergeType)})),m.Tb(21,"mat-radio-button",21),m.Kc(22,"Row wise "),m.Sb(),m.Tb(23,"mat-radio-button",22),m.Kc(24,"Column wise "),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Ic(25,ke,8,2,"div",23),m.Ic(26,De,15,4,"div",23),m.Ic(27,Fe,2,0,"mat-hint",1),m.Sb(),m.Sb()}if(2&t){var o=m.ec();m.Bb(5),m.Lc(o.dialogData.data.name),m.Bb(1),m.kc("ngIf",o.showSpinner),m.Bb(1),m.kc("formGroup",o.mergeForm),m.Bb(4),m.kc("matTooltip",o._utils.getTootip("selectDataSetEda")),m.Bb(3),m.kc("ngForOf",o.dataSetList),m.Bb(1),m.kc("ngIf",o.mergeForm.get("selectedDataset").hasError("required")&&(o.mergeForm.get("selectedDataset").dirty||o.mergeForm.get("selectedDataset").touched)),m.Bb(5),m.kc("ngModel",o.mergeType)("ngModelOptions",m.mc(13,Oe)),m.Bb(1),m.kc("matTooltip",o._utils.getTootip("mergeDatasetRowWise")),m.Bb(2),m.kc("matTooltip",o._utils.getTootip("mergeDatasetColumnWise")),m.Bb(2),m.kc("ngIf","column"===o.mergeType&&o.mergeForm.get("selectedDataset").value&&o.commonColumns.length),m.Bb(1),m.kc("ngIf","column"===o.mergeType&&o.mergeForm.get("selectedDataset").value&&o.commonColumns.length),m.Bb(1),m.kc("ngIf",o.commonColumns&&0===o.commonColumns.length&&"column"===o.mergeType)}}function Ne(t,e){if(1&t){var a=m.Ub();m.Tb(0,"ag-grid-angular",32,33),m.ac("gridReady",(function(t){return m.wc(a),m.ec(2).gridReady(t)})),m.Sb()}if(2&t){var o=m.ec(2);m.kc("rowData",o.previewrowData)("gridOptions",o.gridOptions)}}function xe(t,e){if(1&t&&(m.Tb(0,"mat-dialog-content",30),m.Ic(1,Ne,2,2,"ag-grid-angular",31),m.Sb()),2&t){var a=m.ec();m.Bb(1),m.kc("ngIf",a.previewrowData)}}function Ge(t,e){if(1&t){var a=m.Ub();m.Tb(0,"button",34),m.ac("click",(function(){m.wc(a);var t=m.ec();return t.onSubmitMerge(t.mergeForm.value)})),m.Kc(1," Merge "),m.Sb()}if(2&t){var o=m.ec();m.kc("disabled",o.mergeForm.invalid)}}var Pe,Me=((Pe=function(){function e(a,o,n,i,r,c,l,d){t(this,e),this.dialogData=a,this._spinner=o,this._fb=n,this._data=i,this._toaster=r,this._dataSetDialogRef=c,this._localStorage=l,this._utils=d,this.dataSource=new s.p,this.resizeEvent="resize.ag-grid",this.pageSizeOptions=[10,15,20],this.displayedColumns=[],this.color="primary",this.mode="indeterminate",this.diameter=100,this.exportProjectDiameter=50,this.joinTypeArray=["inner","left","right","outer"],this.showPreview=!1,this.showReport=!1,this.showMergeForm=!1,this.showSpinner=!1,this.dataSetList=[],this.mergeType="row",this.mergeForm=this._fb.group({selectedDataset:["",u.I.required],joinType:["",u.I.nullValidator],commonColumn:["",u.I.nullValidator],columnsToMerge:["",u.I.nullValidator]})}return a(e,[{key:"ngAfterViewInit",value:function(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"ngOnInit",value:function(){"preview"===this.dialogData.type?(this.showPreview=!0,this.modalHeading="Data Preview",console.log(this.dialogData),this.previewData()):(this.showMergeForm=!0,this.modalHeading="Merge Data",this.project=this._localStorage.getItem("project"),this.listAllProjectFileList(this.dialogData.data))}},{key:"previewData",value:function(){var t=this;this._spinner.showSpinner();var e=[];this._data.myFileData(this.dialogData.reqObj.pid,this.dialogData.dataId,this.dialogData.reqObj,!0).subscribe((function(a){if(a){for(var o in a.preview[0])e.push({headerName:o,field:o});console.log(e),t.gridOptions={headerHeight:40,columnDefs:e,defaultColDef:{resizable:!0}},t.previewrowData=a.preview,t._spinner.stopSpinner()}else t._spinner.stopSpinner(),t._toaster.error("Sorry! Cannot preview the files data.","Data Set")}),(function(e){t.showSpinner=!1,t._toaster.error("Server Error","Data Set")}))}},{key:"listAllProjectFileList",value:function(t){var e=this;this.dataConnection$=this._data.getAllProjectFileList(this.project._id).subscribe((function(a){a&&(e.parentFile=a.find((function(e){return e._id===t._id})),e.dataSetList=a.filter((function(e){return e._id!==t._id})))}),(function(t){e._toaster.error("Server Error","Data Sets")}))}},{key:"dataSetChanged",value:function(t){var e=this;this.mergeDataSet=this.dataSetList.find((function(e){return e._id===t})),this.avalialbleColumnsToMerge=this.mergeDataSet.fileSchema,this.commonColumns=this.parentFile.fileSchema.filter((function(t){return e.mergeDataSet.fileSchema.find((function(e){return e.colName===t.colName}))}))}},{key:"mergeTypeChanged",value:function(t){"column"===t?(this.mergeForm.get("joinType").setValidators(u.I.required),this.mergeForm.get("commonColumn").setValidators(u.I.required),this.mergeForm.get("columnsToMerge").setValidators(u.I.required),this.mergeForm.get("joinType").updateValueAndValidity(),this.mergeForm.get("commonColumn").updateValueAndValidity(),this.mergeForm.get("columnsToMerge").updateValueAndValidity()):(this.mergeForm.get("joinType").clearValidators(),this.mergeForm.get("commonColumn").clearValidators(),this.mergeForm.get("columnsToMerge").clearValidators(),this.mergeForm.get("joinType").updateValueAndValidity(),this.mergeForm.get("commonColumn").updateValueAndValidity(),this.mergeForm.get("columnsToMerge").updateValueAndValidity())}},{key:"onSubmitMerge",value:function(t){var e=this;this.showSpinner=!0,t.originalFilePath=this.parentFile.filename,t.pid=this.project._id,t.dataGroupId=this.dialogData.data.datagroup_id,t.mergeFilePath=this.mergeDataSet.filename,t.parentDatasetTasks=this.parentFile.tasks,t.mergeDatasetTasks=this.mergeDataSet.tasks,t.mergeType=this.mergeType,"row"===this.mergeType&&(delete t.columnsToMerge,delete t.commonColumn,delete t.joinType),this.dataConnection$=this._data.mergeDataSet(this.project._id,t).subscribe((function(t){t?(e.closeModal(t),e.showSpinner=!1,e._toaster.info("Data merging started...","Data Sets")):(e.showSpinner=!1,e._toaster.error("Sorry! Cannot merge the data set.","Data Sets"))}),(function(t){e.closeModal(),e.showSpinner=!1,e._toaster.error(t.message,"Data Sets")}))}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}},{key:"closeModal",value:function(t){this._dataSetDialogRef.close(t)}},{key:"gridReady",value:function(t){t.api.setDomLayout("autoHeight"),this.gridApi=t.api,this.gridApi.setColumnDefs(this.gridOptions.columnDefs),this.gridApi.setRowData(this.previewrowData),this.gridApi.refreshCells({force:!0})}},{key:"ngOnDestroy",value:function(){this.dataConnection$&&this.dataConnection$.unsubscribe()}}]),e}()).\u0275fac=function(t){return new(t||Pe)(m.Nb(b.a),m.Nb(H.a),m.Nb(u.h),m.Nb(f.a),m.Nb(h.c),m.Nb(b.i),m.Nb(g.a),m.Nb(S.a))},Pe.\u0275cmp=m.Hb({type:Pe,selectors:[["app-data-set-dialog"]],viewQuery:function(t,e){var a;1&t&&(m.Oc(r.a,!0),m.Oc(c.a,!0)),2&t&&(m.sc(a=m.bc())&&(e.paginator=a.first),m.sc(a=m.bc())&&(e.sort=a.first))},decls:9,vars:5,consts:[["mat-dialog-title",""],[4,"ngIf"],["class","mat-typography mt-4",4,"ngIf"],["class","mat-typography preview-data-section mb-3",4,"ngIf"],[1,"justify-content-end","m-auto"],["mat-stroked-button","",3,"click"],["mat-flat-button","","class","btn-primary","type","submit",3,"disabled","click",4,"ngIf"],[1,"mat-typography","mt-4"],[1,"selected-dataset"],[1,"ml-2"],["class","spinner",3,"color","mode","diameter",4,"ngIf"],["role","form","name","mergeForm",1,"form-validate",3,"formGroup"],[1,"row"],[1,"col-md-12","form-group"],["appearance","outline"],[3,"matTooltip"],["formControlName","selectedDataset","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-5","form-group","ml-1"],["id","project-type"],[1,"radio-group",3,"ngModel","ngModelOptions","ngModelChange","change"],["value","row",3,"matTooltip"],["value","column",3,"matTooltip"],["class","row",4,"ngIf"],[1,"spinner",3,"color","mode","diameter"],[3,"value"],[1,"col-md-6","form-group"],["formControlName","joinType","required",""],["formControlName","commonColumn","multiple",""],["formControlName","columnsToMerge","multiple",""],[1,"mat-typography","preview-data-section","mb-3"],["id","myGrid","class","ag-angle my-4",3,"rowData","gridOptions","gridReady",4,"ngIf"],["id","myGrid",1,"ag-angle","my-4",3,"rowData","gridOptions","gridReady"],["agGrid",""],["mat-flat-button","","type","submit",1,"btn-primary",3,"disabled","click"]],template:function(t,e){1&t&&(m.Tb(0,"h2",0),m.Kc(1),m.Ic(2,he,2,0,"small",1),m.Sb(),m.Ic(3,Be,28,14,"mat-dialog-content",2),m.Ic(4,xe,2,1,"mat-dialog-content",3),m.Tb(5,"mat-dialog-actions",4),m.Tb(6,"button",5),m.ac("click",(function(){return e.closeModal()})),m.Kc(7,"Cancel"),m.Sb(),m.Ic(8,Ge,2,1,"button",6),m.Sb()),2&t&&(m.Bb(1),m.Mc(" ",e.modalHeading," "),m.Bb(1),m.kc("ngIf","preview"===e.dialogData.type),m.Bb(1),m.kc("ngIf","merge"===e.dialogData.type),m.Bb(1),m.kc("ngIf","preview"===e.dialogData.type),m.Bb(4),m.kc("ngIf","merge"===e.dialogData.type))},directives:[b.j,i.t,b.d,W.b,b.g,le.d,le.a,u.K,u.v,u.m,X.c,X.g,Y.b,de.a,u.u,u.k,u.F,i.s,ue.c,u.x,ue.b,be.a,pe.o,X.b,X.f,me.a],pipes:[fe.a,i.F],styles:[".selected-dataset[_ngcontent-%COMP%]{display:inline-flex;align-items:center}.radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}"]}),Pe),Ke=n("x/NU"),Ae=n("jhN1"),Re=n("mdW0");function Ee(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",8),m.Tb(1,"mat-icon",9),m.Kc(2,"chevron_right"),m.Sb(),m.Tb(3,"h3",10),m.ac("click",(function(){m.wc(a);var t=e.$implicit;return m.ec().breadcrumbHandler(t,!0)})),m.Kc(4),m.Sb(),m.Sb()}if(2&t){var o=e.$implicit,n=e.last;m.Bb(3),m.Db(n?"breadcrumb-name":"heading-with-breadcrumb ml-0"),m.Bb(1),m.Mc(" ",o.name," ")}}var qe=function(){return["/project/data/dataconnection"]};function je(t,e){1&t&&(m.Tb(0,"h4",11),m.Kc(1," You don't have any data set or connection yet, "),m.Tb(2,"a",12),m.Kc(3,"upload now."),m.Sb(),m.Sb()),2&t&&(m.Bb(2),m.kc("routerLink",m.mc(1,qe)))}function Le(t,e){if(1&t&&m.Ob(0,"mat-progress-spinner",35),2&t){var a=m.ec(2);m.kc("color",a.color)("mode",a.mode)("diameter",a.diameter)}}function Ue(t,e){1&t&&m.Ob(0,"th",36)}function $e(t,e){if(1&t&&(m.Tb(0,"td",37),m.Ob(1,"i"),m.Sb()),2&t){var a=e.$implicit;m.Bb(1),m.Db(a.fileSource?"fa fa-file-alt icons mr-3":"fa fa-folder icons mr-3")}}function He(t,e){1&t&&(m.Tb(0,"th",38),m.Kc(1,"Name"),m.Sb())}function Ve(t,e){if(1&t){var a=m.Ub();m.Tb(0,"td",39),m.ac("click",(function(){m.wc(a);var t=e.$implicit;return m.ec(2).breadcrumbHandler(t)})),m.Kc(1),m.fc(2,"dropFileExtension"),m.Sb()}if(2&t){var o=e.$implicit;m.Fb("clickable",!o.fileSource),m.Bb(1),m.Mc(" ",m.hc(2,3,o.name,o.fileSource)," ")}}function ze(t,e){1&t&&(m.Tb(0,"th",38),m.Kc(1,"Created At"),m.Sb())}function Qe(t,e){if(1&t&&(m.Tb(0,"td",37),m.Kc(1),m.fc(2,"date"),m.Sb()),2&t){var a=e.$implicit;m.Bb(1),m.Mc(" ",m.hc(2,1,a.createdAt,"medium")," ")}}function Ze(t,e){1&t&&(m.Tb(0,"th",38),m.Kc(1,"No. of Rows"),m.Sb())}function Ye(t,e){if(1&t&&(m.Tb(0,"td",37),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.Bb(1),m.Mc(" ",a.noOfRows?a.noOfRows:"-"," ")}}function We(t,e){1&t&&(m.Tb(0,"th",38),m.Kc(1,"No. of Columns"),m.Sb())}function Je(t,e){if(1&t&&(m.Tb(0,"td",37),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.Bb(1),m.Mc(" ",a.noOfCols?a.noOfCols:"-"," ")}}function Xe(t,e){1&t&&(m.Tb(0,"th",38),m.Kc(1,"File Size"),m.Sb())}function ta(t,e){if(1&t&&(m.Tb(0,"td",37),m.Kc(1),m.fc(2,"fileSizeConverter"),m.Sb()),2&t){var a=e.$implicit;m.Bb(1),m.Mc(" ",a.fileSize?m.hc(2,1,a.fileSize,2):"-"," ")}}function ea(t,e){1&t&&(m.Tb(0,"th",36),m.Kc(1,"Actions"),m.Sb())}function aa(t,e){if(1&t){var a=m.Ub();m.Tb(0,"button",49),m.ac("click",(function(){m.wc(a);var t=m.ec(2).$implicit;return m.ec(2).openDataReportModal(t,"report")})),m.Ob(1,"i",50),m.Sb()}}function oa(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",41),m.Tb(1,"button",42),m.ac("click",(function(){m.wc(a);var t=m.ec().$implicit;return m.ec(2).openDataPreviewModal(t,"preview")})),m.Ob(2,"i",43),m.Sb(),m.Ic(3,aa,2,0,"button",44),m.Tb(4,"button",45),m.ac("click",(function(){m.wc(a);var t=m.ec().$implicit;return m.ec(2).openMergeDataModal(t,"merge")})),m.Ob(5,"i",46),m.Sb(),m.Tb(6,"button",47),m.ac("click",(function(){m.wc(a);var t=m.ec().$implicit;return m.ec(2).deleteHandler(t._id)})),m.Ob(7,"i",48),m.Sb(),m.Sb()}if(2&t){var o=m.ec(3);m.Bb(3),m.kc("ngIf",(null==o.user||null==o.user.roles?null:o.user.roles.includes("super_admin"))||"basic"!==(null==o.user?null:o.user.planType)&&"pro"!==(null==o.user?null:o.user.planType))}}function na(t,e){if(1&t&&(m.Tb(0,"td",37),m.Ic(1,oa,8,1,"div",40),m.Sb()),2&t){var a=e.$implicit;m.Bb(1),m.kc("ngIf",a.fileSource)}}function ia(t,e){1&t&&m.Ob(0,"tr",51)}function ra(t,e){1&t&&m.Ob(0,"tr",52)}function ca(t,e){if(1&t&&(m.Tb(0,"td",55),m.Kc(1),m.Sb()),2&t){m.ec(2);var a=m.tc(5);m.Bb(1),m.Mc(' No data matching the filter "',a.value,'" ')}}function sa(t,e){1&t&&(m.Tb(0,"td",55),m.Kc(1,"No data available in table"),m.Sb())}function la(t,e){if(1&t&&(m.Tb(0,"tr",53),m.Ic(1,ca,2,1,"td",54),m.Ic(2,sa,2,0,"td",54),m.Sb()),2&t){m.ec();var a=m.tc(5);m.Bb(1),m.kc("ngIf",""!=a.value),m.Bb(1),m.kc("ngIf",""==a.value)}}function da(t,e){if(1&t){var a=m.Ub();m.Tb(0,"mat-card",13),m.Tb(1,"mat-form-field",14),m.Tb(2,"mat-label"),m.Kc(3,"Search"),m.Sb(),m.Tb(4,"input",15,16),m.ac("keyup",(function(t){return m.wc(a),m.ec().applyFilter(t)})),m.Sb(),m.Sb(),m.Ic(6,Le,1,3,"mat-progress-spinner",17),m.Tb(7,"table",18),m.Rb(8,19),m.Ic(9,Ue,1,0,"th",20),m.Ic(10,$e,2,2,"td",21),m.Qb(),m.Rb(11,22),m.Ic(12,He,2,0,"th",23),m.Ic(13,Ve,3,6,"td",24),m.Qb(),m.Rb(14,25),m.Ic(15,ze,2,0,"th",23),m.Ic(16,Qe,3,4,"td",21),m.Qb(),m.Rb(17,26),m.Ic(18,Ze,2,0,"th",23),m.Ic(19,Ye,2,1,"td",21),m.Qb(),m.Rb(20,27),m.Ic(21,We,2,0,"th",23),m.Ic(22,Je,2,1,"td",21),m.Qb(),m.Rb(23,28),m.Ic(24,Xe,2,0,"th",23),m.Ic(25,ta,3,4,"td",21),m.Qb(),m.Rb(26,29),m.Ic(27,ea,2,0,"th",20),m.Ic(28,na,2,1,"td",21),m.Qb(),m.Ic(29,ia,1,0,"tr",30),m.Ic(30,ra,1,0,"tr",31),m.Ic(31,la,3,2,"tr",32),m.Sb(),m.Ob(32,"mat-paginator",33,34),m.Sb()}if(2&t){var o=m.ec();m.Bb(6),m.kc("ngIf",o.showSpinner),m.Bb(1),m.kc("dataSource",o.dataSource),m.Bb(22),m.kc("matHeaderRowDef",o.displayedColumns),m.Bb(1),m.kc("matRowDefColumns",o.displayedColumns),m.Bb(2),m.kc("pageSizeOptions",o.pageSizeOptions)}}var ua,ba,pa=n("GUC0"),ma=((ua=function(){function e(a,o,n,i,r,c,d,u,b){t(this,e),this._toaster=a,this._data=o,this._localStorage=n,this._spinner=i,this._dialog=r,this._report=c,this._sanitizer=d,this._socket=u,this._utils=b,this.dataSource=new s.p,this.pageSizeOptions=[10,15,20],this.displayedColumns=[],this.unsubscribe$=new l.b,this.resizeEvent="resize.ag-grid",this.color="primary",this.mode="indeterminate",this.diameter=100,this.showSpinner=!1,this.breadcrumbArray=[],this.breadArray=[],this.fArr=[],this.dataFilterArray=[],this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this.displayedColumns=["icon","fileName","createdAt","noOfRecords","noOfColumns","fileSize","actions"]}return a(e,[{key:"paginator",set:function(t){this.dataSource.paginator=t}},{key:"sort",set:function(t){this.dataSource.sort=t}},{key:"ngOnInit",value:function(){this._spinner.showSpinner(),this.initSocket(),this.getDataSetList()}},{key:"getDataSetList",value:function(){var t,e=this,a=[];this.breadArray.length=0,this.breadcrumbArray.length=0,this._data.getAllProjectDatas(this.project._id).pipe(Object(L.a)(this.unsubscribe$)).subscribe((function(o){var n;o?(e.dataFilterArray=[],e.dataFilterArray=e.dataFilterArray.concat(o[0].dataGroupList,o[0].filesList),a=e.dataFilterArray.filter((function(t){return!Object.keys(t).includes("parentId")&&!Object.keys(t).includes("datagroup_id")})),t=a[0]._id,n=e.dataFilterArray.filter((function(e){return"upload_retrained"!=e.fileSource&&(e.parentId==t||e.datagroup_id==t)})),e.fArr=n,e.dataSource.data=n,e.dataSource._updateChangeSubscription(),e.dataSource.paginator=e.paginator,e.dataSource.sort=e.sort,e._spinner.stopSpinner()):(e._spinner.stopSpinner(),e._toaster.error("Cannot fetch data list","Data Sets"))}),(function(t){e._spinner.stopSpinner(),e._toaster.error("Server Error","Data Sets")}))}},{key:"deleteHandler",value:function(t){var e=this,a=document.createElement("div");a.innerHTML="You will not be able to recover <b>Eda, Training and Models </b> related to this dataset!",pa({title:"Are you sure?",content:a,icon:"warning",buttons:{cancel:{text:"Cancel",value:null,visible:!0,className:""},confirm:{text:"Yes, delete it!",value:!0,visible:!0,className:"bg-danger"}}}).then((function(a){a&&(e.breadArray.length=0,e._data.deleteDataSet(e.project._id,t).pipe(Object(L.a)(e.unsubscribe$)).subscribe((function(t){t?(e.getDataSetList(),e._toaster.success("File deleted successfully","Data Sets")):e._toaster.error("Cannot delete file","Data Sets")}),(function(t){e._toaster.error("Server Error","Data Sets")})))}))}},{key:"openDialog",value:function(t,e,a){var o=this;this._dialog.open(Me,{minWidth:"preview"===e?"80vw":"50vw",maxWidth:"80vw",data:"preview"===e?{type:e,dataId:a,reqObj:t}:{type:e,columns:a,data:t}}).afterClosed().subscribe((function(t){t&&o.getDataSetList()}))}},{key:"openDataPreviewModal",value:function(t,e){this.showSpinner=!0;var a={dataId:t._id,pid:this.project._id};this.showSpinner=!1,this.openDialog(a,"preview",t._id)}},{key:"openDataReportModal",value:function(t,e){this._dialog.open(se.a,{minHeight:"90vh",maxHeight:"90vh",minWidth:"90vw",data:{moduleName:"data-set",edaReportData:{projectId:this.project._id,dataId:t._id}}})}},{key:"openMergeDataModal",value:function(t,e){this.openDialog(t,e)}},{key:"breadcrumbHandler",value:function(t,e){if(!t.fileSource){var a,o=t._id||t.id;if(this.showSpinner=!0,e){var n=this.breadArray.findIndex((function(t){return t.id==o}));this.breadArray.splice(n+1),t||this.getDataSetList()}else this.breadArray.push({id:o,name:t.name});this.breadcrumbArray=this.breadArray,a=this.dataFilterArray.filter((function(t){return t.parentId===o||t.datagroup_id===o})).filter((function(t){return!Object.keys(t).includes("connId")})),this.fArr=a,this.dataSource.data=a,this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.showSpinner=!1}}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}},{key:"initSocket",value:function(){var t=this;this._socket.listen("merge").subscribe((function(e){"pull_success"===e.status?(t.getDataSetList(),t._toaster.success("Data merged successfully","Data Set")):t._toaster.error(e.status,"Data Set"),t._spinner.stopSpinner()}),(function(e){t._spinner.stopSpinner(),t._toaster.error("Socket Error","Data Set")}))}},{key:"ngOnDestroy",value:function(){this._socket.removeListener("pullData"),this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}]),e}()).\u0275fac=function(t){return new(t||ua)(m.Nb(h.c),m.Nb(f.a),m.Nb(g.a),m.Nb(H.a),m.Nb(b.c),m.Nb(Ke.a),m.Nb(Ae.b),m.Nb(z.a),m.Nb(S.a))},ua.\u0275cmp=m.Hb({type:ua,selectors:[["app-data-set"]],viewQuery:function(t,e){var a;1&t&&(m.Oc(r.a,!0),m.Oc(c.a,!0)),2&t&&(m.sc(a=m.bc())&&(e.paginator=a.first),m.sc(a=m.bc())&&(e.sort=a.first))},decls:11,vars:6,consts:[[1,"fluid-container"],[1,"heading"],["mat-card-avatar",""],[1,"far","fa-folder","folder-icon"],[2,"cursor","pointer",3,"matTooltip","click"],["class","d-flex align-items-center",4,"ngFor","ngForOf"],["class","text-center mt-5 font-weight-normal",4,"ngIf"],["class","files-listing mt-5 p-4",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"align-middle"],[3,"click"],[1,"text-center","mt-5","font-weight-normal"],["href","#",1,"text-decoration-none",3,"routerLink"],[1,"files-listing","mt-5","p-4"],[1,"search-input"],["matInput","",3,"keyup"],["input",""],["class","spinner",3,"color","mode","diameter",4,"ngIf"],["mat-table","","matSort","","matSortActive","createdAt","matSortDirection","desc","matSortDisableClear","",1,"mt-2",3,"dataSource"],["matColumnDef","icon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fileName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"clickable","click",4,"matCellDef"],["matColumnDef","createdAt"],["matColumnDef","noOfRecords"],["matColumnDef","noOfColumns"],["matColumnDef","fileSize"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mt-2",3,"pageSizeOptions"],["dataSetPaginator",""],[1,"spinner",3,"color","mode","diameter"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-cell","",3,"click"],["class","action-buttons d-flex",4,"ngIf"],[1,"action-buttons","d-flex"],["mat-icon-button","","matTooltip","Preview the data",1,"text-value",3,"click"],[1,"fa","fa-eye"],["mat-icon-button","","class","text-value","matTooltip","Preview the detailed report about the data",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Merge two datasets",1,"text-value",3,"click"],[1,"fa","fa-clone"],["mat-icon-button","","matTooltip","Delete",1,"delete-button",3,"click"],[1,"fa","fa-trash"],["mat-icon-button","","matTooltip","Preview the detailed report about the data",1,"text-value",3,"click"],[1,"fas","fa-file-invoice"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["class","mat-cell","colspan","4",4,"ngIf"],["colspan","4",1,"mat-cell"]],template:function(t,e){1&t&&(m.Tb(0,"div",0),m.Tb(1,"mat-card",1),m.Tb(2,"mat-card-header"),m.Tb(3,"div",2),m.Ob(4,"i",3),m.Sb(),m.Tb(5,"mat-card-title"),m.Tb(6,"h3",4),m.ac("click",(function(){return e.breadcrumbHandler("",!0)})),m.Kc(7," Data Sets "),m.Sb(),m.Ic(8,Ee,5,3,"div",5),m.Sb(),m.Sb(),m.Sb(),m.Ic(9,je,4,2,"h4",6),m.Ic(10,da,34,5,"mat-card",7),m.Sb()),2&t&&(m.Bb(6),m.Db(e.breadcrumbArray.length?"heading-with-breadcrumb":"heading-title"),m.kc("matTooltip",e._utils.getTootip("dataSet")),m.Bb(2),m.kc("ngForOf",e.breadcrumbArray),m.Bb(1),m.kc("ngIf",!e.dataSource.data.length),m.Bb(1),m.kc("ngIf",e.dataSource.data.length))},directives:[Z.a,Z.f,Z.c,Z.m,Y.b,i.s,i.t,J.a,et.h,X.c,X.g,tt.b,s.o,c.a,s.c,s.i,s.b,s.k,s.n,s.l,r.a,be.a,s.h,s.a,c.b,W.b,s.j,s.m],pipes:[fe.a,i.f,Re.a],styles:[".files-listing[_ngcontent-%COMP%]   .clickable[_ngcontent-%COMP%]{cursor:pointer;color:#08509d!important}td.mat-column-actions[_ngcontent-%COMP%], td.mat-column-noOfColumns[_ngcontent-%COMP%], td.mat-column-noOfRecords[_ngcontent-%COMP%], th.mat-column-noOfColumns[_ngcontent-%COMP%], th.mat-column-noOfRecords[_ngcontent-%COMP%]{text-align:center!important}"]}),ua),fa=n("tk/3"),ha=((ba=function(){function e(a){t(this,e),this._http=a,this.serverBaseUrl=p.a.serverBaseUrl}return a(e,[{key:"getAllFlowsList",value:function(t){return this._http.get("".concat(this.serverBaseUrl,"/api/udd?projectId=").concat(t))}},{key:"createNewFlow",value:function(t){return this._http.post(this.serverBaseUrl+"/api/udd",t)}},{key:"deleteFlow",value:function(t){return this._http.delete("".concat(this.serverBaseUrl,"/api/udd/").concat(t))}},{key:"getSingleFlow",value:function(t){return this._http.get("".concat(this.serverBaseUrl,"/api/udd/").concat(t))}},{key:"updateFlow",value:function(t,e){return this._http.put("".concat(this.serverBaseUrl,"/api/udd/").concat(t),e)}},{key:"executeDataFlow",value:function(t,e,a){return this._http.get("".concat(this.serverBaseUrl,"/api/project/").concat(t,"/udd/").concat(e,"/execute?dataGroupId=").concat(a))}},{key:"getErrorLogs",value:function(t,e,a){return this._http.get("".concat(this.serverBaseUrl,"/api/node-red/errorLog/").concat(t,"?startDate=").concat(e,"&endDate=").concat(a))}}]),e}()).\u0275fac=function(t){return new(t||ba)(m.Xb(fa.b))},ba.\u0275prov=m.Jb({token:ba,factory:ba.\u0275fac,providedIn:"root"}),ba),ga=n("xHqg"),Sa=["myiframe"];function va(t,e){if(1&t&&m.Kc(0),2&t){var a=m.ec();m.Lc(a.isEdit?"Update Flow Details":"Enter Flow Details")}}function Ta(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Flow name is required."),m.Sb())}function ya(t,e){if(1&t&&(m.Tb(0,"mat-option",20),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a._id),m.Bb(1),m.Lc(a.name)}}function ka(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Folder is required."),m.Sb())}function Ia(t,e){if(1&t&&(m.Tb(0,"div",6),m.Tb(1,"mat-form-field",7),m.Tb(2,"mat-label"),m.Kc(3,"Select folder"),m.Sb(),m.Tb(4,"mat-select",18),m.Ic(5,ya,2,2,"mat-option",19),m.Sb(),m.Ic(6,ka,2,0,"mat-error",9),m.Sb(),m.Sb()),2&t){var a=m.ec();m.Bb(5),m.kc("ngForOf",a.dataGroups),m.Bb(1),m.kc("ngIf",a.flowFormGroup.get("dataGroupId").hasError("required")&&(a.flowFormGroup.get("dataGroupId").dirty||a.flowFormGroup.get("dataGroupId").touched))}}function wa(t,e){if(1&t&&(m.Tb(0,"mat-option",20),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a._id),m.Bb(1),m.Mc("",a.scheduleName," ")}}function Ca(t,e){if(1&t&&(m.Tb(0,"div",6),m.Tb(1,"mat-form-field",7),m.Tb(2,"mat-label"),m.Kc(3,"Select scheduler"),m.Sb(),m.Tb(4,"mat-select",21),m.Tb(5,"mat-option",22),m.Kc(6,"None"),m.Sb(),m.Ic(7,wa,2,2,"mat-option",19),m.Sb(),m.Sb(),m.Sb()),2&t){var a=m.ec();m.Bb(7),m.kc("ngForOf",a.schedulars)}}function _a(t,e){1&t&&m.Kc(0,"Design Data Flow")}var Da,Fa=((Da=function(){function e(a,o,n,i,r,c){t(this,e),this._formBuilder=a,this._sanitizer=o,this._dataFlow=n,this._toaster=i,this._localStorage=r,this._router=c,this.closeNodeRed=new m.o,this.unsubscribe$=new l.b,this.serverBaseUrl=p.a.serverBaseUrl,this.isEdit=!1,this.flowFormGroup=this._formBuilder.group({flowName:["",u.I.required],dataGroupId:["",u.I.required],scheduleId:[""]})}return a(e,[{key:"ngOnInit",value:function(){this.project=this._localStorage.getItem("project"),this.prefillFlowDetails(this.flowData,this.flowIdToEdit),this.flowURL=this._sanitizer.bypassSecurityTrustResourceUrl(this.serverBaseUrl+"/!/")}},{key:"ngAfterViewInit",value:function(){this.connId&&this.stepper.next()}},{key:"closeStepperHandler",value:function(){this.connId||this.flowIdToEdit?this._router.navigateByUrl("/project/data/dataconnection"):this.closeNodeRed.emit({isCanceled:!0})}},{key:"prefillFlowDetails",value:function(t,e){t||e?(this.isEdit=!0,this.flowFormGroup.patchValue({flowName:t?t.flowName:"",dataGroupId:t?t.dataGroupId:"",scheduleId:t?t.scheduleId:""}),this.findOneFlow(t?t._id:e)):(this.isEdit=!1,this.flowFormGroup.reset())}},{key:"validateFlow",value:function(){if(window.frames.myiframe.contentDocument.getElementsByClassName("red-ui-header-toolbar"))return!!window.frames.myiframe.contentDocument.getElementsByClassName("red-ui-header-toolbar")[0].innerHTML.includes("red-ui-deploy-button disabled")}},{key:"onSubmitFlow",value:function(){var t=$("#nodeRedIframe"),e=t.contents().find("#red-ui-header-button-deploy")[0],a=t[0].contentWindow.location.href,o=a.lastIndexOf("/"),n=a.substring(o+1,a.length);e.click(),"#"!=n&&""!=n||alert("Something went wrong, please refresh");var i={flowName:this.flowFormGroup.value.flowName,flowId:n,flowType:this.connId?"interceptor":"direct",projectId:this.project._id,connectionID:this.connId?this.connId:null,dataGroupId:this.flowFormGroup.value.dataGroupId};this.flowFormGroup.value.scheduleId&&(i.scheduleId=this.flowFormGroup.value.scheduleId),this.connId?(delete i.scheduleId,delete i.dataGroupId):delete i.connectionID,this.isEdit?(i.flowType=this.flowData.flowType,this.flowData.dataGroupId||delete i.dataGroupId,this.updateFlow(i)):this.createNewFlow(i)}},{key:"createNewFlow",value:function(t){var e=this;this._dataFlow.createNewFlow(t).pipe(Object(L.a)(this.unsubscribe$)).subscribe((function(t){t&&(e._toaster.success("Data flow created successfully","Data Flows"),e.closeNodeRed.emit({flowResponse:t,isCanceled:!0}))}),(function(t){e._toaster.error(t.message,"Data Flows")}))}},{key:"updateFlow",value:function(t){var e=this;this._dataFlow.updateFlow(this.flowData._id||this.flowIdToEdit,t).pipe(Object(L.a)(this.unsubscribe$)).subscribe((function(t){t&&(e._toaster.success("Data flow updated successfully","Data Flows"),e.closeNodeRed.emit({flowResponse:t,isCanceled:!0}))}),(function(t){e._toaster.error(t.message,"Data Flows")}))}},{key:"findOneFlow",value:function(t){var e=this;this._dataFlow.getSingleFlow(t).pipe(Object(L.a)(this.unsubscribe$)).subscribe((function(t){t&&(e.flowData=t,e.flowFormGroup.get("flowName").setValue(t.flowName),e.flowFormGroup.get("dataGroupId").clearValidators(),e.flowFormGroup.get("dataGroupId").updateValueAndValidity(),e.flowURL=e._sanitizer.bypassSecurityTrustResourceUrl("".concat(e.serverBaseUrl,"/!/#flow/").concat(t.flowId)))}),(function(t){e._toaster.error("Cannot fetch flows details","Data Flows")}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}]),e}()).\u0275fac=function(t){return new(t||Da)(m.Nb(u.h),m.Nb(Ae.b),m.Nb(ha),m.Nb(h.c),m.Nb(g.a),m.Nb(et.e))},Da.\u0275cmp=m.Hb({type:Da,selectors:[["app-data-flow-stepper"]],viewQuery:function(t,e){var a;1&t&&(m.Oc(Sa,!0),m.Oc(ga.a,!0)),2&t&&(m.sc(a=m.bc())&&(e.iframe=a.first),m.sc(a=m.bc())&&(e.stepper=a.first))},inputs:{flowData:"flowData",dataGroups:"dataGroups",schedulars:"schedulars",connId:"connId",flowIdToEdit:"flowIdToEdit"},outputs:{closeNodeRed:"closeNodeRed"},decls:33,vars:9,consts:[["labelPosition","bottom"],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"row","mt-4"],[1,"col-md-4","form-group"],["appearance","outline"],["matInput","","type","text","name","flowName","formControlName","flowName","placeholder","Enter flow name","autocomplete","","required",""],[4,"ngIf"],["class","col-md-4 form-group",4,"ngIf"],[1,"d-flex","justify-content-end","mt-4"],["type","button","mat-stroked-button","",3,"click"],["type","button","mat-flat-button","","matStepperNext","",1,"btn-primary","ml-3",3,"disabled"],[1,"iframe-container","mt-4"],["id","nodeRedIframe","allowFullScreen","true",3,"src"],["mat-stroked-button","","matStepperPrevious","",1,"mr-auto",3,"hidden"],["type","submit","mat-flat-button","","matStepperNext","",1,"btn-primary","ml-3",3,"click"],["formControlName","dataGroupId","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","scheduleId"],["value","None"]],template:function(t,e){1&t&&(m.Tb(0,"mat-card"),m.Tb(1,"mat-card-content"),m.Tb(2,"mat-horizontal-stepper",0,1),m.Tb(4,"mat-step",2),m.Tb(5,"form",3),m.Ic(6,va,1,1,"ng-template",4),m.Tb(7,"div",5),m.Tb(8,"div",6),m.Tb(9,"mat-form-field",7),m.Tb(10,"mat-label"),m.Kc(11,"Flow name"),m.Sb(),m.Ob(12,"input",8),m.Ic(13,Ta,2,0,"mat-error",9),m.Sb(),m.Sb(),m.Ic(14,Ia,7,2,"div",10),m.Ic(15,Ca,8,1,"div",10),m.Sb(),m.Ob(16,"hr"),m.Tb(17,"div",11),m.Tb(18,"button",12),m.ac("click",(function(){return e.closeStepperHandler()})),m.Kc(19,"Cancel"),m.Sb(),m.Tb(20,"button",13),m.Kc(21," Next "),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(22,"mat-step"),m.Ic(23,_a,1,0,"ng-template",4),m.Tb(24,"div",14),m.Ob(25,"iframe",15),m.Sb(),m.Tb(26,"div",11),m.Tb(27,"button",16),m.Kc(28," Back "),m.Sb(),m.Tb(29,"button",12),m.ac("click",(function(){return e.closeStepperHandler()})),m.Kc(30,"Cancel"),m.Sb(),m.Tb(31,"button",17),m.ac("click",(function(){return e.onSubmitFlow()})),m.Kc(32),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb()),2&t&&(m.Bb(4),m.kc("stepControl",e.flowFormGroup),m.Bb(1),m.kc("formGroup",e.flowFormGroup),m.Bb(8),m.kc("ngIf",e.flowFormGroup.get("flowName").hasError("required")&&(e.flowFormGroup.get("flowName").dirty||e.flowFormGroup.get("flowName").touched)),m.Bb(1),m.kc("ngIf","direct"===(null==e.flowData?null:e.flowData.flowType)||!e.isEdit),m.Bb(1),m.kc("ngIf","direct"===(null==e.flowData?null:e.flowData.flowType)||!e.isEdit),m.Bb(5),m.kc("disabled",e.flowFormGroup.invalid),m.Bb(5),m.kc("src",e.flowURL,m.yc),m.Bb(2),m.kc("hidden",!!e.connId),m.Bb(5),m.Mc(" ",e.isEdit?"Update":"Create"," "))},directives:[Z.a,Z.d,ga.a,ga.b,u.K,u.v,u.m,ga.d,X.c,X.g,tt.b,u.d,u.u,u.k,u.F,i.t,W.b,ga.h,ga.i,X.b,de.a,i.s,pe.o],styles:[".iframe-container[_ngcontent-%COMP%] > iframe[_ngcontent-%COMP%]{width:100%;height:800px}"]}),Da),Oa=n("iadO"),Ba=["flowPaginator"],Na=["dataflowSort"];function xa(t,e){if(1&t){var a=m.Ub();m.Tb(0,"button",10),m.ac("click",(function(){m.wc(a);var t=m.ec();return t.inputFlowData=null,t.showStepper=!0})),m.Kc(1," Create "),m.Sb()}}function Ga(t,e){if(1&t){var a=m.Ub();m.Tb(0,"h4",11),m.Kc(1," You haven't created any data flow yet, "),m.Tb(2,"a",12),m.ac("click",(function(){m.wc(a);var t=m.ec();return t.inputFlowData=null,t.showStepper=!0})),m.Kc(3," create now."),m.Sb(),m.Sb()}}function Pa(t,e){1&t&&(m.Tb(0,"th",32),m.Kc(1,"Sr. No."),m.Sb())}function Ma(t,e){if(1&t&&(m.Tb(0,"td",33),m.Kc(1),m.Sb()),2&t){var a=e.index;m.ec();var o=m.tc(28);m.Bb(1),m.Mc(" ",a+1+o.pageIndex*o.pageSize," ")}}function Ka(t,e){1&t&&(m.Tb(0,"th",34),m.Kc(1,"Name"),m.Sb())}function Aa(t,e){if(1&t&&(m.Tb(0,"td",33),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.Bb(1),m.Mc(" ",a.flowName," ")}}function Ra(t,e){1&t&&(m.Tb(0,"th",34),m.Kc(1,"Flow Id"),m.Sb())}function Ea(t,e){if(1&t&&(m.Tb(0,"td",33),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.Bb(1),m.Mc(" ",a.flowId," ")}}function qa(t,e){1&t&&(m.Tb(0,"th",34),m.Kc(1,"Flow Type"),m.Sb())}function ja(t,e){if(1&t&&(m.Tb(0,"td",33),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.Bb(1),m.Mc(" ",a.flowType," ")}}function La(t,e){1&t&&(m.Tb(0,"th",32),m.Kc(1,"Actions"),m.Sb())}function Ua(t,e){if(1&t){var a=m.Ub();m.Tb(0,"button",44),m.ac("click",(function(){m.wc(a);var t=m.ec().$implicit;return m.ec(2).startFlow(t)})),m.Ob(1,"i",45),m.Sb()}}function $a(t,e){1&t&&m.Ob(0,"i",46)}function Ha(t,e){if(1&t){var a=m.Ub();m.Tb(0,"td",33),m.Tb(1,"div",35),m.Ic(2,Ua,2,0,"button",36),m.Tb(3,"button",37),m.ac("click",(function(){m.wc(a);var t=e.$implicit;return m.ec(2).editFlow(t)})),m.Ob(4,"i",38),m.Sb(),m.Tb(5,"button",39),m.ac("click",(function(){m.wc(a);var t=e.$implicit,o=m.ec(2),n=m.tc(14);return o.viewNodeRedLogs(t,n)})),m.Ob(6,"i",40),m.Ic(7,$a,1,0,"i",41),m.Sb(),m.Tb(8,"button",42),m.ac("click",(function(){m.wc(a);var t=e.$implicit;return m.ec(2).deleteHandler(t._id)})),m.Ob(9,"i",43),m.Sb(),m.Sb(),m.Sb()}if(2&t){var o=e.$implicit,n=m.ec(2);m.Bb(2),m.kc("ngIf","direct"===o.flowType),m.Bb(3),m.kc("matTooltipClass",n.isDataFlowFailed&&n.directFlowNameCheck==o.flowId?"nodered-error-tooltip-custom":""),m.Bb(2),m.kc("ngIf",n.isDataFlowFailed&&n.directFlowNameCheck==o.flowId)}}function Va(t,e){1&t&&m.Ob(0,"tr",47)}function za(t,e){1&t&&m.Ob(0,"tr",48)}function Qa(t,e){if(1&t&&(m.Tb(0,"td",51),m.Kc(1),m.Sb()),2&t){m.ec(2);var a=m.tc(6);m.Bb(1),m.Mc(' No data matching the filter "',a.value,'" ')}}function Za(t,e){1&t&&(m.Tb(0,"td",51),m.Kc(1,"No data available in table"),m.Sb())}function Ya(t,e){if(1&t&&(m.Tb(0,"tr",49),m.Ic(1,Qa,2,1,"td",50),m.Ic(2,Za,2,0,"td",50),m.Sb()),2&t){m.ec();var a=m.tc(6);m.Bb(1),m.kc("ngIf",""!=a.value),m.Bb(1),m.kc("ngIf",""==a.value)}}function Wa(t,e){if(1&t){var a=m.Ub();m.Tb(0,"mat-card",13),m.Tb(1,"mat-card-content"),m.Tb(2,"mat-form-field",14),m.Tb(3,"mat-label"),m.Kc(4,"Search"),m.Sb(),m.Tb(5,"input",15,16),m.ac("keyup",(function(t){return m.wc(a),m.ec().applyFilter(t)})),m.Sb(),m.Sb(),m.Tb(7,"table",17,18),m.Rb(9,19),m.Ic(10,Pa,2,0,"th",20),m.Ic(11,Ma,2,1,"td",21),m.Qb(),m.Rb(12,22),m.Ic(13,Ka,2,0,"th",23),m.Ic(14,Aa,2,1,"td",21),m.Qb(),m.Rb(15,24),m.Ic(16,Ra,2,0,"th",23),m.Ic(17,Ea,2,1,"td",21),m.Qb(),m.Rb(18,25),m.Ic(19,qa,2,0,"th",23),m.Ic(20,ja,2,1,"td",21),m.Qb(),m.Rb(21,26),m.Ic(22,La,2,0,"th",20),m.Ic(23,Ha,10,3,"td",21),m.Qb(),m.Ic(24,Va,1,0,"tr",27),m.Ic(25,za,1,0,"tr",28),m.Ic(26,Ya,3,2,"tr",29),m.Sb(),m.Ob(27,"mat-paginator",30,31),m.Sb(),m.Sb()}if(2&t){var o=m.ec();m.Bb(7),m.kc("dataSource",o.dataSource),m.Bb(17),m.kc("matHeaderRowDef",o.displayedColumns),m.Bb(1),m.kc("matRowDefColumns",o.displayedColumns),m.Bb(2),m.kc("pageSizeOptions",o.pageSizeOptions)}}function Ja(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",52),m.Tb(1,"app-data-flow-stepper",53),m.ac("closeNodeRed",(function(t){return m.wc(a),m.ec().nodeRedClosed(t)})),m.Sb(),m.Sb()}if(2&t){var o=m.ec();m.Bb(1),m.kc("flowData",o.inputFlowData)("dataGroups",o.dataGroupList)("schedulars",o.schedularsList)("connId",o.connId)("flowIdToEdit",o.flowIdToEdit)}}function Xa(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Invalid start/end date."),m.Sb())}function to(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Date range is required."),m.Sb())}function eo(t,e){1&t&&(m.Tb(0,"th",34),m.Kc(1,"Date"),m.Sb())}function ao(t,e){if(1&t&&(m.Tb(0,"td",33),m.Kc(1),m.fc(2,"date"),m.Sb()),2&t){var a=e.$implicit;m.Bb(1),m.Mc(" ",m.hc(2,1,a.createdAt,"medium")," ")}}function oo(t,e){1&t&&(m.Tb(0,"th",34),m.Kc(1,"Level"),m.Sb())}function no(t,e){if(1&t&&(m.Tb(0,"td",33),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.Bb(1),m.Mc(" ",a.level," ")}}function io(t,e){1&t&&(m.Tb(0,"th",34),m.Kc(1,"Node"),m.Sb())}function ro(t,e){if(1&t&&(m.Tb(0,"td",33),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.Bb(1),m.Mc(" ",a.metaData.nodeType," ")}}function co(t,e){1&t&&(m.Tb(0,"th",34),m.Kc(1,"Message"),m.Sb())}function so(t,e){if(1&t&&(m.Tb(0,"td",33),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.Bb(1),m.Mc(" ",a.message," ")}}function lo(t,e){1&t&&m.Ob(0,"tr",47)}function uo(t,e){1&t&&m.Ob(0,"tr",48)}function bo(t,e){if(1&t&&(m.Tb(0,"tr",49),m.Tb(1,"td",51),m.Kc(2),m.Sb(),m.Sb()),2&t){m.ec();var a=m.tc(23);m.Bb(2),m.Mc('No data matching the filter "',a.value,'"')}}function po(t,e){if(1&t){var a=m.Ub();m.Tb(0,"h2",54),m.Kc(1," Data Flow Error Logs : "),m.Tb(2,"mat-chip-list",55),m.Tb(3,"mat-chip"),m.Kc(4),m.Sb(),m.Sb(),m.Sb(),m.Tb(5,"div",56),m.Tb(6,"div",57),m.Tb(7,"mat-form-field",58),m.Tb(8,"mat-label"),m.Kc(9,"Select date (From and To)"),m.Sb(),m.Tb(10,"mat-date-range-input",59),m.Tb(11,"input",60),m.ac("dateChange",(function(t){return m.wc(a),m.ec().dateChanged("start",t.value)})),m.Sb(),m.Tb(12,"input",61),m.ac("dateChange",(function(t){return m.wc(a),m.ec().dateChanged("end",t.value)})),m.Sb(),m.Sb(),m.Ob(13,"mat-datepicker-toggle",62),m.Ob(14,"mat-date-range-picker",null,63),m.Ic(16,Xa,2,0,"mat-error",64),m.Ic(17,to,2,0,"mat-error",64),m.Sb(),m.Sb(),m.Sb(),m.Tb(18,"mat-dialog-content",65),m.Tb(19,"mat-form-field",14),m.Tb(20,"mat-label"),m.Kc(21,"Search"),m.Sb(),m.Tb(22,"input",66,16),m.ac("keyup",(function(t){return m.wc(a),m.ec().applyFilter(t)})),m.Sb(),m.Sb(),m.Tb(24,"table",67),m.Rb(25,68),m.Ic(26,eo,2,0,"th",23),m.Ic(27,ao,3,4,"td",21),m.Qb(),m.Rb(28,69),m.Ic(29,oo,2,0,"th",23),m.Ic(30,no,2,1,"td",21),m.Qb(),m.Rb(31,70),m.Ic(32,io,2,0,"th",23),m.Ic(33,ro,2,1,"td",21),m.Qb(),m.Rb(34,71),m.Ic(35,co,2,0,"th",23),m.Ic(36,so,2,1,"td",21),m.Qb(),m.Ic(37,lo,1,0,"tr",27),m.Ic(38,uo,1,0,"tr",28),m.Ic(39,bo,3,1,"tr",29),m.Sb(),m.Ob(40,"mat-paginator",72),m.Sb(),m.Tb(41,"mat-dialog-actions",73),m.Tb(42,"button",74),m.Kc(43,"Close"),m.Sb(),m.Sb()}if(2&t){var o=m.tc(15),n=m.ec();m.Bb(4),m.Lc(n.selectedFlow.flowName),m.Bb(6),m.kc("formGroup",n.dateGroup)("rangePicker",o),m.Bb(3),m.kc("for",o),m.Bb(3),m.kc("ngIf",n.dateGroup.controls.start.hasError("matStartDateInvalid")||n.dateGroup.controls.end.hasError("matEndDateInvalid")),m.Bb(1),m.kc("ngIf",(n.dateGroup.controls.start.dirty||n.dateGroup.controls.end.dirty||n.dateGroup.controls.start.touched||n.dateGroup.controls.end.touched)&&(!n.dateGroup.controls.start.hasError("matStartDateInvalid")||!n.dateGroup.controls.end.hasError("matEndDateInvalid"))),m.Bb(7),m.kc("dataSource",n.logsDataSource),m.Bb(13),m.kc("matHeaderRowDef",n.logsDisplayedColumns),m.Bb(1),m.kc("matRowDefColumns",n.logsDisplayedColumns),m.Bb(2),m.kc("pageSizeOptions",n.pageSizeOptions)}}var mo,fo=n("GUC0"),ho=n("wd/R"),go=((mo=function(){function e(a,o,n,i,r,c,d,b,p,m,f){var h=this;t(this,e),this._toaster=a,this._data=o,this._localStorage=n,this._spinner=i,this._dataFlow=r,this._schedular=c,this._dialog=d,this._activatedRoute=b,this._socket=p,this._router=m,this._utils=f,this.dataSource=new s.p,this.logsDataSource=new s.p,this.pageSizeOptions=[10,15,20],this.displayedColumns=[],this.logsDisplayedColumns=[],this.unsubscribe$=new l.b,this.showStepper=!1,this.hideDialog=!0,this.dateRange={},this.isDataFlowFailed=!1,this.directFlowNameCheck=null,this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this._activatedRoute.queryParams&&this._activatedRoute.queryParams.subscribe((function(t){t.connectionId?(h.connId=t.connectionId,h.showStepper=!0):t.dataFlowId?(h.flowIdToEdit=t.dataFlowId,h.showStepper=!0):h.showStepper=!1})),this.displayedColumns=["srNo","flowName","flowId","flowType","actions"],this.logsDisplayedColumns=["date","level","node","message"],this.dateGroup=new u.l({start:new u.i("",u.I.required),end:new u.i("",u.I.required)})}return a(e,[{key:"paginator",set:function(t){this.dataSource.paginator=t}},{key:"sort",set:function(t){this.dataSource.sort=t}},{key:"ngOnInit",value:function(){this._spinner.showSpinner(),this.initSocket(),this.getFlowsList(),this.getDataGroupList(),this.schedularList(),this.dateGroup.get("start").setValue(ho().subtract(3,"days")),this.dateGroup.get("end").setValue(ho())}},{key:"getFlowsList",value:function(){var t=this;this._dataFlow.getAllFlowsList(this.project._id).pipe(Object(L.a)(this.unsubscribe$)).subscribe((function(e){e?(t.uddFlowsList=e,t.dataSource.data=e,t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort,t.dataSource._updateChangeSubscription(),console.log("\ud83d\ude80 ~ this.dataSource",t.dataSource),t._spinner.stopSpinner()):t._spinner.stopSpinner()}),(function(e){t._spinner.stopSpinner(),t._toaster.error("Server Error","Data Flows")}))}},{key:"getDataGroupList",value:function(){var t=this;this._data.getDataGroupsList(this.project._id).pipe(Object(L.a)(this.unsubscribe$)).subscribe((function(e){e&&(t.dataGroupList=e)}),(function(e){t._toaster.error("Server Error","Data Flows")}))}},{key:"schedularList",value:function(){var t=this;this._schedular.getSchedularsList().pipe(Object(L.a)(this.unsubscribe$)).subscribe((function(e){e&&(t.schedularsList=e)}),(function(e){t._toaster.error("Server Error","Data Flows")}))}},{key:"startFlow",value:function(t){var e=this;this.directFlowNameCheck=t.flowId,this._dataFlow.executeDataFlow(this.project._id,t._id,t.dataGroupId).pipe(Object(L.a)(this.unsubscribe$)).subscribe((function(t){t&&e._toaster.success("Flow execution started","Data Flows")}),(function(t){e._toaster.error(t.message,"Data Flows")}))}},{key:"dateChanged",value:function(t,e){"start"===t?this.dateRange.startDate=e:this.dateRange.endDate=e,this.dateRange.endDate&&this.getNodeRedLogs(this.selectedFlow._id,this.dateRange.startDate,this.dateRange.endDate)}},{key:"viewNodeRedLogs",value:function(t,e){this.selectedFlow=t;var a=this.dateGroup.get("start").value,o=this.dateGroup.get("end").value;this.getNodeRedLogs(t._id,a,o),this.hideDialog=!1,this._dialog.open(e,{height:"auto",width:"60%"})}},{key:"getNodeRedLogs",value:function(t,e,a){var o=this;this._dataFlow.getErrorLogs(t,ho.utc(e).format(),ho.utc(a).format()).pipe(Object(L.a)(this.unsubscribe$)).subscribe((function(t){t?(o.errorLogs=t,o.logsDataSource.data=o.errorLogs,o.logsDataSource.paginator=o.paginator,o.logsDataSource.sort=o.sort):o._toaster.error("Cannot fetch error logs","Data Flows")}),(function(t){o._toaster.error("Server Error","Data Flows")}))}},{key:"editFlow",value:function(t){this.showStepper=!0,this.inputFlowData=t}},{key:"deleteHandler",value:function(t){var e=this;fo({title:"Are you sure?",text:"You will not be able to recover this data flow!",icon:"warning",buttons:{cancel:{text:"Cancel",value:null,visible:!0,className:""},confirm:{text:"Yes, delete it!",value:!0,visible:!0,className:"bg-danger"}}}).then((function(a){a&&e._dataFlow.deleteFlow(t).pipe(Object(L.a)(e.unsubscribe$)).subscribe((function(a){a?(e.uddFlowsList=e.uddFlowsList.filter((function(e){return e._id!==t})),e.dataSource.data=e.uddFlowsList,e.dataSource._updateChangeSubscription(),e.dataSource.paginator=e.paginator,e.dataSource.sort=e.sort,e._toaster.success(a.flowName+" deleted successfully","Data Flows")):e._toaster.error("Sorry! Cannot delete the flow","Data Flows")}),(function(t){e._toaster.error("Server Error","Data Flows")}))}))}},{key:"nodeRedClosed",value:function(t){t.flowResponse?(this.showStepper=!t.isCanceled,this.flowIdToEdit="",this.connId="",this.inputFlowData=[],this._spinner.stopSpinner(),this._router.navigate(["/project/data/dataflow"]),this.getFlowsList()):(this.flowIdToEdit="",this.connId="",this.inputFlowData=[],this.showStepper=!t.isCanceled)}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}},{key:"initSocket",value:function(){var t=this;this._socket.listen("pullData").subscribe((function(e){t._spinner.stopSpinner(),"pull_success"===e.status?(e.data.projectId===t.project._id&&t._toaster.success("Flow execution completed successfully","Data Flows"),e.data.projectId===t.project._id&&t._router.navigate(["/project/data/dataset"])):e.data.projectId===t.project._id&&t._toaster.success(e.err_msg,"Data Flows")}),(function(e){t._spinner.stopSpinner(),t._toaster.error("Socket Error","Data Flows")})),this._socket.listen("nodeRedFlowExecution").subscribe((function(e){"flow_execution_failed"===e.status&&(t.isDataFlowFailed=!0),t._spinner.stopSpinner()}),(function(e){t._spinner.stopSpinner(),t._toaster.error("Socket Error","Data Connection")}))}},{key:"ngOnDestroy",value:function(){this._socket.removeListener("pullData"),this._socket.removeListener("nodeRedFlowExecution"),this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}]),e}()).\u0275fac=function(t){return new(t||mo)(m.Nb(h.c),m.Nb(f.a),m.Nb(g.a),m.Nb(H.a),m.Nb(ha),m.Nb(V.a),m.Nb(b.c),m.Nb(et.a),m.Nb(z.a),m.Nb(et.e),m.Nb(S.a))},mo.\u0275cmp=m.Hb({type:mo,selectors:[["app-data-flow"]],viewQuery:function(t,e){var a;1&t&&(m.Oc(Ba,!0),m.Oc(Na,!0)),2&t&&(m.sc(a=m.bc())&&(e.paginator=a.first),m.sc(a=m.bc())&&(e.sort=a.first))},decls:15,vars:4,consts:[[1,"fluid-container"],[1,"heading"],["mat-card-avatar",""],[1,"folder-icon"],[1,"heading-title"],["mat-raised-button","","class","bg-primary ml-auto",3,"click",4,"ngIf"],["class","text-center mt-5 font-weight-normal",4,"ngIf"],["class","flows-listing mt-5 p-4",4,"ngIf"],["class","mt-5",4,"ngIf"],["errorLogsTemplate",""],["mat-raised-button","",1,"bg-primary","ml-auto",3,"click"],[1,"text-center","mt-5","font-weight-normal"],["href","#",1,"text-decoration-none",3,"click"],[1,"flows-listing","mt-5","p-4"],[1,"search-input"],["matInput","",3,"keyup"],["input",""],["mat-table","","matSort","","matSortDisableClear","",1,"mt-2",3,"dataSource"],["dataflowSort","matSort"],["matColumnDef","srNo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","flowName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","flowId"],["matColumnDef","flowType"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mt-2",3,"pageSizeOptions"],["flowPaginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[1,"action-buttons","d-flex"],["matTooltip","Start data flow","mat-icon-button","","class","text-value",3,"click",4,"ngIf"],["matTooltip","Edit data flow","mat-icon-button","",1,"text-value",3,"click"],[1,"fa","fa-edit"],["matTooltip","View logs","mat-icon-button","",1,"text-value",3,"matTooltipClass","click"],[1,"fas","fa-file-invoice"],["class","nodered-error fas fa-exclamation-circle",4,"ngIf"],["matTooltip","Remove data flow","mat-icon-button","",1,"delete-button",3,"click"],[1,"fa","fa-trash"],["matTooltip","Start data flow","mat-icon-button","",1,"text-value",3,"click"],[1,"fa","fa-play"],[1,"nodered-error","fas","fa-exclamation-circle"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["class","mat-cell","colspan","4",4,"ngIf"],["colspan","4",1,"mat-cell"],[1,"mt-5"],[3,"flowData","dataGroups","schedulars","connId","flowIdToEdit","closeNodeRed"],["mat-dialog-title","",1,"selected-flow"],[1,"ml-2"],[1,"row","mt-3"],[1,"col-md-6"],["appearance","outline"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date",3,"dateChange"],["matEndDate","","formControlName","end","placeholder","End date",3,"dateChange"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],[1,"mat-typography","mt-4"],["matInput","","placeholder","Enter value to search",3,"keyup"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource"],["matColumnDef","date"],["matColumnDef","level"],["matColumnDef","node"],["matColumnDef","message"],[3,"pageSizeOptions"],[1,"justify-content-end","m-auto"],["mat-stroked-button","","mat-dialog-close",""]],template:function(t,e){1&t&&(m.Tb(0,"div",0),m.Tb(1,"mat-card",1),m.Tb(2,"mat-card-header"),m.Tb(3,"div",2),m.Tb(4,"mat-icon",3),m.Kc(5,"account_tree"),m.Sb(),m.Sb(),m.Tb(6,"mat-card-title"),m.Tb(7,"h3",4),m.Kc(8,"Data Flows"),m.Sb(),m.Sb(),m.Ic(9,xa,2,0,"button",5),m.Sb(),m.Sb(),m.Ic(10,Ga,4,0,"h4",6),m.Ic(11,Wa,29,4,"mat-card",7),m.Ic(12,Ja,2,5,"div",8),m.Sb(),m.Ic(13,po,44,10,"ng-template",null,9,m.Jc)),2&t&&(m.Bb(9),m.kc("ngIf",!e.showStepper),m.Bb(1),m.kc("ngIf",!e.showStepper&&!e.dataSource.data.length),m.Bb(1),m.kc("ngIf",!e.showStepper&&e.dataSource.data.length),m.Bb(1),m.kc("ngIf",e.showStepper))},directives:[Z.a,Z.f,Z.c,J.a,Z.m,i.t,W.b,Z.d,X.c,X.g,tt.b,s.o,c.a,s.c,s.i,s.b,s.k,s.n,s.l,r.a,s.h,s.a,c.b,Y.b,s.j,s.m,Fa,b.j,le.d,le.a,Oa.d,u.v,u.m,Oa.o,u.d,u.u,u.k,Oa.l,Oa.j,X.j,Oa.e,b.g,b.d,b.e,X.b],pipes:[i.f],styles:[".flows-listing .clickable{cursor:pointer;color:#08509d!important}.selected-flow{display:inline-flex;align-items:center}.nodered-error{color:red;position:absolute;right:-1px;z-index:1;top:-4px}.nodered-error-tooltip-custom{background:#b71c1c!important}"],encapsulation:2}),mo),So=n("PCNd"),vo=n("bv9b");function To(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Encoding is required."),m.Sb())}function yo(t,e){if(1&t&&(m.Tb(0,"mat-option",19),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a._id),m.Bb(1),m.Lc(a.name)}}function ko(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Folder name is required. "),m.Sb())}function Io(t,e){if(1&t&&(m.Tb(0,"mat-option",19),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a._id),m.Bb(1),m.Lc(a.name)}}function wo(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Parent folder is required."),m.Sb())}function Co(t,e){if(1&t&&(m.Tb(0,"div"),m.Tb(1,"div",2),m.Tb(2,"div",3),m.Tb(3,"mat-form-field",4),m.Tb(4,"mat-label",20),m.Kc(5,"Folder name"),m.Sb(),m.Ob(6,"input",21),m.Ic(7,ko,2,0,"mat-error",8),m.Sb(),m.Sb(),m.Tb(8,"div",3),m.Tb(9,"mat-form-field",4),m.Tb(10,"mat-label"),m.Kc(11,"Select parent folder"),m.Sb(),m.Tb(12,"mat-select",22),m.Ic(13,Io,2,2,"mat-option",12),m.Sb(),m.Ic(14,wo,2,0,"mat-error",8),m.Sb(),m.Sb(),m.Sb(),m.Sb()),2&t){var a=m.ec();m.Bb(7),m.kc("ngIf",a.fileUploadForm.get("dataFolderName").hasError("required")&&(a.fileUploadForm.get("dataFolderName").dirty||a.fileUploadForm.get("dataFolderName").touched)),m.Bb(6),m.kc("ngForOf",a.dataGroupsArray),m.Bb(1),m.kc("ngIf",a.fileUploadForm.get("parentFolderName").hasError("required")&&(a.fileUploadForm.get("parentFolderName").dirty||a.fileUploadForm.get("parentFolderName").touched))}}function _o(t,e){if(1&t&&m.Ob(0,"mat-progress-bar",26),2&t){var a=m.ec(2);m.kc("value",a.percentDone)}}function Do(t,e){if(1&t&&(m.Tb(0,"div",23),m.Ic(1,_o,1,1,"mat-progress-bar",24),m.Tb(2,"span",25),m.Kc(3),m.Sb(),m.Sb()),2&t){var a=m.ec();m.Bb(1),m.kc("ngIf",a.percentDone),m.Bb(2),m.Mc("",a.percentDone,"%")}}var Fo,Oo=((Fo=function(){function e(a,o,n,i,r,c,s,d){var b,f;t(this,e),this._fb=a,this._data=o,this._localStorage=n,this._connectionDialogRef=i,this._toaster=r,this._snackbar=c,this._spinner=s,this._utils=d,this.goBackFlag=new m.o,this.unsubscribe$=new l.b,this.mode="indeterminate",this.diameter=100,this.exportProjectDiameter=50,this.serverBaseUrl=p.a.serverBaseUrl,this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this.allowedPSFileUploadSize=(null===(f=null===(b=this.user)||void 0===b?void 0:b.psFeatures)||void 0===f?void 0:f.allowedPSFileUploadSize)||50,this.fileUploadForm=this._fb.group({encoding:["utf_8",u.I.required],selectFolder:["",u.I.required],dataFolderName:["",u.I.required],parentFolderName:["",u.I.required]})}return a(e,[{key:"ngOnInit",value:function(){this.fileUploadForm.get("selectFolder").setValue(this.currentDataGroup)}},{key:"goBack",value:function(){this.goBackFlag.emit(!0)}},{key:"handleFileInput",value:function(t,e){var a=t[0].name.split(".").pop();t&&["csv","xlsx","xls","pkl","pk","pl","pickle"].includes(a)?t[0].size<1024*this.allowedPSFileUploadSize*1024?(this.fileToUpload=t[0],this.createConnection(e)):this._snackbar.open("File size should be less than "+this.allowedPSFileUploadSize+"Mb","OK",{horizontalPosition:"right",verticalPosition:"bottom"}):this._snackbar.open(".".concat(a," file type is not supported"),"OK")}},{key:"createConnection",value:function(t){var e,a,o=this;this._spinner.showSpinner(),"Add"===t.selectFolder?(e=t.dataFolderName,a=t.parentFolderName):e=t.selectFolder,this._data.uploadFile({encoding:t.encoding,projectId:this.project._id,dataGroupId:e,dataFolderName:e,parentFolderName:a,file:this.fileToUpload}).pipe(Object(L.a)(this.unsubscribe$)).subscribe((function(t){t.type===fa.d.UploadProgress&&(o.percentDone=Math.round(100*t.loaded/t.total)),100===o.percentDone&&(o._utils.showSnackBar(U.b.fileUpload),o._spinner.stopSpinner(),4===t.type&&200===t.status&&o._connectionDialogRef.close())}),(function(t){o._toaster.error(t.error.message||"Server Error","Data Connection"),o._spinner.stopSpinner(),o._utils.dismissSnackBar()}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}]),e}()).\u0275fac=function(t){return new(t||Fo)(m.Nb(u.h),m.Nb(f.a),m.Nb(g.a),m.Nb(b.i),m.Nb(h.c),m.Nb(v.c),m.Nb(H.a),m.Nb(S.a))},Fo.\u0275cmp=m.Hb({type:Fo,selectors:[["app-file-upload-form"]],inputs:{dataGroupsArray:"dataGroupsArray",currentDataGroup:"currentDataGroup"},outputs:{goBackFlag:"goBackFlag"},decls:31,vars:5,consts:[[1,"mat-typography"],["role","form","name","fileUploadForm",1,"form-validate",3,"formGroup"],[1,"row"],[1,"col-md-6","form-group"],["appearance","outline"],["formControlName","encoding","required",""],["value","utf_8"],["value","latin_1"],[4,"ngIf"],[1,"col-md-6"],["formControlName","selectFolder","required","",3,"selectionChange"],["value","Add"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","mb-4"],["type","file","name","file","accept",".csv,.zip,.xlsx,.xls,.pkl,.pk,.pl,.pickle,.json,.html",3,"change"],["class","my-3 d-flex align-items-center",4,"ngIf"],[1,"d-flex","justify-content-end","m-auto"],["mat-stroked-button","",1,"mr-auto",3,"click"],["mat-stroked-button","","mat-dialog-close",""],[3,"value"],["for","dataFolderName"],["matInput","","type","text","name","dataFolderName","id","dataFolderName","formControlName","dataFolderName","placeholder","Enter folder name","required",""],["formControlName","parentFolderName","required",""],[1,"my-3","d-flex","align-items-center"],["color","#07509d",3,"value",4,"ngIf"],[1,"ml-1"],["color","#07509d",3,"value"]],template:function(t,e){1&t&&(m.Tb(0,"div",0),m.Tb(1,"form",1),m.Tb(2,"div",2),m.Tb(3,"div",3),m.Tb(4,"mat-form-field",4),m.Tb(5,"mat-label"),m.Kc(6,"Select encoding"),m.Sb(),m.Tb(7,"mat-select",5),m.Tb(8,"mat-option",6),m.Kc(9,"utf_8"),m.Sb(),m.Tb(10,"mat-option",7),m.Kc(11,"latin_1"),m.Sb(),m.Sb(),m.Ic(12,To,2,0,"mat-error",8),m.Sb(),m.Sb(),m.Tb(13,"div",9),m.Tb(14,"mat-form-field",4),m.Tb(15,"mat-label"),m.Kc(16,"Select folder"),m.Sb(),m.Tb(17,"mat-select",10),m.ac("selectionChange",(function(t){return e.selectedFolder=t.value})),m.Tb(18,"mat-option",11),m.Kc(19,"Create new folder"),m.Sb(),m.Ic(20,yo,2,2,"mat-option",12),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Ic(21,Co,15,3,"div",8),m.Tb(22,"div",13),m.Tb(23,"input",14),m.ac("change",(function(t){return e.handleFileInput(t.target.files,e.fileUploadForm.value)})),m.Sb(),m.Sb(),m.Sb(),m.Ic(24,Do,4,2,"div",15),m.Sb(),m.Ob(25,"hr"),m.Tb(26,"div",16),m.Tb(27,"button",17),m.ac("click",(function(){return e.goBack()})),m.Kc(28,"Back"),m.Sb(),m.Tb(29,"button",18),m.Kc(30,"Cancel"),m.Sb(),m.Sb()),2&t&&(m.Bb(1),m.kc("formGroup",e.fileUploadForm),m.Bb(11),m.kc("ngIf",e.fileUploadForm.get("encoding").hasError("required")&&(e.fileUploadForm.get("encoding").dirty||e.fileUploadForm.get("encoding").touched)),m.Bb(8),m.kc("ngForOf",e.dataGroupsArray),m.Bb(1),m.kc("ngIf","Add"===e.selectedFolder),m.Bb(3),m.kc("ngIf",e.percentDone))},directives:[u.K,u.v,u.m,X.c,X.g,de.a,u.u,u.k,u.F,pe.o,i.t,i.s,W.b,b.e,X.b,tt.b,u.d,vo.a],styles:[".progress[_ngcontent-%COMP%]{background-color:#e9ecef;border-radius:.25rem;display:flex;font-size:1.2rem;height:1rem;margin-top:1rem;overflow:hidden}.progress-bar[_ngcontent-%COMP%]{align-items:center;background-color:#007bff;color:#fff;display:flex;justify-content:center}.mat-progress-bar[_ngcontent-%COMP%]{height:10px!important}.mat-progress-bar-fill[_ngcontent-%COMP%]:after{background-color:#07509d!important}"]}),Fo),Bo=n("d+pd"),No=n("bSwM"),xo=n("5uqF");function Go(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Connection name is required."),m.Sb())}function Po(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Invalid connection name "),m.Sb())}function Mo(t,e){if(1&t&&(m.Tb(0,"mat-option",23),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a),m.Bb(1),m.Lc(a.name)}}function Ko(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Connection is required."),m.Sb())}function Ao(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Database name is required."),m.Sb())}function Ro(t,e){if(1&t&&(m.Tb(0,"div",24),m.Tb(1,"mat-form-field",4),m.Tb(2,"mat-label",25),m.Kc(3,"Database name"),m.Sb(),m.Ob(4,"input",26),m.Ic(5,Ao,2,0,"mat-error",7),m.Sb(),m.Sb()),2&t){var a=m.ec();m.Bb(5),m.kc("ngIf",a.dbConnectionForm.get("database").hasError("required")&&(a.dbConnectionForm.get("database").dirty||a.dbConnectionForm.get("database").touched))}}function Eo(t,e){if(1&t&&(m.Tb(0,"mat-hint",27),m.Kc(1),m.fc(2,"rowColValConverter"),m.Sb()),2&t){var a=m.ec();m.Bb(1),m.Mc("Note: Only ",m.gc(2,1,a.allowedNoOfRows)," rows will be fetched from the data source.")}}function qo(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Query is required."),m.Sb())}function jo(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Invalid query. "),m.Sb())}function Lo(t,e){1&t&&(m.Tb(0,"mat-option"),m.Kc(1,"None"),m.Sb())}function Uo(t,e){1&t&&(m.Tb(0,"mat-option",33),m.Kc(1,"None"),m.Sb())}function $o(t,e){if(1&t&&(m.Tb(0,"mat-option",23),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a._id),m.Bb(1),m.Lc(a.scheduleName)}}function Ho(t,e){if(1&t){var a=m.Ub();m.Tb(0,"mat-hint",34),m.Tb(1,"a",35),m.ac("click",(function(){return m.wc(a),m.ec(2).navigateToScheduler()})),m.Kc(2,"Add scheduler"),m.Sb(),m.Sb()}}function Vo(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",28),m.Tb(1,"mat-form-field",4),m.Tb(2,"mat-label",29),m.Kc(3,"Select scheduler"),m.Sb(),m.Tb(4,"mat-select",30),m.ac("selectionChange",(function(t){return m.wc(a),m.ec().schedularChanged(t.value)})),m.Ic(5,Lo,2,0,"mat-option",7),m.Ic(6,Uo,2,0,"mat-option",31),m.Ic(7,$o,2,2,"mat-option",10),m.Sb(),m.Ic(8,Ho,3,0,"mat-hint",32),m.Sb(),m.Sb()}if(2&t){var o=m.ec();m.Bb(5),m.kc("ngIf",!o.isEdit),m.Bb(1),m.kc("ngIf",o.isEdit),m.Bb(1),m.kc("ngForOf",o.schedularsArray),m.Bb(1),m.kc("ngIf",!o.schedularsArray.length)}}function zo(t,e){if(1&t&&(m.Tb(0,"mat-option",23),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a._id),m.Bb(1),m.Lc(a.name)}}function Qo(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",28),m.Tb(1,"mat-form-field",4),m.Tb(2,"mat-label"),m.Kc(3,"Select folder"),m.Sb(),m.Tb(4,"mat-select",36),m.ac("selectionChange",(function(t){return m.wc(a),m.ec().onFolderChange(t.value)})),m.Tb(5,"mat-option",37),m.Kc(6,"Create new folder"),m.Sb(),m.Ic(7,zo,2,2,"mat-option",10),m.Sb(),m.Sb(),m.Sb()}if(2&t){var o=m.ec();m.Bb(7),m.kc("ngForOf",o.dataGroupsArray)}}function Zo(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Folder name is required. "),m.Sb())}function Yo(t,e){if(1&t&&(m.Tb(0,"mat-option",23),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a._id),m.Bb(1),m.Lc(a.name)}}function Wo(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Parent folder is required."),m.Sb())}function Jo(t,e){if(1&t&&(m.Tb(0,"div",38),m.Tb(1,"div",28),m.Tb(2,"mat-form-field",4),m.Tb(3,"mat-label",39),m.Kc(4,"Folder name"),m.Sb(),m.Ob(5,"input",40),m.Ic(6,Zo,2,0,"mat-error",7),m.Sb(),m.Sb(),m.Tb(7,"div",28),m.Tb(8,"mat-form-field",4),m.Tb(9,"mat-label"),m.Kc(10,"Select parent folder"),m.Sb(),m.Tb(11,"mat-select",41),m.Ic(12,Yo,2,2,"mat-option",10),m.Sb(),m.Ic(13,Wo,2,0,"mat-error",7),m.Sb(),m.Sb(),m.Sb()),2&t){var a=m.ec();m.Bb(6),m.kc("ngIf",a.dbConnectionForm.get("dataGroupName").hasError("required")&&(a.dbConnectionForm.get("dataGroupName").dirty||a.dbConnectionForm.get("dataGroupName").touched)),m.Bb(6),m.kc("ngForOf",a.dataGroupsArray),m.Bb(1),m.kc("ngIf",a.dbConnectionForm.get("parent_id").hasError("required")&&(a.dbConnectionForm.get("parent_id").dirty||a.dbConnectionForm.get("parent_id").touched))}}var Xo=function(){return{standalone:!0}};function tn(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",42),m.Tb(1,"mat-checkbox",43),m.ac("ngModelChange",(function(t){return m.wc(a),m.ec().isPulling=t})),m.Kc(2,"Pull data"),m.Sb(),m.Sb()}if(2&t){var o=m.ec();m.Bb(1),m.kc("ngModel",o.isPulling)("ngModelOptions",m.mc(2,Xo))}}function en(t,e){if(1&t){var a=m.Ub();m.Tb(0,"button",44),m.ac("click",(function(){return m.wc(a),m.ec().goBack()})),m.Kc(1,"Back"),m.Sb()}}var an,on=((an=function(){function e(a,o,n,i,r,c,s,d){t(this,e),this._fb=a,this._connection=o,this._toaster=n,this._connectionDialogRef=i,this._data=r,this._localStorage=c,this._router=s,this._spinner=d,this.goBackFlag=new m.o,this.color="primary",this.mode="indeterminate",this.diameter=100,this.exportProjectDiameter=50,this.unsubscribe$=new l.b,this.hidePassword=!0,this.isPulling=!0,this.isEdit=!1,this.appType=p.a.appType,this.allowedNoOfRows=0,this.dbConnectionForm=this._fb.group({connectionName:["",[u.I.required,u.I.pattern("^[^\\s][A-Za-z0-9_\\- ]+$")]],connection:["",u.I.required],database:["",u.I.required],query:["",u.I.required],dataGroupId:["",u.I.required],parent_id:["",u.I.nullValidator],dataGroupName:["",u.I.nullValidator],scheduleId:[""]},{validator:this.validateQuery})}return a(e,[{key:"ngOnInit",value:function(){var t,e;return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this.allowedNoOfRows=null===(e=null===(t=this.user)||void 0===t?void 0:t.psFeatures)||void 0===e?void 0:e.allowedNoOfRows,a.next=5,this.getRequiredConnectionList();case 5:this.prefillConnectionForm(this.data);case 6:case"end":return a.stop()}}),a,this)})))}},{key:"getRequiredConnectionList",value:function(){var t;return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("snowflake"!==this.sourceType&&"bigquery"!==this.sourceType){e.next=6;break}return e.next=3,this._connection.getConnectionsList(this.sourceType).pipe(Object(L.a)(this.unsubscribe$)).toPromise();case 3:this.dbConns=e.sent,e.next=10;break;case 6:return e.next=8,this._connection.getDbConnectionList().pipe(Object(L.a)(this.unsubscribe$)).toPromise();case 8:this.dbConns=e.sent,this.dbConns=null===(t=this.dbConns)||void 0===t?void 0:t.filter((function(t){return t.source===a.sourceType}));case 10:case"end":return e.stop()}}),e,this)})))}},{key:"prefillConnectionForm",value:function(t){var e=this;t?(this.isEdit=!0,this.connectionIdToUpdate=t._id,this._data.getSingleDataConnection(this.project._id,t._id).subscribe((function(t){t&&(e.connectionDetails=t,e.dbConnectionForm.patchValue({connectionName:t.connectionName,connection:e.dbConns.filter((function(e){return e._id===t.databaseConnectionId}))[0],database:t.databaseName,query:t.query,scheduleId:t.scheduleId}),e.dbConnectionForm.get("dataGroupId").clearValidators(),e.dbConnectionForm.get("dataGroupId").updateValueAndValidity())}),(function(t){e._toaster.error("Server Error","Data Connection")}))):(this.dbConnectionForm.reset(),this.dbConnectionForm.get("dataGroupId").setValue(this.currentDataGroup),this.isEdit=!1)}},{key:"onSubmitConnection",value:function(t){this.isEdit?this.updateConnectionHandler(t):this.createConnectionHandler(t)}},{key:"updateConnectionHandler",value:function(t){var e=this;this.connectionDetails.databaseConnectionId=t.connection._id,this.connectionDetails.connectionName=t.connectionName,this.connectionDetails.databaseName=t.database,this.connectionDetails.query=t.query,this.connectionDetails.projectId=this.project._id,"None"==t.scheduleId&&(this.connectionDetails.statusData="None"),this.connectionDetails.scheduledata=void 0===this.dataschedule?"noupdate":this.dataschedule,this.connectionDetails.scheduleId&&(this.connectionDetails.oldScheduleId=this.connectionDetails.scheduleId),t.scheduleId&&(this.connectionDetails.scheduleId=t.scheduleId),this._data.updateDataConnection(this.project._id,this.connectionDetails._id,this.connectionDetails).subscribe((function(t){t&&(e.closeModal(t),e._toaster.success(e.sourceType.toUpperCase()+" connection updated successfully","Data Connection"))}),(function(t){e._toaster.success("Server Error","Data Connection")}))}},{key:"createConnectionHandler",value:function(t){var e=this;t.scheduleId||delete t.scheduleId,t.dataGroupName||delete t.dataGroupName,t.parent_id||delete t.parent_id;var a=Object.assign(Object.assign({},t),{source:this.sourceType,isPulling:this.isPulling});this._data.pullData(this.project._id,a).subscribe((function(t){t&&(e.closeModal(t),e._toaster.success(e.sourceType.toUpperCase()+" connection created successfully","Data Connection"))}),(function(t){e._toaster.error(t.error.message||"Server Error","Data Connection")}))}},{key:"schedularChanged",value:function(t){var e;this.dataschedule=(null===(e=this.connectionDetails)||void 0===e?void 0:e.scheduleId)?this.connectionDetails.scheduleId!==t?"update":"noupdate":"new"}},{key:"goBack",value:function(){this.goBackFlag.emit(!0)}},{key:"onFolderChange",value:function(t){this.selectedFolder=t,"Add"===this.selectedFolder?(this.dbConnectionForm.get("dataGroupName").setValidators(u.I.required),this.dbConnectionForm.get("dataGroupName").updateValueAndValidity(),this.dbConnectionForm.get("parent_id").setValidators(u.I.required),this.dbConnectionForm.get("parent_id").updateValueAndValidity()):(this.dbConnectionForm.get("dataGroupName").clearValidators(),this.dbConnectionForm.get("dataGroupName").updateValueAndValidity(),this.dbConnectionForm.get("parent_id").clearValidators(),this.dbConnectionForm.get("parent_id").updateValueAndValidity())}},{key:"closeModal",value:function(t){this._connectionDialogRef.close(t)}},{key:"navigateToScheduler",value:function(){this.closeModal(),this._spinner.stopSpinner(),this._router.navigateByUrl("/dashboard/scheduler?type=scheduler")}},{key:"validateQuery",value:function(t){var e=t.get("query").value;(null==e?void 0:e.length)&&((e=e.toLowerCase()).includes("select")||t.get("query").setErrors({queryInvalid:!0}))}},{key:"ngOnDestroy",value:function(){this.connection$&&this.connection$.unsubscribe()}}]),e}()).\u0275fac=function(t){return new(t||an)(m.Nb(u.h),m.Nb(Bo.a),m.Nb(h.c),m.Nb(b.i),m.Nb(f.a),m.Nb(g.a),m.Nb(et.e),m.Nb(H.a))},an.\u0275cmp=m.Hb({type:an,selectors:[["app-database-form"]],inputs:{dataGroupsArray:"dataGroupsArray",schedularsArray:"schedularsArray",sourceType:"sourceType",data:"data",currentDataGroup:"currentDataGroup"},outputs:{goBackFlag:"goBackFlag"},decls:43,vars:19,consts:[[1,"mat-typography"],["role","form","name","dbConnectionForm",1,"form-validate",3,"formGroup"],[1,"row"],[1,"col-md-12","form-group"],["appearance","outline"],["for","connectionName"],["matInput","","type","text","name","connectionName","formControlName","connectionName","id","connectionName","placeholder","Enter connection name","autocomplete","","required",""],[4,"ngIf"],["for","inputdatabase"],["formControlName","connection","required",""],[3,"value",4,"ngFor","ngForOf"],["class","col-md-6 form-group",4,"ngIf"],["for","query"],["matInput","","type","text","name","query","formControlName","query","id","query","placeholder","Enter SELECT query","autocomplete","","required",""],["queryString",""],["align","end",4,"ngIf"],["class","col-md-6",4,"ngIf"],["class","row my-4",4,"ngIf"],["class","mt-5 ml-1",4,"ngIf"],[1,"d-flex","justify-content-end","m-auto"],["mat-stroked-button","","class","mr-auto",3,"click",4,"ngIf"],["mat-stroked-button","","mat-dialog-close",""],["mat-flat-button","","type","submit",1,"btn-primary","ml-3",3,"disabled","click"],[3,"value"],[1,"col-md-6","form-group"],["for","database"],["matInput","","type","text","name","database","formControlName","database","id","database","placeholder","Enter database name","autocomplete","","required",""],["align","end"],[1,"col-md-6"],["for","scheduleId"],["formControlName","scheduleId",3,"selectionChange"],["value","None",4,"ngIf"],["class","redirect-link",4,"ngIf"],["value","None"],[1,"redirect-link"],[1,"text-decoration-none",2,"cursor","pointer",3,"click"],["formControlName","dataGroupId","required","",3,"selectionChange"],["value","Add"],[1,"row","my-4"],["for","dataGroupName"],["matInput","","type","text","name","dataGroupName","id","dataGroupName","formControlName","dataGroupName","placeholder","Enter folder name","required",""],["formControlName","parent_id","required",""],[1,"mt-5","ml-1"],[3,"ngModel","ngModelOptions","ngModelChange"],["mat-stroked-button","",1,"mr-auto",3,"click"]],template:function(t,e){1&t&&(m.Tb(0,"div",0),m.Tb(1,"form",1),m.Tb(2,"div",2),m.Tb(3,"div",3),m.Tb(4,"mat-form-field",4),m.Tb(5,"mat-label",5),m.Kc(6,"Connection name"),m.Sb(),m.Ob(7,"input",6),m.Ic(8,Go,2,0,"mat-error",7),m.Ic(9,Po,2,0,"mat-error",7),m.Sb(),m.Sb(),m.Sb(),m.Tb(10,"div",2),m.Tb(11,"div"),m.Tb(12,"mat-form-field",4),m.Tb(13,"mat-label",8),m.Kc(14,"Select connection"),m.Sb(),m.Tb(15,"mat-select",9),m.Ic(16,Mo,2,2,"mat-option",10),m.Sb(),m.Ic(17,Ko,2,0,"mat-error",7),m.Sb(),m.Sb(),m.Ic(18,Ro,6,1,"div",11),m.Sb(),m.Tb(19,"div",2),m.Tb(20,"div",3),m.Tb(21,"mat-form-field",4),m.Tb(22,"mat-label",12),m.Kc(23,"Query"),m.Sb(),m.Ob(24,"textarea",13,14),m.Tb(26,"mat-hint"),m.Kc(27,"Only SELECT query is allowed."),m.Sb(),m.Ic(28,Eo,3,3,"mat-hint",15),m.Ic(29,qo,2,0,"mat-error",7),m.Ic(30,jo,2,0,"mat-error",7),m.Sb(),m.Sb(),m.Sb(),m.Tb(31,"div",2),m.Ic(32,Vo,9,4,"div",16),m.Ic(33,Qo,8,1,"div",16),m.Sb(),m.Ic(34,Jo,14,3,"div",17),m.Ic(35,tn,3,3,"div",18),m.Sb(),m.Sb(),m.Ob(36,"hr"),m.Tb(37,"div",19),m.Ic(38,en,2,0,"button",20),m.Tb(39,"button",21),m.Kc(40,"Cancel"),m.Sb(),m.Tb(41,"button",22),m.ac("click",(function(){return e.onSubmitConnection(e.dbConnectionForm.value)})),m.Kc(42),m.Sb(),m.Sb()),2&t&&(m.Bb(1),m.kc("formGroup",e.dbConnectionForm),m.Bb(7),m.kc("ngIf",e.dbConnectionForm.get("connectionName").hasError("required")&&(e.dbConnectionForm.get("connectionName").dirty||e.dbConnectionForm.get("connectionName").touched)),m.Bb(1),m.kc("ngIf",e.dbConnectionForm.get("connectionName").hasError("pattern")),m.Bb(2),m.Eb("\n          ","sftp"===e.sourceType?"col-md-12 form-group":"col-md-6 form-group",""),m.Bb(5),m.kc("ngForOf",e.dbConns),m.Bb(1),m.kc("ngIf",e.dbConnectionForm.get("connection").hasError("required")&&(e.dbConnectionForm.get("connection").dirty||e.dbConnectionForm.get("connection").touched)),m.Bb(1),m.kc("ngIf","sftp"!==e.sourceType),m.Bb(10),m.kc("ngIf",!(null!=e.user&&null!=e.user.roles&&e.user.roles.includes("super_admin")||null!=e.user&&null!=e.user.roles&&e.user.roles.includes("admin"))),m.Bb(1),m.kc("ngIf",e.dbConnectionForm.get("query").hasError("required")&&(e.dbConnectionForm.get("query").dirty||e.dbConnectionForm.get("query").touched)),m.Bb(1),m.kc("ngIf",e.dbConnectionForm.get("query").hasError("queryInvalid")),m.Bb(2),m.kc("ngIf","enterprise"===e.appType||"saas"===e.appType&&((null==e.user||null==e.user.roles?null:e.user.roles.includes("super_admin"))||(null==e.user||null==e.user.roles?null:e.user.roles.includes("admin")))),m.Bb(1),m.kc("ngIf",!e.isEdit),m.Bb(1),m.kc("ngIf","Add"===e.selectedFolder&&!e.isEdit),m.Bb(1),m.kc("ngIf",!e.isEdit),m.Bb(3),m.kc("ngIf",!e.isEdit),m.Bb(3),m.kc("disabled",e.dbConnectionForm.invalid),m.Bb(1),m.Mc(" ",e.isEdit?"Update":"Create"," "))},directives:[u.K,u.v,u.m,X.c,X.g,tt.b,u.d,u.u,u.k,u.F,i.t,de.a,i.s,X.f,W.b,b.e,X.b,pe.o,No.b,u.x],pipes:[xo.a],styles:[".redirect-link[_ngcontent-%COMP%]{cursor:pointer;font-size:14px;margin-top:5px}"]}),an),nn=n("FvrZ"),rn=n("8yBR"),cn=n("uxn7"),sn=n("mW75"),ln=n("DH7j");function dn(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Connection name is required."),m.Sb())}function un(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Invalid connection name"),m.Sb())}function bn(t,e){if(1&t&&(m.Tb(0,"mat-option",31),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a),m.Bb(1),m.Lc(a.name)}}function pn(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Connection is required."),m.Sb())}function mn(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",28),m.Tb(1,"mat-form-field",3),m.Tb(2,"mat-label",29),m.Kc(3,"Select connection"),m.Sb(),m.Tb(4,"mat-select",30),m.ac("selectionChange",(function(t){return m.wc(a),m.ec().connectionChanged(t)})),m.Ic(5,bn,2,2,"mat-option",18),m.Sb(),m.Ic(6,pn,2,0,"mat-error",6),m.Sb(),m.Sb()}if(2&t){var o=m.ec();m.Db("sftp"===o.sourceType?"col-md-6 ":"d-none"),m.Bb(5),m.kc("ngForOf",o.sftpConns),m.Bb(1),m.kc("ngIf",o.dynamicForm.get("sftpGroup.connection").hasError("required")&&(o.dynamicForm.get("sftpGroup.connection").dirty||o.dynamicForm.get("sftpGroup.connection").touched))}}function fn(t,e){if(1&t&&(m.Tb(0,"mat-option",31),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a),m.Bb(1),m.Lc(a.name)}}function hn(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Connection is required."),m.Sb())}function gn(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",32),m.Tb(1,"mat-form-field",3),m.Tb(2,"mat-label",29),m.Kc(3,"Select connection"),m.Sb(),m.Tb(4,"mat-select",30),m.ac("selectionChange",(function(t){return m.wc(a),m.ec().connectionChanged(t)})),m.Ic(5,fn,2,2,"mat-option",18),m.Sb(),m.Ic(6,hn,2,0,"mat-error",6),m.Sb(),m.Sb()}if(2&t){var o=m.ec();m.Db("s3"===o.sourceType?"col-md-6":"d-none"),m.Bb(5),m.kc("ngForOf",o.s3Conns),m.Bb(1),m.kc("ngIf",o.dynamicForm.get("s3Group.connection").hasError("required")&&(o.dynamicForm.get("s3Group.connection").dirty||o.dynamicForm.get("s3Group.connection").touched))}}function Sn(t,e){if(1&t&&(m.Tb(0,"mat-option",31),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a),m.Bb(1),m.Lc(a)}}function vn(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Bucket is required."),m.Sb())}function Tn(t,e){if(1&t&&(m.Tb(0,"div",2),m.Tb(1,"div",33),m.Tb(2,"mat-form-field",3),m.Tb(3,"mat-label",29),m.Kc(4,"Select bucket"),m.Sb(),m.Tb(5,"mat-select",34),m.Ic(6,Sn,2,2,"mat-option",18),m.Sb(),m.Ic(7,vn,2,0,"mat-error",6),m.Sb(),m.Sb(),m.Tb(8,"div",33),m.Tb(9,"mat-form-field",3),m.Tb(10,"mat-label",35),m.Kc(11,"Bucket folder path (optional)"),m.Sb(),m.Ob(12,"input",36),m.Sb(),m.Sb(),m.Sb()),2&t){var a=m.ec();m.Bb(6),m.kc("ngForOf",a.s3BucketsArray),m.Bb(1),m.kc("ngIf",a.dynamicForm.get("s3Group.bucket").hasError("required")&&(a.dynamicForm.get("s3Group.bucket").dirty||a.dynamicForm.get("s3Group.bucket").touched))}}function yn(t,e){if(1&t){var a=m.Ub();m.Tb(0,"span",47),m.ac("click",(function(){m.wc(a);var t=e.$implicit;return m.ec(3).treeHandler(t)})),m.Kc(1),m.Sb()}if(2&t){var o=e.$implicit;m.lc("title",o.data.subTitle),m.Bb(1),m.Lc(o.data.label)}}function kn(t,e){1&t&&m.Kc(0,"Loading, please hold....")}function In(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",39),m.Tb(1,"mat-label",40),m.Kc(2,"Folder path tree"),m.Sb(),m.Tb(3,"a",41),m.ac("click",(function(){return m.wc(a),m.ec(2).previousTree()})),m.Kc(4,"Back"),m.Sb(),m.Tb(5,"tree-root",42,43),m.Ic(7,yn,2,2,"ng-template",null,44,m.Jc),m.Ic(9,kn,1,0,"ng-template",null,45,m.Jc),m.Sb(),m.Tb(11,"mat-hint",46),m.Kc(12,"Note: Above tree is supported upto 2 levels only."),m.Sb(),m.Sb()}if(2&t){var o=m.ec(2);m.Bb(5),m.kc("nodes",o.nodes)("focused",!0)("options",o.options)("ngClass","expand_tree")}}function wn(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Folder path is required."),m.Sb())}function Cn(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",28),m.Tb(1,"mat-form-field",3),m.Tb(2,"mat-label",48),m.Kc(3,"Selected folder path"),m.Sb(),m.Ob(4,"input",49),m.Tb(5,"button",50),m.ac("click",(function(){m.wc(a);var t=m.ec(2);return t.selectedPath="",t.nodesArray=[],t.dynamicForm.get("sftpGroup.folderpath").setValue(""),t.resetTreeNode()})),m.Tb(6,"mat-icon"),m.Kc(7,"close"),m.Sb(),m.Sb(),m.Ic(8,wn,2,0,"mat-error",6),m.Tb(9,"mat-hint"),m.Kc(10,"Note: You can use folder path input for more nested structure."),m.Sb(),m.Sb(),m.Sb()}if(2&t){var o=m.ec(2);m.Db(o.isEdit?"col-md-12 ":"col-md-6 "),m.Bb(4),m.kc("value",o.selectedPath),m.Bb(4),m.kc("ngIf",o.dynamicForm.get("sftpGroup.folderpath").hasError("required")&&(o.dynamicForm.get("sftpGroup.folderpath").dirty||o.dynamicForm.get("sftpGroup.folderpath").touched))}}function _n(t,e){if(1&t&&(m.Tb(0,"div",37),m.Ic(1,In,13,4,"div",38),m.Ic(2,Cn,11,5,"div",7),m.Sb()),2&t){var a=m.ec();m.Bb(1),m.kc("ngIf",!a.isEdit),m.Bb(1),m.kc("ngIf","sftp"===a.sourceType)}}function Dn(t,e){if(1&t&&(m.Tb(0,"mat-option",31),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a.value),m.Bb(1),m.Lc(a.name)}}function Fn(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"File extentsion is required. "),m.Sb())}function On(t,e){if(1&t&&(m.Tb(0,"div",51),m.Tb(1,"mat-form-field",3),m.Tb(2,"mat-label"),m.Kc(3,"Select file extentsion"),m.Sb(),m.Tb(4,"mat-select",52),m.Ic(5,Dn,2,2,"mat-option",18),m.Sb(),m.Ic(6,Fn,2,0,"mat-error",6),m.Sb(),m.Sb()),2&t){var a=m.ec();m.Bb(5),m.kc("ngForOf",a.sftpFileTypes),m.Bb(1),m.kc("ngIf",a.dynamicForm.get("sftpGroup.fileExtension").hasError("required")&&(a.dynamicForm.get("sftpGroup.fileExtension").dirty||a.dynamicForm.get("sftpGroup.fileExtension").touched))}}function Bn(t,e){if(1&t&&(m.Tb(0,"mat-option",31),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a.value),m.Bb(1),m.Lc(a.name)}}function Nn(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"URL resource type is required. "),m.Sb())}function xn(t,e){if(1&t&&(m.Tb(0,"div",53),m.Tb(1,"mat-form-field",3),m.Tb(2,"mat-label"),m.Kc(3,"Select resource type"),m.Sb(),m.Tb(4,"mat-select",54),m.Ic(5,Bn,2,2,"mat-option",18),m.Sb(),m.Ic(6,Nn,2,0,"mat-error",6),m.Sb(),m.Sb()),2&t){var a=m.ec();m.Bb(5),m.kc("ngForOf",a.urlSources),m.Bb(1),m.kc("ngIf",a.dynamicForm.get("urlGroup.filetype").hasError("required")&&(a.dynamicForm.get("urlGroup.filetype").dirty||a.dynamicForm.get("urlGroup.filetype").touched))}}function Gn(t,e){if(1&t&&(m.Tb(0,"mat-option",31),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a._id),m.Bb(1),m.Lc(a.scheduleName)}}function Pn(t,e){if(1&t){var a=m.Ub();m.Tb(0,"mat-hint",55),m.Tb(1,"a",56),m.ac("click",(function(){return m.wc(a),m.ec().navigateToScheduler()})),m.Kc(2,"Add scheduler"),m.Sb(),m.Sb()}}function Mn(t,e){if(1&t&&(m.Tb(0,"mat-option",31),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a.value),m.Bb(1),m.Lc(a.name)}}function Kn(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"File extentsion is required. "),m.Sb())}function An(t,e){if(1&t&&(m.Tb(0,"div",33),m.Tb(1,"mat-form-field",3),m.Tb(2,"mat-label"),m.Kc(3,"Select file extentsion"),m.Sb(),m.Tb(4,"mat-select",52),m.Ic(5,Mn,2,2,"mat-option",18),m.Sb(),m.Ic(6,Kn,2,0,"mat-error",6),m.Sb(),m.Sb()),2&t){var a=m.ec();m.Bb(5),m.kc("ngForOf",a.sftpFileTypes),m.Bb(1),m.kc("ngIf",a.dynamicForm.get("s3Group.fileExtension").hasError("required")&&(a.dynamicForm.get("s3Group.fileExtension").dirty||a.dynamicForm.get("s3Group.fileExtension").touched))}}var Rn=function(){return{standalone:!0}};function En(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",14),m.Tb(1,"label",57),m.Kc(2,"Data format"),m.Sb(),m.Tb(3,"mat-radio-group",58),m.ac("ngModelChange",(function(t){return m.wc(a),m.ec().dataFormat=t})),m.Tb(4,"mat-radio-button",59),m.Kc(5,"CSV"),m.Sb(),m.Tb(6,"mat-radio-button",60),m.Kc(7,"JSON"),m.Sb(),m.Sb(),m.Sb()}if(2&t){var o=m.ec();m.Bb(3),m.kc("ngModel",o.dataFormat)("ngModelOptions",m.mc(2,Rn))}}function qn(t,e){if(1&t&&(m.Tb(0,"mat-option",31),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a._id),m.Bb(1),m.Lc(a.name)}}function jn(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",14),m.Tb(1,"mat-form-field",3),m.Tb(2,"mat-label"),m.Kc(3,"Select folder"),m.Sb(),m.Tb(4,"mat-select",61),m.ac("selectionChange",(function(t){return m.wc(a),m.ec().folderChangedHandler(t)})),m.Tb(5,"mat-option",62),m.Kc(6,"Create new folder"),m.Sb(),m.Ic(7,qn,2,2,"mat-option",18),m.Sb(),m.Sb(),m.Sb()}if(2&t){var o=m.ec();m.Bb(7),m.kc("ngForOf",o.dataGroupsArray)}}function Ln(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Folder name is required. "),m.Sb())}function Un(t,e){if(1&t&&(m.Tb(0,"mat-option",31),m.Kc(1),m.Sb()),2&t){var a=e.$implicit;m.kc("value",a._id),m.Bb(1),m.Lc(a.name)}}function $n(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Parent folder is required."),m.Sb())}function Hn(t,e){if(1&t&&(m.Tb(0,"div",2),m.Tb(1,"div",14),m.Tb(2,"mat-form-field",3),m.Tb(3,"mat-label",63),m.Kc(4,"Folder name"),m.Sb(),m.Ob(5,"input",64),m.Ic(6,Ln,2,0,"mat-error",6),m.Sb(),m.Sb(),m.Tb(7,"div",14),m.Tb(8,"mat-form-field",3),m.Tb(9,"mat-label"),m.Kc(10,"Select parent folder"),m.Sb(),m.Tb(11,"mat-select",65),m.Ic(12,Un,2,2,"mat-option",18),m.Sb(),m.Ic(13,$n,2,0,"mat-error",6),m.Sb(),m.Sb(),m.Sb()),2&t){var a=m.ec();m.Bb(6),m.kc("ngIf",a.dynamicForm.get("dataGroupName").hasError("required")&&(a.dynamicForm.get("dataGroupName").dirty||a.dynamicForm.get("dataGroupName").touched)),m.Bb(6),m.kc("ngForOf",a.dataGroupsArray),m.Bb(1),m.kc("ngIf",a.dynamicForm.get("parent_id").hasError("required")&&(a.dynamicForm.get("parent_id").dirty||a.dynamicForm.get("parent_id").touched))}}function Vn(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"URL is required."),m.Sb())}function zn(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Invalid URL."),m.Sb())}function Qn(t,e){if(1&t&&(m.Tb(0,"div",2),m.Tb(1,"div",66),m.Tb(2,"mat-form-field",3),m.Tb(3,"mat-label",67),m.Kc(4,"URL"),m.Sb(),m.Ob(5,"input",68),m.Ic(6,Vn,2,0,"mat-error",6),m.Ic(7,zn,2,0,"mat-error",6),m.Sb(),m.Sb(),m.Sb()),2&t){var a=m.ec();m.Bb(6),m.kc("ngIf",a.dynamicForm.get("urlGroup.url").hasError("required")&&(a.dynamicForm.get("urlGroup.url").dirty||a.dynamicForm.get("urlGroup.url").touched)),m.Bb(1),m.kc("ngIf",a.dynamicForm.get("urlGroup.url").hasError("url"))}}function Zn(t,e){if(1&t){var a=m.Ub();m.Tb(0,"div",69),m.Tb(1,"mat-checkbox",70),m.ac("ngModelChange",(function(t){return m.wc(a),m.ec().isPulling=t})),m.Kc(2,"Pull data"),m.Sb(),m.Sb()}if(2&t){var o=m.ec();m.Bb(1),m.kc("ngModel",o.isPulling)("ngModelOptions",m.mc(2,Rn))}}function Yn(t,e){1&t&&(m.Tb(0,"li"),m.Kc(1," It will pull all files from selected bucket or folder path (optional) "),m.Sb())}function Wn(t,e){1&t&&(m.Tb(0,"li"),m.Kc(1,"It will pull all files from selected folder path"),m.Sb())}function Jn(t,e){if(1&t&&(m.Tb(0,"div",71),m.Tb(1,"mat-hint"),m.Kc(2,"Note: "),m.Tb(3,"ul"),m.Ic(4,Yn,2,0,"li",6),m.Ic(5,Wn,2,0,"li",6),m.Tb(6,"li"),m.Kc(7,"Files will be pulled, only if they have been modified or new are added"),m.Sb(),m.Sb(),m.Sb(),m.Sb()),2&t){var a=m.ec();m.Bb(4),m.kc("ngIf","s3"===a.sourceType),m.Bb(1),m.kc("ngIf","sftp"===a.sourceType)}}function Xn(t,e){if(1&t){var a=m.Ub();m.Tb(0,"button",72),m.ac("click",(function(){return m.wc(a),m.ec().goBack()})),m.Kc(1," Back "),m.Sb()}}var ti,ei,ai=((ti=function(){function e(a,o,n,i,r,c,s,d,b,p){var f,h,g;t(this,e),this.dialogData=a,this._fb=o,this._connection=n,this._toaster=i,this._connectionDialogRef=r,this._data=c,this._localStorage=s,this._spinner=d,this._router=b,this._utils=p,this.goBackFlag=new m.o,this.options={mouse:{contextMenu:function(t,e,a){a.preventDefault(),alert("context menu for "+e.data.name)},dblClick:sn.c.TOGGLE_EXPANDED,click:function(t,e,a){a.shiftKey?sn.c.TOGGLE_ACTIVE_MULTI(t,e,a):sn.c.TOGGLE_ACTIVE(t,e,a)}},keys:(f={},h=sn.a.ENTER,g=function(t,e,a){return alert("This is "+e.data.name)},h in f?Object.defineProperty(f,h,{value:g,enumerable:!0,configurable:!0,writable:!0}):f[h]=g,f)},this.unsubscribe$=new l.b,this.sftpFileTypes=[{name:"XLS",value:".xls",type:"xls"},{name:"XLSX",value:".xlsx",type:"xlsx"},{name:"CSV",value:".csv",type:"csv"}],this.urlSources=[{name:"URL",value:"url",type:"url"}],this.color="primary",this.mode="indeterminate",this.diameter=100,this.exportProjectDiameter=50,this.treeControl=new nn.j((function(t){return t.children})),this.dataSource=new rn.d,this.hidePassword=!0,this.isPulling=!0,this.isEdit=!1,this.showSftpSpinner=!1,this.nodesArray=[],this.dataFormat="csv",this.s3BucketsArray=[],this.nodes=null,this.hasChild=function(t,e){return!!e.children&&e.children.length>0},this.s3Form=this._fb.group({connection:["",u.I.required],bucket:["",u.I.required],fileExtension:["",u.I.required],bucketFolderPath:[""]}),this.sftpForm=this._fb.group({connection:["",this.dialogData.data?u.I.nullValidator:u.I.required],fileExtension:["",this.dialogData.data?u.I.nullValidator:u.I.required],folderpath:["",this.dialogData.data?u.I.nullValidator:u.I.required]}),this.urlForm=this._fb.group({filetype:["",this.dialogData.data?u.I.nullValidator:u.I.required],url:["",this.dialogData.data?u.I.nullValidator:[u.I.required,cn.a.url]]})}return a(e,[{key:"ngOnInit",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.dynamicForm=this._fb.group({connectionName:["",[u.I.required,u.I.pattern("^[^\\s][A-Za-z0-9_\\- ]+$")]],dataGroupId:["",u.I.required],dataGroupName:["",u.I.nullValidator],parent_id:["",u.I.nullValidator],scheduleId:[""],sftpGroup:"sftp"===this.sourceType?this.sftpForm:"",urlGroup:"url"===this.sourceType?this.urlForm:"",s3Group:"s3"===this.sourceType?this.s3Form:""}),this.project=this._localStorage.getItem("project"),"s3"!==this.sourceType){t.next=8;break}return t.next=5,this._connection.getConnectionsList(this.sourceType).pipe(Object(L.a)(this.unsubscribe$)).toPromise();case 5:this.s3Conns=t.sent,t.next=13;break;case 8:if(t.t0="sftp"===this.sourceType,!t.t0){t.next=13;break}return t.next=12,this._connection.getSftpConnectionList().pipe(Object(L.a)(this.unsubscribe$)).toPromise();case 12:this.sftpConns=t.sent;case 13:this.prefillConnectionForm(this.dialogData.data),this.dataSource.data=[{label:"/"}],this.nodes=[{expanded:!0,label:"/"}];case 16:case"end":return t.stop()}}),t,this)})))}},{key:"previousTree",value:function(){var t,e,a,o,n=this;t=(e=this.selectedPath.replace("//","/")).lastIndexOf("/"),o=e.substring(t+1),-1===t?(a=void 0,this.selectedPath=""):(a=e.replace("/"+o,""),this.selectedPath=a,a=a.replace("//","/"));var i=this.sftpConns.filter((function(t){return t.name===n.sftpForm.get("connection").value.name}))[0];this.getSFTPFolders(i._id,a)}},{key:"prefillConnectionForm",value:function(t){var e=this;t?(this.isEdit=!0,this.dynamicForm.get("dataGroupId").clearValidators(),this.dynamicForm.get("dataGroupId").updateValueAndValidity(),this.connectionIdToUpdate=t._id,this._data.getSingleDataConnection(this.project._id,t._id).subscribe((function(t){var a;t&&("sftp"===t.source?e.sftpDetails=t:"url"===t.source?e.urlDetails=t:"s3"===t.source&&(e.s3Details=t),e.s3BucketsArray.push(t.bucket),e.dynamicForm.patchValue({connectionName:t.connectionName,scheduleId:t.scheduleId||"None",sftpGroup:{connection:"sftp"===e.sourceType?e.sftpConns.filter((function(e){return e._id===t.sftpConnectionId}))[0]:null,fileExtension:t.fileExtension||t.fileExtension,folderpath:t.folderPath},urlGroup:{url:t.url},s3Group:{connection:"s3"===e.sourceType?null===(a=e.s3Conns)||void 0===a?void 0:a.filter((function(e){return e._id===t.s3ConnectionId}))[0]:null,fileExtension:t.fileExtension,bucketFolderPath:t.bucketFolderPath,bucket:t.bucket}}),e.dynamicForm.updateValueAndValidity(),e.dataFormat=t.dataFormat)}),(function(t){e._toaster.error("Server Error","Data Connection")}))):(this.dynamicForm.get("dataGroupId").setValue(this.currentDataGroup),this.isEdit=!1)}},{key:"folderChangedHandler",value:function(t){this.selectedFolder=t.value,"Add"===this.selectedFolder?(this.dynamicForm.get("dataGroupName").setValidators(u.I.required),this.dynamicForm.get("parent_id").setValidators(u.I.required),this.dynamicForm.get("dataGroupName").updateValueAndValidity(),this.dynamicForm.get("parent_id").updateValueAndValidity()):(this.dynamicForm.get("dataGroupName").clearValidators(),this.dynamicForm.get("parent_id").clearValidators(),this.dynamicForm.get("dataGroupName").updateValueAndValidity(),this.dynamicForm.get("parent_id").updateValueAndValidity())}},{key:"connectionChanged",value:function(t){"s3"===this.sourceType?(this._spinner.showSpinner(),this.getS3Buckets(t)):this.getSFTPFolders(t.value._id)}},{key:"getS3Buckets",value:function(t){var e=this;this._data.getS3BucketsList(t.value._id).pipe(Object(L.a)(this.unsubscribe$)).subscribe((function(t){e._spinner.stopSpinner(),Object(ln.a)(t.buckets)?e.s3BucketsArray=t.buckets:e._toaster.error(t.buckets||"Cannot fetch S3 buckets list","Data Connection")}),(function(t){e._spinner.stopSpinner(),e._toaster.error(t.error.message||"Server Error","Data Connection")}))}},{key:"getSFTPFolders",value:function(t,e){var a=this;e||(this.dataSource.data=[{label:"Fetching details from remote server..."}]),this._spinner.showSpinner(),this.sftpId=t,this.dataConnection$=this._data.getSftpFolderDetails(t,e||"first").subscribe((function(t){if(t.length){if(a.nodes=t,void 0!==e&&""!==e){var o=[];o=e.split("/"),a.nodes[0].label=o.slice().pop()}a._spinner.stopSpinner()}else a._toaster.error("Cannot fetch SFTP folders structure","Data Connection"),a._spinner.stopSpinner()}),(function(t){a.dataSource.data=[{label:"Cannot fetch details from remote server"}],a._spinner.stopSpinner(),a._toaster.error(t.error.message||"Server Error","Data Connection")}))}},{key:"refreshTreeData",value:function(){var t=this.dataSource.data;this.dataSource.data=[],this.dataSource.data=t}},{key:"treeHandler",value:function(t){var e,a=this;null===(e=this.nodesArray)||void 0===e||e.push(t.data.label),this.selectedPath=this.nodesArray.toString().split(",").join("/");var o=this.sftpConns.filter((function(t){return t.name===a.sftpForm.get("connection").value.name}))[0];this.getSFTPFolders(o._id,this.selectedPath),this.sftpForm.get("folderpath").setValue(this.selectedPath)}},{key:"resetTreeNode",value:function(){var t=this,e=this.sftpConns.filter((function(e){return e.name===t.sftpForm.get("connection").value.name}))[0];this.getSFTPFolders(e._id,this.selectedPath)}},{key:"showPreviousNode",value:function(){}},{key:"goBack",value:function(){this.goBackFlag.emit(!0)}},{key:"onSubmitConnection",value:function(t){this._spinner.showSpinner(),this.isEdit?this.updateConnectionHandler(t):this.createConnectionHandler(t)}},{key:"updateConnectionHandler",value:function(t){this.sftpDetails?this.updateSftpConnection(t):this.urlDetails?this.updateUrlConnection(t):this.s3Details&&this.updateS3Connection(t)}},{key:"updateUrlConnection",value:function(t){var e=this;this.urlDetails.connectionName=t.connectionName,this.urlDetails.url=t.urlGroup.url,this.urlDetails.dataFormat=this.dataFormat,this.urlDetails.projectId=this.project._id,"None"==t.scheduleId&&(this.urlDetails.statusData="None"),this.urlDetails.scheduledata=void 0===this.dataschedule?"noupdate":this.dataschedule,this.urlDetails.scheduleId&&(this.urlDetails.oldScheduleId=this.urlDetails.scheduleId),t.scheduleId&&(this.urlDetails.scheduleId=t.scheduleId),this._data.updateDataConnection(this.project._id,this.urlDetails._id,this.urlDetails).subscribe((function(t){t&&(e.closeModal(t),e._toaster.success(e.urlDetails.source.toUpperCase()+" connection updated successfully","Data Connection"))}),(function(t){e._toaster.success("Server Error","Data Connection")}))}},{key:"updateSftpConnection",value:function(t){var e=this;this.sftpDetails.connectionName=t.connectionName,this.sftpDetails.folderPath=t.sftpGroup.folderpath,this.sftpDetails.fileExtension=t.sftpGroup.fileExtension,this.sftpDetails.projectId=this.project._id,"None"==t.scheduleId&&(this.sftpDetails.statusData="None"),this.sftpDetails.scheduledata=void 0===this.dataschedule?"noupdate":this.dataschedule,this.sftpDetails.scheduleId&&(this.sftpDetails.oldScheduleId=this.sftpDetails.scheduleId),t.scheduleId&&(this.sftpDetails.scheduleId=t.scheduleId),this._data.updateDataConnection(this.project._id,this.sftpDetails._id,this.sftpDetails).subscribe((function(t){t&&(e.closeModal(t),e._toaster.success(e.sftpDetails.source.toUpperCase()+" connection updated successfully","Data Connection"))}),(function(t){e._toaster.success("Server Error","Data Connection")}))}},{key:"updateS3Connection",value:function(t){var e,a=this;this.s3Details.connectionName=t.connectionName,this.s3Details.fileExtension=t.s3Group.fileExtension,this.s3Details.projectId=this.project._id,this.s3Details.s3ConnectionId=null===(e=this.s3Conns)||void 0===e?void 0:e.filter((function(e){return e._id===t.s3Group.connection._id}))[0]._id,this.s3Details.bucket=t.s3Group.bucket,this.s3Details.bucketFolderPath=t.s3Group.bucketFolderPath,"None"==t.scheduleId&&(this.s3Details.statusData="None"),this.s3Details.scheduledata=void 0===this.dataschedule?"noupdate":this.dataschedule,this.s3Details.scheduleId&&(this.s3Details.oldScheduleId=this.s3Details.scheduleId),t.scheduleId&&(this.s3Details.scheduleId=t.scheduleId),this._data.updateDataConnection(this.project._id,this.s3Details._id,this.s3Details).subscribe((function(t){t&&(a.closeModal(t),a._toaster.success(a.s3Details.source.toUpperCase()+" connection updated successfully","Data Connection"))}),(function(t){a._toaster.success("Server Error","Data Connection")}))}},{key:"createConnectionHandler",value:function(t){var e,a=this;t.scheduleId||delete t.scheduleId,t.dataGroupName||delete t.dataGroupName,t.parent_id||delete t.parent_id,"sftp"===this.sourceType?e=Object.assign(Object.assign(Object.assign({},t),t.sftpGroup),{source:this.sourceType,isPulling:this.isPulling}):"url"===this.sourceType?e=Object.assign(Object.assign(Object.assign({},t),t.urlGroup),{source:this.sourceType,dataFormat:this.dataFormat,isPulling:this.isPulling}):"s3"===this.sourceType&&(e=Object.assign(Object.assign(Object.assign({},t),t.s3Group),{source:this.sourceType,isPulling:this.isPulling})),delete e.sftpGroup,delete e.urlGroup,delete e.s3Group,this._data.pullData(this.project._id,e).subscribe((function(t){t&&(a.closeModal(t),a.isPulling?a._utils.showSnackBar(U.b.pullData):a._toaster.success(a.sourceType.toUpperCase()+" connection created successfully","Data Connection")),a._spinner.stopSpinner()}),(function(t){a._spinner.stopSpinner(),a._toaster.error("Server Error","Data Connection")}))}},{key:"schedularChanged",value:function(t){switch(this.sourceType){case"sftp":this.mapSchedular(this.sftpDetails,t);break;case"url":this.mapSchedular(this.urlDetails,t);break;case"s3":this.mapSchedular(this.s3Details,t)}}},{key:"mapSchedular",value:function(t,e){this.dataschedule=void 0===t.scheduleId?"new":t.scheduleId!==e?"update":"noupdate"}},{key:"fetchAlgorithmsList",value:function(){return this._connection.getSftpConnectionList().pipe(Object(L.a)(this.unsubscribe$)).toPromise()}},{key:"navigateToScheduler",value:function(){this.closeModal(),this._spinner.stopSpinner(),this._router.navigateByUrl("/dashboard/scheduler?type=scheduler")}},{key:"closeModal",value:function(t){this._connectionDialogRef.close(t)}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe(),this.connection$&&this.connection$.unsubscribe(),this.dataConnection$&&this.dataConnection$.unsubscribe()}}]),e}()).\u0275fac=function(t){return new(t||ti)(m.Nb(b.a),m.Nb(u.h),m.Nb(Bo.a),m.Nb(h.c),m.Nb(b.i),m.Nb(f.a),m.Nb(g.a),m.Nb(H.a),m.Nb(et.e),m.Nb(S.a))},ti.\u0275cmp=m.Hb({type:ti,selectors:[["app-sftp-and-url-form"]],inputs:{dataGroupsArray:"dataGroupsArray",schedularsArray:"schedularsArray",sourceType:"sourceType",data:"data",currentDataGroup:"currentDataGroup"},outputs:{goBackFlag:"goBackFlag"},features:[m.Ab([rn.b])],decls:41,vars:24,consts:[[1,"mat-typography"],["role","form","name","dynamicForm",1,"form-validate",3,"formGroup"],[1,"row"],["appearance","outline"],["for","connectionName"],["matInput","","type","text","name","connectionName","formControlName","connectionName","id","connectionName","placeholder","Enter connection name","autocomplete","","required",""],[4,"ngIf"],["formGroupName","sftpGroup",3,"class",4,"ngIf"],["formGroupName","s3Group",3,"class",4,"ngIf"],["class","row",4,"ngIf"],["class","row mb-5",4,"ngIf"],[1,"row","mt-2"],["formGroupName","sftpGroup","class","col-md-6",4,"ngIf"],["formGroupName","urlGroup","class","col-md-6",4,"ngIf"],[1,"col-md-6"],["for","scheduleId"],["formControlName","scheduleId",3,"selectionChange"],["value","None"],[3,"value",4,"ngFor","ngForOf"],["class","redirect-link",4,"ngIf"],["formGroupName","s3Group","class","col-md-6",4,"ngIf"],["class","col-md-6",4,"ngIf"],["class","mt-3 ml-1",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"d-flex","justify-content-end","m-auto"],["mat-stroked-button","","class","mr-auto","ccolor","basic",3,"click",4,"ngIf"],["mat-stroked-button","","mat-dialog-close",""],["mat-flat-button","","type","submit",1,"btn-primary","ml-3",3,"disabled","click"],["formGroupName","sftpGroup"],["for","inputdatabase"],["formControlName","connection","required","",3,"selectionChange"],[3,"value"],["formGroupName","s3Group"],["formGroupName","s3Group",1,"col-md-6"],["formControlName","bucket","required",""],["for","bucketFolderPath"],["matInput","","type","text","name","bucketFolderPath","formControlName","bucketFolderPath","id","bucketFolderPath","placeholder","Eg: upload or upload/demo"],[1,"row","mb-5"],["class","col-md-6 overflow-auto",4,"ngIf"],[1,"col-md-6","overflow-auto"],["for","folder-path",1,"ml-2"],[1,"text-decoration-none","ml-2",2,"cursor","pointer",3,"click"],[3,"nodes","focused","options","ngClass"],["tree",""],["treeNodeTemplate",""],["loadingTemplate",""],[1,"text-sm","ml-3","mb-3"],[3,"title","click"],["for","folderpath"],["matInput","","type","text","name","connectionName","formControlName","folderpath","id","folderpath","placeholder","Enter selected folder path","required","",3,"value"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["formGroupName","sftpGroup",1,"col-md-6"],["formControlName","fileExtension","required",""],["formGroupName","urlGroup",1,"col-md-6"],["formControlName","filetype","required",""],[1,"redirect-link"],[1,"text-decoration-none",2,"cursor","pointer",3,"click"],["id","dataFormat"],["aria-labelledby","dataFormat",1,"radio-group","my-2","ml-1",3,"ngModel","ngModelOptions","ngModelChange"],["value","csv"],["value","json"],["formControlName","dataGroupId","required","",3,"selectionChange"],["value","Add"],["for","dataGroupName"],["matInput","","type","text","name","dataGroupName","id","dataGroupName","formControlName","dataGroupName","placeholder","Enter folder name","required",""],["formControlName","parent_id","required",""],["formGroupName","urlGroup",1,"col-md-12"],["for","url"],["matInput","","type","url","name","url","formControlName","url","id","url","placeholder","Enter URL","autocomplete","","required",""],[1,"mt-3","ml-1"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"mt-3"],["mat-stroked-button","","ccolor","basic",1,"mr-auto",3,"click"]],template:function(t,e){1&t&&(m.Tb(0,"div",0),m.Tb(1,"form",1),m.Tb(2,"div",2),m.Tb(3,"div"),m.Tb(4,"mat-form-field",3),m.Tb(5,"mat-label",4),m.Kc(6,"Connection name"),m.Sb(),m.Ob(7,"input",5),m.Ic(8,dn,2,0,"mat-error",6),m.Ic(9,un,2,0,"mat-error",6),m.Sb(),m.Sb(),m.Ic(10,mn,7,5,"div",7),m.Ic(11,gn,7,5,"div",8),m.Sb(),m.Ic(12,Tn,13,2,"div",9),m.Ic(13,_n,3,2,"div",10),m.Tb(14,"div",11),m.Ic(15,On,7,2,"div",12),m.Ic(16,xn,7,2,"div",13),m.Tb(17,"div",14),m.Tb(18,"mat-form-field",3),m.Tb(19,"mat-label",15),m.Kc(20,"Select scheduler"),m.Sb(),m.Tb(21,"mat-select",16),m.ac("selectionChange",(function(t){return e.schedularChanged(t.value)})),m.Tb(22,"mat-option",17),m.Kc(23,"None"),m.Sb(),m.Ic(24,Gn,2,2,"mat-option",18),m.Sb(),m.Ic(25,Pn,3,0,"mat-hint",19),m.Sb(),m.Sb(),m.Ic(26,An,7,2,"div",20),m.Sb(),m.Tb(27,"div",2),m.Ic(28,En,8,3,"div",21),m.Ic(29,jn,8,1,"div",21),m.Sb(),m.Ic(30,Hn,14,3,"div",9),m.Ic(31,Qn,8,2,"div",9),m.Ic(32,Zn,3,3,"div",22),m.Ic(33,Jn,8,2,"div",23),m.Sb(),m.Sb(),m.Ob(34,"hr"),m.Tb(35,"div",24),m.Ic(36,Xn,2,0,"button",25),m.Tb(37,"button",26),m.Kc(38,"Cancel"),m.Sb(),m.Tb(39,"button",27),m.ac("click",(function(){return e.onSubmitConnection(e.dynamicForm.value)})),m.Kc(40),m.Sb(),m.Sb()),2&t&&(m.Bb(1),m.kc("formGroup",e.dynamicForm),m.Bb(2),m.Db("sftp"===e.sourceType&&!e.isEdit||"s3"===e.sourceType?"col-md-6":"col-md-12 "),m.Bb(5),m.kc("ngIf",e.dynamicForm.get("connectionName").hasError("required")&&(e.dynamicForm.get("connectionName").dirty||e.dynamicForm.get("connectionName").touched)),m.Bb(1),m.kc("ngIf",e.dynamicForm.get("connectionName").hasError("pattern")),m.Bb(1),m.kc("ngIf","sftp"===e.sourceType&&!e.isEdit),m.Bb(1),m.kc("ngIf","s3"===e.sourceType),m.Bb(1),m.kc("ngIf","s3"===e.sourceType),m.Bb(1),m.kc("ngIf",e.isEdit||"sftp"===e.sourceType),m.Bb(2),m.kc("ngIf","sftp"===e.sourceType),m.Bb(1),m.kc("ngIf","url"===e.sourceType&&!e.isEdit),m.Bb(8),m.kc("ngForOf",e.schedularsArray),m.Bb(1),m.kc("ngIf",!e.schedularsArray.length),m.Bb(1),m.kc("ngIf","s3"===e.sourceType),m.Bb(2),m.kc("ngIf","url"===e.sourceType&&("url"===e.dynamicForm.get("urlGroup.filetype").value||e.isEdit)),m.Bb(1),m.kc("ngIf",!e.isEdit),m.Bb(1),m.kc("ngIf","Add"===e.selectedFolder&&!e.isEdit),m.Bb(1),m.kc("ngIf","url"===e.sourceType),m.Bb(1),m.kc("ngIf",!e.isEdit),m.Bb(1),m.kc("ngIf","sftp"===e.sourceType||"s3"===e.sourceType),m.Bb(3),m.kc("ngIf",!e.isEdit),m.Bb(3),m.kc("disabled",e.dynamicForm.invalid),m.Bb(1),m.Mc(" ",e.isEdit?"Update":"Create"," "))},directives:[u.K,u.v,u.m,X.c,X.g,tt.b,u.d,u.u,u.k,u.F,i.t,de.a,pe.o,i.s,W.b,b.e,X.b,u.n,sn.e,i.q,X.f,X.j,J.a,ue.c,u.x,ue.b,No.b],styles:['.tree-children.tree-children-no-padding[_ngcontent-%COMP%]{padding-left:0}.tree-children[_ngcontent-%COMP%]{overflow:hidden}.node-drop-slot[_ngcontent-%COMP%]{display:block;height:2px}.node-drop-slot.is-dragging-over[_ngcontent-%COMP%]{background:#dfe;height:20px;border:2px dotted #888}.toggle-children-wrapper-expanded[_ngcontent-%COMP%]   .toggle-children[_ngcontent-%COMP%]{transform:rotate(90deg)}.toggle-children-wrapper-collapsed[_ngcontent-%COMP%]   .toggle-children[_ngcontent-%COMP%]{transform:rotate(0)}.toggle-children-wrapper[_ngcontent-%COMP%]{padding:2px 3px 5px 1px}.toggle-children[_ngcontent-%COMP%]{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAASCAYAAABSO15qAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkYzRkRFQjcxODUzNTExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkYzRkRFQjcwODUzNTExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTk5NzA1OGEtZDI3OC00NDZkLWE4ODgtNGM4MGQ4YWI1NzNmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzRkZmQxMGMtY2NlNS0xMTc4LWE5OGQtY2NkZmM5ODk5YWYwIi8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z2x5cGhpY29uczwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+5iogFwAAAGhJREFUeNpiYGBgKABigf///zOQg0EARH4A4gZyDIIZ8B/JoAJKDIDhB0CcQIkBRBtEyABkgxwoMQCGD6AbRKoBGAYxQgXIBRuZGKgAKPIC3QLxArnRSHZCIjspk52ZKMrOFBUoAAEGAKnq593MQAZtAAAAAElFTkSuQmCC");height:8px;width:9px;background-size:contain;background-repeat:no-repeat;background-position:50%}.toggle-children[_ngcontent-%COMP%], .toggle-children-placeholder[_ngcontent-%COMP%]{display:inline-block;position:relative;top:1px}.toggle-children-placeholder[_ngcontent-%COMP%]{height:10px;width:10px;padding-right:3px}.node-content-wrapper[_ngcontent-%COMP%]{display:inline-block;padding:2px 5px;border-radius:2px;transition:background-color .15s,box-shadow .15s}.node-wrapper[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.node-content-wrapper-active[_ngcontent-%COMP%], .node-content-wrapper-active.node-content-wrapper-focused[_ngcontent-%COMP%], .node-content-wrapper.node-content-wrapper-active[_ngcontent-%COMP%]:hover{background:#beebff}.node-content-wrapper-focused[_ngcontent-%COMP%]{background:#e7f4f9}.node-content-wrapper[_ngcontent-%COMP%]:hover{background:#f7fbff}.node-content-wrapper-active[_ngcontent-%COMP%], .node-content-wrapper-focused[_ngcontent-%COMP%], .node-content-wrapper[_ngcontent-%COMP%]:hover{box-shadow:inset 0 0 1px #999}.node-content-wrapper.is-dragging-over[_ngcontent-%COMP%]{background:#dfe;box-shadow:inset 0 0 1px #999}.node-content-wrapper.is-dragging-over-disabled[_ngcontent-%COMP%]{opacity:.5}tree-viewport[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent;height:100%}.tree-children[_ngcontent-%COMP%]{padding-left:20px}.empty-tree-drop-slot[_ngcontent-%COMP%]   .node-drop-slot[_ngcontent-%COMP%]{height:20px;min-width:100px}.angular-tree-component[_ngcontent-%COMP%]{width:100%;position:relative;display:inline-block;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}tree-root[_ngcontent-%COMP%]   .angular-tree-component-rtl[_ngcontent-%COMP%]{direction:rtl}tree-root[_ngcontent-%COMP%]   .angular-tree-component-rtl[_ngcontent-%COMP%]   .toggle-children-wrapper-collapsed[_ngcontent-%COMP%]   .toggle-children[_ngcontent-%COMP%]{transform:rotate(180deg)!important}tree-root[_ngcontent-%COMP%]   .angular-tree-component-rtl[_ngcontent-%COMP%]   .tree-children[_ngcontent-%COMP%]{padding-right:20px;padding-left:0}tree-node-checkbox[_ngcontent-%COMP%]{padding:1px}.expand_tree[_ngcontent-%COMP%]   .example-tree-invisible[_ngcontent-%COMP%]{display:none}.example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .expand_tree[_ngcontent-%COMP%]   .example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.expand_tree[_ngcontent-%COMP%]   .example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{cursor:pointer}.spinner[_ngcontent-%COMP%]{position:absolute!important;left:5%;top:35%}.redirect-link[_ngcontent-%COMP%]{cursor:pointer;font-size:14px;margin-top:5px}.expand_tree[_ngcontent-%COMP%]   .node-content-wrapper[_ngcontent-%COMP%], .tree-children[_ngcontent-%COMP%]{position:relative}.expand_tree[_ngcontent-%COMP%]   .node-content-wrapper[_ngcontent-%COMP%]:before, .tree-children[_ngcontent-%COMP%]:after{content:"";position:absolute}.expand_tree[_ngcontent-%COMP%]   .node-content-wrapper[_ngcontent-%COMP%]:before{border-bottom:1px solid #d3d3d3;border-left:1px solid #d3d3d3;height:28px;top:-17px;width:20px;left:-28px}.expand_tree[_ngcontent-%COMP%]   .tree-node-level-1[_ngcontent-%COMP%] > tree-node-wrapper[_ngcontent-%COMP%] > .node-wrapper[_ngcontent-%COMP%] > .node-content-wrapper[_ngcontent-%COMP%]:before{display:none}.expand_tree[_ngcontent-%COMP%]   .tree-node-leaf[_ngcontent-%COMP%] > .node-wrapper[_ngcontent-%COMP%] > .node-content-wrapper[_ngcontent-%COMP%]:before{width:25px}.expand_tree[_ngcontent-%COMP%]   .tree-children[_ngcontent-%COMP%]:after{border-left:1px solid #d3d3d3;height:100%;top:-15px;left:-15px}.expand_tree[_ngcontent-%COMP%]   tree-node[_ngcontent-%COMP%]:last-child > .tree-node[_ngcontent-%COMP%] > .tree-children[_ngcontent-%COMP%]:after{border-left:none}.expand_tree[_ngcontent-%COMP%]   .toggle-children[_ngcontent-%COMP%]{z-index:1}tree-viewport[_ngcontent-%COMP%]{overflow:auto;display:block;min-height:30%!important;max-height:100%!important}']}),ti),oi=n("WeB1"),ni=n("sYmb"),ii=n("S8xs"),ri=n("psEu"),ci=n("s3T5"),si=n("LYaK"),li=n("+Cnu"),di=n("hzby"),ui=n("dZIy"),bi=n("K3ix"),pi=n("Lm2G"),mi=n("yyhP"),fi=n("jLjo"),hi=n("44PX"),gi=n("kUHs"),Si=n("Mfq2"),vi=n("EDFS"),Ti=n("qCdp"),yi=n("NCSQ"),ki=n("SP0p"),Ii=n("wNA8"),wi=n("KI+Z"),Ci=n("SItC"),_i=n("MgAP"),Di=n("zQvE"),Fi=n("x3Qb"),Oi=n("/1cH"),Bi=n("vxfF"),Ni=n("cH1L"),xi=n("jaxi"),Gi=n("7EHt"),Pi=n("zkoq"),Mi=n("ihCf"),Ki=n("MutI"),Ai=n("f0Cb"),Ri=n("STbY"),Ei=n("XhcP"),qi=n("1jcm"),ji=n("5RNC"),Li=n("wZkO"),Ui=n("/t3+"),$i=n("/3uh"),Hi=n("biqx"),Vi=n("wKC1"),zi=n("ia2u"),Qi=n("jCJ1"),Zi=n("hi0L"),Yi=n("g+ir"),Wi=n("j0Ka"),Ji=[{path:"dataconnection",component:ce},{path:"dataset",component:ma},{path:"dataflow",component:go}],Xi=((ei=function e(){t(this,e)}).\u0275mod=m.Lb({type:ei}),ei.\u0275inj=m.Kb({factory:function(t){return new(t||ei)},imports:[[i.c,me.c.withComponents([oi.a]),et.i.forChild(Ji),sn.h,So.a,at.b]]}),ei);m.Ac(j,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,me.a,me.b,et.j,et.f,et.h,et.g,et.k,sn.e,sn.l,sn.m,sn.b,sn.g,sn.f,sn.o,sn.j,sn.n,sn.k,sn.q,sn.p,sn.i,sn.d,sn.r,u.K,u.z,u.J,u.d,u.A,u.D,u.a,u.G,u.H,u.C,u.u,u.v,u.F,u.q,u.p,u.B,u.b,u.e,u.x,u.y,u.w,u.j,u.m,u.k,u.n,u.g,ni.a,ii.a,ii.c,ri.a,ci.a,ci.b,ci.c,si.c,si.a,li.a,di.l,di.m,di.o,di.p,di.q,di.a,di.b,di.c,di.d,di.e,di.g,di.h,di.i,di.j,di.k,ui.b,ui.d,ui.a,bi.a,bi.b,pi.a,pi.b,mi.a,mi.b,fi.a,hi.b,hi.e,hi.c,hi.a,gi.a,Si.a,vi.a,Ti.a,Ti.b,h.a,yi.a,ki.a,Ii.a,wi.a,ot.a,Ci.a,_i.a,Di.a,Fi.a,Oi.a,Oi.d,Oi.c,Bi.a,pe.o,pe.n,Ni.b,W.b,W.a,xi.b,xi.a,Z.a,Z.f,Z.n,Z.d,Z.m,Z.l,Z.b,Z.e,Z.k,Z.i,Z.h,Z.g,Z.o,Z.c,No.b,No.d,le.d,le.a,le.c,le.e,le.b,le.f,s.o,s.i,s.k,s.c,s.b,s.n,s.e,s.g,s.h,s.a,s.d,s.j,s.m,s.f,s.l,s.r,Oa.a,Oa.b,Oa.f,Oa.g,Oa.h,Oa.j,Oa.k,Oa.m,Oa.p,Oa.n,Oa.c,Oa.d,Oa.o,Oa.l,Oa.e,b.f,b.e,b.j,b.g,b.d,Gi.a,Gi.c,Gi.d,Gi.g,Gi.h,Gi.f,Gi.e,X.b,X.c,X.f,X.g,X.h,X.i,X.j,Pi.b,Pi.d,Pi.g,pe.k,Pi.f,Pi.e,Pi.a,J.a,Mi.b,Mi.c,tt.b,tt.d,Ki.a,Ki.h,Ki.d,Ki.b,Ki.c,Ki.g,pe.r,Ki.i,Ki.f,Ai.a,Ri.e,Ri.b,Ri.d,Ri.a,r.a,vo.a,be.a,be.c,ue.c,ue.b,pe.t,de.a,de.c,Ei.a,Ei.b,Ei.c,Ei.d,Ei.e,Ei.f,qi.c,qi.a,ji.a,v.d,c.a,c.b,Li.c,Li.d,Li.a,Li.f,Li.e,Li.b,Ui.a,Ui.c,Y.b,Y.d,ga.a,ga.j,ga.b,ga.d,ga.e,ga.h,ga.i,ga.c,ga.f,rn.a,rn.f,rn.h,rn.i,rn.b,rn.e,rn.g,se.a,$i.a,Hi.a,Vi.a,zi.a,Qi.b,Qi.f,at.a,ce,ma,go,j,Oo,on,ai,Me,Fa],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,ni.d,fe.a,Zi.a,Yi.a,Re.a,Wi.a,xo.a])}}])}();
//# sourceMappingURL=19-es5.8979bcc9885504ea7d71.js.map