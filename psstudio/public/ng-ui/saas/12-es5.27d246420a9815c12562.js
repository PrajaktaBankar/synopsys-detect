!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return e(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"8NN1":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var i=a("fXoL"),r=function(){var t=function(){function t(){n(this,t)}return o(t,[{key:"transform",value:function(t,e){return e&&t?t.substr(0,t.lastIndexOf(".")):t}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.Mb({name:"dropFileExtension",type:t,pure:!0}),t}()},"9PQl":function(t,e,n){var a,o;o=this,void 0===(a=(function(){return o.EasyPieChart=(t=function(t,e){var n,a=document.createElement("canvas");t.appendChild(a),"object"==typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(a);var o=a.getContext("2d");a.width=a.height=e.size;var i=1;window.devicePixelRatio>1&&(i=window.devicePixelRatio,a.style.width=a.style.height=[e.size,"px"].join(""),a.width=a.height=e.size*i,o.scale(i,i)),o.translate(e.size/2,e.size/2),o.rotate((e.rotate/180-.5)*Math.PI);var r=(e.size-e.lineWidth)/2;e.scaleColor&&e.scaleLength&&(r-=e.scaleLength+2),Date.now=Date.now||function(){return+new Date};var s=function(t,e,n){var a=(n=Math.min(Math.max(-1,n||0),1))<=0;o.beginPath(),o.arc(0,0,r,0,2*Math.PI*n,a),o.strokeStyle=t,o.lineWidth=e,o.stroke()},l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},c=function(){e.scaleColor&&function(){var t,n;o.lineWidth=1,o.fillStyle=e.scaleColor,o.save();for(var a=24;a>0;--a)a%6==0?(n=e.scaleLength,t=0):t=e.scaleLength-(n=.6*e.scaleLength),o.fillRect(-e.size/2+t,0,n,1),o.rotate(Math.PI/12);o.restore()}(),e.trackColor&&s(e.trackColor,e.trackWidth||e.lineWidth,1)};this.getCanvas=function(){return a},this.getCtx=function(){return o},this.clear=function(){o.clearRect(e.size/-2,e.size/-2,e.size,e.size)},this.draw=(function(t){var a;e.scaleColor||e.trackColor?o.getImageData&&o.putImageData?n?o.putImageData(n,0,0):(c(),n=o.getImageData(0,0,e.size*i,e.size*i)):(this.clear(),c()):this.clear(),o.lineCap=e.lineCap,a="function"==typeof e.barColor?e.barColor(t):e.barColor,s(a,e.lineWidth,t/100)}).bind(this),this.animate=(function(t,n){var a=Date.now();e.onStart(t,n);var o=(function(){var i=Math.min(Date.now()-a,e.animate.duration),r=e.easing(this,i,t,n-t,e.animate.duration);this.draw(r),e.onStep(t,n,r),i>=e.animate.duration?e.onStop(t,n):l(o)}).bind(this);l(o)}).bind(this)},function(e,n){var a={barColor:"#ef1e25",trackColor:"#f9f9f9",scaleColor:"#dfe0e0",scaleLength:5,lineCap:"round",lineWidth:3,trackWidth:void 0,size:110,rotate:0,animate:{duration:1e3,enabled:!0},easing:function(t,e,n,a,o){return(e/=o/2)<1?a/2*e*e+n:-a/2*(--e*(e-2)-1)+n},onStart:function(t,e){},onStep:function(t,e,n){},onStop:function(t,e){}};if(void 0!==t)a.renderer=t;else{if("undefined"==typeof SVGRenderer)throw new Error("Please load either the SVG- or the CanvasRenderer");a.renderer=SVGRenderer}var o={},i=0,r=(function(){for(var t in this.el=e,this.options=o,a)a.hasOwnProperty(t)&&(o[t]=n&&void 0!==n[t]?n[t]:a[t],"function"==typeof o[t]&&(o[t]=o[t].bind(this)));o.easing="string"==typeof o.easing&&"undefined"!=typeof jQuery&&jQuery.isFunction(jQuery.easing[o.easing])?jQuery.easing[o.easing]:a.easing,"number"==typeof o.animate&&(o.animate={duration:o.animate,enabled:!0}),"boolean"!=typeof o.animate||o.animate||(o.animate={duration:1e3,enabled:o.animate}),this.renderer=new o.renderer(e,o),this.renderer.draw(i),e.dataset&&e.dataset.percent?this.update(parseFloat(e.dataset.percent)):e.getAttribute&&e.getAttribute("data-percent")&&this.update(parseFloat(e.getAttribute("data-percent")))}).bind(this);this.update=(function(t){return t=parseFloat(t),o.animate.enabled?this.renderer.animate(i,t):this.renderer.draw(t),i=t,this}).bind(this),this.disableAnimation=function(){return o.animate.enabled=!1,this},this.enableAnimation=function(){return o.animate.enabled=!0,this},r()});var t}).apply(e,[]))||(t.exports=a)},INNs:function(e,a,i){"use strict";i.r(a),i.d(a,"TextAnalysisModule",(function(){return Er}));var r,s=i("ofXK"),l=i("tyNb"),c=i("PCNd"),u=i("7EHt"),d=i("+0xr"),p=i("XNiG"),b=i("1G5W"),m=i("fXoL"),f=i("5eHb"),h=i("mLz/"),g=i("/mf7"),v=i("0IaG"),S=i("jhN1"),y=i("tagK"),T=i("2Vo4"),w=((r=function(){function e(){n(this,e),this.taData=[],this.validOperations=["inputData","cleaningTransformation","textSummarization"],this.onSubmitEventSubject=new T.a("")}return o(e,[{key:"broadcastSubmitEvent",value:function(t){this.onSubmitEventSubject.next(t)}},{key:"cleartaData",value:function(){this.taData=[]}},{key:"setExperimentsData",value:function(t){this.taData.push(t)}},{key:"getSavedOperationOutput",value:function(t){var e=this.taData.findIndex((function(e){return e.uid==t}));return this.taData[e]}},{key:"saveOperationOutput",value:function(t){var e=this.taData.findIndex((function(e){return e.uid==t.uid}));-1==e?this.taData.push(t):this.taData[e]=t,this.getFirstInputData()}},{key:"getFirstInputData",value:function(){return this.taData[0]}},{key:"getInputData",value:function(e){var n=this,a=null;if("wordEmbedding"===e.operation)a=this.taData[0];else{var o=this.taData.findIndex((function(t){return t.uid==e.uid}));t(-1!==o?this.taData.slice(0,o):this.taData).reverse().some((function(t){if(n.validOperations.includes(t.operation)&&t.uid!=e.uid)return a=t,!0}))}return a}},{key:"removeOperation",value:function(t){this.taData=this.taData.filter((function(e){return e.uid!==t.uid}))}},{key:"getAllOperationData",value:function(t){var e=this.taData;return t||(e=e.filter((function(t){return"inputData"!==t.operation}))),e}},{key:"orderOperationData",value:function(t,e){var n=this;if("reoder"==e&&this.taData.length>1){var a=[];a.push(this.taData[0]),t.forEach((function(t){var e=n.taData.find((function(e){return e.operation==t.operation}));e&&a.push(e)})),this.taData=a}}}]),e}()).\u0275fac=function(t){return new(t||r)},r.\u0275prov=m.Jb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),k=i("EiqI"),C=i("Wp6s"),x=i("NFeN"),_=i("bTqV"),D=i("Qu3c"),I=i("kmnG"),O=i("qFsG"),E=i("Dh3D"),B=i("M9IT"),N=i("/3uh"),M=["exListPaginator"],A=["taSort"];function P(t,e){if(1&t){var n=m.Ub();m.Tb(0,"button",8),m.ac("click",(function(){return m.wc(n),m.ec().gotoCreate()})),m.Kc(1," Create "),m.Sb()}}function F(t,e){if(1&t){var n=m.Ub();m.Tb(0,"h4",9),m.Kc(1," You haven't created any experiment yet, "),m.Tb(2,"a",10),m.ac("click",(function(){return m.wc(n),m.ec().gotoCreate()})),m.Kc(3,"create now."),m.Sb(),m.Sb()}}function K(t,e){1&t&&(m.Tb(0,"h4",9),m.Kc(1," Text analysis is not available in forecasting project. "),m.Sb())}function R(t,e){1&t&&m.Ob(0,"app-progress-spinner",33)}function L(t,e){1&t&&m.Ob(0,"th",34)}function j(t,e){if(1&t&&(m.Tb(0,"td",35),m.Kc(1),m.Sb()),2&t){var n=e.index;m.ec();var a=m.tc(32);m.Bb(1),m.Mc(" ",n+1+a.pageIndex*a.pageSize," ")}}function V(t,e){1&t&&(m.Tb(0,"th",36),m.Kc(1,"Experiment Name"),m.Sb())}function q(t,e){if(1&t){var n=m.Ub();m.Tb(0,"td",37),m.ac("click",(function(){m.wc(n);var t=e.$implicit;return m.ec(2).setExperimentsData(t,"viewMode")})),m.Kc(1),m.Sb()}if(2&t){var a=e.$implicit;m.Bb(1),m.Mc(" ",a.experimentName," ")}}function z(t,e){1&t&&(m.Tb(0,"th",36),m.Kc(1,"Experiment Id"),m.Sb())}function U(t,e){if(1&t&&(m.Tb(0,"td",35),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.Bb(1),m.Mc(" ",n._id," ")}}function W(t,e){1&t&&(m.Tb(0,"th",36),m.Kc(1,"Status"),m.Sb())}function $(t,e){if(1&t&&(m.Tb(0,"td",35),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.Bb(1),m.Mc(" ",n.status," ")}}function G(t,e){1&t&&(m.Tb(0,"th",36),m.Kc(1,"Created At"),m.Sb())}function H(t,e){if(1&t&&(m.Tb(0,"td",35),m.Kc(1),m.fc(2,"date"),m.Sb()),2&t){var n=e.$implicit;m.Bb(1),m.Mc(" ",m.hc(2,1,n.createdAt,"medium")," ")}}function X(t,e){1&t&&(m.Tb(0,"th",34),m.Kc(1,"Actions"),m.Sb())}function Y(t,e){if(1&t){var n=m.Ub();m.Tb(0,"td",35),m.Tb(1,"div",38),m.Tb(2,"button",39),m.ac("click",(function(){m.wc(n);var t=e.$implicit;return m.ec(2).setExperimentsData(t)})),m.Ob(3,"i",40),m.Sb(),m.Tb(4,"button",41),m.ac("click",(function(){m.wc(n);var t=e.$implicit;return m.ec(2).deleteHandler(t)})),m.Ob(5,"i",42),m.Sb(),m.Sb(),m.Sb()}}function Q(t,e){1&t&&m.Ob(0,"tr",43)}function J(t,e){1&t&&m.Ob(0,"tr",44)}function Z(t,e){if(1&t&&(m.Tb(0,"td",47),m.Kc(1),m.Sb()),2&t){m.ec(2);var n=m.tc(6);m.Bb(1),m.Mc(' No data matching the filter "',n.value,'" ')}}function tt(t,e){1&t&&(m.Tb(0,"td",47),m.Kc(1,"No data available in table"),m.Sb())}function et(t,e){if(1&t&&(m.Tb(0,"tr",45),m.Ic(1,Z,2,1,"td",46),m.Ic(2,tt,2,0,"td",46),m.Sb()),2&t){m.ec();var n=m.tc(6);m.Bb(1),m.kc("ngIf",""!=n.value),m.Bb(1),m.kc("ngIf",""==n.value)}}function nt(t,e){if(1&t){var n=m.Ub();m.Tb(0,"mat-card",11),m.Tb(1,"mat-card-content"),m.Tb(2,"mat-form-field",12),m.Tb(3,"mat-label"),m.Kc(4,"Search"),m.Sb(),m.Tb(5,"input",13,14),m.ac("keyup",(function(t){return m.wc(n),m.ec().applyFilter(t)})),m.Sb(),m.Sb(),m.Ic(7,R,1,0,"app-progress-spinner",15),m.Tb(8,"table",16,17),m.Rb(10,18),m.Ic(11,L,1,0,"th",19),m.Ic(12,j,2,1,"td",20),m.Qb(),m.Rb(13,21),m.Ic(14,V,2,0,"th",22),m.Ic(15,q,2,1,"td",23),m.Qb(),m.Rb(16,24),m.Ic(17,z,2,0,"th",22),m.Ic(18,U,2,1,"td",20),m.Qb(),m.Rb(19,25),m.Ic(20,W,2,0,"th",22),m.Ic(21,$,2,1,"td",20),m.Qb(),m.Rb(22,26),m.Ic(23,G,2,0,"th",22),m.Ic(24,H,3,4,"td",20),m.Qb(),m.Rb(25,27),m.Ic(26,X,2,0,"th",19),m.Ic(27,Y,6,0,"td",20),m.Qb(),m.Ic(28,Q,1,0,"tr",28),m.Ic(29,J,1,0,"tr",29),m.Ic(30,et,3,2,"tr",30),m.Sb(),m.Ob(31,"mat-paginator",31,32),m.Sb(),m.Sb()}if(2&t){var a=m.ec();m.Bb(7),m.kc("ngIf",a.showSpinner),m.Bb(1),m.kc("dataSource",a.dataSource),m.Bb(20),m.kc("matHeaderRowDef",a.displayedColumns),m.Bb(1),m.kc("matRowDefColumns",a.displayedColumns),m.Bb(2),m.kc("pageSizeOptions",a.pageSizeOptions)}}var at,ot=i("GUC0"),it=((at=function(){function t(e,a,o,i,r,s,l,c,u){n(this,t),this._toaster=e,this._localStorage=a,this._spinner=o,this._dialog=i,this._sanitizer=r,this._textAnalysis=s,this._taDataStore=l,this._schedular=c,this.route=u,this.dataSource=new d.p,this.pageSizeOptions=[10,15,20],this.displayedColumns=[],this.unsubscribe$=new p.b,this.showSpinner=!1,this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this.displayedColumns=["srNo","experimentName","experimentId","status","createdAt","actions"]}return o(t,[{key:"paginator",set:function(t){this.dataSource.paginator=t}},{key:"sort",set:function(t){this.dataSource.sort=t}},{key:"ngOnInit",value:function(){this.getExperimentsList()}},{key:"getExperimentsList",value:function(){var t=this;this._textAnalysis.experimentList(this.project._id).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(e){t._spinner.stopSpinner(),e?(t.experimentsArray=e,t.dataSource.data=e,t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort,t.dataSource._updateChangeSubscription()):t._toaster.error("Cannot fetch experiments","Drift Settings")}),(function(e){t._spinner.stopSpinner(),t._toaster.error("Server Error","Text Analysis")}))}},{key:"deleteHandler",value:function(t){var e=this;ot({title:"Are you sure?",text:"You will not be able to recover this experiment!",icon:"warning",buttons:{cancel:{text:"Cancel",value:null,visible:!0,className:""},confirm:{text:"Yes, delete it!",value:!0,visible:!0,className:"bg-danger"}}}).then((function(n){n&&(e.showSpinner=!0,e._textAnalysis.deleteExperiment(e.project._id,t._id).subscribe((function(n){n?(e.experimentsArray=e.experimentsArray.filter((function(e){return e._id!==t._id})),e.dataSource.data=e.experimentsArray,e.dataSource._updateChangeSubscription(),e._toaster.success(t.experimentName+" deleted successfully","Text Analysis")):e._toaster.error("Cannot delete the experiment","Text Analysis"),e.showSpinner=!1}),(function(t){e.showSpinner=!1,e._toaster.error("Server Error","Text Analysis")})))}))}},{key:"clearTaData",value:function(){this._taDataStore.cleartaData()}},{key:"gotoCreate",value:function(){this._localStorage.deleteItem("experimentMode"),this.clearTaData(),this._spinner.stopSpinner(),this.route.navigate(["/project/textanalysis/create-experiment"])}},{key:"setExperimentsData",value:function(t,e){var n=this;this.clearTaData(),e?(this.experimentMode=e,this._localStorage.setItem("experimentMode",this.experimentMode)):this._localStorage.deleteItem("experimentMode"),this._taDataStore.setExperimentsData({uid:1,featureName:t.feature,fileId:t.fileId,operation:"inputData",output:t.inputText,experimentName:t.experimentName}),t.taskConfig.forEach((function(t){n._taDataStore.setExperimentsData({uid:t.uid,operation:t.operationName,taskConfig:t.parameters})})),this._spinner.stopSpinner(),this.route.navigate(["/project/textanalysis/create-experiment"],{queryParams:{experimentId:t._id}})}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||at)(m.Nb(f.c),m.Nb(h.a),m.Nb(g.a),m.Nb(v.c),m.Nb(S.b),m.Nb(y.a),m.Nb(w),m.Nb(k.a),m.Nb(l.e))},at.\u0275cmp=m.Hb({type:at,selectors:[["app-experiments-list"]],viewQuery:function(t,e){var n;1&t&&(m.Oc(M,!0),m.Oc(A,!0)),2&t&&(m.sc(n=m.bc())&&(e.paginator=n.first),m.sc(n=m.bc())&&(e.sort=n.first))},decls:13,vars:4,consts:[[1,"fluid-container","font-weight-lighter"],[1,"heading"],["mat-card-avatar",""],[1,"folder-icon"],[1,"heading-title"],["mat-raised-button","","class","btn-primary ml-auto","matTooltip","Create experiment",3,"click",4,"ngIf"],["class","text-center mt-5 font-weight-normal",4,"ngIf"],["class","setting-listing mt-5 ps-4",4,"ngIf"],["mat-raised-button","","matTooltip","Create experiment",1,"btn-primary","ml-auto",3,"click"],[1,"text-center","mt-5","font-weight-normal"],["href","#",1,"text-decoration-none",3,"click"],[1,"setting-listing","mt-5","ps-4"],[1,"search-input"],["matInput","",3,"keyup"],["input",""],["class","spinner",4,"ngIf"],["mat-table","","matSort","","matSortActive","createdAt","matSortDirection","desc","matSortDisableClear","",1,"mt-2",3,"dataSource"],["taSort","matSort"],["matColumnDef","srNo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","experimentName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","style","cursor: pointer",3,"click",4,"matCellDef"],["matColumnDef","experimentId"],["matColumnDef","status"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mt-2",3,"pageSizeOptions"],["exListPaginator",""],[1,"spinner"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-cell","",2,"cursor","pointer",3,"click"],[1,"action-buttons","d-flex"],["mat-icon-button","","matTooltip","Clone experiment",3,"click"],[1,"far","fa-copy"],["mat-icon-button","","matTooltip","Delete experiment",1,"delete-button",3,"click"],[1,"fa","fa-trash"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["class","mat-cell","colspan","4",4,"ngIf"],["colspan","4",1,"mat-cell"]],template:function(t,e){1&t&&(m.Tb(0,"div",0),m.Tb(1,"mat-card",1),m.Tb(2,"mat-card-header"),m.Tb(3,"div",2),m.Tb(4,"mat-icon",3),m.Kc(5,"analytics"),m.Sb(),m.Sb(),m.Tb(6,"mat-card-title"),m.Tb(7,"h3",4),m.Kc(8,"Text Analysis"),m.Sb(),m.Sb(),m.Ic(9,P,2,0,"button",5),m.Sb(),m.Sb(),m.Ic(10,F,4,0,"h4",6),m.Ic(11,K,2,0,"h4",6),m.Ic(12,nt,33,5,"mat-card",7),m.Sb()),2&t&&(m.Bb(9),m.kc("ngIf","timeseries"!=e.project.type),m.Bb(1),m.kc("ngIf",!e.dataSource.data.length),m.Bb(1),m.kc("ngIf","timeseries"===e.project.type),m.Bb(1),m.kc("ngIf","timeseries"!==e.project.type&&e.dataSource.data.length))},directives:[C.a,C.f,C.c,x.a,C.m,s.t,_.b,D.b,C.d,I.c,I.g,O.b,d.o,E.a,d.c,d.i,d.b,d.k,d.n,d.l,B.a,N.a,d.h,d.a,E.b,d.j,d.m],pipes:[s.f],styles:[""]}),at),rt=i("3Pt+"),st=i("THC6");function lt(t,e){if(1&t){var n=m.Ub();m.Tb(0,"mat-icon",14,15),m.ac("mouseover",(function(){return m.wc(n),m.ec().mouseOverDownload()}))("mouseleave",(function(){return m.wc(n),m.ec().mouseLeaveDownload()})),m.Sb()}if(2&t){var a=m.ec();m.kc("color",a.downloadIconColor)}}function ct(t,e){1&t&&m.Ob(0,"i",16)}function ut(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Experiment name is required."),m.Sb())}function dt(t,e){if(1&t&&(m.Tb(0,"mat-form-field",17),m.Ob(1,"mat-label",18),m.Ob(2,"input",19),m.Ic(3,ut,2,0,"mat-error",13),m.Sb()),2&t){var n=m.ec();m.Bb(1),m.kc("innerText",n.saveDialogControl.value?"Experiment Name":"Add a name to experiment"),m.Bb(1),m.kc("formControl",n.saveDialogControl),m.Bb(1),m.kc("ngIf",n.saveDialogControl.touched&&n.saveDialogControl.hasError("required"))}}function pt(t,e){if(1&t&&m.Ob(0,"div",20),2&t){var n=m.ec();m.kc("innerHTML",n.graphContent,m.xc)}}function bt(t,e){1&t&&(m.Tb(0,"div",21),m.Kc(1," Please perform some experiments to save ! "),m.Sb())}function mt(t,e){1&t&&(m.Tb(0,"div",21),m.Kc(1," Please execute the experiments to save ! "),m.Sb())}function ft(t,e){1&t&&(m.Tb(0,"button",22),m.Kc(1," Close "),m.Sb())}function ht(t,e){if(1&t){var n=m.Ub();m.Tb(0,"button",23),m.ac("click",(function(){m.wc(n);var t=m.ec();return t.saveExperiment(t.saveDialogControl)})),m.Kc(1," Save "),m.Sb()}if(2&t){var a=m.ec();m.kc("disabled",a.saveDialogControl.hasError("required")&&a.saveDialogControl.hasError("required"))}}function gt(t,e){if(1&t){var n=m.Ub();m.Tb(0,"button",24),m.ac("click",(function(){m.wc(n);var t=m.ec();return t.saveAndApplyExperiment(t.saveDialogControl)})),m.Kc(1," Save and Apply"),m.Sb()}if(2&t){var a=m.ec();m.kc("disabled",a.saveDialogControl.hasError("required")&&a.saveDialogControl.hasError("required"))}}function vt(t,e){1&t&&(m.Tb(0,"mat-hint"),m.Kc(1,"Note: Save and apply button will save the experiment and apply the changes to the dataset."),m.Sb())}var St,yt=((St=function(){function t(e,a,o,i,r,s,l,c,u,d){n(this,t),this.data=e,this.route=a,this._localStorage=o,this._spinner=i,this._taDataStore=r,this._textAnalysis=s,this._toaster=l,this._textAnalysisDialog=c,this._socket=u,this._sanitizer=d,this.saveDialogControl=new rt.i("",rt.I.required),this.showSaveApplybtn=!1,this.dialogTitle=null,this.unsubscribe$=new p.b,this.showSaveError=!1,this.showExecutionError=!1,this.downloadIconColor="basic",this.graphFileName=null,this.downloadGraph=function(t){this.graphFileName=t+"_graph.html";var e=new Blob([this.data.data],{type:"application/html"});this.graphFileUrl=this._sanitizer.bypassSecurityTrustResourceUrl(window.URL.createObjectURL(e))},this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this.downloadGraph(e.showGraph)}return o(t,[{key:"ngOnInit",value:function(){var t=this;this._spinner.showSpinner(),this.data.showGraph?(this.dialogTitle="pos"==this.data.showGraph?"Dependency Graph":"rbm"==this.data.showGraph?"Matching Visualization":"ner"==this.data.showGraph?"Named Entity Visualization":"Save Experiment",this.graphContent=this._sanitizer.bypassSecurityTrustHtml(this.data.data)):(this.dialogTitle="Save Experiment",this.initSocket(),this.operationData=this._taDataStore.getAllOperationData(!0),this.operationData.length<2?(this.showSaveError=!0,this.showExecutionError=!1):this.operationData.every((function(t){return t.output}))?(this.showSaveError=!1,this.showExecutionError=!1,this.operationData.some((function(e){"inputData"===e.operation&&(e.featureName?(t.showSaveApplybtn=!0,t.featureName=e.featureName):(t.showSaveApplybtn=!1,t.featureName=null),t.inputData=e.output,t.inputFileName=e.fileName,t.inputFileId=e.fileId,t.dataSetDbObj=e.dataSetVal,t.childFileData=e.childFileData)}))):(this.showSaveError=!0,this.showExecutionError=!0)),this._spinner.stopSpinner()}},{key:"mouseOverDownload",value:function(){this.downloadIconColor="primary"}},{key:"mouseLeaveDownload",value:function(){this.downloadIconColor="basic"}},{key:"saveExperiment",value:function(t){var e=this;this._spinner.showSpinner(),this.operationData=this._taDataStore.getAllOperationData(),this.operationData.map((function(t){return t.taskConfig[0]}));var n=[];this.operationData.map((function(t){n.push({uid:t.uid,operationName:t.operation,parameters:t.taskConfig[0]})}));var a={experimentName:t.value,projectId:this.project._id,inputText:this.inputData,taskConfig:n};a.fileId=this.inputFileId?this.inputFileId:null,a.feature=this.featureName?this.featureName:null,this._textAnalysis.saveTextAnalysis(a).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(n){t.setValue(""),e._textAnalysisDialog.close(),e._spinner.stopSpinner(),e.route.navigate(["/project/textanalysis"]),e._spinner.stopSpinner(),e._toaster.success("Text analysis saved successfully","Text Analysis")}),(function(t){e._spinner.stopSpinner(),e._toaster.error("Server Error","Error saving text analysis")}))}},{key:"saveAndApplyExperiment",value:function(t){var e,n=this;this._spinner.showSpinner(),this.operationData=this._taDataStore.getAllOperationData();var a=this.operationData.map((function(t){return t.taskConfig[0]})),o=[];this.operationData.map((function(t){o.push({uid:t.uid,operationName:t.operation,parameters:t.taskConfig[0]})}));var i={experimentName:t.value,projectId:this.project._id,fileSource:"textAnalysis",dataGroupId:this.dataSetDbObj.datagroup_id,filePath:this.inputFileName,fileId:this.inputFileId,feature:this.featureName,inputText:this.inputData,fileSchema:this.dataSetDbObj.fileSchema,featureList:[this.featureName],taskConfig:a,operation:o};i.parentPipelineFilename=(null===(e=this.childFileData)||void 0===e?void 0:e.hasOwnProperty("currentEdaId"))?this.childFileData.currentEdaId.tasks[0].currentPipelineFilename:null,this._textAnalysis.saveApplyTextAnalysis(i).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(e){t.reset(),n._toaster.success("Text analysis started","Text Analysis")}),(function(t){n._spinner.stopSpinner(),n._toaster.error("Server Error","Error saving text analysis")}))}},{key:"initSocket",value:function(){var t=this;this._socket.listen("textAnalysisDone").subscribe((function(e){"completed"===e.status.status?(t._textAnalysisDialog.close(),t._spinner.stopSpinner(),t.route.navigate(["/project/textanalysis"]),t._toaster.success("Text analysis saved successfully","Text Analysis")):"failed"===e.status.status&&(t._textAnalysisDialog.close(),t._spinner.stopSpinner(),t.route.navigate(["/project/textanalysis"]),t._toaster.error(e.status.message,"Text Analysis")),t._spinner.stopSpinner()}),(function(e){t._spinner.stopSpinner(),t._toaster.error("Socket Error","Text Analysis")}))}},{key:"ngOnDestroy",value:function(){this._socket.removeListener("textAnalysisDone"),this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||St)(m.Nb(v.a),m.Nb(l.e),m.Nb(h.a),m.Nb(g.a),m.Nb(w),m.Nb(y.a),m.Nb(f.c),m.Nb(v.i),m.Nb(st.a),m.Nb(S.b))},St.\u0275cmp=m.Hb({type:St,selectors:[["app-text-analysis-dialog"]],decls:18,vars:13,consts:[["mat-dialog-title",""],[2,"float","right","cursor","pointer"],[2,"color","black",3,"href","download"],["class","fas fa-download","matTooltip","Download File","matTooltipPosition","above","matTooltipHideDelay","1000","style","font-size: 16px",3,"color","mouseover","mouseleave",4,"ngIf"],["mat-dialog-close","","id","times-close-icon","style","float: right; font-size: 16px; cursor: pointer","class","fa fa-times",4,"ngIf"],["mat-dialog-content",""],["style","height: 70px",4,"ngIf"],["style","min-height: 70vh",3,"innerHTML",4,"ngIf"],["style","color: red; text-align: center",4,"ngIf"],["mat-dialog-actions","",2,"margin-top","10px"],["id","saveBtn","mat-raised-button","","mat-dialog-close","","cdkFocusInitial","",4,"ngIf"],["id","saveBtn","mat-raised-button","","cdkFocusInitial","",3,"disabled","click",4,"ngIf"],["id","saveAndApplyBtn","mat-raised-button","","cdkFocusInitial","",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["matTooltip","Download File","matTooltipPosition","above","matTooltipHideDelay","1000",1,"fas","fa-download",2,"font-size","16px",3,"color","mouseover","mouseleave"],["tooltip","matTooltip"],["mat-dialog-close","","id","times-close-icon",1,"fa","fa-times",2,"float","right","font-size","16px","cursor","pointer"],[2,"height","70px"],[3,"innerText"],["matInput","",3,"formControl"],[2,"min-height","70vh",3,"innerHTML"],[2,"color","red","text-align","center"],["id","saveBtn","mat-raised-button","","mat-dialog-close","","cdkFocusInitial",""],["id","saveBtn","mat-raised-button","","cdkFocusInitial","",3,"disabled","click"],["id","saveAndApplyBtn","mat-raised-button","","cdkFocusInitial","",3,"disabled","click"]],template:function(t,e){1&t&&(m.Tb(0,"h1",0),m.Kc(1),m.Tb(2,"span",1),m.Tb(3,"a",2),m.Ic(4,lt,2,1,"mat-icon",3),m.Sb(),m.Kc(5,"\xa0\xa0\xa0\xa0 "),m.Ic(6,ct,1,0,"i",4),m.Sb(),m.Sb(),m.Tb(7,"div",5),m.Ic(8,dt,4,3,"mat-form-field",6),m.Ic(9,pt,1,1,"div",7),m.Ic(10,bt,2,0,"div",8),m.Ic(11,mt,2,0,"div",8),m.Sb(),m.Tb(12,"div",9),m.Ic(13,ft,2,0,"button",10),m.Ic(14,ht,2,1,"button",11),m.Ic(15,gt,2,1,"button",12),m.Kc(16,"\xa0\xa0\xa0\xa0"),m.Ic(17,vt,2,0,"mat-hint",13),m.Sb()),2&t&&(m.Bb(1),m.Mc(" ",e.dialogTitle," "),m.Bb(2),m.kc("href",e.graphFileUrl,m.zc)("download",e.graphFileName),m.Bb(1),m.kc("ngIf",e.data.showGraph&&!e.showSaveError),m.Bb(2),m.kc("ngIf",!e.data.showGraph),m.Bb(2),m.kc("ngIf",!e.data.showGraph&&!e.showSaveError),m.Bb(1),m.kc("ngIf",e.data.showGraph&&!e.showSaveError),m.Bb(1),m.kc("ngIf",e.showSaveError&&!e.showExecutionError),m.Bb(1),m.kc("ngIf",e.showSaveError&&e.showExecutionError),m.Bb(2),m.kc("ngIf",e.data.showGraph&&!e.showSaveError),m.Bb(1),m.kc("ngIf",!e.data.showGraph&&!e.showSaveError),m.Bb(1),m.kc("ngIf",!e.data.showGraph&&e.showSaveApplybtn&&!e.showSaveError),m.Bb(2),m.kc("ngIf",!e.data.showGraph&&e.showSaveApplybtn&&!e.showSaveError))},directives:[v.j,s.t,v.g,v.d,x.a,D.b,v.e,I.c,I.g,O.b,rt.d,rt.u,rt.j,I.b,_.b,I.f],styles:["button#saveAndApplyBtn[_ngcontent-%COMP%]:enabled, button#saveBtn[_ngcontent-%COMP%]:enabled{background-color:#08509d;color:#fff}#times-close-icon[_ngcontent-%COMP%]:hover{color:red}"]}),St),Tt=i("kYjS"),wt=i("d3UM"),kt=i("FKr1"),Ct=i("8NN1");function xt(t,e){if(1&t&&(m.Tb(0,"mat-option",19),m.Kc(1),m.fc(2,"dropFileExtension"),m.Sb()),2&t){var n=e.$implicit;m.kc("value",n._id),m.Bb(1),m.Mc(" ",m.hc(2,2,n.name,n.fileSource)," ")}}function _t(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Selected dataset doesn't contain text feature"),m.Sb())}function Dt(t,e){if(1&t&&(m.Tb(0,"mat-option",19),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.kc("value",n.colName),m.Bb(1),m.Mc(" ",n.colName," ")}}function It(t,e){if(1&t){var n=m.Ub();m.Tb(0,"div",4),m.Tb(1,"h4",1),m.Kc(2,"Select Feature"),m.Sb(),m.Tb(3,"mat-form-field",5),m.Ob(4,"mat-label",6),m.Tb(5,"mat-select",7),m.ac("ngModelChange",(function(t){return m.wc(n),m.ec().selectedFeature=t}))("ngModelChange",(function(){m.wc(n);var t=m.ec();return t.onChangeFeature(t.selectedFeature)})),m.Ic(6,Dt,2,2,"mat-option",8),m.Sb(),m.Sb(),m.Sb()}if(2&t){var a=m.ec();m.Bb(4),m.kc("innerText",a.selectedFeature?"Feature":"Choose a Feature!"),m.Bb(1),m.kc("ngModel",a.selectedFeature),m.Bb(1),m.kc("ngForOf",a.featureArray)}}function Ot(t,e){if(1&t){var n=m.Ub();m.Tb(0,"mat-icon",20),m.ac("click",(function(){return m.wc(n),m.ec().refresh()})),m.Sb()}if(2&t){var a=m.ec();m.kc("color",a.isBlur?"basic":"primary")}}var Et,Bt=((Et=function(){function t(e,a,o,i,r,s,l){var c=this;n(this,t),this._data=e,this._toaster=a,this._localStorage=o,this._spinner=i,this._textAnalysis=r,this._taDataStore=s,this.route=l,this.unsubscribe$=new p.b,this.showSpinner=!1,this.isBlur=!0,this.filename="",this.showError=!1,this.featureDescription="",this.setExperimentsData=function(t){var e=this;null==t.fileId&&(this.featureDescription=t.inputText),this.onChangeDataset(t.fileId,!0,t.feature),this.selectedDataSetVal&&this._taDataStore.getAllOperationData(!0).forEach((function(t){"inputData"==t.operation&&(t.fileName=e.selectedDataSetVal.name,t.dataSetVal=e.selectedDataSetVal,e.selectedDataSet=t.fileId,e.featureDescription=t.output,e.filename=e.selectedDataSetVal.name)}))},this.onTextChange=function(t){this.filename=this.childFileData&&"eda_"==this.childFileData.fileSource?this.childFileData.filename:this.selectedDataSetVal.name,this._taDataStore.saveOperationOutput({uid:1,operation:"inputData",output:t,featureName:this.selectedFeature,fileName:this.filename,fileId:this.selectedDataSetVal._id,dataSetVal:this.selectedDataSetVal,childFileData:this.childFileData})},this.onChangeFeature=function(t){c.filename="",c.filename=c.childFileData&&"eda_"==c.childFileData.fileSource?c.childFileData.filename:c.selectedDataSetVal.name,c.selectedFeature=t,c.refresh()},this.refresh=function(){c.selectedFeature&&c.selectedFeature.length>0&&(c._spinner.showSpinner(),c._textAnalysis.listFeatureDetails(c.project._id,c.selectedFeature,c.filename).pipe(Object(b.a)(c.unsubscribe$)).subscribe((function(t){c.featureDescription=t.data,c._taDataStore.saveOperationOutput({uid:1,operation:"inputData",output:c.featureDescription,featureName:c.selectedFeature,fileName:c.filename,fileId:c.selectedDataSetVal._id,dataSetVal:c.selectedDataSetVal,childFileData:c.childFileData}),c._spinner.stopSpinner()}),(function(t){c._spinner.stopSpinner(),c._toaster.error("Error fetching text","Text Analysis")})))},this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user")}return o(t,[{key:"ngOnInit",value:function(){this._spinner.showSpinner(),this.getDataSetList()}},{key:"getDataSetList",value:function(){var t=this;this._data.getAllProjectDatas(this.project._id).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(e){t._spinner.stopSpinner(),e?(t.dataSetArray=e[0].filesList.filter((function(t){return"upload_retrained"!==t.fileSource})),t.setValuesAfterRefresh()):t._toaster.error("Cannot fetch all data set","Text Analysis")}),(function(e){t._spinner.stopSpinner(),t._toaster.error("Server Error","Text Analysis")}))}},{key:"setValuesAfterRefresh",value:function(){var t=this;this._localStorage.getItem("experimentMode"),this._textAnalysis.experimentList(this.project._id).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(e){t.experimentsList=e,t.experimentsList.forEach((function(e){e._id==t.route.snapshot.queryParams.experimentId&&t.setExperimentsData(e)}))}),(function(e){t._spinner.stopSpinner(),t._toaster.error("Server Error","Text Analysis")}))}},{key:"onChangeDataset",value:function(t,e,n){var a=this;this._spinner.showSpinner(),this.selectedDataSetVal=this.dataSetArray.find((function(e){return e._id==t})),null!==t&&this._data.getAllChildDatasets(this.project._id,t).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(t){t?(t.length>0&&t[0].currentEdaId?(a.childFileData=t[0],a.edaData=t[0].currentEdaId,a.featureArray=a.edaData.edaSummary.filter((function(t){return"Text"==t.dataType}))):(a.edaData=a.selectedDataSetVal.fileSchema,a.featureArray=a.edaData.filter((function(t){return"Text"==t.dataType}))),a.showError=!a.featureArray.length):a._toaster.error("Cannot fetch all data set","Text Analysis"),e&&(a.selectedFeature=n),a._spinner.stopSpinner()}),(function(t){a._spinner.stopSpinner(),a._toaster.error("Server Error","Text Analysis")}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||Et)(m.Nb(Tt.a),m.Nb(f.c),m.Nb(h.a),m.Nb(g.a),m.Nb(y.a),m.Nb(w),m.Nb(l.a))},Et.\u0275cmp=m.Hb({type:Et,selectors:[["app-experiment-input"]],inputs:{operationList:"operationList"},decls:27,vars:8,consts:[["id","ta-input-panel",3,"expanded"],[1,"font-weight-lighter"],[1,"row","d-flex","justify-content-around",2,"position","relative"],[1,"col-md-4"],[1,"col-md-12"],["appearance","fill"],[3,"innerText"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","col-md-12",4,"ngIf"],[1,"col-md-1","text-center"],[2,"position","absolute","top","73px","left","16px","text-align","center","color","#454545","border-radius","50%","border","2px solid #454545","width","50px","height","50px","opacity","1","background-color","whitesmoke","z-index","999"],[2,"padding-top","10px","cursor","default"],[2,"width","2px","height","200px","background-color","#454545","position","absolute","left","40px"],[1,"col-md-7"],["appearance","outline"],["class","\n            material-icons\n            mdc-text-field__icon mdc-text-field__icon--leading\n            fas\n            fa-sync-alt\n          ","tabindex","0","style","\n            float: right;\n            font-size: 15px;\n            width: 25px;\n            height: 25px;\n            text-align: center;\n            background-color: white;\n            margin-top: -25px;\n          ","role","button",3,"color","click",4,"ngIf"],["matInput","","placeholder","Enter some text here!","rows","7%",3,"ngModel","ngModelChange","blur","focus"],[3,"value"],["tabindex","0","role","button",1,"material-icons","mdc-text-field__icon","mdc-text-field__icon--leading","fas","fa-sync-alt",2,"float","right","font-size","15px","width","25px","height","25px","text-align","center","background-color","white","margin-top","-25px",3,"color","click"]],template:function(t,e){1&t&&(m.Tb(0,"mat-expansion-panel",0),m.Tb(1,"mat-expansion-panel-header"),m.Tb(2,"h4",1),m.Tb(3,"mat-panel-title"),m.Kc(4,"Input Data"),m.Sb(),m.Sb(),m.Sb(),m.Tb(5,"div",2),m.Tb(6,"div",3),m.Tb(7,"div",4),m.Tb(8,"h4",1),m.Kc(9,"Select File"),m.Sb(),m.Tb(10,"mat-form-field",5),m.Ob(11,"mat-label",6),m.Tb(12,"mat-select",7),m.ac("ngModelChange",(function(t){return e.selectedDataSet=t}))("ngModelChange",(function(){return e.onChangeDataset(e.selectedDataSet)})),m.Ic(13,xt,3,5,"mat-option",8),m.Sb(),m.Sb(),m.Ic(14,_t,2,0,"mat-error",9),m.Sb(),m.Ic(15,It,7,3,"div",10),m.Sb(),m.Tb(16,"div",11),m.Tb(17,"div",12),m.Tb(18,"h3",13),m.Kc(19,"or"),m.Sb(),m.Sb(),m.Ob(20,"div",14),m.Sb(),m.Tb(21,"div",15),m.Tb(22,"mat-form-field",16),m.Tb(23,"mat-label"),m.Kc(24,"Enter Text "),m.Sb(),m.Ic(25,Ot,1,1,"mat-icon",17),m.Tb(26,"textarea",18),m.ac("ngModelChange",(function(t){return e.featureDescription=t}))("blur",(function(){return e.isBlur=!0}))("focus",(function(){return e.isBlur=!1}))("ngModelChange",(function(){return e.onTextChange(e.featureDescription)})),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb()),2&t&&(m.kc("expanded",!0),m.Bb(11),m.kc("innerText",e.selectedDataSet?"File":"Choose a file"),m.Bb(1),m.kc("ngModel",e.selectedDataSet),m.Bb(1),m.kc("ngForOf",e.dataSetArray),m.Bb(1),m.kc("ngIf",e.showError),m.Bb(1),m.kc("ngIf",e.selectedDataSet&&e.featureArray&&e.featureArray.length),m.Bb(10),m.kc("ngIf",e.selectedFeature&&e.featureDescription),m.Bb(1),m.kc("ngModel",e.featureDescription))},directives:[u.c,u.g,u.h,I.c,I.g,wt.a,rt.u,rt.x,s.s,s.t,O.b,rt.d,kt.o,I.b,x.a],pipes:[Ct.a],styles:["mat-expansion-panel#ta-input-panel[_ngcontent-%COMP%]{margin-left:-12px!important;margin-right:-12px!important;padding:0!important}"]}),Et);function Nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(n),!0).forEach((function(e){Pt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ft(){return(Ft=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function Kt(t,e){if(null==t)return{};var n,a,o=function(t,e){if(null==t)return{};var n,a,o={},i=Object.keys(t);for(a=0;a<i.length;a++)e.indexOf(n=i[a])>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)e.indexOf(n=i[a])>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Rt(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var Lt=Rt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),jt=Rt(/Edge/i),Vt=Rt(/firefox/i),qt=Rt(/safari/i)&&!Rt(/chrome/i)&&!Rt(/android/i),zt=Rt(/iP(ad|od|hone)/i),Ut=Rt(/chrome/i)&&Rt(/android/i),Wt={capture:!1,passive:!1};function $t(t,e,n){t.addEventListener(e,n,!Lt&&Wt)}function Gt(t,e,n){t.removeEventListener(e,n,!Lt&&Wt)}function Ht(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(n){return!1}return!1}}function Xt(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Yt(t,e,n,a){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&Ht(t,e):Ht(t,e))||a&&t===n)return t;if(t===n)break}while(t=Xt(t))}return null}var Qt,Jt=/\s+/g;function Zt(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var a=(" "+t.className+" ").replace(Jt," ").replace(" "+e+" "," ");t.className=(a+(n?" "+e:"")).replace(Jt," ")}}function te(t,e,n){var a=t&&t.style;if(a){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in a||-1!==e.indexOf("webkit")||(e="-webkit-"+e),a[e]=n+("string"==typeof n?"":"px")}}function ee(t,e){var n="";if("string"==typeof t)n=t;else do{var a=te(t,"transform");a&&"none"!==a&&(n=a+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function ne(t,e,n){if(t){var a=t.getElementsByTagName(e),o=0,i=a.length;if(n)for(;o<i;o++)n(a[o],o);return a}return[]}function ae(){return document.scrollingElement||document.documentElement}function oe(t,e,n,a,o){if(t.getBoundingClientRect||t===window){var i,r,s,l,c,u,d;if(t!==window&&t.parentNode&&t!==ae()?(r=(i=t.getBoundingClientRect()).top,s=i.left,l=i.bottom,c=i.right,u=i.height,d=i.width):(r=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!Lt))do{if(o&&o.getBoundingClientRect&&("none"!==te(o,"transform")||n&&"static"!==te(o,"position"))){var p=o.getBoundingClientRect();r-=p.top+parseInt(te(o,"border-top-width")),s-=p.left+parseInt(te(o,"border-left-width")),l=r+i.height,c=s+i.width;break}}while(o=o.parentNode);if(a&&t!==window){var b=ee(o||t),m=b&&b.a,f=b&&b.d;b&&(l=(r/=f)+(u/=f),c=(s/=m)+(d/=m))}return{top:r,left:s,bottom:l,right:c,width:d,height:u}}}function ie(t,e,n){for(var a=ue(t,!0),o=oe(t)[e];a;){var i=oe(a)[n];if(!("top"===n||"left"===n?o>=i:o<=i))return a;if(a===ae())break;a=ue(a,!1)}return!1}function re(t,e,n,a){for(var o=0,i=0,r=t.children;i<r.length;){if("none"!==r[i].style.display&&r[i]!==bn.ghost&&(a||r[i]!==bn.dragged)&&Yt(r[i],n.draggable,t,!1)){if(o===e)return r[i];o++}i++}return null}function se(t,e){for(var n=t.lastElementChild;n&&(n===bn.ghost||"none"===te(n,"display")||e&&!Ht(n,e));)n=n.previousElementSibling;return n||null}function le(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===bn.clone||e&&!Ht(t,e)||n++;return n}function ce(t){var e=0,n=0,a=ae();if(t)do{var o=ee(t);e+=t.scrollLeft*o.a,n+=t.scrollTop*o.d}while(t!==a&&(t=t.parentNode));return[e,n]}function ue(t,e){if(!t||!t.getBoundingClientRect)return ae();var n=t,a=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=te(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return ae();if(a||e)return n;a=!0}}}while(n=n.parentNode);return ae()}function de(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function pe(t,e){return function(){if(!Qt){var n=arguments,a=this;1===n.length?t.call(a,n[0]):t.apply(a,n),Qt=setTimeout((function(){Qt=void 0}),e)}}}function be(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function me(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var fe="Sortable"+(new Date).getTime(),he=[],ge={initializeByDefault:!0},ve={mount:function(t){for(var e in ge)ge.hasOwnProperty(e)&&!(e in t)&&(t[e]=ge[e]);he.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),he.push(t)},pluginEvent:function(t,e,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var o=t+"Global";he.forEach((function(a){e[a.pluginName]&&(e[a.pluginName][o]&&e[a.pluginName][o](Mt({sortable:e},n)),e.options[a.pluginName]&&e[a.pluginName][t]&&e[a.pluginName][t](Mt({sortable:e},n)))}))},initializePlugins:function(t,e,n,a){for(var o in he.forEach((function(a){var o=a.pluginName;if(t.options[o]||a.initializeByDefault){var i=new a(t,e,t.options);i.sortable=t,i.options=t.options,t[o]=i,Ft(n,i.defaults)}})),t.options)if(t.options.hasOwnProperty(o)){var i=this.modifyOption(t,o,t.options[o]);void 0!==i&&(t.options[o]=i)}},getEventProperties:function(t,e){var n={};return he.forEach((function(a){"function"==typeof a.eventProperties&&Ft(n,a.eventProperties.call(e[a.pluginName],t))})),n},modifyOption:function(t,e,n){var a;return he.forEach((function(o){t[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[e]&&(a=o.optionListeners[e].call(t[o.pluginName],n))})),a}},Se=["evt"],ye=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.evt,o=Kt(n,Se);ve.pluginEvent.bind(bn)(t,e,Mt({dragEl:we,parentEl:ke,ghostEl:Ce,rootEl:xe,nextEl:_e,lastDownEl:De,cloneEl:Ie,cloneHidden:Oe,dragStarted:qe,putSortable:Pe,activeSortable:bn.active,originalEvent:a,oldIndex:Ee,oldDraggableIndex:Ne,newIndex:Be,newDraggableIndex:Me,hideGhostForTarget:cn,unhideGhostForTarget:un,cloneNowHidden:function(){Oe=!0},cloneNowShown:function(){Oe=!1},dispatchSortableEvent:function(t){Te({sortable:e,name:t,originalEvent:a})}},o))};function Te(t){!function(t){var e=t.sortable,n=t.rootEl,a=t.name,o=t.targetEl,i=t.cloneEl,r=t.toEl,s=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,p=t.originalEvent,b=t.putSortable,m=t.extraEventProperties;if(e=e||n&&n[fe]){var f,h=e.options,g="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||Lt||jt?(f=document.createEvent("Event")).initEvent(a,!0,!0):f=new CustomEvent(a,{bubbles:!0,cancelable:!0}),f.to=r||n,f.from=s||n,f.item=o||n,f.clone=i,f.oldIndex=l,f.newIndex=c,f.oldDraggableIndex=u,f.newDraggableIndex=d,f.originalEvent=p,f.pullMode=b?b.lastPutMode:void 0;var v=Mt(Mt({},m),ve.getEventProperties(a,e));for(var S in v)f[S]=v[S];n&&n.dispatchEvent(f),h[g]&&h[g].call(e,f)}}(Mt({putSortable:Pe,cloneEl:Ie,targetEl:we,rootEl:xe,oldIndex:Ee,oldDraggableIndex:Ne,newIndex:Be,newDraggableIndex:Me},t))}var we,ke,Ce,xe,_e,De,Ie,Oe,Ee,Be,Ne,Me,Ae,Pe,Fe,Ke,Re,Le,je,Ve,qe,ze,Ue,We,$e,Ge=!1,He=!1,Xe=[],Ye=!1,Qe=!1,Je=[],Ze=!1,tn=[],en="undefined"!=typeof document,nn=zt,an=jt||Lt?"cssFloat":"float",on=en&&!Ut&&!zt&&"draggable"in document.createElement("div"),rn=function(){if(en){if(Lt)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),sn=function(t,e){var n=te(t),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=re(t,0,e),i=re(t,1,e),r=o&&te(o),s=i&&te(i),l=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+oe(o).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+oe(i).width;return"flex"===n.display?"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal":"grid"===n.display?n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":o&&r.float&&"none"!==r.float?!i||"both"!==s.clear&&s.clear!==("left"===r.float?"left":"right")?"horizontal":"vertical":o&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||l>=a&&"none"===n[an]||i&&"none"===n[an]&&l+c>a)?"vertical":"horizontal"},ln=function(t){function e(t,n){return function(a,o,i,r){if(null==t&&(n||a.options.group.name&&o.options.group.name&&a.options.group.name===o.options.group.name))return!0;if(null==t||!1===t)return!1;if(n&&"clone"===t)return t;if("function"==typeof t)return e(t(a,o,i,r),n)(a,o,i,r);var s=(n?a:o).options.group.name;return!0===t||"string"==typeof t&&t===s||t.join&&t.indexOf(s)>-1}}var n={},a=t.group;a&&"object"==At(a)||(a={name:a}),n.name=a.name,n.checkPull=e(a.pull,!0),n.checkPut=e(a.put),n.revertClone=a.revertClone,t.group=n},cn=function(){!rn&&Ce&&te(Ce,"display","none")},un=function(){!rn&&Ce&&te(Ce,"display","")};en&&document.addEventListener("click",(function(t){if(He)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),He=!1,!1}),!0);var dn=function(t){if(we){var e=(o=(t=t.touches?t.touches[0]:t).clientX,i=t.clientY,Xe.some((function(t){var e=t[fe].options.emptyInsertThreshold;if(e&&!se(t)){var n=oe(t);return o>=n.left-e&&o<=n.right+e&&i>=n.top-e&&i<=n.bottom+e?r=t:void 0}})),r);if(e){var n={};for(var a in t)t.hasOwnProperty(a)&&(n[a]=t[a]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[fe]._onDragOver(n)}}var o,i,r},pn=function(t){we&&we.parentNode[fe]._isOutsideThisEl(t.target)};function bn(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Ft({},e),t[fe]=this;var n,a,o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return sn(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==bn.supportPointer&&"PointerEvent"in window&&!qt,emptyInsertThreshold:5};for(var i in ve.initializePlugins(this,t,o),o)!(i in e)&&(e[i]=o[i]);for(var r in ln(e),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!e.forceFallback&&on,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?$t(t,"pointerdown",this._onTapStart):($t(t,"mousedown",this._onTapStart),$t(t,"touchstart",this._onTapStart)),this.nativeDraggable&&($t(t,"dragover",this),$t(t,"dragenter",this)),Xe.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ft(this,(a=[],{captureAnimationState:function(){a=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(t){if("none"!==te(t,"display")&&t!==bn.ghost){a.push({target:t,rect:oe(t)});var e=Mt({},a[a.length-1].rect);if(t.thisAnimationDuration){var n=ee(t,!0);n&&(e.top-=n.f,e.left-=n.e)}t.fromRect=e}}))},addAnimationState:function(t){a.push(t)},removeAnimationState:function(t){a.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var a in e)if(e.hasOwnProperty(a)&&e[a]===t[n][a])return Number(n);return-1}(a,{target:t}),1)},animateAll:function(t){var e=this;if(!this.options.animation)return clearTimeout(n),void("function"==typeof t&&t());var o=!1,i=0;a.forEach((function(t){var n=0,a=t.target,r=a.fromRect,s=oe(a),l=a.prevFromRect,c=a.prevToRect,u=t.rect,d=ee(a,!0);d&&(s.top-=d.f,s.left-=d.e),a.toRect=s,a.thisAnimationDuration&&de(l,s)&&!de(r,s)&&(u.top-s.top)/(u.left-s.left)==(r.top-s.top)/(r.left-s.left)&&(n=function(t,e,n,a){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*a.animation}(u,l,c,e.options)),de(s,r)||(a.prevFromRect=r,a.prevToRect=s,n||(n=e.options.animation),e.animate(a,u,s,n)),n&&(o=!0,i=Math.max(i,n),clearTimeout(a.animationResetTimer),a.animationResetTimer=setTimeout((function(){a.animationTime=0,a.prevFromRect=null,a.fromRect=null,a.prevToRect=null,a.thisAnimationDuration=null}),n),a.thisAnimationDuration=n)})),clearTimeout(n),o?n=setTimeout((function(){"function"==typeof t&&t()}),i):"function"==typeof t&&t(),a=[]},animate:function(t,e,n,a){if(a){te(t,"transition",""),te(t,"transform","");var o=ee(this.el),i=(e.left-n.left)/(o&&o.a||1),r=(e.top-n.top)/(o&&o.d||1);t.animatingX=!!i,t.animatingY=!!r,te(t,"transform","translate3d("+i+"px,"+r+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),te(t,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),te(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){te(t,"transition",""),te(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),a)}}}))}function mn(t,e,n,a,o,i,r,s){var l,c,u=t[fe],d=u.options.onMove;return!window.CustomEvent||Lt||jt?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=n,l.draggedRect=a,l.related=o||e,l.relatedRect=i||oe(e),l.willInsertAfter=s,l.originalEvent=r,t.dispatchEvent(l),d&&(c=d.call(u,l,r)),c}function fn(t){t.draggable=!1}function hn(){Ze=!1}function gn(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,a=0;n--;)a+=e.charCodeAt(n);return a.toString(36)}function vn(t){return setTimeout(t,0)}function Sn(t){return clearTimeout(t)}bn.prototype={constructor:bn,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(ze=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,we):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,a=this.options,o=a.preventOnFilter,i=t.type,r=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(r||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,c=a.filter;if(function(t){tn.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var a=e[n];a.checked&&tn.push(a)}}(n),!we&&!(/mousedown|pointerdown/.test(i)&&0!==t.button||a.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!qt||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=Yt(s,a.draggable,n,!1))&&s.animated||De===s)){if(Ee=le(s),Ne=le(s,a.draggable),"function"==typeof c){if(c.call(this,t,s,this))return Te({sortable:e,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),ye("filter",e,{evt:t}),void(o&&t.cancelable&&t.preventDefault())}else if(c&&(c=c.split(",").some((function(a){if(a=Yt(l,a.trim(),n,!1))return Te({sortable:e,rootEl:a,name:"filter",targetEl:s,fromEl:n,toEl:n}),ye("filter",e,{evt:t}),!0}))))return void(o&&t.cancelable&&t.preventDefault());a.handle&&!Yt(l,a.handle,n,!1)||this._prepareDragStart(t,r,s)}}},_prepareDragStart:function(t,e,n){var a,o=this,i=o.el,r=o.options,s=i.ownerDocument;if(n&&!we&&n.parentNode===i){var l=oe(n);if(xe=i,ke=(we=n).parentNode,_e=we.nextSibling,De=n,Ae=r.group,bn.dragged=we,je=(Fe={target:we,clientX:(e||t).clientX,clientY:(e||t).clientY}).clientX-l.left,Ve=Fe.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,we.style["will-change"]="all",a=function(){ye("delayEnded",o,{evt:t}),bn.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!Vt&&o.nativeDraggable&&(we.draggable=!0),o._triggerDragStart(t,e),Te({sortable:o,name:"choose",originalEvent:t}),Zt(we,r.chosenClass,!0))},r.ignore.split(",").forEach((function(t){ne(we,t.trim(),fn)})),$t(s,"dragover",dn),$t(s,"mousemove",dn),$t(s,"touchmove",dn),$t(s,"mouseup",o._onDrop),$t(s,"touchend",o._onDrop),$t(s,"touchcancel",o._onDrop),Vt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,we.draggable=!0),ye("delayStart",this,{evt:t}),!r.delay||r.delayOnTouchOnly&&!e||this.nativeDraggable&&(jt||Lt))a();else{if(bn.eventCanceled)return void this._onDrop();$t(s,"mouseup",o._disableDelayedDrag),$t(s,"touchend",o._disableDelayedDrag),$t(s,"touchcancel",o._disableDelayedDrag),$t(s,"mousemove",o._delayedDragTouchMoveHandler),$t(s,"touchmove",o._delayedDragTouchMoveHandler),r.supportPointer&&$t(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(a,r.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){we&&fn(we),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Gt(t,"mouseup",this._disableDelayedDrag),Gt(t,"touchend",this._disableDelayedDrag),Gt(t,"touchcancel",this._disableDelayedDrag),Gt(t,"mousemove",this._delayedDragTouchMoveHandler),Gt(t,"touchmove",this._delayedDragTouchMoveHandler),Gt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?$t(document,this.options.supportPointer?"pointermove":e?"touchmove":"mousemove",this._onTouchMove):($t(we,"dragend",this),$t(xe,"dragstart",this._onDragStart));try{document.selection?vn((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(t,e){if(Ge=!1,xe&&we){ye("dragStarted",this,{evt:e}),this.nativeDraggable&&$t(document,"dragover",pn);var n=this.options;!t&&Zt(we,n.dragClass,!1),Zt(we,n.ghostClass,!0),bn.active=this,t&&this._appendGhost(),Te({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Ke){this._lastX=Ke.clientX,this._lastY=Ke.clientY,cn();for(var t=document.elementFromPoint(Ke.clientX,Ke.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Ke.clientX,Ke.clientY))!==e;)e=t;if(we.parentNode[fe]._isOutsideThisEl(t),e)do{if(e[fe]&&e[fe]._onDragOver({clientX:Ke.clientX,clientY:Ke.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break;t=e}while(e=e.parentNode);un()}},_onTouchMove:function(t){if(Fe){var e=this.options,n=e.fallbackTolerance,a=e.fallbackOffset,o=t.touches?t.touches[0]:t,i=Ce&&ee(Ce,!0),r=Ce&&i&&i.a,s=Ce&&i&&i.d,l=nn&&$e&&ce($e),c=(o.clientX-Fe.clientX+a.x)/(r||1)+(l?l[0]-Je[0]:0)/(r||1),u=(o.clientY-Fe.clientY+a.y)/(s||1)+(l?l[1]-Je[1]:0)/(s||1);if(!bn.active&&!Ge){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(Ce){i?(i.e+=c-(Re||0),i.f+=u-(Le||0)):i={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");te(Ce,"webkitTransform",d),te(Ce,"mozTransform",d),te(Ce,"msTransform",d),te(Ce,"transform",d),Re=c,Le=u,Ke=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Ce){var t=this.options.fallbackOnBody?document.body:xe,e=oe(we,!0,nn,!0,t),n=this.options;if(nn){for($e=t;"static"===te($e,"position")&&"none"===te($e,"transform")&&$e!==document;)$e=$e.parentNode;$e!==document.body&&$e!==document.documentElement?($e===document&&($e=ae()),e.top+=$e.scrollTop,e.left+=$e.scrollLeft):$e=ae(),Je=ce($e)}Zt(Ce=we.cloneNode(!0),n.ghostClass,!1),Zt(Ce,n.fallbackClass,!0),Zt(Ce,n.dragClass,!0),te(Ce,"transition",""),te(Ce,"transform",""),te(Ce,"box-sizing","border-box"),te(Ce,"margin",0),te(Ce,"top",e.top),te(Ce,"left",e.left),te(Ce,"width",e.width),te(Ce,"height",e.height),te(Ce,"opacity","0.8"),te(Ce,"position",nn?"absolute":"fixed"),te(Ce,"zIndex","100000"),te(Ce,"pointerEvents","none"),bn.ghost=Ce,t.appendChild(Ce),te(Ce,"transform-origin",je/parseInt(Ce.style.width)*100+"% "+Ve/parseInt(Ce.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,a=t.dataTransfer,o=n.options;ye("dragStart",this,{evt:t}),bn.eventCanceled?this._onDrop():(ye("setupClone",this),bn.eventCanceled||((Ie=me(we)).draggable=!1,Ie.style["will-change"]="",this._hideClone(),Zt(Ie,this.options.chosenClass,!1),bn.clone=Ie),n.cloneId=vn((function(){ye("clone",n),bn.eventCanceled||(n.options.removeCloneOnHide||xe.insertBefore(Ie,we),n._hideClone(),Te({sortable:n,name:"clone"}))})),!e&&Zt(we,o.dragClass,!0),e?(He=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Gt(document,"mouseup",n._onDrop),Gt(document,"touchend",n._onDrop),Gt(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",o.setData&&o.setData.call(n,a,we)),$t(document,"drop",n),te(we,"transform","translateZ(0)")),Ge=!0,n._dragStartId=vn(n._dragStarted.bind(n,e,t)),$t(document,"selectstart",n),qe=!0,qt&&te(document.body,"user-select","none"))},_onDragOver:function(t){var e,n,a,o,i=this.el,r=t.target,s=this.options,l=s.group,c=bn.active,u=Ae===l,d=s.sort,p=Pe||c,b=this,m=!1;if(!Ze){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),r=Yt(r,s.draggable,i,!0),O("dragOver"),bn.eventCanceled)return m;if(we.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||b._ignoreWhileAnimating===r)return B(!1);if(He=!1,c&&!s.disabled&&(u?d||(a=ke!==xe):Pe===this||(this.lastPutMode=Ae.checkPull(this,c,we,t))&&l.checkPut(this,c,we,t))){if(o="vertical"===this._getDirection(t,r),e=oe(we),O("dragOverValid"),bn.eventCanceled)return m;if(a)return ke=xe,E(),this._hideClone(),O("revert"),bn.eventCanceled||(_e?xe.insertBefore(we,_e):xe.appendChild(we)),B(!0);var f=se(i,s.draggable);if(!f||function(t,e,n){var a=oe(se(n.el,n.options.draggable));return e?t.clientX>a.right+10||t.clientX<=a.right&&t.clientY>a.bottom&&t.clientX>=a.left:t.clientX>a.right&&t.clientY>a.top||t.clientX<=a.right&&t.clientY>a.bottom+10}(t,o,this)&&!f.animated){if(f===we)return B(!1);if(f&&i===t.target&&(r=f),r&&(n=oe(r)),!1!==mn(xe,i,we,e,r,n,t,!!r))return E(),i.appendChild(we),ke=i,N(),B(!0)}else if(f&&function(t,e,n){var a=oe(re(n.el,0,n.options,!0));return e?t.clientX<a.left-10||t.clientY<a.top&&t.clientX<a.right:t.clientY<a.top-10||t.clientY<a.bottom&&t.clientX<a.left}(t,o,this)){var h=re(i,0,s,!0);if(h===we)return B(!1);if(n=oe(r=h),!1!==mn(xe,i,we,e,r,n,t,!1))return E(),i.insertBefore(we,h),ke=i,N(),B(!0)}else if(r.parentNode===i){n=oe(r);var g,v,S,y=we.parentNode!==i,T=!function(t,e,n){var a=n?t.left:t.top,o=n?e.left:e.top;return a===o||(n?t.right:t.bottom)===(n?e.right:e.bottom)||a+(n?t.width:t.height)/2===o+(n?e.width:e.height)/2}(we.animated&&we.toRect||e,r.animated&&r.toRect||n,o),w=o?"top":"left",k=ie(r,"top","top")||ie(we,"top","top"),C=k?k.scrollTop:void 0;if(ze!==r&&(v=n[w],Ye=!1,Qe=!T&&s.invertSwap||y),0!==(g=function(t,e,n,a,o,i,r,s){var l=a?t.clientY:t.clientX,c=a?n.height:n.width,u=a?n.top:n.left,d=a?n.bottom:n.right,p=!1;if(!r)if(s&&We<c*o){if(!Ye&&(1===Ue?l>u+c*i/2:l<d-c*i/2)&&(Ye=!0),Ye)p=!0;else if(1===Ue?l<u+We:l>d-We)return-Ue}else if(l>u+c*(1-o)/2&&l<d-c*(1-o)/2)return function(t){return le(we)<le(t)?1:-1}(e);return(p=p||r)&&(l<u+c*i/2||l>d-c*i/2)?l>u+c/2?1:-1:0}(t,r,n,o,T?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,Qe,ze===r))){var x=le(we);do{S=ke.children[x-=g]}while(S&&("none"===te(S,"display")||S===Ce))}if(0===g||S===r)return B(!1);ze=r,Ue=g;var _=r.nextElementSibling,D=!1,I=mn(xe,i,we,e,r,n,t,D=1===g);if(!1!==I)return 1!==I&&-1!==I||(D=1===I),Ze=!0,setTimeout(hn,30),E(),D&&!_?i.appendChild(we):r.parentNode.insertBefore(we,D?_:r),k&&be(k,0,C-k.scrollTop),ke=we.parentNode,void 0===v||Qe||(We=Math.abs(v-oe(r)[w])),N(),B(!0)}if(i.contains(we))return B(!1)}return!1}function O(s,l){ye(s,b,Mt({evt:t,isOwner:u,axis:o?"vertical":"horizontal",revert:a,dragRect:e,targetRect:n,canSort:d,fromSortable:p,target:r,completed:B,onMove:function(n,a){return mn(xe,i,we,e,n,oe(n),t,a)},changed:N},l))}function E(){O("dragOverAnimationCapture"),b.captureAnimationState(),b!==p&&p.captureAnimationState()}function B(e){return O("dragOverCompleted",{insertion:e}),e&&(u?c._hideClone():c._showClone(b),b!==p&&(Zt(we,Pe?Pe.options.ghostClass:c.options.ghostClass,!1),Zt(we,s.ghostClass,!0)),Pe!==b&&b!==bn.active?Pe=b:b===bn.active&&Pe&&(Pe=null),p===b&&(b._ignoreWhileAnimating=r),b.animateAll((function(){O("dragOverAnimationComplete"),b._ignoreWhileAnimating=null})),b!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(r===we&&!we.animated||r===i&&!r.animated)&&(ze=null),s.dragoverBubble||t.rootEl||r===document||(we.parentNode[fe]._isOutsideThisEl(t.target),!e&&dn(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),m=!0}function N(){Be=le(we),Me=le(we,s.draggable),Te({sortable:b,name:"change",toEl:i,newIndex:Be,newDraggableIndex:Me,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Gt(document,"mousemove",this._onTouchMove),Gt(document,"touchmove",this._onTouchMove),Gt(document,"pointermove",this._onTouchMove),Gt(document,"dragover",dn),Gt(document,"mousemove",dn),Gt(document,"touchmove",dn)},_offUpEvents:function(){var t=this.el.ownerDocument;Gt(t,"mouseup",this._onDrop),Gt(t,"touchend",this._onDrop),Gt(t,"pointerup",this._onDrop),Gt(t,"touchcancel",this._onDrop),Gt(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;Be=le(we),Me=le(we,n.draggable),ye("drop",this,{evt:t}),ke=we&&we.parentNode,Be=le(we),Me=le(we,n.draggable),bn.eventCanceled||(Ge=!1,Qe=!1,Ye=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Sn(this.cloneId),Sn(this._dragStartId),this.nativeDraggable&&(Gt(document,"drop",this),Gt(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),qt&&te(document.body,"user-select",""),te(we,"transform",""),t&&(qe&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),Ce&&Ce.parentNode&&Ce.parentNode.removeChild(Ce),(xe===ke||Pe&&"clone"!==Pe.lastPutMode)&&Ie&&Ie.parentNode&&Ie.parentNode.removeChild(Ie),we&&(this.nativeDraggable&&Gt(we,"dragend",this),fn(we),we.style["will-change"]="",qe&&!Ge&&Zt(we,Pe?Pe.options.ghostClass:this.options.ghostClass,!1),Zt(we,this.options.chosenClass,!1),Te({sortable:this,name:"unchoose",toEl:ke,newIndex:null,newDraggableIndex:null,originalEvent:t}),xe!==ke?(Be>=0&&(Te({rootEl:ke,name:"add",toEl:ke,fromEl:xe,originalEvent:t}),Te({sortable:this,name:"remove",toEl:ke,originalEvent:t}),Te({rootEl:ke,name:"sort",toEl:ke,fromEl:xe,originalEvent:t}),Te({sortable:this,name:"sort",toEl:ke,originalEvent:t})),Pe&&Pe.save()):Be!==Ee&&Be>=0&&(Te({sortable:this,name:"update",toEl:ke,originalEvent:t}),Te({sortable:this,name:"sort",toEl:ke,originalEvent:t})),bn.active&&(null!=Be&&-1!==Be||(Be=Ee,Me=Ne),Te({sortable:this,name:"end",toEl:ke,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){ye("nulling",this),xe=we=ke=Ce=_e=Ie=De=Oe=Fe=Ke=qe=Be=Me=Ee=Ne=ze=Ue=Pe=Ae=bn.dragged=bn.ghost=bn.clone=bn.active=null,tn.forEach((function(t){t.checked=!0})),tn.length=Re=Le=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":we&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,a=0,o=n.length,i=this.options;a<o;a++)Yt(t=n[a],i.draggable,this.el,!1)&&e.push(t.getAttribute(i.dataIdAttr)||gn(t));return e},sort:function(t,e){var n={},a=this.el;this.toArray().forEach((function(t,e){var o=a.children[e];Yt(o,this.options.draggable,a,!1)&&(n[t]=o)}),this),e&&this.captureAnimationState(),t.forEach((function(t){n[t]&&(a.removeChild(n[t]),a.appendChild(n[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return Yt(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var a=ve.modifyOption(this,t,e);n[t]=void 0!==a?a:e,"group"===t&&ln(n)},destroy:function(){ye("destroy",this);var t=this.el;t[fe]=null,Gt(t,"mousedown",this._onTapStart),Gt(t,"touchstart",this._onTapStart),Gt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Gt(t,"dragover",this),Gt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Xe.splice(Xe.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Oe){if(ye("hideClone",this),bn.eventCanceled)return;te(Ie,"display","none"),this.options.removeCloneOnHide&&Ie.parentNode&&Ie.parentNode.removeChild(Ie),Oe=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(Oe){if(ye("showClone",this),bn.eventCanceled)return;we.parentNode!=xe||this.options.group.revertClone?_e?xe.insertBefore(Ie,_e):xe.appendChild(Ie):xe.insertBefore(Ie,we),this.options.group.revertClone&&this.animate(we,Ie),te(Ie,"display",""),Oe=!1}}else this._hideClone()}},en&&$t(document,"touchmove",(function(t){(bn.active||Ge)&&t.cancelable&&t.preventDefault()})),bn.utils={on:$t,off:Gt,css:te,find:ne,is:function(t,e){return!!Yt(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:pe,closest:Yt,toggleClass:Zt,clone:me,index:le,nextTick:vn,cancelNextTick:Sn,detectDirection:sn,getChild:re},bn.get=function(t){return t[fe]},bn.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(bn.utils=Mt(Mt({},bn.utils),t.utils)),ve.mount(t)}))},bn.create=function(t,e){return new bn(t,e)},bn.version="1.14.0";var yn,Tn,wn,kn,Cn,xn,_n=[],Dn=!1;function In(){_n.forEach((function(t){clearInterval(t.pid)})),_n=[]}function On(){clearInterval(xn)}var En=pe((function(t,e,n,a){if(e.scroll){var o,i=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,c=ae(),u=!1;Tn!==n&&(Tn=n,In(),o=e.scrollFn,!0===(yn=e.scroll)&&(yn=ue(n,!0)));var d=0,p=yn;do{var b=p,m=oe(b),f=m.top,h=m.bottom,g=m.left,v=m.right,S=m.width,y=m.height,T=void 0,w=void 0,k=b.scrollWidth,C=b.scrollHeight,x=te(b),_=b.scrollLeft,D=b.scrollTop;b===c?(T=S<k&&("auto"===x.overflowX||"scroll"===x.overflowX||"visible"===x.overflowX),w=y<C&&("auto"===x.overflowY||"scroll"===x.overflowY||"visible"===x.overflowY)):(T=S<k&&("auto"===x.overflowX||"scroll"===x.overflowX),w=y<C&&("auto"===x.overflowY||"scroll"===x.overflowY));var I=T&&(Math.abs(v-i)<=s&&_+S<k)-(Math.abs(g-i)<=s&&!!_),O=w&&(Math.abs(h-r)<=s&&D+y<C)-(Math.abs(f-r)<=s&&!!D);if(!_n[d])for(var E=0;E<=d;E++)_n[E]||(_n[E]={});_n[d].vx==I&&_n[d].vy==O&&_n[d].el===b||(_n[d].el=b,_n[d].vx=I,_n[d].vy=O,clearInterval(_n[d].pid),0==I&&0==O||(u=!0,_n[d].pid=setInterval((function(){a&&0===this.layer&&bn.active._onTouchMove(Cn);var e=_n[this.layer].vy?_n[this.layer].vy*l:0,n=_n[this.layer].vx?_n[this.layer].vx*l:0;"function"==typeof o&&"continue"!==o.call(bn.dragged.parentNode[fe],n,e,t,Cn,_n[this.layer].el)||be(_n[this.layer].el,n,e)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&p!==c&&(p=ue(p,!1)));Dn=u}}),30),Bn=function(t){var e=t.originalEvent,n=t.putSortable,a=t.dragEl,o=t.dispatchSortableEvent,i=t.unhideGhostForTarget;if(e){var r=n||t.activeSortable;(0,t.hideGhostForTarget)();var s=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,l=document.elementFromPoint(s.clientX,s.clientY);i(),r&&!r.el.contains(l)&&(o("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function Nn(){}function Mn(){}Nn.prototype={startIndex:null,dragStart:function(t){this.startIndex=t.oldDraggableIndex},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=re(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(e,a):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:Bn},Ft(Nn,{pluginName:"revertOnSpill"}),Mn.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:Bn},Ft(Mn,{pluginName:"removeOnSpill"}),bn.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?$t(document,"dragover",this._handleAutoScroll):$t(document,this.options.supportPointer?"pointermove":e.touches?"touchmove":"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?Gt(document,"dragover",this._handleAutoScroll):(Gt(document,"pointermove",this._handleFallbackAutoScroll),Gt(document,"touchmove",this._handleFallbackAutoScroll),Gt(document,"mousemove",this._handleFallbackAutoScroll)),On(),In(),clearTimeout(Qt),Qt=void 0},nulling:function(){Cn=Tn=yn=Dn=xn=wn=kn=null,_n.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var n=this,a=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,i=document.elementFromPoint(a,o);if(Cn=t,e||this.options.forceAutoScrollFallback||jt||Lt||qt){En(t,this.options,i,e);var r=ue(i,!0);!Dn||xn&&a===wn&&o===kn||(xn&&On(),xn=setInterval((function(){var i=ue(document.elementFromPoint(a,o),!0);i!==r&&(r=i,In()),En(t,n.options,i,e)}),10),wn=a,kn=o)}else{if(!this.options.bubbleScroll||ue(i,!0)===ae())return void In();En(t,this.options,ue(i,!1),!1)}}},Ft(t,{pluginName:"scroll",initializeByDefault:!0})}),bn.mount(Mn,Nn);var An,Pn,Fn,Kn=bn,Rn=new m.s("Global config for sortablejs"),Ln=function(){function t(e){n(this,t),this.target=e}return o(t,[{key:"insert",value:function(t,e){this.isFormArray?this.target.insert(t,e):this.target.splice(t,0,e)}},{key:"get",value:function(t){return this.isFormArray?this.target.at(t):this.target[t]}},{key:"remove",value:function(t){var e;return this.isFormArray?(e=this.target.at(t),this.target.removeAt(t)):e=this.target.splice(t,1)[0],e}},{key:"isFormArray",get:function(){return!!this.target.at&&!!this.target.insert&&!!this.target.reset}}]),t}(),jn=function(){function t(e){n(this,t),this.bindings=e.map((function(t){return new Ln(t)}))}return o(t,[{key:"injectIntoEvery",value:function(t,e){this.bindings.forEach((function(n,a){return n.insert(t,e[a])}))}},{key:"getFromEvery",value:function(t){return this.bindings.map((function(e){return e.get(t)}))}},{key:"extractFromEvery",value:function(t){return this.bindings.map((function(e){return e.remove(t)}))}},{key:"provided",get:function(){return!!this.bindings.length}}]),t}(),Vn=((Fn=function t(){n(this,t)}).\u0275fac=function(t){return new(t||Fn)},Fn.\u0275prov=Object(m.Jb)({factory:function(){return new Fn},token:Fn,providedIn:"root"}),Fn),qn=((Pn=function(){function t(e,a,o,i,r){n(this,t),this.globalConfig=e,this.service=a,this.element=o,this.zone=i,this.renderer=r,this.sortablejsInit=new m.o}return o(t,[{key:"ngOnInit",value:function(){Kn&&Kn.create&&this.create()}},{key:"ngOnChanges",value:function(t){var e=this,n=t.sortablejsOptions;if(n&&!n.isFirstChange()){var a=n.previousValue,o=n.currentValue;Object.keys(o).forEach((function(t){o[t]!==a[t]&&e.sortableInstance.option(t,e.options[t])}))}}},{key:"ngOnDestroy",value:function(){this.sortableInstance&&this.sortableInstance.destroy()}},{key:"create",value:function(){var t=this,e=this.sortablejsContainer?this.element.nativeElement.querySelector(this.sortablejsContainer):this.element.nativeElement;setTimeout((function(){t.sortableInstance=Kn.create(e,t.options),t.sortablejsInit.emit(t.sortableInstance)}),0)}},{key:"getBindings",value:function(){return this.sortablejs?this.sortablejs instanceof jn?this.sortablejs:new jn([this.sortablejs]):new jn([])}},{key:"options",get:function(){return Object.assign(Object.assign({},this.optionsWithoutEvents),this.overridenOptions)}},{key:"optionsWithoutEvents",get:function(){return Object.assign(Object.assign({},this.globalConfig||{}),this.sortablejsOptions||{})}},{key:"proxyEvent",value:function(t){for(var e=this,n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];this.zone.run((function(){var n;e.optionsWithoutEvents&&e.optionsWithoutEvents[t]&&(n=e.optionsWithoutEvents)[t].apply(n,a)}))}},{key:"isCloning",get:function(){return"clone"===this.sortableInstance.options.group.checkPull(this.sortableInstance,this.sortableInstance)}},{key:"clone",value:function(t){return(this.sortablejsCloneFunction||function(t){return t})(t)}},{key:"overridenOptions",get:function(){var t=this;return{onAdd:function(e){t.service.transfer=function(n){t.getBindings().injectIntoEvery(e.newIndex,n),t.proxyEvent("onAdd",e)},t.proxyEvent("onAddOriginal",e)},onRemove:function(e){var n=t.getBindings();n.provided&&(t.isCloning?(t.service.transfer(n.getFromEvery(e.oldIndex).map((function(e){return t.clone(e)}))),t.renderer.removeChild(e.item.parentNode,e.item),t.renderer.insertBefore(e.clone.parentNode,e.item,e.clone),t.renderer.removeChild(e.clone.parentNode,e.clone)):t.service.transfer(n.extractFromEvery(e.oldIndex)),t.service.transfer=null),t.proxyEvent("onRemove",e)},onUpdate:function(e){var n=t.getBindings(),a=function(t){return t.hasOwnProperty("newDraggableIndex")&&t.hasOwnProperty("oldDraggableIndex")?{new:t.newDraggableIndex,old:t.oldDraggableIndex}:{new:t.newIndex,old:t.oldIndex}}(e);n.injectIntoEvery(a.new,n.extractFromEvery(a.old)),t.proxyEvent("onUpdate",e)}}}}]),t}()).\u0275fac=function(t){return new(t||Pn)(m.Nb(Rn,8),m.Nb(Vn),m.Nb(m.l),m.Nb(m.B),m.Nb(m.G))},Pn.\u0275dir=m.Ib({type:Pn,selectors:[["","sortablejs",""]],inputs:{sortablejs:"sortablejs",sortablejsContainer:"sortablejsContainer",sortablejsOptions:"sortablejsOptions",sortablejsCloneFunction:"sortablejsCloneFunction"},outputs:{sortablejsInit:"sortablejsInit"},features:[m.zb]}),Pn),zn=((An=function(){function t(){n(this,t)}return o(t,null,[{key:"forRoot",value:function(e){return{ngModule:t,providers:[{provide:Rn,useValue:e}]}}}]),t}()).\u0275mod=m.Lb({type:An}),An.\u0275inj=m.Kb({factory:function(t){return new(t||An)}}),An),Un=["operationsToolBar"];function Wn(t,e){if(1&t&&(m.Tb(0,"mat-card",4),m.Tb(1,"p"),m.Ob(2,"i"),m.Ob(3,"br"),m.Tb(4,"span"),m.Tb(5,"b"),m.Kc(6),m.Sb(),m.Sb(),m.Sb(),m.Sb()),2&t){var n=e.$implicit,a=m.ec();m.kc("ngClass",a.setStickyClass?"list-group-item blocks extra-padding":"list-group-item blocks"),m.Bb(2),m.Db(n.class),m.Bb(4),m.Lc(n.title)}}var $n,Gn=(($n=function(){function t(){n(this,t),this.isToolBarSticky=new m.o,this.sourceOptions={group:{name:"clone-group",pull:"clone",put:!1}},this.setStickyClass=!1}return o(t,[{key:"onWindowScroll",value:function(){this.myFunction(window.pageYOffset)}},{key:"ngOnInit",value:function(){this.sticky=this.operationsToolBar.nativeElement.getBoundingClientRect().top}},{key:"myFunction",value:function(t){t>=this.sticky?(this.setStickyClass=!0,this.isToolBarSticky.emit("true")):(this.setStickyClass=!1,this.isToolBarSticky.emit("false"))}}]),t}()).\u0275fac=function(t){return new(t||$n)},$n.\u0275cmp=m.Hb({type:$n,selectors:[["app-operations-list"]],viewQuery:function(t,e){var n;1&t&&m.Dc(Un,!0,m.l),2&t&&m.sc(n=m.bc())&&(e.operationsToolBar=n.first)},hostBindings:function(t,e){1&t&&m.ac("scroll",(function(t){return e.onWindowScroll(t)}),!1,m.vc)},inputs:{operationList:"operationList"},outputs:{isToolBarSticky:"isToolBarSticky"},decls:4,vars:4,consts:[[3,"ngClass"],["id","operationList",1,"list-group","text-center","sortable","d-flex","flex-row",3,"sortablejs","sortablejsOptions"],["operationsToolBar",""],["id","listContainer",3,"ngClass",4,"ngFor","ngForOf"],["id","listContainer",3,"ngClass"]],template:function(t,e){1&t&&(m.Tb(0,"div",0),m.Tb(1,"mat-accordion",1,2),m.Ic(3,Wn,7,5,"mat-card",3),m.Sb(),m.Sb()),2&t&&(m.kc("ngClass",e.setStickyClass?"sticky-ta-toolbar":""),m.Bb(1),m.kc("sortablejs",e.operationList)("sortablejsOptions",e.sourceOptions),m.Bb(2),m.kc("ngForOf",e.operationList))},directives:[s.q,u.a,qn,s.s,C.a],styles:["#listContainer[_ngcontent-%COMP%]{background-color:#08509d;color:#fff}.extra-padding[_ngcontent-%COMP%]{padding:8px 22px!important}.blocks[_ngcontent-%COMP%]{padding:10px 17px;font-size:17px;width:100%;text-align:center;font-weight:700}#listContainer[_ngcontent-%COMP%]:hover{cursor:-webkit-grabbing;cursor:grabbing;background:#fafafa;border-top:5px solid #08509d;padding-bottom:0;color:#08509d}.sticky-ta-toolbar[_ngcontent-%COMP%]{position:fixed;top:70px;margin-right:2.5%!important;z-index:99}"]}),$n);function Hn(t,e){1&t&&(m.Tb(0,"div",3),m.Tb(1,"div",4),m.Ob(2,"img",5),m.Sb(),m.Tb(3,"div",4),m.Tb(4,"h4",6),m.Kc(5," Start by drag and drop any operation here! "),m.Sb(),m.Sb(),m.Sb())}function Xn(t,e){if(1&t){var n=m.Ub();m.Tb(0,"div",10),m.Tb(1,"app-pos-tagging",11),m.ac("onRemove",(function(){m.wc(n);var t=m.ec().index;return m.ec().onOperationRemoved(t)})),m.Kc(2),m.Sb(),m.Sb()}if(2&t){var a=m.ec().$implicit;m.Bb(1),m.kc("operation",a),m.Bb(1),m.Lc(a.operation)}}function Yn(t,e){if(1&t){var n=m.Ub();m.Tb(0,"div",10),m.Tb(1,"app-text-cleaning",11),m.ac("onRemove",(function(){m.wc(n);var t=m.ec().index;return m.ec().onOperationRemoved(t)})),m.Kc(2),m.Sb(),m.Sb()}if(2&t){var a=m.ec().$implicit;m.Bb(1),m.kc("operation",a),m.Bb(1),m.Lc(a.operation)}}function Qn(t,e){if(1&t){var n=m.Ub();m.Tb(0,"div",10),m.Tb(1,"app-text-summarization",11),m.ac("onRemove",(function(){m.wc(n);var t=m.ec().index;return m.ec().onOperationRemoved(t)})),m.Kc(2),m.Sb(),m.Sb()}if(2&t){var a=m.ec().$implicit;m.Bb(1),m.kc("operation",a),m.Bb(1),m.Mc("",a.operation," ")}}function Jn(t,e){if(1&t){var n=m.Ub();m.Tb(0,"div",10),m.Tb(1,"app-sentiment-analysis",11),m.ac("onRemove",(function(){m.wc(n);var t=m.ec().index;return m.ec().onOperationRemoved(t)})),m.Kc(2),m.Sb(),m.Sb()}if(2&t){var a=m.ec().$implicit;m.Bb(1),m.kc("operation",a),m.Bb(1),m.Mc("",a.operation," ")}}function Zn(t,e){if(1&t){var n=m.Ub();m.Tb(0,"div",10),m.Tb(1,"app-ner",11),m.ac("onRemove",(function(){m.wc(n);var t=m.ec().index;return m.ec().onOperationRemoved(t)})),m.Kc(2),m.Sb(),m.Sb()}if(2&t){var a=m.ec().$implicit;m.Bb(1),m.kc("operation",a),m.Bb(1),m.Lc(a.operation)}}function ta(t,e){if(1&t){var n=m.Ub();m.Tb(0,"div",10),m.Tb(1,"app-word-frequency",11),m.ac("onRemove",(function(){m.wc(n);var t=m.ec().index;return m.ec().onOperationRemoved(t)})),m.Kc(2),m.Sb(),m.Sb()}if(2&t){var a=m.ec().$implicit;m.Bb(1),m.kc("operation",a),m.Bb(1),m.Lc(a.operation)}}function ea(t,e){if(1&t){var n=m.Ub();m.Tb(0,"div",10),m.Tb(1,"app-word-embedding",11),m.ac("onRemove",(function(){m.wc(n);var t=m.ec().index;return m.ec().onOperationRemoved(t)})),m.Kc(2),m.Sb(),m.Sb()}if(2&t){var a=m.ec().$implicit;m.Bb(1),m.kc("operation",a),m.Bb(1),m.Lc(a.operation)}}function na(t,e){if(1&t){var n=m.Ub();m.Tb(0,"div",10),m.Tb(1,"app-rule-based-matching",11),m.ac("onRemove",(function(){m.wc(n);var t=m.ec().index;return m.ec().onOperationRemoved(t)})),m.Kc(2),m.Sb(),m.Sb()}if(2&t){var a=m.ec().$implicit;m.Bb(1),m.kc("operation",a),m.Bb(1),m.Lc(a.operation)}}function aa(t,e){if(1&t&&(m.Tb(0,"li",7),m.Tb(1,"div",8),m.Ic(2,Xn,3,2,"div",9),m.Ic(3,Yn,3,2,"div",9),m.Ic(4,Qn,3,2,"div",9),m.Ic(5,Jn,3,2,"div",9),m.Ic(6,Zn,3,2,"div",9),m.Ic(7,ta,3,2,"div",9),m.Ic(8,ea,3,2,"div",9),m.Ic(9,na,3,2,"div",9),m.Sb(),m.Sb()),2&t){var n=e.$implicit;m.Bb(1),m.kc("ngSwitch",n.operation),m.Bb(1),m.kc("ngSwitchCase","posTagging"),m.Bb(1),m.kc("ngSwitchCase","cleaningTransformation"),m.Bb(1),m.kc("ngSwitchCase","textSummarization"),m.Bb(1),m.kc("ngSwitchCase","sentimentAnalysis"),m.Bb(1),m.kc("ngSwitchCase","ner"),m.Bb(1),m.kc("ngSwitchCase","wordFrequency"),m.Bb(1),m.kc("ngSwitchCase","wordEmbedding"),m.Bb(1),m.kc("ngSwitchCase","ruleBasedMatch")}}var oa,ia=((oa=function(){function t(e,a){n(this,t),this.iterableDiffers=e,this._spinner=a,this.selectedOperation=[],this.targetOptions={group:"clone-group"},this.onOperationRemoved=function(t){this.selectedOperation.splice(t,1)},this.iterableDiffer=e.find([]).create(null)}return o(t,[{key:"ngDoCheck",value:function(){var t=this.iterableDiffer.diff(this.selectedOperation);t&&this.selectedOperation.map((function(e){return t.collection.filter((function(t){e.operation===t.operation?(t.uid||(t.uid=Date.now()),t.isPanelExpanded=!0):t.isPanelExpanded=!1}))}))}},{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||oa)(m.Nb(m.u),m.Nb(g.a))},oa.\u0275cmp=m.Hb({type:oa,selectors:[["app-operations-ui-container"]],inputs:{selectedOperation:"selectedOperation"},decls:3,vars:4,consts:[[1,"sortable",2,"position","relative",3,"sortablejs","sortablejsOptions"],["class","row","style","display: flex; margin: 2%; flex-direction: column",4,"ngIf"],["id","drop-area",4,"ngFor","ngForOf"],[1,"row",2,"display","flex","margin","2%","flex-direction","column"],[2,"margin","auto"],["src","../../../../assets/img/drag&drop.svg","height","300px","width","300px"],[1,"font-weight-lighter"],["id","drop-area"],[3,"ngSwitch"],["class","mb-2",4,"ngSwitchCase"],[1,"mb-2"],[3,"operation","onRemove"]],template:function(t,e){1&t&&(m.Tb(0,"div",0),m.Ic(1,Hn,6,0,"div",1),m.Ic(2,aa,10,9,"li",2),m.Sb()),2&t&&(m.kc("sortablejs",e.selectedOperation)("sortablejsOptions",e.targetOptions),m.Bb(1),m.kc("ngIf",!e.selectedOperation.length),m.Bb(1),m.kc("ngForOf",e.selectedOperation))},styles:["li#drop-area[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}"]}),oa),ra=["opUiContainer"];function sa(t,e){1&t&&(m.Tb(0,"div",12),m.Tb(1,"div",13),m.Kc(2," Please execute operations sequentially "),m.Sb(),m.Sb())}function la(t,e){if(1&t){var n=m.Ub();m.Tb(0,"button",14,15),m.ac("click",(function(){return m.wc(n),m.ec().openSaveDialog()})),m.Ob(2,"i",16),m.Sb()}}var ca,ua=((ca=function(){function t(e,a,o,i){n(this,t),this._dialog=e,this._localStorage=a,this._spinner=o,this._taDataStore=i,this.operations=[{title:"Text Cleaning/ Transformation",operation:"cleaningTransformation",class:"fas fa-magic iconfont",isPanelExpanded:!1},{title:"POS Tagging",operation:"posTagging",class:"fas fa-tags iconfont",isPanelExpanded:!1},{title:"Named Entity Recognition",operation:"ner",class:"fas fa-user-tag iconfont",isPanelExpanded:!1},{title:"Sentiment Analysis",operation:"sentimentAnalysis",class:"fas fa-circle-notch iconfont",isPanelExpanded:!1},{title:"Text Summarization",operation:"textSummarization",class:"fas fa-file-word iconfont",isPanelExpanded:!1},{title:"Word Frequency",operation:"wordFrequency",class:"fa fa-object-group iconfont",isPanelExpanded:!1},{title:"Word Embedding",operation:"wordEmbedding",class:"fa fa-language iconfont",isPanelExpanded:!1},{title:"Rule Based Matching",operation:"ruleBasedMatch",class:"fa fa-window-restore iconfont",isPanelExpanded:!1}],this.selectedOperationsArray=[],this.checkExecuteSequence=!1,this.targetOptions={group:"clone-group"},this.modeType=this._localStorage.getItem("experimentMode")}return o(t,[{key:"ngOnInit",value:function(){var t=this;this._spinner.showSpinner();var e=this._taDataStore.getAllOperationData();e.length?e.forEach((function(e){t.operations.forEach((function(n){if(e.operation==n.operation){var a=Object.assign({},n);a.uid=e.uid,t.selectedOperationsArray.push(a),t.checkExecuteSequence=!0}}))})):this.selectedOperationsArray.length=0,this._spinner.stopSpinner()}},{key:"setOperationContainerUiMargin",value:function(t){"true"==t?this.opUiContainer.nativeElement.classList.add("extra-height"):this.opUiContainer.nativeElement.classList.remove("extra-height")}},{key:"openSaveDialog",value:function(){this._dialog.open(yt,{width:"60%",data:{data:null,showGraph:null}}).afterClosed().subscribe((function(t){}))}}]),t}()).\u0275fac=function(t){return new(t||ca)(m.Nb(v.c),m.Nb(h.a),m.Nb(g.a),m.Nb(w))},ca.\u0275cmp=m.Hb({type:ca,selectors:[["app-create-experiment"]],viewQuery:function(t,e){var n;1&t&&m.Dc(ra,!0,m.l),2&t&&m.sc(n=m.bc())&&(e.opUiContainer=n.first)},decls:13,vars:5,consts:[[1,"fluid-container","font-weight-lighter"],[1,"row","mb-4"],[1,"col-md-12"],[3,"operationList"],[1,"row"],["id","operationListContainer",1,"vw-100",3,"operationList","isToolBarSticky"],[1,"row","mt-4"],["id","operationsUiContainer",1,"col-md-12",2,"background-color","white","min-height","450px","border-radius","7px"],["opUiContainer",""],["class","col-md-12","style","display: flex",4,"ngIf"],[3,"selectedOperation"],["mat-raised-button","","class","float-ta-save-btn","matTooltip","Click to save experiment","matTooltipPosition","below",3,"click",4,"ngIf"],[1,"col-md-12",2,"display","flex"],[1,"alert","col-md-12",2,"margin","auto","color","red","font-weight","bold","text-align","center"],["mat-raised-button","","matTooltip","Click to save experiment","matTooltipPosition","below",1,"float-ta-save-btn",3,"click"],["tooltip","matTooltip"],[1,"fas","fa-plus","fa-1x","my-float"]],template:function(t,e){1&t&&(m.Tb(0,"div",0),m.Tb(1,"div",1),m.Tb(2,"div",2),m.Ob(3,"app-experiment-input",3),m.Sb(),m.Sb(),m.Tb(4,"div",4),m.Tb(5,"app-operations-list",5),m.ac("isToolBarSticky",(function(t){return e.setOperationContainerUiMargin(t)})),m.Sb(),m.Sb(),m.Tb(6,"div",6),m.Tb(7,"mat-card",7,8),m.Tb(9,"div",4),m.Ic(10,sa,3,0,"div",9),m.Sb(),m.Ob(11,"app-operations-ui-container",10),m.Sb(),m.Sb(),m.Ic(12,la,3,0,"button",11),m.Sb()),2&t&&(m.Bb(3),m.kc("operationList",e.operations),m.Bb(2),m.kc("operationList",e.operations),m.Bb(5),m.kc("ngIf",e.checkExecuteSequence),m.Bb(1),m.kc("selectedOperation",e.selectedOperationsArray),m.Bb(1),m.kc("ngIf","viewMode"!=e.modeType))},directives:[Bt,Gn,C.a,s.t,ia,_.b,D.b],styles:[".extra-height[_ngcontent-%COMP%]{margin-top:10px}.float-ta-save-btn[_ngcontent-%COMP%]{position:fixed;width:60px;height:60px;bottom:40px;right:40px;background-color:#08509d;color:#fff;border-radius:50%;box-shadow:2px 2px 3px #999}.my-float[_ngcontent-%COMP%]{font-size:large;color:#fff}"]}),ca),da=i("bSwM");function pa(t,e){if(1&t){var n=m.Ub();m.Tb(0,"div",8),m.Tb(1,"mat-checkbox",9),m.ac("change",(function(t){return m.wc(n),m.ec().onCheckBoxValChange(t)})),m.Kc(2),m.Sb(),m.Sb()}if(2&t){var a=e.$implicit,o=m.ec();m.Bb(1),m.kc("value",a.pipeSettingTag)("checked",o.valueFromUser.includes(a.pipeSettingTag)),m.Bb(1),m.Mc("\xa0\xa0",a.pipeSettingName,"")}}var ba,ma=((ba=function(){function t(e,a,o,i,r,s,l,c){n(this,t),this.data=e,this._localStorage=a,this._spinner=o,this._taDataStore=i,this._textAnalysis=r,this._toaster=s,this._pipelineSettingsDialog=l,this.fb=c,this.pipelineSettingsControl=new rt.i(""),this.valueFromUser=[],this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this.form=this.fb.group({featureArray:this.fb.array([])})}return o(t,[{key:"ngOnInit",value:function(){var t=this;this._spinner.showSpinner(),this.featureArray=this.form.get("featureArray"),this.data.selectedVal&&this.data.selectedVal.forEach((function(e){t.featureArray.push(new rt.i(e)),t.valueFromUser&&t.valueFromUser.push(e)})),this._spinner.stopSpinner()}},{key:"setPipelineSettings",value:function(t){this._pipelineSettingsDialog.close(t.value)}},{key:"onCheckBoxValChange",value:function(t){var e=this;if(t.source._checked)this.featureArray.push(new rt.i(t.source.value));else{var n=0;this.featureArray.controls.forEach((function(a){a.value!=t.source.value?n++:e.featureArray.removeAt(n)}))}}}]),t}()).\u0275fac=function(t){return new(t||ba)(m.Nb(v.a),m.Nb(h.a),m.Nb(g.a),m.Nb(w),m.Nb(y.a),m.Nb(f.c),m.Nb(v.i),m.Nb(rt.h))},ba.\u0275cmp=m.Hb({type:ba,selectors:[["app-pipeline-settings-dialog"]],decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-close","","id","times-close-icon",2,"float","right","font-size","16px","cursor","pointer"],[1,"fa","fa-times"],["mat-dialog-content","",2,"min-height","50px"],[1,"row",3,"formGroup"],["class","col-sm-12",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["id","saveBtn","mat-raised-button","","cdkFocusInitial","",3,"click"],[1,"col-sm-12"],[3,"value","checked","change"]],template:function(t,e){1&t&&(m.Tb(0,"h1",0),m.Kc(1," Pipeline Settings"),m.Tb(2,"span",1),m.Ob(3,"i",2),m.Sb(),m.Sb(),m.Tb(4,"div",3),m.Tb(5,"div",4),m.Ic(6,pa,3,3,"div",5),m.Sb(),m.Sb(),m.Tb(7,"div",6),m.Tb(8,"button",7),m.ac("click",(function(){return e.setPipelineSettings(e.form)})),m.Kc(9," Save "),m.Sb(),m.Sb()),2&t&&(m.Bb(5),m.kc("formGroup",e.form),m.Bb(1),m.kc("ngForOf",e.data.list))},directives:[v.j,v.e,v.g,rt.v,rt.m,s.s,v.d,_.b,da.b],styles:["button#saveBtn[_ngcontent-%COMP%]:enabled{background-color:#08509d;color:#fff}#times-close-icon[_ngcontent-%COMP%]:hover{color:red}"]}),ba),fa=i("chMx"),ha=i("4xDO");function ga(t,e){if(1&t&&(m.Tb(0,"mat-option",21),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.kc("value",n),m.Bb(1),m.Mc(" ",n.modelName," ")}}function va(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Model is required."),m.Sb())}function Sa(t,e){if(1&t&&(m.Tb(0,"mat-option",21),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.kc("value",n.tagsValue),m.Bb(1),m.Mc(" ",n.tagsName," ")}}function ya(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Atleast one cleaning method is required."),m.Sb())}function Ta(t,e){1&t&&(m.Tb(0,"div",22),m.Kc(1," Select dataset and feature or enter the text to generate the output "),m.Sb())}function wa(t,e){1&t&&(m.Tb(0,"th",35),m.Kc(1,"Word"),m.Sb())}function ka(t,e){if(1&t&&(m.Tb(0,"td",36),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.Bb(1),m.Lc(n.word)}}function Ca(t,e){1&t&&(m.Tb(0,"th",35),m.Kc(1,"Tag"),m.Sb())}function xa(t,e){if(1&t&&(m.Tb(0,"td",36),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.Bb(1),m.Lc(n.tag)}}function _a(t,e){1&t&&m.Ob(0,"tr",37)}function Da(t,e){1&t&&m.Ob(0,"tr",38)}function Ia(t,e){if(1&t){var n=m.Ub();m.Tb(0,"mat-card",23),m.Tb(1,"mat-card-header"),m.Tb(2,"mat-card-title-group"),m.Tb(3,"mat-card-title"),m.Kc(4,"Output"),m.Sb(),m.Sb(),m.Tb(5,"div",24),m.Tb(6,"mat-icon",25,26),m.ac("mouseover",(function(){return m.wc(n),m.ec().mouseOverGraph()}))("mouseleave",(function(){return m.wc(n),m.ec().mouseLeaveGraph()}))("click",(function(){m.wc(n);var t=m.ec();return t.onSubmit("html",t.posModelControl,t.posTagsControl)})),m.Sb(),m.Sb(),m.Sb(),m.Tb(8,"mat-card-content",27),m.Tb(9,"table",28),m.Rb(10,29),m.Ic(11,wa,2,0,"th",30),m.Ic(12,ka,2,1,"td",31),m.Qb(),m.Rb(13,32),m.Ic(14,Ca,2,0,"th",30),m.Ic(15,xa,2,1,"td",31),m.Qb(),m.Ic(16,_a,1,0,"tr",33),m.Ic(17,Da,1,0,"tr",34),m.Sb(),m.Sb(),m.Sb()}if(2&t){var a=m.ec();m.Bb(6),m.kc("color",a.graphIconColor),m.Bb(3),m.kc("dataSource",a.dataSource),m.Bb(7),m.kc("matHeaderRowDef",a.displayedColumns),m.Bb(1),m.kc("matRowDefColumns",a.displayedColumns)}}var Oa,Ea=((Oa=function(){function t(e,a,o,i,r,s,l,c){var u=this;n(this,t),this._dialog=e,this._dashboardService=a,this._toaster=o,this._localStorage=i,this._spinner=r,this._taDataStore=s,this._textAnalysis=l,this._utils=c,this.onRemove=new m.o,this.postTagList=[{tagsName:"Adjective",tagsValue:"ADJ"},{tagsName:"Adposition",tagsValue:"ADP"},{tagsName:"Adverb",tagsValue:"ADV"},{tagsName:"Auxiliary verb",tagsValue:"AUX"},{tagsName:"Coordinating conjunction",tagsValue:"CONJ"},{tagsName:"Determiner",tagsValue:"DET"},{tagsName:"Interjection",tagsValue:"INTJ"},{tagsName:"Noun",tagsValue:"NOUN"},{tagsName:"Numeral",tagsValue:"NUM"},{tagsName:"Particle",tagsValue:"PART"},{tagsName:"Pronoun",tagsValue:"PRON"},{tagsName:"Proper noun",tagsValue:"PROPN"},{tagsName:"Punctuation",tagsValue:"PUNCT"},{tagsName:"Subordinating conjunction",tagsValue:"SCONJ"},{tagsName:"Symbol",tagsValue:"SYM"},{tagsName:"Verb",tagsValue:"VERB"},{tagsName:"Other",tagsValue:"X"}],this.dataSource=new d.p,this.displayedColumns=[],this.unsubscribe$=new p.b,this.showSpinner=!1,this.showOutput=!1,this.uploadModelIssueMsg=!1,this.binColor="basic",this.showTextError=!1,this.posModelControl=new rt.i("",rt.I.required),this.posTagsControl=new rt.i("",rt.I.required),this.graphIconColor="basic",this.pipelineSetting={removeFeatureCheckBoxVal:!1,setConcatenate:!1,setCountTag:!1},this.posPipelineSettingsList=[{pipeSettingName:"Count the words that matched the tags",pipeSettingTag:"count"},{pipeSettingName:"Concatenate all the words with matched tags",pipeSettingTag:"concat"}],this.gettaModelsList=function(t){var e=!1;u._dashboardService.taModel(t).pipe(Object(b.a)(u.unsubscribe$)).subscribe((function(t){u.modelList=t,u.posModelControl.value&&"spacy-en_core_web_sm"!=u.posModelControl.value&&(u.modelList.forEach((function(t){t.modelName!==u.posModelControl.value&&t.oldModelFileName!==u.posModelControl.value||(u.posModelControl.setValue(JSON.stringify(t)),e=!0)})),e||(u.uploadModelIssueMsg=!0)),u._spinner.stopSpinner()}),(function(t){u._toaster.error("Server Error","Text Analysis"),u._spinner.stopSpinner()}))},this.onSubmit=function(t,e,n){var a=this,o=null;t?o=t:(this._spinner.showSpinner(),o="table");var i=this._taDataStore.getInputData(this.operation);if(!(i=null==i?void 0:i.output))return this.showTextError=!0,void this._spinner.stopSpinner();this.showTextError=!1;var r=e.value;"spacy-en_core_web_sm"!=r&&(r=e.value);var s=[{operationName:"pos",operationParameters:{model:r.modelName||e.value,keepTags:n.value||[],addFeature:this.posPipelineSettingValue||[],modelPath:"./textanalysis/models/"+r.modelName,framework:r.frameWork}}];this._textAnalysis.pos(i,s,o).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(t){a.showOutput=!0,"html"==o?a._dialog.open(yt,{width:"60%",data:{data:t.data.data,showGraph:"pos"}}).afterClosed().subscribe((function(t){})):(a.output=t.data.data,a.dataSource.data=t.data.data,a.dataSource._updateChangeSubscription()),a._taDataStore.saveOperationOutput({uid:a.operation.uid,operation:a.operation.operation,output:a.output,taskConfig:s}),a._spinner.stopSpinner(),a._taDataStore.broadcastSubmitEvent("updateInputBar")}),(function(t){a.showOutput=!1,a._spinner.stopSpinner(),a._toaster.error("Server Error","Error performing pos tagging")}))},this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this.displayedColumns=["Word","Tag"]}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.inputData=this._taDataStore.getInputData(this.operation),this.gettaModelsList("pos"),this.setData(),this._taDataStore.onSubmitEventSubject.subscribe((function(e){t.inputData=t._taDataStore.getInputData(t.operation)}))}},{key:"setData",value:function(){var t=this;this._taDataStore.getAllOperationData().forEach((function(e){e.uid==t.operation.uid&&e.taskConfig.operationParameters&&(t.posTagsControl.setValue(e.taskConfig.operationParameters.keepTags),e.taskConfig.operationParameters.addFeature.length&&(t.posPipelineSettingValue=e.taskConfig.operationParameters.addFeature),t.pipelineSetting.removeFeatureCheckBoxVal=e.taskConfig.operationParameters.removeFeature,t.posModelControl.setValue(e.taskConfig.operationParameters.model))}))}},{key:"mouseOverBin",value:function(){this.binColor="warn"}},{key:"mouseLeaveBin",value:function(){this.binColor="basic"}},{key:"removeOperation",value:function(){this._taDataStore.removeOperation(this.operation),this.onRemove.emit(this.operation)}},{key:"showPipelineSetting",value:function(){var t=this;this._dialog.open(ma,{minWidth:"50vw",data:{list:this.posPipelineSettingsList,selectedVal:this.posPipelineSettingValue}}).afterClosed().subscribe((function(e){if(e&&void 0!==t.output){t.posPipelineSettingValue=e.featureArray;var n=t._taDataStore.getSavedOperationOutput(t.operation.uid);n.taskConfig[0].operationParameters.addFeature=t.posPipelineSettingValue,t._taDataStore.saveOperationOutput({uid:t.operation.uid,operation:t.operation.operation,output:t.output,taskConfig:n.taskConfig})}else e&&(t.posPipelineSettingValue=e.featureArray)}))}},{key:"mouseOverGraph",value:function(){this.graphIconColor="primary"}},{key:"mouseLeaveGraph",value:function(){this.graphIconColor="basic"}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||Oa)(m.Nb(v.c),m.Nb(fa.a),m.Nb(f.c),m.Nb(h.a),m.Nb(g.a),m.Nb(w),m.Nb(y.a),m.Nb(ha.a))},Oa.\u0275cmp=m.Hb({type:Oa,selectors:[["app-pos-tagging"]],inputs:{operation:"operation"},outputs:{onRemove:"onRemove"},decls:39,vars:16,consts:[[3,"expanded"],[2,"color","black",3,"matTooltip"],[1,"fa","fa-trash",2,"margin-left","95%","cursor","pointer","font-size","16px",3,"color","mouseover","mouseleave","click"],[2,"border-left","7px solid green","display","flex"],["inputInfoCard",""],[1,"d-flex","flex-row",2,"margin","auto"],[2,"width","min-content","margin","auto"],[1,"fas","fa-info-circle","fa-2x",2,"color","green"],[2,"width","max-content","margin","auto"],["appearance","fill"],[3,"innerText"],[3,"formControl"],["value","spacy-en_core_web_sm"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["required","","multiple","",3,"formControl"],["id","taOperationsPosSubmitBtn","mat-raised-button","",3,"disabled","click"],[1,"linkText",3,"click"],[1,"form-group","row"],["class","text-danger offset-2 mt-2",4,"ngIf"],["class","mt-3","style","background-color: #f5f5f5",4,"ngIf"],[3,"value"],[1,"text-danger","offset-2","mt-2"],[1,"mt-3",2,"background-color","#f5f5f5"],[2,"margin-left","85%"],["matTooltip","Dependency Graph","matTooltipPosition","above","matTooltipHideDelay","1000",1,"far","fa-chart-bar",2,"cursor","pointer","font-size","16px",3,"color","mouseover","mouseleave","click"],["tooltip","matTooltip"],[1,"mt-2"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Word"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Tag"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(m.Tb(0,"mat-expansion-panel",0),m.Tb(1,"mat-expansion-panel-header"),m.Tb(2,"mat-panel-title",1),m.Kc(3),m.Sb(),m.Tb(4,"mat-panel-description"),m.Kc(5,"\xa0"),m.Tb(6,"mat-icon",2),m.ac("mouseover",(function(){return e.mouseOverBin()}))("mouseleave",(function(){return e.mouseLeaveBin()}))("click",(function(){return e.removeOperation()})),m.Sb(),m.Sb(),m.Sb(),m.Tb(7,"mat-card",3,4),m.Tb(9,"mat-card-content"),m.Tb(10,"div",5),m.Tb(11,"div",6),m.Ob(12,"mat-icon",7),m.Sb(),m.Tb(13,"div",8),m.Tb(14,"b"),m.Kc(15),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Ob(16,"br"),m.Tb(17,"mat-form-field",9),m.Ob(18,"mat-label",10),m.Tb(19,"mat-select",11),m.Tb(20,"mat-option",12),m.Kc(21,"spacy-en_core_web_sm"),m.Sb(),m.Ic(22,ga,2,2,"mat-option",13),m.Sb(),m.Ic(23,va,2,0,"mat-error",14),m.Sb(),m.Tb(24,"mat-form-field",9),m.Ob(25,"mat-label",10),m.Tb(26,"mat-select",15),m.Ic(27,Sa,2,2,"mat-option",13),m.Sb(),m.Ic(28,ya,2,0,"mat-error",14),m.Sb(),m.Tb(29,"span"),m.Tb(30,"button",16),m.ac("click",(function(){return e.onSubmit(null,e.posModelControl,e.posTagsControl)})),m.Kc(31," Submit"),m.Sb(),m.Kc(32,"\xa0\xa0"),m.Tb(33,"span",17),m.ac("click",(function(){return e.showPipelineSetting()})),m.Kc(34,"Settings"),m.Sb(),m.Sb(),m.Tb(35,"div",18),m.Ic(36,Ta,2,0,"div",19),m.Sb(),m.Ob(37,"br"),m.Ic(38,Ia,18,4,"mat-card",20),m.Sb()),2&t&&(m.kc("expanded",e.operation.isPanelExpanded),m.Bb(2),m.kc("matTooltip",e._utils.getTootip("posTagging")),m.Bb(1),m.Mc(" ",e.operation.title," "),m.Bb(3),m.kc("color",e.binColor),m.Bb(9),m.Mc("\xa0\xa0\xa0Data is taken from ",e.inputData?e.inputData.operation:"inputData",""),m.Bb(3),m.kc("innerText",e.posModelControl.value?"Model":"Select a model"),m.Bb(1),m.kc("formControl",e.posModelControl),m.Bb(3),m.kc("ngForOf",e.modelList),m.Bb(1),m.kc("ngIf",e.posModelControl.touched&&e.posModelControl.hasError("required")),m.Bb(2),m.kc("innerText",e.posTagsControl.value?"Tags Selected":"Choose some tags"),m.Bb(1),m.kc("formControl",e.posTagsControl),m.Bb(1),m.kc("ngForOf",e.postTagList),m.Bb(1),m.kc("ngIf",e.posTagsControl.touched&&e.posTagsControl.hasError("required")),m.Bb(2),m.kc("disabled",e.posModelControl.hasError("required")&&e.posTagsControl.hasError("required")),m.Bb(6),m.kc("ngIf",e.showTextError),m.Bb(2),m.kc("ngIf",e.showOutput))},directives:[u.c,u.g,u.h,D.b,u.f,x.a,C.a,C.d,I.c,I.g,wt.a,rt.u,rt.j,kt.o,s.s,s.t,rt.F,_.b,I.b,C.f,C.n,C.m,d.o,d.c,d.i,d.b,d.k,d.n,d.h,d.a,d.j,d.m],styles:["button#taOperationsPosSubmitBtn[_ngcontent-%COMP%]:enabled{margin-top:10px;background-color:#08509d;color:#fff}span.linkText[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}"]}),Oa),Ba=i("5RNC");function Na(t,e){if(1&t&&(m.Tb(0,"mat-option",20),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.kc("value",n.modelKey),m.Bb(1),m.Mc(" ",n.modelName," ")}}function Ma(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Model is required."),m.Sb())}function Aa(t,e){if(1&t){var n=m.Ub();m.Tb(0,"span"),m.Kc(1,"Information Retained : "),m.Tb(2,"mat-slider",21),m.ac("ngModelChange",(function(t){return m.wc(n),m.ec().informationRetained=t})),m.Sb(),m.Kc(3,"\xa0\xa0"),m.Tb(4,"b"),m.Kc(5),m.Sb(),m.Sb()}if(2&t){var a=m.ec();m.Bb(2),m.kc("displayWith",a.informationRetainedSliderLabel)("disabled",!a.textSummarizationModelControl.value)("ngModel",a.informationRetained),m.Bb(3),m.Mc("",a.informationRetained,"%")}}function Pa(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Enter Integer numbers only"),m.Sb())}function Fa(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Enter Integer numbers only"),m.Sb())}function Ka(t,e){if(1&t&&(m.Tb(0,"div",22),m.Tb(1,"div",23),m.Tb(2,"mat-form-field"),m.Tb(3,"mat-label"),m.Kc(4,"Minimum Length of Sequence"),m.Sb(),m.Ob(5,"input",24),m.Sb(),m.Ic(6,Pa,2,0,"mat-error",13),m.Sb(),m.Tb(7,"div",23),m.Tb(8,"mat-form-field"),m.Tb(9,"mat-label"),m.Kc(10,"Maximum Length of Sequence"),m.Sb(),m.Ob(11,"input",25),m.Sb(),m.Ic(12,Fa,2,0,"mat-error",13),m.Sb(),m.Sb()),2&t){var n=m.ec();m.Bb(5),m.kc("formControl",n.minSequence),m.Bb(1),m.kc("ngIf",n.minSequence.hasError("pattern")),m.Bb(5),m.kc("formControl",n.maxSequence),m.Bb(1),m.kc("ngIf",n.maxSequence.hasError("pattern"))}}function Ra(t,e){1&t&&(m.Tb(0,"div",26),m.Kc(1," Select dataset and feature or enter the text to generate the output "),m.Sb())}function La(t,e){if(1&t&&(m.Tb(0,"div",27),m.Kc(1),m.Sb()),2&t){var n=m.ec();m.Bb(1),m.Mc(" ",n.errorMessage," ")}}function ja(t,e){if(1&t){var n=m.Ub();m.Tb(0,"mat-card",28),m.Tb(1,"mat-card-header",29),m.Tb(2,"mat-card-title-group"),m.Tb(3,"mat-card-title"),m.Kc(4,"Output"),m.Sb(),m.Sb(),m.Tb(5,"div",30),m.Tb(6,"mat-icon",31,32),m.ac("mouseover",(function(){return m.wc(n),m.ec().mouseOverCopy()}))("mouseleave",(function(){return m.wc(n),m.ec().mouseLeaveCopy()}))("click",(function(){return m.wc(n),m.ec().copyOutput()})),m.Sb(),m.Sb(),m.Sb(),m.Tb(8,"mat-card-content",33),m.Tb(9,"p",34),m.Kc(10),m.Sb(),m.Sb(),m.Sb()}if(2&t){var a=m.ec();m.Bb(6),m.kc("color",a.copyColor)("matTooltip",a.tooltipText),m.Bb(4),m.Lc(a.output)}}var Va,qa=((Va=function(){function t(e,a,o,i){n(this,t),this._taDataStore=e,this._textAnalysis=a,this._spinner=o,this._utils=i,this.onRemove=new m.o,this.modelsList=[{modelName:"Scoring Model",modelKey:"scoringmodel"},{modelName:"Similarity Model",modelKey:"similaritymodel"},{modelName:"Abstractive model-T5",modelKey:"t5model"}],this.informationRetained=50,this.binColor="basic",this.unsubscribe$=new p.b,this.showTextError=!1,this.showError=!1,this.showOutput=!1,this.copyColor="basic",this.tooltipText="Click to copy!",this.textSummarizationModelControl=new rt.i("",rt.I.required),this.minSequence=new rt.i("",[rt.I.required,rt.I.pattern("^[0-9]*$")]),this.maxSequence=new rt.i("",[rt.I.required,rt.I.pattern("^[0-9]*$")]),this.copyOutput=function(){var t=document.getElementById("summarizationOutput").innerText,e=document.createElement("textarea");document.body.appendChild(e),e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e),this.tooltipText="Copied!"},this.onSubmit=function(t,e,n,a){var o=this;this._spinner.showSpinner(),this.showTextError=!1;var i=this._taDataStore.getInputData(this.operation);if(!(i=null==i?void 0:i.output))return this.showTextError=!0,void this._spinner.stopSpinner();if("t5model"==t.value){if(null==n.value||null==a.value)return this.showError=!0,this._spinner.stopSpinner(),void(this.errorMessage="Enter the Minimum and maximum sequence value");if(this.showError=!1,0==a.value)return this.showError=!0,this._spinner.stopSpinner(),void(this.errorMessage="Maximum length of sequence  number should be greater than zero.")}var r={data:i,taskConfig:[{operationName:"textSummarization",operationParameters:{model:t.value,informationRetained:e,t5minlength:this.minSequence.value,t5maxlength:this.maxSequence.value}}]};"t5model"==t.value&&delete r.taskConfig[0].operationParameters.informationRetained,this._textAnalysis.textSummarization(r).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(t){o.showOutput=!0,o.output=t.data.data,o._taDataStore.saveOperationOutput({uid:o.operation.uid,operation:"textSummarization",output:o.output,taskConfig:r.taskConfig}),o._spinner.stopSpinner(),o._taDataStore.broadcastSubmitEvent("updateInputBar")}),(function(t){o.showOutput=!1,o._spinner.stopSpinner(),o._toaster.error("Server Error","Error performing text summarization")}))}}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.inputData=this._taDataStore.getInputData(this.operation),this.setData(),this._taDataStore.onSubmitEventSubject.subscribe((function(e){t.inputData=t._taDataStore.getInputData(t.operation)}))}},{key:"setData",value:function(){var t=this;this._taDataStore.getAllOperationData().forEach((function(e){e.uid==t.operation.uid&&e.taskConfig.operationParameters&&(t.textSummarizationModelControl.setValue(e.taskConfig.operationParameters.model),t.minSequence.setValue(e.taskConfig.operationParameters.t5minlength),t.maxSequence.setValue(e.taskConfig.operationParameters.t5maxlength),t.informationRetained=e.taskConfig.operationParameters.informationRetained)}))}},{key:"informationRetainedSliderLabel",value:function(t){return t}},{key:"mouseOverBin",value:function(){this.binColor="warn"}},{key:"mouseLeaveBin",value:function(){this.binColor="basic"}},{key:"removeOperation",value:function(){this._taDataStore.removeOperation(this.operation),this.onRemove.emit(this.operation)}},{key:"mouseOverCopy",value:function(){this.copyColor="primary"}},{key:"mouseLeaveCopy",value:function(){this.copyColor="basic"}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||Va)(m.Nb(w),m.Nb(y.a),m.Nb(g.a),m.Nb(ha.a))},Va.\u0275cmp=m.Hb({type:Va,selectors:[["app-text-summarization"]],inputs:{operation:"operation"},outputs:{onRemove:"onRemove"},decls:31,vars:15,consts:[[3,"expanded"],[2,"color","black",3,"matTooltip"],[1,"fa","fa-trash",2,"margin-left","95%","cursor","pointer","font-size","16px",3,"color","mouseover","mouseleave","click"],[2,"border-left","7px solid green","display","flex"],["inputInfoCard",""],[1,"d-flex","flex-row",2,"margin","auto"],[2,"width","min-content","margin","auto"],[1,"fas","fa-info-circle","fa-2x",2,"color","green"],[2,"width","max-content","margin","auto"],["appearance","fill"],[3,"innerText"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","row",4,"ngIf"],["id","taOperationsSummarizeSubmitBtn","mat-raised-button","",3,"disabled","click"],[1,"form-group","row"],["class","text-danger offset-2 mt-2",4,"ngIf"],["class","text-danger mt-2 offset-2",4,"ngIf"],["class","mt-3","style","background-color: #f5f5f5",4,"ngIf"],[3,"value"],["id","informationRetainedSlider","thumbLabel","","min","0","max","100","step","1","value","50","color","primary",3,"displayWith","disabled","ngModel","ngModelChange"],[1,"row"],[1,"col-md-6"],["matInput","","type","number","name","minSeq","id","minSeq","min","0","max","500","required","",3,"formControl"],["matInput","","type","number","name","maxSeq","id","maxSeq","min","1","max","500","required","",3,"formControl"],[1,"text-danger","offset-2","mt-2"],[1,"text-danger","mt-2","offset-2"],[1,"mt-3",2,"background-color","#f5f5f5"],[2,"border-bottom","1px solid #3c3c3c"],[2,"margin-left","85%"],["matTooltipPosition","above",1,"far","fa-copy",2,"cursor","pointer","font-size","16px",3,"color","matTooltip","mouseover","mouseleave","click"],["tooltip","matTooltip"],[1,"mt-2"],["id","summarizationOutput"]],template:function(t,e){1&t&&(m.Tb(0,"mat-expansion-panel",0),m.Tb(1,"mat-expansion-panel-header"),m.Tb(2,"mat-panel-title",1),m.Kc(3),m.Sb(),m.Tb(4,"mat-panel-description"),m.Tb(5,"mat-icon",2),m.ac("mouseover",(function(){return e.mouseOverBin()}))("mouseleave",(function(){return e.mouseLeaveBin()}))("click",(function(){return e.removeOperation()})),m.Sb(),m.Sb(),m.Sb(),m.Tb(6,"mat-card",3,4),m.Tb(8,"mat-card-content"),m.Tb(9,"div",5),m.Tb(10,"div",6),m.Ob(11,"mat-icon",7),m.Sb(),m.Tb(12,"div",8),m.Tb(13,"b"),m.Kc(14),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Ob(15,"br"),m.Tb(16,"mat-form-field",9),m.Ob(17,"mat-label",10),m.Tb(18,"mat-select",11),m.Ic(19,Na,2,2,"mat-option",12),m.Sb(),m.Ic(20,Ma,2,0,"mat-error",13),m.Sb(),m.Ic(21,Aa,6,4,"span",13),m.Ic(22,Ka,13,4,"div",14),m.Ob(23,"br"),m.Tb(24,"button",15),m.ac("click",(function(){return e.onSubmit(e.textSummarizationModelControl,e.informationRetained,e.minSequence,e.maxSequence)})),m.Kc(25," Submit "),m.Sb(),m.Ob(26,"br"),m.Tb(27,"div",16),m.Ic(28,Ra,2,0,"div",17),m.Ic(29,La,2,1,"div",18),m.Sb(),m.Ic(30,ja,11,3,"mat-card",19),m.Sb()),2&t&&(m.kc("expanded",e.operation.isPanelExpanded),m.Bb(2),m.kc("matTooltip",e._utils.getTootip("textSummarization")),m.Bb(1),m.Mc(" ",e.operation.title," "),m.Bb(2),m.kc("color",e.binColor),m.Bb(9),m.Mc("\xa0\xa0\xa0Data is taken from ",e.inputData?e.inputData.operation:"inputData",""),m.Bb(3),m.kc("innerText",e.textSummarizationModelControl.value?"Model":"Select a model"),m.Bb(1),m.kc("formControl",e.textSummarizationModelControl),m.Bb(1),m.kc("ngForOf",e.modelsList),m.Bb(1),m.kc("ngIf",e.textSummarizationModelControl.touched&&e.textSummarizationModelControl.hasError("required")),m.Bb(1),m.kc("ngIf","t5model"!==e.textSummarizationModelControl.value),m.Bb(1),m.kc("ngIf","t5model"==e.textSummarizationModelControl.value),m.Bb(2),m.kc("disabled","t5model"==e.textSummarizationModelControl.value?e.textSummarizationModelControl.hasError("required")||e.minSequence.hasError("required")||e.maxSequence.hasError("required"):e.textSummarizationModelControl.hasError("required")),m.Bb(4),m.kc("ngIf",e.showTextError),m.Bb(1),m.kc("ngIf",e.showError),m.Bb(1),m.kc("ngIf",e.showOutput))},directives:[u.c,u.g,u.h,D.b,u.f,x.a,C.a,C.d,I.c,I.g,wt.a,rt.u,rt.j,s.s,s.t,_.b,kt.o,I.b,Ba.a,rt.x,O.b,rt.A,rt.d,rt.F,C.f,C.n,C.m],styles:["button#taOperationsSummarizeSubmitBtn[_ngcontent-%COMP%]:enabled{margin-top:10px;background-color:#08509d;color:#fff}mat-slider.mat-slider#informationRetainedSlider[_ngcontent-%COMP%]{width:76%}"]}),Va);function za(t,e){if(1&t&&(m.Tb(0,"mat-option",19),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.kc("value",n.modelKey),m.Bb(1),m.Mc(" ",n.modelName," ")}}function Ua(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Model is required."),m.Sb())}function Wa(t,e){1&t&&(m.Tb(0,"div",20),m.Kc(1," Select dataset and feature or enter the text to generate the output "),m.Sb())}function $a(t,e){1&t&&(m.Tb(0,"th",30),m.Kc(1,"Sentiment"),m.Sb())}function Ga(t,e){if(1&t&&(m.Tb(0,"td",31),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.Bb(1),m.Lc(n.sentiment)}}function Ha(t,e){1&t&&(m.Tb(0,"th",30),m.Kc(1,"Subjectivity Score"),m.Sb())}function Xa(t,e){if(1&t&&(m.Tb(0,"td",31),m.Kc(1),m.fc(2,"number"),m.Sb()),2&t){var n=e.$implicit;m.Bb(1),m.Mc(" ",m.hc(2,1,n.subjectivity,"1.0-2")," ")}}function Ya(t,e){1&t&&m.Ob(0,"tr",32)}function Qa(t,e){1&t&&m.Ob(0,"tr",33)}function Ja(t,e){if(1&t&&(m.Tb(0,"mat-card",21),m.Tb(1,"mat-card-header"),m.Tb(2,"mat-card-title"),m.Kc(3,"Output"),m.Sb(),m.Sb(),m.Tb(4,"mat-card-content",22),m.Tb(5,"table",23),m.Rb(6,24),m.Ic(7,$a,2,0,"th",25),m.Ic(8,Ga,2,1,"td",26),m.Qb(),m.Rb(9,27),m.Ic(10,Ha,2,0,"th",25),m.Ic(11,Xa,3,4,"td",26),m.Qb(),m.Ic(12,Ya,1,0,"tr",28),m.Ic(13,Qa,1,0,"tr",29),m.Sb(),m.Sb(),m.Sb()),2&t){var n=m.ec();m.Bb(5),m.kc("dataSource",n.dataSource),m.Bb(7),m.kc("matHeaderRowDef",n.displayedColumns),m.Bb(1),m.kc("matRowDefColumns",n.displayedColumns)}}var Za,to=((Za=function(){function t(e,a,o,i,r,s,l){n(this,t),this._dialog=e,this._toaster=a,this._localStorage=o,this._spinner=i,this._taDataStore=r,this._textAnalysis=s,this._utils=l,this.onRemove=new m.o,this.modelsList=[{modelName:"Polarized Model",modelKey:"polarizedmodel"}],this.binColor="basic",this.unsubscribe$=new p.b,this.showTextError=!1,this.showOutput=!1,this.dataSource=new d.p,this.displayedColumns=[],this.sentimentAnalysisModelControl=new rt.i("",rt.I.required),this.pipelineSetting={removeFeatureCheckBoxVal:!1,setSubjectivityAsFeature:!1,setSentimentAsFeature:!1},this.sentimentAnalysisPipelineSettingsList=[{pipeSettingName:"Create sentiment as a new feature",pipeSettingTag:"sentiment"},{pipeSettingName:"Create subjectivity as a new feature",pipeSettingTag:"subjectivity"}],this.onSubmit=function(t){var e=this;this._spinner.showSpinner(),this.showTextError=!1;var n=this._taDataStore.getInputData(this.operation);if(!(n=null==n?void 0:n.output))return this.showTextError=!0,void this._spinner.stopSpinner();var a={data:n,taskConfig:[{operationName:"sentimentAnalysis",operationParameters:{model:t.value,addFeature:this.sentimentAnalysisPipelineSettingValue||[]}}]};this._textAnalysis.sentimentAnalysis(a).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(t){e.showOutput=!0,e.output=t.data.data,e.dataSource.data=[t.data.data],e.dataSource._updateChangeSubscription(),e._taDataStore.saveOperationOutput({uid:e.operation.uid,operation:"sentimentAnalysis",output:e.output,taskConfig:a.taskConfig}),e._spinner.stopSpinner(),e._taDataStore.broadcastSubmitEvent("updateInputBar")}),(function(t){e.showOutput=!1,e._spinner.stopSpinner(),e._toaster.error("Server Error","Error performing sentiment analysis")}))},this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this.displayedColumns=["sentiment","subjectivity"]}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.inputData=this._taDataStore.getInputData(this.operation),this.setData(),this._taDataStore.onSubmitEventSubject.subscribe((function(e){t.inputData=t._taDataStore.getInputData(t.operation)}))}},{key:"setData",value:function(){var t=this;this._taDataStore.getAllOperationData().forEach((function(e){e.uid==t.operation.uid&&e.taskConfig.operationParameters&&(t.sentimentAnalysisModelControl.setValue(e.taskConfig.operationParameters.model),e.taskConfig.operationParameters.addFeature.length&&(t.sentimentAnalysisPipelineSettingValue=e.taskConfig.operationParameters.addFeature),t.pipelineSetting.removeFeatureCheckBoxVal=e.taskConfig.operationParameters.removeFeature)}))}},{key:"mouseOverBin",value:function(){this.binColor="warn"}},{key:"mouseLeaveBin",value:function(){this.binColor="basic"}},{key:"removeOperation",value:function(){this._taDataStore.removeOperation(this.operation),this.onRemove.emit(this.operation)}},{key:"showPipelineSetting",value:function(){var t=this;this._dialog.open(ma,{minWidth:"50vw",data:{list:this.sentimentAnalysisPipelineSettingsList,selectedVal:this.sentimentAnalysisPipelineSettingValue}}).afterClosed().subscribe((function(e){if(e&&void 0!==t.output){t.sentimentAnalysisPipelineSettingValue=e.featureArray;var n=t._taDataStore.getSavedOperationOutput(t.operation.uid);n.taskConfig[0].operationParameters.addFeature=t.sentimentAnalysisPipelineSettingValue,t._taDataStore.saveOperationOutput({uid:t.operation.uid,operation:t.operation.operation,output:t.output,taskConfig:n.taskConfig})}else e&&(t.sentimentAnalysisPipelineSettingValue=e.featureArray)}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||Za)(m.Nb(v.c),m.Nb(f.c),m.Nb(h.a),m.Nb(g.a),m.Nb(w),m.Nb(y.a),m.Nb(ha.a))},Za.\u0275cmp=m.Hb({type:Za,selectors:[["app-sentiment-analysis"]],inputs:{operation:"operation"},outputs:{onRemove:"onRemove"},decls:32,vars:12,consts:[[3,"expanded"],[2,"color","black",3,"matTooltip"],[1,"fa","fa-trash",2,"margin-left","95%","cursor","pointer","font-size","16px",3,"color","mouseover","mouseleave","click"],[2,"border-left","7px solid green","display","flex"],["inputInfoCard",""],[1,"d-flex","flex-row",2,"margin","auto"],[2,"width","min-content","margin","auto"],[1,"fas","fa-info-circle","fa-2x",2,"color","green"],[2,"width","max-content","margin","auto"],["appearance","fill"],[3,"innerText"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["id","taOperationsSentimentSubmitBtn","mat-raised-button","",3,"disabled","click"],[1,"linkText",3,"click"],[1,"form-group","row"],["class","text-danger offset-2 mt-2",4,"ngIf"],["class","mt-3","style","background-color: #f5f5f5",4,"ngIf"],[3,"value"],[1,"text-danger","offset-2","mt-2"],[1,"mt-3",2,"background-color","#f5f5f5"],[1,"mt-2"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","sentiment"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","subjectivity"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(m.Tb(0,"mat-expansion-panel",0),m.Tb(1,"mat-expansion-panel-header"),m.Tb(2,"mat-panel-title",1),m.Kc(3),m.Sb(),m.Tb(4,"mat-panel-description"),m.Tb(5,"mat-icon",2),m.ac("mouseover",(function(){return e.mouseOverBin()}))("mouseleave",(function(){return e.mouseLeaveBin()}))("click",(function(){return e.removeOperation()})),m.Sb(),m.Sb(),m.Sb(),m.Tb(6,"mat-card",3,4),m.Tb(8,"mat-card-content"),m.Tb(9,"div",5),m.Tb(10,"div",6),m.Ob(11,"mat-icon",7),m.Sb(),m.Tb(12,"div",8),m.Tb(13,"b"),m.Kc(14),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Ob(15,"br"),m.Tb(16,"mat-form-field",9),m.Ob(17,"mat-label",10),m.Tb(18,"mat-select",11),m.Ic(19,za,2,2,"mat-option",12),m.Sb(),m.Ic(20,Ua,2,0,"mat-error",13),m.Sb(),m.Ob(21,"br"),m.Tb(22,"span"),m.Tb(23,"button",14),m.ac("click",(function(){return e.onSubmit(e.sentimentAnalysisModelControl)})),m.Kc(24," Submit"),m.Sb(),m.Kc(25,"\xa0\xa0"),m.Tb(26,"span",15),m.ac("click",(function(){return e.showPipelineSetting()})),m.Kc(27,"Settings"),m.Sb(),m.Sb(),m.Tb(28,"div",16),m.Ic(29,Wa,2,0,"div",17),m.Sb(),m.Ob(30,"br"),m.Ic(31,Ja,14,3,"mat-card",18),m.Sb()),2&t&&(m.kc("expanded",e.operation.isPanelExpanded),m.Bb(2),m.kc("matTooltip",e._utils.getTootip("sentimentAnalysis")),m.Bb(1),m.Mc(" ",e.operation.title," "),m.Bb(2),m.kc("color",e.binColor),m.Bb(9),m.Mc("\xa0\xa0\xa0Data is taken from ",e.inputData?e.inputData.operation:"inputData",""),m.Bb(3),m.kc("innerText",e.sentimentAnalysisModelControl.value?"Model":"Select a model"),m.Bb(1),m.kc("formControl",e.sentimentAnalysisModelControl),m.Bb(1),m.kc("ngForOf",e.modelsList),m.Bb(1),m.kc("ngIf",e.sentimentAnalysisModelControl.touched&&e.sentimentAnalysisModelControl.hasError("required")),m.Bb(3),m.kc("disabled",e.sentimentAnalysisModelControl.hasError("required")),m.Bb(6),m.kc("ngIf",e.showTextError),m.Bb(2),m.kc("ngIf",e.showOutput))},directives:[u.c,u.g,u.h,D.b,u.f,x.a,C.a,C.d,I.c,I.g,wt.a,rt.u,rt.j,s.s,s.t,_.b,kt.o,I.b,C.f,C.m,d.o,d.c,d.i,d.b,d.k,d.n,d.h,d.a,d.j,d.m],pipes:[s.g],styles:["button#taOperationsSentimentSubmitBtn[_ngcontent-%COMP%]:enabled{margin-top:10px;background-color:#08509d;color:#fff}span.linkText[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}"]}),Za),eo=i("D5lK");function no(t,e){if(1&t&&(m.Tb(0,"mat-option",21),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.kc("value",n),m.Bb(1),m.Mc(" ",n.modelName," ")}}function ao(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Model is required."),m.Sb())}function oo(t,e){if(1&t&&(m.Tb(0,"mat-option",21),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.kc("value",n),m.Bb(1),m.Mc(" ",n," ")}}function io(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Atleast choose one tag"),m.Sb())}function ro(t,e){1&t&&(m.Tb(0,"div",22),m.Kc(1," Select dataset and feature or enter the text to generate the output "),m.Sb())}function so(t,e){1&t&&(m.Tb(0,"th",35),m.Kc(1,"Word"),m.Sb())}function lo(t,e){if(1&t&&(m.Tb(0,"td",36),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.Bb(1),m.Lc(n.word)}}function co(t,e){1&t&&(m.Tb(0,"th",35),m.Kc(1,"Tag"),m.Sb())}function uo(t,e){if(1&t&&(m.Tb(0,"td",36),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.Bb(1),m.Lc(n.tag)}}function po(t,e){1&t&&m.Ob(0,"tr",37)}function bo(t,e){1&t&&m.Ob(0,"tr",38)}function mo(t,e){if(1&t){var n=m.Ub();m.Tb(0,"mat-card",23),m.Tb(1,"mat-card-header"),m.Tb(2,"mat-card-title-group"),m.Tb(3,"mat-card-title"),m.Kc(4,"Output"),m.Sb(),m.Sb(),m.Tb(5,"div",24),m.Tb(6,"mat-icon",25,26),m.ac("mouseover",(function(){return m.wc(n),m.ec().mouseOverGraph()}))("mouseleave",(function(){return m.wc(n),m.ec().mouseLeaveGraph()}))("click",(function(){m.wc(n);var t=m.ec();return t.onSubmit("html",t.nerModelControl,t.nerTagsControl)})),m.Sb(),m.Sb(),m.Sb(),m.Tb(8,"mat-card-content",27),m.Tb(9,"table",28),m.Rb(10,29),m.Ic(11,so,2,0,"th",30),m.Ic(12,lo,2,1,"td",31),m.Qb(),m.Rb(13,32),m.Ic(14,co,2,0,"th",30),m.Ic(15,uo,2,1,"td",31),m.Qb(),m.Ic(16,po,1,0,"tr",33),m.Ic(17,bo,1,0,"tr",34),m.Sb(),m.Sb(),m.Sb()}if(2&t){var a=m.ec();m.Bb(6),m.kc("color",a.graphIconColor),m.Bb(3),m.kc("dataSource",a.dataSource),m.Bb(7),m.kc("matHeaderRowDef",a.displayedColumns),m.Bb(1),m.kc("matRowDefColumns",a.displayedColumns)}}var fo,ho=((fo=function(){function t(e,a,o,i,r,s,l,c,u,f){var h=this;n(this,t),this._dialog=e,this._dashboardService=a,this._toaster=o,this._localStorage=i,this._spinner=r,this._taDataStore=s,this._textAnalysis=l,this._router=c,this._guideDetails=u,this._utils=f,this.onRemove=new m.o,this.unsubscribe$=new p.b,this.dataSource=new d.p,this.displayedColumns=[],this.showSpinner=!1,this.showOutput=!1,this.showTextError=!1,this.nerUploadModelIssueMsg=!1,this.tags=[],this.binColor="basic",this.isDisabled=!1,this.nerModelControl=new rt.i("",rt.I.required),this.nerTagsControl=new rt.i("",rt.I.required),this.graphIconColor="basic",this.guideList=[],this.pipelineSetting={removeFeatureCheckBoxVal:!1,setConcatenate:!1,setCountTag:!1},this.nerPipelineSettingsList=[{pipeSettingName:"Count the words that matched the tags",pipeSettingTag:"count"},{pipeSettingName:"Concatenate all the words with matched tags",pipeSettingTag:"concat"}],this.onSubmit=function(t,e,n){var a=this,o=null;t?o=t:(this._spinner.showSpinner(),o="table");var i=this._taDataStore.getInputData(this.operation);if(!(i=null==i?void 0:i.output))return this.showTextError=!0,void this._spinner.stopSpinner();this.showTextError=!1;var r=e.value;"spacy-en_core_web_sm"!=r&&(r=e.value);var s=[{operationName:"ner",renderType:"table",operationParameters:{model:r.modelName||e.value,keepTags:n.value||[],addFeature:this.pipelineSettingValue||[],modelPath:"./textanalysis/models/"+r.modelName,framework:r.frameWork}}];this._textAnalysis.ner(i,s,o).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(t){a.showOutput=!0,"html"==o?a._dialog.open(yt,{height:"auto",width:"60%",data:{data:t.data.data,showGraph:"ner"}}).afterClosed().subscribe((function(t){})):(a.output=t.data.data,a.dataSource.data=t.data.data,a.dataSource._updateChangeSubscription()),a._taDataStore.saveOperationOutput({uid:a.operation.uid,operation:a.operation.operation,output:a.output,taskConfig:s}),a._spinner.stopSpinner(),a._taDataStore.broadcastSubmitEvent("updateInputBar")}),(function(t){a.showOutput=!1,a._spinner.stopSpinner(),a._toaster.error("Server Error","Error performing ner")}))},this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this.displayedColumns=["Word","Tag"],this.nerModelControl.valueChanges.subscribe((function(t){h.setNerLabels(t)}))}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.gettaModelsList("ner"),this.setData(),this.inputData=this._taDataStore.getInputData(this.operation),this._taDataStore.onSubmitEventSubject.subscribe((function(e){t.inputData=t._taDataStore.getInputData(t.operation)}))}},{key:"setDefaults",value:function(){this.tags=["PERSON","NORP","ORG","GPE","LOC","PRODUCT","EVENT","WORK OF ART","LANGUAGE","DATE","TIME","PERCENT","MONEY","QUANTITY","ORDINAL","CARDINAL"]}},{key:"setData",value:function(){var t=this;this._taDataStore.getAllOperationData().forEach((function(e){e.uid==t.operation.uid&&e.taskConfig.operationParameters&&(t.nerTagsControl.setValue(e.taskConfig.operationParameters.keepTags),e.taskConfig.operationParameters.addFeature.length&&(t.pipelineSettingValue=e.taskConfig.operationParameters.addFeature),t.nerModelControl.setValue(e.taskConfig.operationParameters.model))}))}},{key:"gettaModelsList",value:function(t){var e=this,n=!1;this._dashboardService.taModel(t).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(t){e.modelList=t,e.nerModelControl.value&&"spacy-en_core_web_sm"!=e.nerModelControl.value&&(e.modelList.forEach((function(t){t.modelName!==e.nerModelControl.value&&t.oldModelFileName!==e.nerModelControl.value||(e.nerModelControl.setValue(t),n=!0)})),n||(e.nerUploadModelIssueMsg=!0)),e._spinner.stopSpinner()}),(function(t){e._toaster.error("Server Error","Text Analysis"),e._spinner.stopSpinner()}))}},{key:"setNerLabels",value:function(t){var e=this;t?(this.tags.length=0,"spacy-en_core_web_sm"!=t?setTimeout((function(){e.tags=t.nerLabels,e._spinner.stopSpinner()}),1e3):setTimeout((function(){e.setDefaults(),e._spinner.stopSpinner()}),1e3)):this._spinner.stopSpinner()}},{key:"mouseOverBin",value:function(){this.binColor="warn"}},{key:"mouseLeaveBin",value:function(){this.binColor="basic"}},{key:"removeOperation",value:function(){this._taDataStore.removeOperation(this.operation),this.onRemove.emit(this.operation)}},{key:"showPipelineSetting",value:function(){var t=this;this._dialog.open(ma,{minWidth:"50vw",data:{list:this.nerPipelineSettingsList,selectedVal:this.pipelineSettingValue}}).afterClosed().subscribe((function(e){if(e&&void 0!==t.output){t.pipelineSettingValue=e.featureArray;var n=t._taDataStore.getSavedOperationOutput(t.operation.uid);n.taskConfig[0].operationParameters.addFeature=t.pipelineSettingValue,t._taDataStore.saveOperationOutput({uid:t.operation.uid,operation:t.operation.operation,output:t.output,taskConfig:n.taskConfig})}else e&&(t.pipelineSettingValue=e.featureArray)}))}},{key:"mouseOverGraph",value:function(){this.graphIconColor="primary"}},{key:"mouseLeaveGraph",value:function(){this.graphIconColor="basic"}}]),t}()).\u0275fac=function(t){return new(t||fo)(m.Nb(v.c),m.Nb(fa.a),m.Nb(f.c),m.Nb(h.a),m.Nb(g.a),m.Nb(w),m.Nb(y.a),m.Nb(l.e),m.Nb(eo.a),m.Nb(ha.a))},fo.\u0275cmp=m.Hb({type:fo,selectors:[["app-ner"]],inputs:{operation:"operation"},outputs:{onRemove:"onRemove"},decls:38,vars:17,consts:[[3,"expanded","disabled"],[2,"color","black",3,"matTooltip"],[1,"fa","fa-trash",2,"margin-left","95%","cursor","pointer","font-size","16px",3,"color","mouseover","mouseleave","click"],[2,"border-left","7px solid green","display","flex"],["inputInfoCard",""],[1,"d-flex","flex-row",2,"margin","auto"],[2,"width","min-content","margin","auto"],[1,"fas","fa-info-circle","fa-2x",2,"color","green"],[2,"width","max-content","margin","auto"],["appearance","fill"],[3,"innerText"],[3,"formControl"],["value","spacy-en_core_web_sm"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["required","","multiple","",3,"formControl"],["id","taOperationsNerSubmitBtn","mat-raised-button","",3,"disabled","click"],[1,"linkText",3,"click"],[1,"form-group","row"],["class","text-danger offset-2 mt-2",4,"ngIf"],["class","mt-3","style","background-color: #f5f5f5",4,"ngIf"],[3,"value"],[1,"text-danger","offset-2","mt-2"],[1,"mt-3",2,"background-color","#f5f5f5"],[2,"margin-left","85%"],["matTooltip","Named Entity Visualization","matTooltipPosition","above","matTooltipHideDelay","1000",1,"far","fa-chart-bar",2,"cursor","pointer","font-size","16px",3,"color","mouseover","mouseleave","click"],["tooltip","matTooltip"],[1,"mt-2"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Word"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Tag"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(m.Tb(0,"mat-expansion-panel",0),m.Tb(1,"mat-expansion-panel-header"),m.Tb(2,"mat-panel-title",1),m.Kc(3),m.Sb(),m.Tb(4,"mat-panel-description"),m.Tb(5,"mat-icon",2),m.ac("mouseover",(function(){return e.mouseOverBin()}))("mouseleave",(function(){return e.mouseLeaveBin()}))("click",(function(){return e.removeOperation()})),m.Sb(),m.Sb(),m.Sb(),m.Tb(6,"mat-card",3,4),m.Tb(8,"mat-card-content"),m.Tb(9,"div",5),m.Tb(10,"div",6),m.Ob(11,"mat-icon",7),m.Sb(),m.Tb(12,"div",8),m.Tb(13,"b"),m.Kc(14),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Ob(15,"br"),m.Tb(16,"mat-form-field",9),m.Ob(17,"mat-label",10),m.Tb(18,"mat-select",11),m.Tb(19,"mat-option",12),m.Kc(20,"spacy-en_core_web_sm"),m.Sb(),m.Ic(21,no,2,2,"mat-option",13),m.Sb(),m.Ic(22,ao,2,0,"mat-error",14),m.Sb(),m.Tb(23,"mat-form-field",9),m.Ob(24,"mat-label",10),m.Tb(25,"mat-select",15),m.Ic(26,oo,2,2,"mat-option",13),m.Sb(),m.Ic(27,io,2,0,"mat-error",14),m.Sb(),m.Tb(28,"span"),m.Tb(29,"button",16),m.ac("click",(function(){return e.onSubmit(null,e.nerModelControl,e.nerTagsControl)})),m.Kc(30," Submit"),m.Sb(),m.Kc(31,"\xa0\xa0"),m.Tb(32,"span",17),m.ac("click",(function(){return e.showPipelineSetting()})),m.Kc(33,"Settings"),m.Sb(),m.Sb(),m.Tb(34,"div",18),m.Ic(35,ro,2,0,"div",19),m.Sb(),m.Ob(36,"br"),m.Ic(37,mo,18,4,"mat-card",20),m.Sb()),2&t&&(m.kc("expanded",e.operation.isPanelExpanded)("disabled",e.isDisabled),m.Bb(2),m.kc("matTooltip",e._utils.getTootip("ner")),m.Bb(1),m.Mc(" ",e.operation.title," "),m.Bb(2),m.kc("color",e.binColor),m.Bb(9),m.Mc("\xa0\xa0\xa0Data is taken from ",e.inputData?e.inputData.operation:"inputData",""),m.Bb(3),m.kc("innerText",e.nerModelControl.value?"Model":"Select a model"),m.Bb(1),m.kc("formControl",e.nerModelControl),m.Bb(3),m.kc("ngForOf",e.modelList),m.Bb(1),m.kc("ngIf",e.nerModelControl.touched&&e.nerModelControl.hasError("required")),m.Bb(2),m.kc("innerText",e.nerTagsControl.value?"Tags Selected":"Choose some tags"),m.Bb(1),m.kc("formControl",e.nerTagsControl),m.Bb(1),m.kc("ngForOf",e.tags),m.Bb(1),m.kc("ngIf",e.nerTagsControl.touched&&e.nerTagsControl.hasError("required")),m.Bb(2),m.kc("disabled",e.nerModelControl.hasError("required")&&e.nerTagsControl.hasError("required")),m.Bb(6),m.kc("ngIf",e.showTextError),m.Bb(2),m.kc("ngIf",e.showOutput))},directives:[u.c,u.g,u.h,D.b,u.f,x.a,C.a,C.d,I.c,I.g,wt.a,rt.u,rt.j,kt.o,s.s,s.t,rt.F,_.b,I.b,C.f,C.n,C.m,d.o,d.c,d.i,d.b,d.k,d.n,d.h,d.a,d.j,d.m],styles:["button#taOperationsNerSubmitBtn[_ngcontent-%COMP%]:enabled{margin-top:10px;background-color:#08509d;color:#fff}span.linkText[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}"]}),fo);function go(t,e){1&t&&(m.Tb(0,"div",14),m.Kc(1," Select dataset and feature or enter the text to generate the output "),m.Sb())}function vo(t,e){1&t&&(m.Tb(0,"mat-card",15),m.Tb(1,"mat-card-header",16),m.Tb(2,"mat-card-title"),m.Kc(3,"Output"),m.Sb(),m.Sb(),m.Ob(4,"mat-card-content",17),m.Sb())}var So,yo=i("Ycxt"),To=((So=function(){function t(e,a,o,i,r,s){n(this,t),this._toaster=e,this._localStorage=a,this._spinner=o,this._taDataStore=i,this._textAnalysis=r,this._utils=s,this.onRemove=new m.o,this.unsubscribe$=new p.b,this.wordFrequency=20,this.showOutput=!1,this.showValidationError=!1,this.showTextError=!1,this.binColor="basic",this.onSubmit=function(t){var e=this;if(this._spinner.showSpinner(),this.showOutput=!1,null==t)return this.showValidationError=!0,void this._spinner.stopSpinner();if(t<10)return this.showValidationError=!0,void this._spinner.stopSpinner();this.showValidationError=!1;var n=this._taDataStore.getFirstInputData();if(!n)return this.showTextError=!0,void this._spinner.stopSpinner();this.showTextError=!1;var a=this._taDataStore.getInputData(this.operation),o=null==a?void 0:a.output;if(!o)return this.showTextError=!0,void this._spinner.stopSpinner();var i=n.fileName,r=n.featureName,s={};i&&r?(s.colName=r,s.fileName=i,s.maxWords=t,s.projectId=this.project._id):(s.data=o,s.maxWords=t);var l=[{operationName:"wordFrequency",operationParameters:s}];this.showOutput=!0,this._textAnalysis.wordFrequency(s).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(t){e.output=t.data;for(var n=document.getElementById("wordFrequencyPlot");n.data&&n.data.length>0;)yo.deleteTraces(n,[0]);e.output.layout.template.layout.title.xanchor="center",e.output.layout.template.layout.title.y=.9,e.output.layout.template.layout.title.x=.5,e.output.layout.template.layout.title.yanchor="top",e.output.layout.autosize=!0,yo.plot(n,e.output.data,e.output.layout),e._taDataStore.saveOperationOutput({uid:e.operation.uid,operation:e.operation.operation,output:e.output,taskConfig:l}),e._spinner.stopSpinner(),e._taDataStore.broadcastSubmitEvent("updateInputBar")}),(function(t){e.showOutput=!1,e._spinner.stopSpinner(),e._toaster.error("Server Error","Error performing word frequency")}))},this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user")}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.inputData=this._taDataStore.getInputData(this.operation),this.setData(),this._taDataStore.onSubmitEventSubject.subscribe((function(e){t.inputData=t._taDataStore.getInputData(t.operation)}))}},{key:"setData",value:function(){var t=this;this._taDataStore.getAllOperationData().forEach((function(e){e.uid==t.operation.uid&&e.taskConfig.operationParameters&&(t.wordFrequency=e.taskConfig.operationParameters.maxWords)}))}},{key:"wordFrequencySliderLabel",value:function(t){return t}},{key:"mouseOverBin",value:function(){this.binColor="warn"}},{key:"mouseLeaveBin",value:function(){this.binColor="basic"}},{key:"removeOperation",value:function(){this._taDataStore.removeOperation(this.operation),this.onRemove.emit(this.operation)}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||So)(m.Nb(f.c),m.Nb(h.a),m.Nb(g.a),m.Nb(w),m.Nb(y.a),m.Nb(ha.a))},So.\u0275cmp=m.Hb({type:So,selectors:[["app-word-frequency"]],inputs:{operation:"operation"},outputs:{onRemove:"onRemove"},decls:29,vars:11,consts:[[3,"expanded"],[2,"color","black",3,"matTooltip"],[1,"fa","fa-trash",2,"margin-left","95%","cursor","pointer","font-size","16px",3,"color","mouseover","mouseleave","click"],[2,"border-left","7px solid green","display","flex"],["inputInfoCard",""],[1,"d-flex","flex-row",2,"margin","auto"],[2,"width","min-content","margin","auto"],[1,"fas","fa-info-circle","fa-2x",2,"color","green"],[2,"width","max-content","margin","auto"],["id","wordFrequencySlider","thumbLabel","","min","0","max","100","step","1","value","50","color","primary",3,"displayWith","ngModel","ngModelChange"],["id","taOperationsWordFrequencySubmitBtn","mat-raised-button","",3,"disabled","click"],[1,"form-group","row"],["class","text-danger offset-2 mt-2",4,"ngIf"],["class","mt-3","style","background-color: #f5f5f5",4,"ngIf"],[1,"text-danger","offset-2","mt-2"],[1,"mt-3",2,"background-color","#f5f5f5"],[2,"border-bottom","1px solid #3c3c3c"],["id","wordFrequencyPlot",1,"mt-2"]],template:function(t,e){1&t&&(m.Tb(0,"mat-expansion-panel",0),m.Tb(1,"mat-expansion-panel-header"),m.Tb(2,"mat-panel-title",1),m.Kc(3),m.Sb(),m.Tb(4,"mat-panel-description"),m.Tb(5,"mat-icon",2),m.ac("mouseover",(function(){return e.mouseOverBin()}))("mouseleave",(function(){return e.mouseLeaveBin()}))("click",(function(){return e.removeOperation()})),m.Sb(),m.Sb(),m.Sb(),m.Tb(6,"mat-card",3,4),m.Tb(8,"mat-card-content"),m.Tb(9,"div",5),m.Tb(10,"div",6),m.Ob(11,"mat-icon",7),m.Sb(),m.Tb(12,"div",8),m.Tb(13,"b"),m.Kc(14),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Ob(15,"br"),m.Tb(16,"span"),m.Kc(17,"Select Word Frequency : "),m.Tb(18,"mat-slider",9),m.ac("ngModelChange",(function(t){return e.wordFrequency=t})),m.Sb(),m.Kc(19,"\xa0\xa0"),m.Tb(20,"b"),m.Kc(21),m.Sb(),m.Sb(),m.Ob(22,"br"),m.Tb(23,"button",10),m.ac("click",(function(){return e.onSubmit(e.wordFrequency)})),m.Kc(24," Submit "),m.Sb(),m.Tb(25,"div",11),m.Ic(26,go,2,0,"div",12),m.Sb(),m.Ob(27,"br"),m.Ic(28,vo,5,0,"mat-card",13),m.Sb()),2&t&&(m.kc("expanded",e.operation.isPanelExpanded),m.Bb(2),m.kc("matTooltip",e._utils.getTootip("wordFrequency")),m.Bb(1),m.Mc(" ",e.operation.title," "),m.Bb(2),m.kc("color",e.binColor),m.Bb(9),m.Mc("\xa0\xa0\xa0Data is taken from ",e.inputData?e.inputData.operation:"inputData",""),m.Bb(4),m.kc("displayWith",e.wordFrequencySliderLabel)("ngModel",e.wordFrequency),m.Bb(3),m.Lc(e.wordFrequency),m.Bb(2),m.kc("disabled",!e.wordFrequency),m.Bb(3),m.kc("ngIf",e.showTextError),m.Bb(2),m.kc("ngIf",e.showOutput))},directives:[u.c,u.g,u.h,D.b,u.f,x.a,C.a,C.d,Ba.a,rt.u,rt.x,_.b,s.t,C.f,C.m],styles:["button#taOperationsWordFrequencySubmitBtn[_ngcontent-%COMP%]:enabled{margin-top:10px;background-color:#08509d;color:#fff}mat-slider.mat-slider#wordFrequencySlider[_ngcontent-%COMP%]{width:74%}"]}),So);function wo(t,e){if(1&t&&(m.Tb(0,"mat-option",22),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.kc("value",n.modelKey),m.Bb(1),m.Mc(" ",n.modelName," ")}}function ko(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Model is required."),m.Sb())}function Co(t,e){if(1&t){var n=m.Ub();m.Tb(0,"span"),m.Kc(1,"Word vectors : "),m.Tb(2,"mat-slider",23),m.ac("ngModelChange",(function(t){return m.wc(n),m.ec().wordVectorSliderVal=t})),m.Sb(),m.Kc(3,"\xa0\xa0"),m.Tb(4,"b"),m.Kc(5),m.Sb(),m.Sb()}if(2&t){var a=m.ec();m.Bb(2),m.kc("displayWith",a.wordVectorSliderLabel)("ngModel",a.wordVectorSliderVal),m.Bb(3),m.Lc(a.wordVectorSliderVal)}}function xo(t,e){if(1&t){var n=m.Ub();m.Tb(0,"span"),m.Kc(1,"Learning Rate : "),m.Tb(2,"mat-slider",24),m.ac("ngModelChange",(function(t){return m.wc(n),m.ec().learningRate=t})),m.Sb(),m.Kc(3,"\xa0\xa0"),m.Tb(4,"b"),m.Kc(5),m.Sb(),m.Sb()}if(2&t){var a=m.ec();m.Bb(2),m.kc("displayWith",a.wordVectorSliderLabel)("ngModel",a.learningRate),m.Bb(3),m.Lc(a.learningRate)}}function _o(t,e){if(1&t&&(m.Tb(0,"mat-option",22),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.kc("value",n.value),m.Bb(1),m.Mc(" ",n.algorithmName," ")}}function Do(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Training algorithm is required."),m.Sb())}function Io(t,e){if(1&t&&(m.Tb(0,"mat-form-field",9),m.Ob(1,"mat-label",10),m.Tb(2,"mat-select",25),m.Ic(3,_o,2,2,"mat-option",12),m.Sb(),m.Ic(4,Do,2,0,"mat-error",13),m.Sb()),2&t){var n=m.ec();m.Bb(1),m.kc("innerText",n.wordEmbeddingTrainingAlgoControl.value?"Training Algorithm":"Select a training algorithm"),m.Bb(1),m.kc("formControl",n.wordEmbeddingTrainingAlgoControl),m.Bb(1),m.kc("ngForOf",n.trainingAlgorithmList),m.Bb(1),m.kc("ngIf",n.wordEmbeddingTrainingAlgoControl.touched&&n.wordEmbeddingTrainingAlgoControl.hasError("required"))}}function Oo(t,e){if(1&t&&(m.Tb(0,"mat-option",22),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.kc("value",n.value),m.Bb(1),m.Mc(" ",n.functionName," ")}}function Eo(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Method is required."),m.Sb())}function Bo(t,e){if(1&t&&(m.Tb(0,"mat-form-field",9),m.Ob(1,"mat-label",10),m.Tb(2,"mat-select",25),m.Ic(3,Oo,2,2,"mat-option",12),m.Sb(),m.Ic(4,Eo,2,0,"mat-error",13),m.Sb()),2&t){var n=m.ec();m.Bb(1),m.kc("innerText",n.wordEmbeddingFunctionsControl.value?"Method":"Select a method"),m.Bb(1),m.kc("formControl",n.wordEmbeddingFunctionsControl),m.Bb(1),m.kc("ngForOf",n.functions),m.Bb(1),m.kc("ngIf",n.wordEmbeddingFunctionsControl.touched&&n.wordEmbeddingFunctionsControl.hasError("required"))}}function No(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1," Input is "),m.Tb(2,"strong"),m.Kc(3,"required"),m.Sb(),m.Sb())}function Mo(t,e){if(1&t&&(m.Tb(0,"mat-form-field"),m.Tb(1,"mat-label"),m.Kc(2,"Input 1"),m.Sb(),m.Ob(3,"input",26),m.Ic(4,No,4,0,"mat-error",13),m.Sb()),2&t){var n=m.ec();m.Bb(3),m.kc("formControl",n.input1FormControl),m.Bb(1),m.kc("ngIf",n.input1FormControl.hasError("required"))}}function Ao(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1," Input is "),m.Tb(2,"strong"),m.Kc(3,"required"),m.Sb(),m.Sb())}function Po(t,e){if(1&t&&(m.Tb(0,"mat-form-field"),m.Tb(1,"mat-label"),m.Kc(2,"Input 2"),m.Sb(),m.Ob(3,"input",26),m.Ic(4,Ao,4,0,"mat-error",13),m.Sb()),2&t){var n=m.ec();m.Bb(3),m.kc("formControl",n.input2FormControl),m.Bb(1),m.kc("ngIf",n.input2FormControl.hasError("required"))}}function Fo(t,e){1&t&&(m.Tb(0,"div",27),m.Kc(1," Select dataset and feature or enter the text to generate the output "),m.Sb())}function Ko(t,e){if(1&t&&(m.Tb(0,"mat-card-content",31),m.Tb(1,"p"),m.Kc(2),m.Sb(),m.Sb()),2&t){var n=m.ec(2);m.Bb(2),m.Lc(n.output)}}function Ro(t,e){1&t&&(m.Tb(0,"th",40),m.Kc(1,"Word"),m.Sb())}function Lo(t,e){if(1&t&&(m.Tb(0,"td",41),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.Bb(1),m.Lc(n.word)}}function jo(t,e){if(1&t&&(m.Tb(0,"th",40),m.Kc(1),m.Sb()),2&t){var n=m.ec(3);m.Bb(1),m.Lc(n.tableHeading)}}function Vo(t,e){if(1&t&&(m.Tb(0,"td",41),m.Kc(1),m.fc(2,"number"),m.Sb()),2&t){var n=e.$implicit;m.Bb(1),m.Mc(" ",m.hc(2,1,n.score||n.probability,"1.0-2")," ")}}function qo(t,e){1&t&&m.Ob(0,"tr",42)}function zo(t,e){1&t&&m.Ob(0,"tr",43)}function Uo(t,e){if(1&t&&(m.Tb(0,"mat-card-content",32),m.Tb(1,"table",33),m.Rb(2,34),m.Ic(3,Ro,2,0,"th",35),m.Ic(4,Lo,2,1,"td",36),m.Qb(),m.Rb(5,37),m.Ic(6,jo,2,1,"th",35),m.Ic(7,Vo,3,4,"td",36),m.Qb(),m.Ic(8,qo,1,0,"tr",38),m.Ic(9,zo,1,0,"tr",39),m.Sb(),m.Sb()),2&t){var n=m.ec(2);m.Bb(1),m.kc("dataSource",n.dataSource),m.Bb(7),m.kc("matHeaderRowDef",n.displayedColumns),m.Bb(1),m.kc("matRowDefColumns",n.displayedColumns)}}function Wo(t,e){if(1&t&&(m.Tb(0,"mat-card",28),m.Tb(1,"mat-card-header"),m.Tb(2,"mat-card-title"),m.Kc(3,"Output"),m.Sb(),m.Sb(),m.Ic(4,Ko,3,1,"mat-card-content",29),m.Ic(5,Uo,10,3,"mat-card-content",30),m.Sb()),2&t){var n=m.ec();m.Bb(4),m.kc("ngIf",!n.showTableOutput&&n.showTextOutput),m.Bb(1),m.kc("ngIf",!n.showTextOutput&&n.showTableOutput)}}var $o,Go=(($o=function(){function t(e,a,o,i,r,s,l){var c=this;n(this,t),this._dialog=e,this._toaster=a,this._localStorage=o,this._spinner=i,this._taDataStore=r,this._textAnalysis=s,this._utils=l,this.onRemove=new m.o,this.modelsList=[{modelName:"Word2Vec",modelKey:"word2vec"},{modelName:"Glove",modelKey:"Glove"}],this.trainingAlgorithmList=[{algorithmName:"CBOW",value:"0"},{algorithmName:"skip-gram",value:"1"}],this.functionsList=[{functionName:"Similarity Score",value:"similarityscore"},{functionName:"Most Similar Word",value:"mostsimilarword"},{functionName:"Output Word",value:"outputword"}],this.binColor="basic",this.unsubscribe$=new p.b,this.dataSource=new d.p,this.displayedColumns=[],this.showTextError=!1,this.wordVectorSliderVal=100,this.learningRate=.05,this.wordEmbedding={input:null},this.showTableOutput=!1,this.showTextOutput=!1,this.tableHeading="Score",this.wordEmbeddingModelControl=new rt.i("",rt.I.required),this.wordEmbeddingTrainingAlgoControl=new rt.i("",rt.I.required),this.wordEmbeddingFunctionsControl=new rt.i("",rt.I.required),this.input1FormControl=new rt.i("",rt.I.required),this.input2FormControl=new rt.i("",rt.I.required),this.wordEmbeddingPipelineSettingsList=[{pipeSettingName:"Create vectors as new feature(s)",pipeSettingTag:"vector"}],this.onSubmit=function(t,e,n,a,o,i){c.showTableOutput=!1,c.showTextOutput=!1,c._spinner.showSpinner(),c.showTextError=!1;var r=c._taDataStore.getInputData(c.operation);if(!(r=null==r?void 0:r.output))return c.showTextError=!0,void c._spinner.stopSpinner();c.wordEmbedding.input=o.value&&i.value?[o.value,i.value]:o.value?o.value:i.value;var s={data:r,taskConfig:[{operationName:"wordEmbedding",operationParameters:{model:t.value,wordVector:e||100,trainingAlgorithm:parseInt(n.value)||0,method:a.value,input:c.wordEmbedding.input||null,addFeature:c.wordEmbeddingPipelineSettingValue||[],learningRate:c.learningRate}}]};"Glove"==t.value?delete s.taskConfig[0].operationParameters.trainingAlgorithm:delete s.taskConfig[0].operationParameters.learningRate,c._textAnalysis.wordEmbedding(s).pipe(Object(b.a)(c.unsubscribe$)).subscribe((function(t){var e;"string"==typeof t.data.data&&"word is not in vocab"===t.data.data?(c.showTableOutput=!1,c.showTextOutput=!0,c.output="word is not in vocab"):"similarityscore"==s.taskConfig[0].operationParameters.method?(c.showTextOutput=!0,c.output="The Similarity Score is "+t.data.data.toFixed(2)):(c.showTableOutput=!0,c.output=t.data.data,c.tableHeading=(null===(e=c.output[0])||void 0===e?void 0:e.score)?"Score":"Probability",c.dataSource.data=t.data.data,c.dataSource._updateChangeSubscription()),c._taDataStore.saveOperationOutput({uid:c.operation.uid,operation:"wordEmbedding",output:c.output,taskConfig:s.taskConfig}),c._spinner.stopSpinner(),c._taDataStore.broadcastSubmitEvent("updateInputBar")}),(function(t){c.showTableOutput=!1,c.showTextOutput=!1,c._spinner.stopSpinner(),c._toaster.error("Server Error","Error performing word embedding")})),c._spinner.stopSpinner()},this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this.displayedColumns=["word","score"],this.wordEmbeddingTrainingAlgoControl.valueChanges.subscribe((function(t){c.resetControls()})),this.wordEmbeddingFunctionsControl.valueChanges.subscribe((function(t){"similarityscore"!=t&&c.input2FormControl.reset()}))}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.inputData=this._taDataStore.getInputData(this.operation),this.setData(),this._taDataStore.onSubmitEventSubject.subscribe((function(e){t.inputData=t._taDataStore.getInputData(t.operation)}))}},{key:"setData",value:function(){var t=this;this._taDataStore.getAllOperationData().forEach((function(e){if(e.uid==t.operation.uid&&e.taskConfig.operationParameters){if(e.taskConfig.operationParameters.addFeature.length&&(t.wordEmbeddingPipelineSettingValue=e.taskConfig.operationParameters.addFeature),t.wordEmbeddingModelControl.setValue(e.taskConfig.operationParameters.model),t.wordVectorSliderVal=e.taskConfig.operationParameters.wordVector||100,e.taskConfig.operationParameters.hasOwnProperty("learningRate")&&(t.learningRate=e.taskConfig.operationParameters.learningRate),e.taskConfig.operationParameters.trainingAlgorithm){var n=t.trainingAlgorithmList.filter((function(t){if(e.taskConfig.operationParameters.trainingAlgorithm==t.value)return t}));t.wordEmbeddingTrainingAlgoControl.setValue(n[0].value)}t.functions="Glove"===e.taskConfig.operationParameters.method?t.functionsList.filter((function(t){return"mostsimilarword"===t.value})):t.functionsList,t.wordEmbeddingFunctionsControl.setValue(e.taskConfig.operationParameters.method),e.taskConfig.operationParameters.input&&"object"==typeof e.taskConfig.operationParameters.input?(t.input1FormControl.setValue(e.taskConfig.operationParameters.input[0]),t.input2FormControl.setValue(e.taskConfig.operationParameters.input[1])):t.input1FormControl.setValue(e.taskConfig.operationParameters.input)}}))}},{key:"onModelChange",value:function(t){this.functions="Glove"===t?this.functionsList.filter((function(t){return"mostsimilarword"===t.value})):this.functionsList}},{key:"resetControls",value:function(){this.wordEmbeddingFunctionsControl.reset(),this.input1FormControl.reset(),this.input2FormControl.reset()}},{key:"wordVectorSliderLabel",value:function(t){return t}},{key:"mouseOverBin",value:function(){this.binColor="warn"}},{key:"mouseLeaveBin",value:function(){this.binColor="basic"}},{key:"removeOperation",value:function(){this._taDataStore.removeOperation(this.operation),this.onRemove.emit(this.operation)}},{key:"showPipelineSetting",value:function(){var t=this;this._dialog.open(ma,{minWidth:"50vw",data:{list:this.wordEmbeddingPipelineSettingsList,selectedVal:this.wordEmbeddingPipelineSettingValue}}).afterClosed().subscribe((function(e){if(e&&void 0!==t.output){t.wordEmbeddingPipelineSettingValue=e.featureArray;var n=t._taDataStore.getSavedOperationOutput(t.operation.uid);n.taskConfig[0].operationParameters.addFeature=t.wordEmbeddingPipelineSettingValue,t._taDataStore.saveOperationOutput({uid:t.operation.uid,operation:t.operation.operation,output:t.output,taskConfig:n.taskConfig})}else e&&(t.wordEmbeddingPipelineSettingValue=e.featureArray)}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(!1),this.unsubscribe$.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||$o)(m.Nb(v.c),m.Nb(f.c),m.Nb(h.a),m.Nb(g.a),m.Nb(w),m.Nb(y.a),m.Nb(ha.a))},$o.\u0275cmp=m.Hb({type:$o,selectors:[["app-word-embedding"]],inputs:{operation:"operation"},outputs:{onRemove:"onRemove"},decls:43,vars:18,consts:[[3,"expanded"],[2,"color","black",3,"matTooltip"],[1,"fa","fa-trash",2,"margin-left","95%","cursor","pointer","font-size","16px",3,"color","mouseover","mouseleave","click"],[2,"border-left","7px solid green","display","flex"],["inputInfoCard",""],[1,"d-flex","flex-row",2,"margin","auto"],[2,"width","min-content","margin","auto"],[1,"fas","fa-info-circle","fa-2x",2,"color","green"],[2,"width","max-content","margin","auto"],["appearance","fill"],[3,"innerText"],[3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["appearance","fill",4,"ngIf"],[1,"row"],[1,"col-md-6"],["id","taOperationsWordEmbeddingSubmitBtn","mat-raised-button","",3,"disabled","click"],[1,"linkText",3,"click"],[1,"form-group","row"],["class","text-danger offset-2 mt-2",4,"ngIf"],["class","mt-3","style","background-color: #f5f5f5",4,"ngIf"],[3,"value"],["id","informationRetainedSlider","thumbLabel","","min","0","max","500","step","1","value","100","color","primary",3,"displayWith","ngModel","ngModelChange"],["id","learningRate","thumbLabel","","min","0.01","max","0.1","step","0.01","value","0.05","color","primary",3,"displayWith","ngModel","ngModelChange"],[3,"formControl"],["type","text","matInput","","placeholder","write a word",3,"formControl"],[1,"text-danger","offset-2","mt-2"],[1,"mt-3",2,"background-color","#f5f5f5"],["class","mt-2","style","\n        border-top: 1px solid #3c3c3c;\n        margin-top: -10px;\n        padding-top: 10px;\n      ",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"mt-2",2,"border-top","1px solid #3c3c3c","margin-top","-10px","padding-top","10px"],[1,"mt-2"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","word"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","score"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(m.Tb(0,"mat-expansion-panel",0),m.Tb(1,"mat-expansion-panel-header"),m.Tb(2,"mat-panel-title",1),m.Kc(3),m.Sb(),m.Tb(4,"mat-panel-description"),m.Tb(5,"mat-icon",2),m.ac("mouseover",(function(){return e.mouseOverBin()}))("mouseleave",(function(){return e.mouseLeaveBin()}))("click",(function(){return e.removeOperation()})),m.Sb(),m.Sb(),m.Sb(),m.Tb(6,"mat-card",3,4),m.Tb(8,"mat-card-content"),m.Tb(9,"div",5),m.Tb(10,"div",6),m.Ob(11,"mat-icon",7),m.Sb(),m.Tb(12,"div",8),m.Tb(13,"b"),m.Kc(14),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Ob(15,"br"),m.Tb(16,"mat-form-field",9),m.Ob(17,"mat-label",10),m.Tb(18,"mat-select",11),m.ac("selectionChange",(function(){return e.onModelChange(e.wordEmbeddingModelControl.value)})),m.Ic(19,wo,2,2,"mat-option",12),m.Sb(),m.Ic(20,ko,2,0,"mat-error",13),m.Sb(),m.Ic(21,Co,6,3,"span",13),m.Ob(22,"br"),m.Ic(23,xo,6,3,"span",13),m.Ob(24,"br"),m.Ic(25,Io,5,4,"mat-form-field",14),m.Ic(26,Bo,5,4,"mat-form-field",14),m.Tb(27,"div",15),m.Tb(28,"div",16),m.Ic(29,Mo,5,2,"mat-form-field",13),m.Sb(),m.Tb(30,"div",16),m.Ic(31,Po,5,2,"mat-form-field",13),m.Sb(),m.Sb(),m.Ob(32,"br"),m.Tb(33,"span"),m.Tb(34,"button",17),m.ac("click",(function(){return e.onSubmit(e.wordEmbeddingModelControl,e.wordVectorSliderVal,e.wordEmbeddingTrainingAlgoControl,e.wordEmbeddingFunctionsControl,e.input1FormControl,e.input2FormControl)})),m.Kc(35," Submit"),m.Sb(),m.Kc(36,"\xa0\xa0"),m.Tb(37,"span",18),m.ac("click",(function(){return e.showPipelineSetting()})),m.Kc(38,"Settings"),m.Sb(),m.Sb(),m.Tb(39,"div",19),m.Ic(40,Fo,2,0,"div",20),m.Sb(),m.Ob(41,"br"),m.Ic(42,Wo,6,2,"mat-card",21),m.Sb()),2&t&&(m.kc("expanded",e.operation.isPanelExpanded),m.Bb(2),m.kc("matTooltip",e._utils.getTootip("wordEmbedding")),m.Bb(1),m.Mc(" ",e.operation.title," "),m.Bb(2),m.kc("color",e.binColor),m.Bb(9),m.Mc("\xa0\xa0\xa0Data is taken from ",e.inputData?e.inputData.operation:"inputData",""),m.Bb(3),m.kc("innerText",e.wordEmbeddingModelControl.value?"Model":"Select a model"),m.Bb(1),m.kc("formControl",e.wordEmbeddingModelControl),m.Bb(1),m.kc("ngForOf",e.modelsList),m.Bb(1),m.kc("ngIf",e.wordEmbeddingModelControl.touched&&e.wordEmbeddingModelControl.hasError("required")),m.Bb(1),m.kc("ngIf",e.wordEmbeddingModelControl.value),m.Bb(2),m.kc("ngIf","Glove"==e.wordEmbeddingModelControl.value),m.Bb(2),m.kc("ngIf",e.wordEmbeddingModelControl.value&&"Glove"!=e.wordEmbeddingModelControl.value),m.Bb(1),m.kc("ngIf",e.wordEmbeddingModelControl.value),m.Bb(3),m.kc("ngIf",e.wordEmbeddingModelControl.value&&e.wordEmbeddingFunctionsControl.value),m.Bb(2),m.kc("ngIf",e.wordEmbeddingModelControl.value&&"similarityscore"===e.wordEmbeddingFunctionsControl.value),m.Bb(3),m.kc("disabled",e.wordEmbeddingModelControl.hasError("required")&&e.wordEmbeddingTrainingAlgoControl.hasError("required")&&e.wordEmbeddingFunctionsControl.hasError("required")),m.Bb(6),m.kc("ngIf",e.showTextError),m.Bb(2),m.kc("ngIf",e.showTableOutput||e.showTextOutput))},directives:[u.c,u.g,u.h,D.b,u.f,x.a,C.a,C.d,I.c,I.g,wt.a,rt.u,rt.j,s.s,s.t,_.b,kt.o,I.b,Ba.a,rt.x,O.b,rt.d,C.f,C.m,d.o,d.c,d.i,d.b,d.k,d.n,d.h,d.a,d.j,d.m],pipes:[s.g],styles:["button#taOperationsWordEmbeddingSubmitBtn[_ngcontent-%COMP%]:enabled{margin-top:10px;background-color:#08509d;color:#fff}mat-slider.mat-slider#informationRetainedSlider[_ngcontent-%COMP%], mat-slider.mat-slider#learningRate[_ngcontent-%COMP%]{width:85%}span.linkText[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}"]}),$o);function Ho(t,e){if(1&t&&(m.Tb(0,"mat-option",18),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.kc("value",n.operationKey),m.Bb(1),m.Mc(" ",n.operationName," ")}}function Xo(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Atleast one cleaning method is required."),m.Sb())}function Yo(t,e){if(1&t){var n=m.Ub();m.Tb(0,"span"),m.Kc(1,"Select threshold : "),m.Tb(2,"mat-slider",19),m.ac("ngModelChange",(function(t){return m.wc(n),m.ec().countOfWordsToRemove=t})),m.Sb(),m.Kc(3,"\xa0\xa0"),m.Tb(4,"b"),m.Kc(5),m.Sb(),m.Sb()}if(2&t){var a=m.ec();m.Bb(2),m.kc("displayWith",a.removeWordsSliderLabel)("ngModel",a.countOfWordsToRemove),m.Bb(3),m.Lc(a.countOfWordsToRemove)}}function Qo(t,e){1&t&&(m.Tb(0,"div",20),m.Kc(1," Select dataset and feature or enter the text to generate the output "),m.Sb())}function Jo(t,e){if(1&t){var n=m.Ub();m.Tb(0,"mat-card",21),m.Tb(1,"mat-card-header",22),m.Tb(2,"mat-card-title-group"),m.Tb(3,"mat-card-title"),m.Kc(4,"Output"),m.Sb(),m.Sb(),m.Tb(5,"div",23),m.Tb(6,"mat-icon",24,25),m.ac("mouseover",(function(){return m.wc(n),m.ec().mouseOverCopy()}))("mouseleave",(function(){return m.wc(n),m.ec().mouseLeaveCopy()}))("click",(function(){return m.wc(n),m.ec().copyOutput()})),m.Sb(),m.Sb(),m.Sb(),m.Tb(8,"mat-card-content",26),m.Tb(9,"p",27),m.Kc(10),m.Sb(),m.Sb(),m.Sb()}if(2&t){var a=m.ec();m.Bb(6),m.kc("color",a.copyColor)("matTooltip",a.tooltipText),m.Bb(4),m.Lc(a.output)}}var Zo,ti=((Zo=function(){function t(e,a,o,i,r){var s=this;n(this,t),this._taDataStore=e,this._toaster=a,this._textAnalysis=o,this._spinner=i,this._utils=r,this.onRemove=new m.o,this.cleaningOperations=[{operationName:"Remove Numbers",operationKey:"removeNum"},{operationName:"Remove hyperlinks",operationKey:"removeHyper"},{operationName:"Remove emoticons/emojis",operationKey:"removeEmoticon"},{operationName:"Remove words",operationKey:"shortWord"},{operationName:"Expand contractions",operationKey:"expandCont"},{operationName:"Remove punctuations",operationKey:"removePunct"},{operationName:"Stemming",operationKey:"stemming"},{operationName:"Lemmatization",operationKey:"lemmatization"},{operationName:"Option To Delete Rows If Empty Ones Are Created After Cleaning",operationKey:"optionToDeleteRow"}],this.unsubscribe$=new p.b,this.testCleaningControl=new rt.i("",rt.I.required),this.showRemoveWordsSlider=!1,this.showTextError=!1,this.showOutput=!1,this.binColor="basic",this.copyColor="basic",this.tooltipText="Click to copy!",this.cleaningOperationsDbData=[],this.showValidationError=!1,this.countOfWordsToRemove=1,this.copyOutput=function(){var t=document.getElementById("cleaningOutput").innerText,e=document.createElement("textarea");document.body.appendChild(e),e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e),this.tooltipText="Copied!"},this.testCleaningControl.valueChanges.subscribe((function(t){s.showRemoveWordsSlider=!!s.testCleaningControl.value.includes("shortWord")}))}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.inputData=this._taDataStore.getInputData(this.operation),this.setData(),this._taDataStore.onSubmitEventSubject.subscribe((function(e){t.inputData=t._taDataStore.getInputData(t.operation)}))}},{key:"setData",value:function(){var t=this;this._taDataStore.getAllOperationData().forEach((function(e){e.uid==t.operation.uid&&e.taskConfig.operationParameters&&(e.taskConfig.operationParameters.forEach((function(e){"shortWord"==e.operationKey&&(t.showRemoveWordsSlider=!0,t.countOfWordsToRemove=e.threshold),t.cleaningOperationsDbData.push(e.operationKey)})),t.testCleaningControl.setValue(t.cleaningOperationsDbData))}))}},{key:"removeWordsSliderLabel",value:function(t){return t}},{key:"mouseOverBin",value:function(){this.binColor="warn"}},{key:"mouseLeaveBin",value:function(){this.binColor="basic"}},{key:"removeOperation",value:function(){this._taDataStore.removeOperation(this.operation),this.onRemove.emit(this.operation)}},{key:"mouseOverCopy",value:function(){this.copyColor="primary"}},{key:"mouseLeaveCopy",value:function(){this.copyColor="basic"}},{key:"onSubmit",value:function(t,e){var n=this;if(this._spinner.showSpinner(),this.showOutput=!1,null==e)return this.showValidationError=!0,void this._spinner.stopSpinner();if(e<1)return this.showValidationError=!0,void this._spinner.stopSpinner();this.showValidationError=!1;var a=this.cleaningOperations.filter((function(e){return t.value.some((function(t){return e.operationKey===t}))})).map((function(t){return"Remove words"==t.operationName?(t.threshold=Number(e),t):t})),o=this._taDataStore.getInputData(this.operation);if(!(o=null==o?void 0:o.output))return this.showTextError=!0,void this._spinner.stopSpinner();this.showTextError=!1;var i=[{operationName:"textCleaning",operationParameters:a}];this._textAnalysis.textCleaning(o,i).subscribe((function(t){n.showOutput=!0,n.output=t.data.data,n._taDataStore.saveOperationOutput({uid:n.operation.uid,operation:n.operation.operation,output:n.output,taskConfig:i}),n._spinner.stopSpinner(),n._taDataStore.broadcastSubmitEvent("updateInputBar")}),(function(t){n.showOutput=!1,n._spinner.stopSpinner(),n._toaster.error("Server Error","Error performing text cleaning")}))}}]),t}()).\u0275fac=function(t){return new(t||Zo)(m.Nb(w),m.Nb(f.c),m.Nb(y.a),m.Nb(g.a),m.Nb(ha.a))},Zo.\u0275cmp=m.Hb({type:Zo,selectors:[["app-text-cleaning"]],inputs:{operation:"operation"},outputs:{onRemove:"onRemove"},decls:29,vars:13,consts:[[3,"expanded"],[2,"color","black",3,"matTooltip"],[1,"fa","fa-trash",2,"margin-left","95%","cursor","pointer","font-size","16px",3,"color","mouseover","mouseleave","click"],[2,"border-left","7px solid green","display","flex"],["inputInfoCard",""],[1,"d-flex","flex-row",2,"margin","auto"],[2,"width","min-content","margin","auto"],[1,"fas","fa-info-circle","fa-2x",2,"color","green"],[2,"width","max-content","margin","auto"],["appearance","fill"],[3,"innerText"],["required","","multiple","",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["id","taOperationsTextCleaningSubmitBtn","mat-raised-button","",3,"disabled","click"],[1,"form-group","row"],["class","text-danger offset-2 mt-2",4,"ngIf"],["class","mt-3","style","background-color: #f5f5f5",4,"ngIf"],[3,"value"],["id","removeWordsSlider","thumbLabel","","min","0","max","5","step","1","value","1","color","primary",3,"displayWith","ngModel","ngModelChange"],[1,"text-danger","offset-2","mt-2"],[1,"mt-3",2,"background-color","#f5f5f5"],[2,"border-bottom","1px solid #3c3c3c"],[2,"margin-left","85%"],["matTooltipPosition","above",1,"far","fa-copy",2,"cursor","pointer","font-size","16px",3,"color","matTooltip","mouseover","mouseleave","click"],["tooltip","matTooltip"],[1,"mt-2"],["id","cleaningOutput"]],template:function(t,e){1&t&&(m.Tb(0,"mat-expansion-panel",0),m.Tb(1,"mat-expansion-panel-header"),m.Tb(2,"mat-panel-title",1),m.Kc(3),m.Sb(),m.Tb(4,"mat-panel-description"),m.Tb(5,"mat-icon",2),m.ac("mouseover",(function(){return e.mouseOverBin()}))("mouseleave",(function(){return e.mouseLeaveBin()}))("click",(function(){return e.removeOperation()})),m.Sb(),m.Sb(),m.Sb(),m.Tb(6,"mat-card",3,4),m.Tb(8,"mat-card-content"),m.Tb(9,"div",5),m.Tb(10,"div",6),m.Ob(11,"mat-icon",7),m.Sb(),m.Tb(12,"div",8),m.Tb(13,"b"),m.Kc(14),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Ob(15,"br"),m.Tb(16,"mat-form-field",9),m.Ob(17,"mat-label",10),m.Tb(18,"mat-select",11),m.Ic(19,Ho,2,2,"mat-option",12),m.Sb(),m.Ic(20,Xo,2,0,"mat-error",13),m.Sb(),m.Ic(21,Yo,6,3,"span",13),m.Ob(22,"br"),m.Tb(23,"button",14),m.ac("click",(function(){return e.onSubmit(e.testCleaningControl,e.countOfWordsToRemove)})),m.Kc(24," Submit "),m.Sb(),m.Tb(25,"div",15),m.Ic(26,Qo,2,0,"div",16),m.Sb(),m.Ob(27,"br"),m.Ic(28,Jo,11,3,"mat-card",17),m.Sb()),2&t&&(m.kc("expanded",e.operation.isPanelExpanded),m.Bb(2),m.kc("matTooltip",e._utils.getTootip("textCleaning")),m.Bb(1),m.Mc(" ",e.operation.title," "),m.Bb(2),m.kc("color",e.binColor),m.Bb(9),m.Mc("\xa0\xa0\xa0Data is taken from ",e.inputData?e.inputData.operation:"inputData",""),m.Bb(3),m.kc("innerText",e.testCleaningControl.value?"Cleaning Methods":"Choose methods"),m.Bb(1),m.kc("formControl",e.testCleaningControl),m.Bb(1),m.kc("ngForOf",e.cleaningOperations),m.Bb(1),m.kc("ngIf",e.testCleaningControl.touched&&e.testCleaningControl.hasError("required")),m.Bb(1),m.kc("ngIf",e.showRemoveWordsSlider),m.Bb(2),m.kc("disabled",e.testCleaningControl.hasError("required")),m.Bb(3),m.kc("ngIf",e.showTextError),m.Bb(2),m.kc("ngIf",e.showOutput))},directives:[u.c,u.g,u.h,D.b,u.f,x.a,C.a,C.d,I.c,I.g,wt.a,rt.F,rt.u,rt.j,s.s,s.t,_.b,kt.o,I.b,Ba.a,rt.x,C.f,C.n,C.m],styles:["button#taOperationsTextCleaningSubmitBtn[_ngcontent-%COMP%]:enabled{margin-top:10px;background-color:#08509d;color:#fff}mat-slider.mat-slider#removeWordsSlider[_ngcontent-%COMP%]{width:80%}"]}),Zo);function ei(t,e){if(1&t&&(m.Tb(0,"mat-option",25),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.kc("value",n),m.Bb(1),m.Mc(" ",n.modelName," ")}}function ni(t,e){1&t&&(m.Tb(0,"mat-error"),m.Kc(1,"Model is required."),m.Sb())}function ai(t,e){if(1&t){var n=m.Ub();m.Tb(0,"div",36),m.Tb(1,"mat-form-field",37),m.Tb(2,"mat-label"),m.Kc(3,"Phrase"),m.Sb(),m.Ob(4,"input",38),m.Sb(),m.Tb(5,"button",39),m.ac("click",(function(){m.wc(n);var t=e.index,a=m.ec().$implicit;return m.ec().deletePhrase(a,t)})),m.Tb(6,"mat-icon"),m.Kc(7,"close"),m.Sb(),m.Sb(),m.Sb()}2&t&&m.kc("formGroupName",e.index)}function oi(t,e){if(1&t&&(m.Tb(0,"mat-option",25),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.kc("value",n),m.Bb(1),m.Mc(" ",n.attributeName," ")}}function ii(t,e){1&t&&(m.Tb(0,"mat-form-field",47),m.Tb(1,"mat-label"),m.Kc(2,"Text"),m.Sb(),m.Ob(3,"input",48),m.Sb())}function ri(t,e){1&t&&(m.Tb(0,"mat-checkbox",49),m.Kc(1,"Select Value"),m.Sb())}function si(t,e){if(1&t&&(m.Tb(0,"mat-option",25),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.kc("value",n.tagsValue),m.Bb(1),m.Mc(" ",n.tagsName," ")}}function li(t,e){if(1&t&&(m.Tb(0,"mat-form-field",41),m.Ob(1,"mat-label",11),m.Tb(2,"mat-select",49),m.Ic(3,si,2,2,"mat-option",14),m.Sb(),m.Sb()),2&t){var n=m.ec().$implicit,a=m.ec(2);m.Bb(1),m.kc("innerText",n.get("attributeValue").value?"Tags":"Select Tag"),m.Bb(2),m.kc("ngForOf",a.posTagList)}}function ci(t,e){if(1&t&&(m.Tb(0,"mat-option",25),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.kc("value",n),m.Bb(1),m.Mc(" ",n," ")}}function ui(t,e){if(1&t){var n=m.Ub();m.Tb(0,"div",36),m.Ob(1,"br"),m.Tb(2,"mat-expansion-panel",0),m.Tb(3,"mat-expansion-panel-header"),m.Tb(4,"mat-panel-title",40),m.Tb(5,"b"),m.Kc(6,"Token"),m.Sb(),m.Sb(),m.Tb(7,"mat-panel-description"),m.Tb(8,"mat-icon",2),m.ac("mouseover",(function(){return m.wc(n),m.ec(2).tokenBinColor="warn"}))("mouseleave",(function(){return m.wc(n),m.ec(2).tokenBinColor="basic"}))("click",(function(){m.wc(n);var t=e.index,a=m.ec().$implicit;return m.ec().deleteToken(a,t)})),m.Sb(),m.Sb(),m.Sb(),m.Tb(9,"mat-form-field",41),m.Ob(10,"mat-label",11),m.Tb(11,"mat-select",42),m.Ic(12,oi,2,2,"mat-option",14),m.Sb(),m.Sb(),m.Ic(13,ii,4,0,"mat-form-field",43),m.Ic(14,ri,2,0,"mat-checkbox",44),m.Ic(15,li,4,2,"mat-form-field",45),m.Tb(16,"mat-form-field",41),m.Ob(17,"mat-label",11),m.Tb(18,"mat-select",46),m.Ic(19,ci,2,2,"mat-option",14),m.Sb(),m.Sb(),m.Sb(),m.Sb()}if(2&t){var a=e.$implicit,o=e.index,i=m.ec(2);m.kc("formGroupName",o),m.Bb(2),m.kc("expanded",!0),m.Bb(6),m.kc("color",i.tokenBinColor),m.Bb(2),m.kc("innerText",a.get("attributeLabel").value?"Attributes":"Select Attribute"),m.Bb(2),m.kc("ngForOf",i.attributesList),m.Bb(1),m.kc("ngIf","dropdown"!=a.get("attributeLabel").value.attributeType&&"textbox"==a.get("attributeLabel").value.attributeType),m.Bb(1),m.kc("ngIf","textbox"!=a.get("attributeLabel").value.attributeType&&"dropdown"!=a.get("attributeLabel").value.attributeType&&"checkbox"==a.get("attributeLabel").value.attributeType),m.Bb(1),m.kc("ngIf","textbox"!=a.get("attributeLabel").value.attributeType&&"dropdown"==a.get("attributeLabel").value.attributeType),m.Bb(2),m.kc("innerText",a.get("wildCard").value?"WildCard":"Select a wildcard"),m.Bb(2),m.kc("ngForOf",i.wildCard)}}function di(t,e){if(1&t){var n=m.Ub();m.Tb(0,"mat-card",26),m.Tb(1,"mat-card-header",27),m.Tb(2,"mat-card-title-group"),m.Tb(3,"mat-card-title"),m.Kc(4,"Pattern"),m.Sb(),m.Sb(),m.Tb(5,"div",28),m.Tb(6,"mat-icon",29),m.ac("mouseover",(function(){return m.wc(n),m.ec().patternBinColor="warn"}))("mouseleave",(function(){return m.wc(n),m.ec().patternBinColor="basic"}))("click",(function(){m.wc(n);var t=e.index;return m.ec().deletePattern(t)})),m.Sb(),m.Sb(),m.Sb(),m.Tb(7,"mat-card-content",30),m.Tb(8,"mat-form-field"),m.Tb(9,"mat-label"),m.Kc(10,"Pattern Name"),m.Sb(),m.Ob(11,"input",31),m.Sb(),m.Tb(12,"div",32),m.Ic(13,ai,8,1,"div",33),m.Sb(),m.Ob(14,"br"),m.Tb(15,"span"),m.Tb(16,"button",34),m.ac("click",(function(){m.wc(n);var t=e.$implicit;return m.ec().addPhrase(t)})),m.Ob(17,"i",19),m.Sb(),m.Kc(18," Add Phrase "),m.Sb(),m.Ob(19,"br"),m.Tb(20,"div",35),m.Ic(21,ui,20,10,"div",33),m.Sb(),m.Ob(22,"br"),m.Tb(23,"span"),m.Tb(24,"button",34),m.ac("click",(function(){m.wc(n);var t=e.$implicit;return m.ec().addToken(t)})),m.Ob(25,"i",19),m.Sb(),m.Kc(26," Add Token "),m.Sb(),m.Sb(),m.Sb()}if(2&t){var a=e.$implicit,o=e.index,i=m.ec();m.kc("formGroupName",o),m.Bb(6),m.kc("color",i.patternBinColor),m.Bb(7),m.kc("ngForOf",a.get("phrases").controls),m.Bb(8),m.kc("ngForOf",a.get("tokens").controls)}}function pi(t,e){1&t&&(m.Tb(0,"div",50),m.Kc(1," Select dataset and feature or enter the text to generate the output "),m.Sb())}function bi(t,e){1&t&&(m.Tb(0,"div",50),m.Kc(1," Add some patterns to perform rule based matching. "),m.Sb())}function mi(t,e){1&t&&(m.Tb(0,"th",63),m.Kc(1,"Matched By"),m.Sb())}function fi(t,e){if(1&t&&(m.Tb(0,"td",64),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.Bb(1),m.Lc(n.matchedBy)}}function hi(t,e){1&t&&(m.Tb(0,"th",63),m.Kc(1,"Pattern Name"),m.Sb())}function gi(t,e){if(1&t&&(m.Tb(0,"td",64),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.Bb(1),m.Lc(n.matchId)}}function vi(t,e){1&t&&(m.Tb(0,"th",63),m.Kc(1,"Matched Token/Phrase"),m.Sb())}function Si(t,e){if(1&t&&(m.Tb(0,"td",64),m.Kc(1),m.Sb()),2&t){var n=e.$implicit;m.Bb(1),m.Lc(n.matchedText)}}function yi(t,e){1&t&&m.Ob(0,"tr",65)}function Ti(t,e){1&t&&m.Ob(0,"tr",66)}function wi(t,e){if(1&t){var n=m.Ub();m.Tb(0,"mat-card",51),m.Tb(1,"mat-card-header"),m.Tb(2,"mat-card-title-group"),m.Tb(3,"mat-card-title"),m.Kc(4,"Output"),m.Sb(),m.Sb(),m.Tb(5,"div",28),m.Tb(6,"mat-icon",52,53),m.ac("mouseover",(function(){return m.wc(n),m.ec().mouseOverGraph()}))("mouseleave",(function(){return m.wc(n),m.ec().mouseLeaveGraph()}))("click",(function(){m.wc(n);var t=m.ec();return t.onSubmit(t.rbmControl,"html")})),m.Sb(),m.Sb(),m.Sb(),m.Tb(8,"mat-card-content",54),m.Tb(9,"table",55),m.Rb(10,56),m.Ic(11,mi,2,0,"th",57),m.Ic(12,fi,2,1,"td",58),m.Qb(),m.Rb(13,59),m.Ic(14,hi,2,0,"th",57),m.Ic(15,gi,2,1,"td",58),m.Qb(),m.Rb(16,60),m.Ic(17,vi,2,0,"th",57),m.Ic(18,Si,2,1,"td",58),m.Qb(),m.Ic(19,yi,1,0,"tr",61),m.Ic(20,Ti,1,0,"tr",62),m.Sb(),m.Sb(),m.Sb()}if(2&t){var a=m.ec();m.Bb(6),m.kc("color",a.graphIconColor),m.Bb(3),m.kc("dataSource",a.dataSource),m.Bb(10),m.kc("matHeaderRowDef",a.displayedColumns),m.Bb(1),m.kc("matRowDefColumns",a.displayedColumns)}}var ki,Ci,xi=((ki=function(){function t(e,a,o,i,r,s,l,c,u){var f=this;n(this,t),this._dialog=e,this._dashboardService=a,this._toaster=o,this._localStorage=i,this._spinner=r,this._taDataStore=s,this._textAnalysis=l,this.fb=c,this._utils=u,this.onRemove=new m.o,this.dataSource=new d.p,this.displayedColumns=[],this.unsubscribe$=new p.b,this.showOutput=!1,this.showTextError=!1,this.binColor="basic",this.modelsList=[],this.showPatternError=!1,this.uploadModelIssueMsg=!1,this.posTagList=[{tagsName:"Adjective",tagsValue:"ADJ"},{tagsName:"Adposition",tagsValue:"ADP"},{tagsName:"Adverb",tagsValue:"ADV"},{tagsName:"Auxiliary verb",tagsValue:"AUX"},{tagsName:"Coordinating conjunction",tagsValue:"CONJ"},{tagsName:"Determiner",tagsValue:"DET"},{tagsName:"Interjection",tagsValue:"INTJ"},{tagsName:"Noun",tagsValue:"NOUN"},{tagsName:"Numeral",tagsValue:"NUM"},{tagsName:"Particle",tagsValue:"PART"},{tagsName:"Pronoun",tagsValue:"PRON"},{tagsName:"Proper noun",tagsValue:"PROPN"},{tagsName:"Punctuation",tagsValue:"PUNCT"},{tagsName:"Subordinating conjunction",tagsValue:"SCONJ"},{tagsName:"Symbol",tagsValue:"SYM"},{tagsName:"Verb",tagsValue:"VERB"},{tagsName:"Other",tagsValue:"X"}],this.attributesList=[{attributeName:"TEXT",attributeType:"textbox"},{attributeName:"LOWER",attributeType:"textbox"},{attributeName:"IS_ALPHA",attributeType:"checkbox"},{attributeName:"IS_DIGIT",attributeType:"checkbox"},{attributeName:"IS_LOWER",attributeType:"checkbox"},{attributeName:"IS_UPPER",attributeType:"checkbox"},{attributeName:"IS_TITLE",attributeType:"checkbox"},{attributeName:"IS_PUNCT",attributeType:"checkbox"},{attributeName:"IS_SPACE",attributeType:"checkbox"},{attributeName:"IS_STOP",attributeType:"checkbox"},{attributeName:"IS_SENT_START",attributeType:"checkbox"},{attributeName:"LIKE_NUM",attributeType:"checkbox"},{attributeName:"LIKE_URL",attributeType:"checkbox"},{attributeName:"LIKE_EMAIL",attributeType:"checkbox"},{attributeName:"POS",attributeType:"dropdown"},{attributeName:"ENT_TYPE",attributeType:"textbox"}],this.wildCard=["!","?","+","*"],this.phrase=new rt.i("",rt.I.required),this.rbmPipelineSettingsList=[{pipeSettingName:"Count matches for each pattern",pipeSettingTag:"count"},{pipeSettingName:"Concatenate all the matched words for each patterns",pipeSettingTag:"concat"},{pipeSettingName:"Keep the sentences where a match was found",pipeSettingTag:"reduce"}],this.patternBinColor="basic",this.tokenBinColor="basic",this.graphIconColor="basic",this.gettaModelsList=function(t){var e=!1;f._dashboardService.taModel(t).pipe(Object(b.a)(f.unsubscribe$)).subscribe((function(t){f.modelsList=t,f.rbmControl.value.rbmModel&&"spacy-en_core_web_sm"!=f.rbmControl.value.rbmModel&&(f.modelsList.forEach((function(t){t.modelName!==f.rbmControl.value.rbmModel&&t.oldModelFileName!==f.rbmControl.value.rbmModel||(f.rbmControl.value.rbmModel.setValue(JSON.stringify(t)),e=!0)})),e||(f.uploadModelIssueMsg=!0)),f._spinner.stopSpinner()}),(function(t){f._toaster.error("Server Error","Text Analysis"),f._spinner.stopSpinner()}))},this.project=this._localStorage.getItem("project"),this.user=this._localStorage.getItem("user"),this.displayedColumns=["matchedBy","matchId","matchedText"]}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.rbmControl=this.fb.group({rbmModel:["",[rt.I.required]],patternsArray:this.fb.array([])}),this.gettaModelsList("ruleBased"),this.setData(),this.inputData=this._taDataStore.getInputData(this.operation),this._taDataStore.onSubmitEventSubject.subscribe((function(e){t.inputData=t._taDataStore.getInputData(t.operation)}))}},{key:"setData",value:function(){var t=this;this._taDataStore.getAllOperationData().forEach((function(e){e.uid==t.operation.uid&&e.taskConfig.operationParameters&&(e.taskConfig.operationParameters.addFeature.length&&(t.rbmPipelineSettingValue=e.taskConfig.operationParameters.addFeature),t.rbmControl.patchValue({rbmModel:e.taskConfig.operationParameters.model}),e.taskConfig.operationParameters.patterns.forEach((function(e){t.rbmControl.get("patternsArray").push(t.fb.group({name:e.name,phrases:t.fb.array([]),tokens:t.fb.array([])})),t.rbmControl.get("patternsArray").controls.forEach((function(n){n.value.name===e.name&&(e.phrases.forEach((function(e){n.get("phrases").push(t.fb.group({phrase:e}))})),e.tokens.forEach((function(e){var a=t.attributesList.filter((function(t){return t.attributeName===e.attributeLabel}))||"";n.get("tokens").push(t.fb.group({attributeLabel:a,attributeValue:e.attributeValue,wildCard:e.wildCard}))})))}))})))}))}},{key:"patternList",get:function(){return this.rbmControl.get("patternsArray")}},{key:"addPattern",value:function(){var t=this.fb.group({name:["",[rt.I.required]],phrases:this.fb.array([]),tokens:this.fb.array([])});this.patternList.push(t)}},{key:"deletePattern",value:function(t){this.patternList.removeAt(t)}},{key:"addPhrase",value:function(t){var e=this.fb.group({phrase:""});t.get("phrases").push(e)}},{key:"deletePhrase",value:function(t,e){t.get("phrases").removeAt(e)}},{key:"addToken",value:function(t){var e=this.fb.group({attributeLabel:"",attributeValue:"",wildCard:""});t.get("tokens").push(e)}},{key:"deleteToken",value:function(t,e){t.get("tokens").removeAt(e)}},{key:"mouseOverBin",value:function(t){this.binColor="warn"}},{key:"mouseLeaveBin",value:function(t){this.binColor="basic"}},{key:"mouseOverGraph",value:function(){this.graphIconColor="primary"}},{key:"mouseLeaveGraph",value:function(){this.graphIconColor="basic"}},{key:"removeOperation",value:function(){this._taDataStore.removeOperation(this.operation),this.onRemove.emit(this.operation)}},{key:"showPipelineSetting",value:function(){var t=this;this._dialog.open(ma,{minWidth:"50vw",maxWidth:"50vw",data:{list:this.rbmPipelineSettingsList,selectedVal:this.rbmPipelineSettingValue}}).afterClosed().subscribe((function(e){if(e&&void 0!==t.output){t.rbmPipelineSettingValue=e.featureArray;var n=t._taDataStore.getSavedOperationOutput(t.operation.uid);n.taskConfig[0].operationParameters.addFeature=t.rbmPipelineSettingValue,t._taDataStore.saveOperationOutput({uid:t.operation.uid,operation:t.operation.operation,output:t.output,taskConfig:n.taskConfig})}else e&&(t.rbmPipelineSettingValue=e.featureArray)}))}},{key:"onSubmit",value:function(t,e){var n,a,o,i=this;if(t.value.rbmModel)if(null===(a=null===(n=null==t?void 0:t.value)||void 0===n?void 0:n.patternsArray[0])||void 0===a?void 0:a.name){this.showPatternError=!1;var r=null===(o=null==t?void 0:t.value)||void 0===o?void 0:o.patternsArray.filter((function(t){if(""!=t.name)return t.phrases.length&&(t.phrases=t.phrases.map((function(t){return t.phrase||t}))),t.tokens.length&&(t.tokens=t.tokens.map((function(t){return{attributeLabel:t.attributeLabel.attributeName||t.attributeLabel,attributeValue:t.attributeValue,wildCard:t.wildCard}})),t.tokens.filter((function(t){if((""!=t.attributeLabel||t.attributeLabel.length)&&(""!=t.attributeValue||t.attributeValue.length))return t}))),t}));if(0==r)return this.showPatternError=!0,void(this.showOutput=!1);var s=null;e?s=e:(this._spinner.showSpinner(),s="table");var l=this._taDataStore.getInputData(this.operation);if(!(l=null==l?void 0:l.output))return this.showTextError=!0,void this._spinner.stopSpinner();this.showTextError=!1;var c=t.value.rbmModel;"spacy-en_core_web_sm"!=c&&(c=t.value.rbmModel);var u=[{operationName:"ruleBasedMatching",operationParameters:{model:c.modelName||t.value.rbmModel,addFeature:this.rbmPipelineSettingValue||[],modelPath:"./textanalysis/models/"+c.modelName,framework:c.frameWork,patterns:r}}];this._textAnalysis.ruleBasedMatch(l,u,s).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(t){i.showOutput=!0,"html"==s?i._dialog.open(yt,{width:"60%",data:{data:t.data.data,showGraph:"rbm"}}).afterClosed().subscribe((function(t){})):(i.output=t.data.data,i.dataSource.data=t.data.data,i.dataSource._updateChangeSubscription()),i._taDataStore.saveOperationOutput({uid:i.operation.uid,operation:i.operation.operation,output:i.output,taskConfig:u}),i._spinner.stopSpinner(),i._taDataStore.broadcastSubmitEvent("updateInputBar")}),(function(t){i.showOutput=!1,i._spinner.stopSpinner(),i._toaster.error("Server Error","Error performing rule based matching")}))}else this.showPatternError=!0;else this.showPatternError=!0}}]),t}()).\u0275fac=function(t){return new(t||ki)(m.Nb(v.c),m.Nb(fa.a),m.Nb(f.c),m.Nb(h.a),m.Nb(g.a),m.Nb(w),m.Nb(y.a),m.Nb(rt.h),m.Nb(ha.a))},ki.\u0275cmp=m.Hb({type:ki,selectors:[["app-rule-based-matching"]],inputs:{operation:"operation"},outputs:{onRemove:"onRemove"},decls:43,vars:14,consts:[[3,"expanded"],[2,"color","black",3,"matTooltip"],[1,"fa","fa-trash",2,"margin-left","95%","cursor","pointer","font-size","16px",3,"color","mouseover","mouseleave","click"],[2,"border-left","7px solid green","display","flex"],["inputInfoCard",""],[1,"d-flex","flex-row",2,"margin","auto"],[2,"width","min-content","margin","auto"],[1,"fas","fa-info-circle","fa-2x",2,"color","green"],[2,"width","max-content","margin","auto"],[3,"formGroup"],["appearance","fill"],[3,"innerText"],["formControlName","rbmModel"],["value","spacy-en_core_web_sm"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formArrayName","patternsArray"],["class","mt-2","style","background-color: #fefefe",3,"formGroupName",4,"ngFor","ngForOf"],["mat-raised-button","",2,"border-radius","5px","background-color","#08509d","color","white","font-size","16px",3,"click"],[1,"fas","fa-plus","fa-1x","my-float"],["id","taOperationsRbmSubmitBtn","mat-raised-button","",3,"disabled","click"],[1,"linkText",3,"click"],[1,"form-group","row"],["class","text-danger offset-2 mt-2",4,"ngIf"],["class","mt-3","style","background-color: #f5f5f5",4,"ngIf"],[3,"value"],[1,"mt-2",2,"background-color","#fefefe",3,"formGroupName"],[2,"border-bottom","1px solid #3c3c3c"],[2,"margin-left","85%"],[1,"fa","fa-trash",2,"cursor","pointer","font-size","16px",3,"color","mouseover","mouseleave","click"],[1,"mt-2","p-3"],["matInput","","formControlName","name","placeholder","Add a name to pattern"],["formArrayName","phrases"],[3,"formGroupName",4,"ngFor","ngForOf"],["mat-raised-button","",2,"border-radius","5px","background-color","#08509d","color","white","font-size","20px",3,"click"],["formArrayName","tokens"],[3,"formGroupName"],[1,"col-md-9"],["matInput","","formControlName","phrase","placeholder","Enter the phrase to add"],["mat-icon-button","",3,"click"],[2,"color","black"],["appearance","fill",1,"col-md-3"],["formControlName","attributeLabel"],["class","col-md-3",4,"ngIf"],["formControlName","attributeValue",4,"ngIf"],["appearance","fill","class","col-md-3",4,"ngIf"],["formControlName","wildCard"],[1,"col-md-3"],["matInput","","formControlName","attributeValue","placeholder","Enter some text"],["formControlName","attributeValue"],[1,"text-danger","offset-2","mt-2"],[1,"mt-3",2,"background-color","#f5f5f5"],["matTooltip","Matching Visualization","matTooltipPosition","above","matTooltipHideDelay","1000",1,"far","fa-chart-bar",2,"cursor","pointer","font-size","16px",3,"color","mouseover","mouseleave","click"],["tooltip","matTooltip"],[1,"mt-2"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","matchedBy"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","matchId"],["matColumnDef","matchedText"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(m.Tb(0,"mat-expansion-panel",0),m.Tb(1,"mat-expansion-panel-header"),m.Tb(2,"mat-panel-title",1),m.Kc(3),m.Sb(),m.Tb(4,"mat-panel-description"),m.Tb(5,"mat-icon",2),m.ac("mouseover",(function(){return e.mouseOverBin(null)}))("mouseleave",(function(){return e.mouseLeaveBin(null)}))("click",(function(){return e.removeOperation()})),m.Sb(),m.Sb(),m.Sb(),m.Tb(6,"mat-card",3,4),m.Tb(8,"mat-card-content"),m.Tb(9,"div",5),m.Tb(10,"div",6),m.Ob(11,"mat-icon",7),m.Sb(),m.Tb(12,"div",8),m.Tb(13,"b"),m.Kc(14),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Ob(15,"br"),m.Tb(16,"form",9),m.Tb(17,"mat-form-field",10),m.Ob(18,"mat-label",11),m.Tb(19,"mat-select",12),m.Tb(20,"mat-option",13),m.Kc(21,"spacy-en_core_web_sm"),m.Sb(),m.Ic(22,ei,2,2,"mat-option",14),m.Sb(),m.Ic(23,ni,2,0,"mat-error",15),m.Sb(),m.Tb(24,"div",16),m.Ic(25,di,27,4,"mat-card",17),m.Sb(),m.Ob(26,"br"),m.Tb(27,"span"),m.Tb(28,"button",18),m.ac("click",(function(){return e.addPattern()})),m.Ob(29,"i",19),m.Sb(),m.Kc(30," Add Pattern "),m.Sb(),m.Sb(),m.Ob(31,"br"),m.Tb(32,"span"),m.Tb(33,"button",20),m.ac("click",(function(){return e.onSubmit(e.rbmControl)})),m.Kc(34," Submit"),m.Sb(),m.Kc(35,"\xa0\xa0"),m.Tb(36,"span",21),m.ac("click",(function(){return e.showPipelineSetting()})),m.Kc(37,"Settings"),m.Sb(),m.Sb(),m.Tb(38,"div",22),m.Ic(39,pi,2,0,"div",23),m.Ic(40,bi,2,0,"div",23),m.Sb(),m.Ob(41,"br"),m.Ic(42,wi,21,4,"mat-card",24),m.Sb()),2&t&&(m.kc("expanded",e.operation.isPanelExpanded),m.Bb(2),m.kc("matTooltip",e._utils.getTootip("ruleBasedMatching")),m.Bb(1),m.Mc(" ",e.operation.title," "),m.Bb(2),m.kc("color",e.binColor),m.Bb(9),m.Mc("\xa0\xa0\xa0Data is taken from ",e.inputData?e.inputData.operation:"inputData",""),m.Bb(2),m.kc("formGroup",e.rbmControl),m.Bb(2),m.kc("innerText",e.rbmControl.get("rbmModel").value?"Model":"Select a model"),m.Bb(4),m.kc("ngForOf",e.modelsList),m.Bb(1),m.kc("ngIf",e.rbmControl.get("rbmModel").touched&&e.rbmControl.get("rbmModel").hasError("required")),m.Bb(2),m.kc("ngForOf",e.patternList.controls),m.Bb(8),m.kc("disabled",e.rbmControl.invalid),m.Bb(6),m.kc("ngIf",e.showTextError),m.Bb(1),m.kc("ngIf",e.showPatternError),m.Bb(2),m.kc("ngIf",e.showOutput))},directives:[u.c,u.g,u.h,D.b,u.f,x.a,C.a,C.d,rt.K,rt.v,rt.m,I.c,I.g,wt.a,rt.u,rt.k,kt.o,s.s,s.t,rt.g,_.b,I.b,rt.n,C.f,C.n,C.m,O.b,rt.d,da.b,d.o,d.c,d.i,d.b,d.k,d.n,d.h,d.a,d.j,d.m],styles:["button#taOperationsRbmSubmitBtn[_ngcontent-%COMP%]:enabled{margin-top:10px;background-color:#08509d;color:#fff}span.linkText[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}"]}),ki),_i=i("sYmb"),Di=i("S8xs"),Ii=i("psEu"),Oi=i("s3T5"),Ei=i("LYaK"),Bi=i("+Cnu"),Ni=i("hzby"),Mi=i("dZIy"),Ai=i("K3ix"),Pi=i("Lm2G"),Fi=i("yyhP"),Ki=i("jLjo"),Ri=i("44PX"),Li=i("kUHs"),ji=i("Mfq2"),Vi=i("EDFS"),qi=i("qCdp"),zi=i("NCSQ"),Ui=i("SP0p"),Wi=i("wNA8"),$i=i("KI+Z"),Gi=i("3M9v"),Hi=i("SItC"),Xi=i("MgAP"),Yi=i("zQvE"),Qi=i("x3Qb"),Ji=i("/1cH"),Zi=i("vxfF"),tr=i("cH1L"),er=i("jaxi"),nr=i("A5z7"),ar=i("iadO"),or=i("zkoq"),ir=i("ihCf"),rr=i("MutI"),sr=i("f0Cb"),lr=i("STbY"),cr=i("bv9b"),ur=i("Xa2L"),dr=i("QibW"),pr=i("XhcP"),br=i("1jcm"),mr=i("dNgK"),fr=i("wZkO"),hr=i("/t3+"),gr=i("xHqg"),vr=i("8yBR"),Sr=i("WUEe"),yr=i("biqx"),Tr=i("wKC1"),wr=i("ia2u"),kr=i("jCJ1"),Cr=i("hi0L"),xr=i("g+ir"),_r=i("mdW0"),Dr=i("j0Ka"),Ir=i("5uqF"),Or=[{path:"",component:it},{path:"create-experiment",component:ua}],Er=((Ci=function t(){n(this,t)}).\u0275mod=m.Lb({type:Ci}),Ci.\u0275inj=m.Kb({factory:function(t){return new(t||Ci)},imports:[[s.c,c.a,u.b,C.j,Ba.b,v.h,zn.forRoot({group:"test"}),l.i.forChild(Or)]]}),Ci);m.Ac(ia,[s.q,s.r,s.s,s.t,s.A,s.w,s.x,s.y,s.z,s.u,s.v,rt.K,rt.z,rt.J,rt.d,rt.A,rt.D,rt.a,rt.G,rt.H,rt.C,rt.u,rt.v,rt.F,rt.q,rt.p,rt.B,rt.b,rt.e,rt.x,rt.y,rt.w,rt.j,rt.m,rt.k,rt.n,rt.g,_i.a,l.j,l.f,l.h,l.g,l.k,Di.a,Di.c,Ii.a,Oi.a,Oi.b,Oi.c,Ei.c,Ei.a,Bi.a,Ni.l,Ni.m,Ni.o,Ni.p,Ni.q,Ni.a,Ni.b,Ni.c,Ni.d,Ni.e,Ni.g,Ni.h,Ni.i,Ni.j,Ni.k,Mi.b,Mi.d,Mi.a,Ai.a,Ai.b,Pi.a,Pi.b,Fi.a,Fi.b,Ki.a,Ri.b,Ri.e,Ri.c,Ri.a,Li.a,ji.a,Vi.a,qi.a,qi.b,f.a,zi.a,Ui.a,Wi.a,$i.a,Gi.a,Hi.a,Xi.a,Yi.a,Qi.a,Ji.a,Ji.d,Ji.c,Zi.a,kt.o,kt.n,tr.b,_.b,_.a,er.b,er.a,C.a,C.f,C.n,C.d,C.m,C.l,C.b,C.e,C.k,C.i,C.h,C.g,C.o,C.c,da.b,da.d,nr.d,nr.a,nr.c,nr.e,nr.b,nr.f,d.o,d.i,d.k,d.c,d.b,d.n,d.e,d.g,d.h,d.a,d.d,d.j,d.m,d.f,d.l,d.r,ar.a,ar.b,ar.f,ar.g,ar.h,ar.j,ar.k,ar.m,ar.p,ar.n,ar.c,ar.d,ar.o,ar.l,ar.e,v.f,v.e,v.j,v.g,v.d,u.a,u.c,u.d,u.g,u.h,u.f,u.e,I.b,I.c,I.f,I.g,I.h,I.i,I.j,or.b,or.d,or.g,kt.k,or.f,or.e,or.a,x.a,ir.b,ir.c,O.b,O.d,rr.a,rr.h,rr.d,rr.b,rr.c,rr.g,kt.r,rr.i,rr.f,sr.a,lr.e,lr.b,lr.d,lr.a,B.a,cr.a,ur.a,ur.c,dr.c,dr.b,kt.t,wt.a,wt.c,pr.a,pr.b,pr.c,pr.d,pr.e,pr.f,br.c,br.a,Ba.a,mr.d,E.a,E.b,fr.c,fr.d,fr.a,fr.f,fr.e,fr.b,hr.a,hr.c,D.b,D.d,gr.a,gr.j,gr.b,gr.d,gr.e,gr.h,gr.i,gr.c,gr.f,vr.a,vr.f,vr.h,vr.i,vr.b,vr.e,vr.g,Sr.a,N.a,yr.a,Tr.a,wr.a,kr.b,kr.f,qn,it,ua,Bt,Gn,ia,Ea,qa,to,ho,To,Go,ti,xi,yt,ma],[s.b,s.G,s.p,s.k,s.E,s.g,s.C,s.F,s.d,s.f,s.i,s.j,s.l,_i.d,Ct.a,Cr.a,xr.a,_r.a,Dr.a,Ir.a])},WUEe:function(t,e,a){"use strict";a.d(e,"a",(function(){return m}));var i=a("0IaG"),r=a("AytR"),s=a("fXoL"),l=a("jhN1"),c=a("ofXK"),u=a("bTqV"),d=a("/3uh");function p(t,e){1&t&&s.Ob(0,"app-progress-spinner",4)}function b(t,e){if(1&t&&(s.Tb(0,"div"),s.Ob(1,"iframe",5),s.Sb()),2&t){var n=s.ec();s.Bb(1),s.kc("src",n.safeUrl,s.yc)}}var m=function(){var t=function(){function t(e,a){n(this,t),this.dialogData=e,this._sanitizer=a,this.serverBaseUrl=r.a.serverBaseUrl,this.showSpinner=!0}return o(t,[{key:"ngOnInit",value:function(){switch(this.showSpinner=!0,this.edaData=this.dialogData.edaReportData,this.dialogData.moduleName){case"data-set":this.safeUrl=this._sanitizer.bypassSecurityTrustResourceUrl("".concat(this.serverBaseUrl,"/api/v2/projects/").concat(this.edaData.projectId,"/data/").concat(this.edaData.dataId,"/report")),this.showSpinner=!1;break;case"reports":case"eda":this.safeUrl=this._sanitizer.bypassSecurityTrustResourceUrl("".concat(this.serverBaseUrl,"/api/v2/projects/").concat(this.edaData.projectId,"/eda/").concat(this.edaData.edaId,"/advedainfo?currentEdaId=").concat(this.edaData.currentEdaId,"&currentPipelineFilename=").concat(this.edaData.currentPipelineFilename)),this.showSpinner=!1;break;case"cluster":this.safeUrl=this._sanitizer.bypassSecurityTrustResourceUrl("".concat(this.serverBaseUrl,"/api/projects/").concat(this.edaData.projectId,"/clustering/visualize/scatterplot?filename=").concat(this.edaData.fileName)),this.showSpinner=!1;break;default:this.safeUrl=""}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.Nb(i.a),s.Nb(l.b))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-eda-report"]],decls:6,vars:2,consts:[[2,"max-height","78vh !important"],["class","spinner",4,"ngIf"],[4,"ngIf"],["mat-stroked-button","","mat-dialog-close","",1,"close-btn"],[1,"spinner"],[1,"ps-iframe-loader",3,"src"]],template:function(t,e){1&t&&(s.Tb(0,"mat-dialog-content",0),s.Ic(1,p,1,0,"app-progress-spinner",1),s.Ic(2,b,2,1,"div",2),s.Sb(),s.Tb(3,"mat-dialog-actions"),s.Tb(4,"button",3),s.Kc(5,"Close"),s.Sb(),s.Sb()),2&t&&(s.Bb(1),s.kc("ngIf",e.showSpinner),s.Bb(1),s.kc("ngIf",e.safeUrl))},directives:[i.g,c.t,i.d,u.b,i.e,d.a],styles:['.spinner[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%}iframe[_ngcontent-%COMP%]{width:100%;height:900px}.ps-iframe-loader[_ngcontent-%COMP%]{background:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 100% 100%"><text fill="blue" x="50%" y="50%" font-family="Lucida Grande, sans-serif" font-size="24" text-anchor="middle">This may take some time. Please wait...</text></svg>\') 0 0 no-repeat}.close-btn[_ngcontent-%COMP%]{font-size:16px!important;margin-left:auto!important;border:1px solid #07509d!important;padding:0 20px!important;line-height:34px!important;color:#07509d!important;background-color:unset}[_nghost-%COMP%]     .footer-text>p{display:none!important}']}),t}()},tagK:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var i=a("AytR"),r=a("fXoL"),s=a("tk/3"),l=function(){var t=function(){function t(e){n(this,t),this._http=e,this.serverBaseUrl=i.a.serverBaseUrl}return o(t,[{key:"experimentList",value:function(t){return this._http.get("".concat(this.serverBaseUrl,"/api/v2/projects/").concat(t,"/textAnalysis/experiments"))}},{key:"listFeatureDetails",value:function(t,e,n){return this._http.get("".concat(this.serverBaseUrl,"/api/v2/projects/").concat(t,"/textAnalysis/feature"),{params:{featureName:e,fileName:n}})}},{key:"deleteExperiment",value:function(t,e){return this._http.delete("".concat(this.serverBaseUrl,"/api/v2/projects/").concat(t,"/textAnalysis/experiments"),{params:{experimentId:e}})}},{key:"taExperiment",value:function(t){return this._http.get("".concat(this.serverBaseUrl,"/api/v2/textAnalysis/").concat(t))}},{key:"textCleaning",value:function(t,e){return this._http.post(this.serverBaseUrl+"/api/v2/textAnalysis/textCleaning",{data:t,taskConfig:e})}},{key:"pos",value:function(t,e,n){return this._http.post(this.serverBaseUrl+"/api/v2/textAnalysis/pos",{data:t,taskConfig:e,renderType:n})}},{key:"ner",value:function(t,e,n){return this._http.post(this.serverBaseUrl+"/api/v2/textAnalysis/ner",{data:t,taskConfig:e,renderType:n})}},{key:"sentimentAnalysis",value:function(t){return this._http.post(this.serverBaseUrl+"/api/v2/textAnalysis/sentimentAnalysis",{data:t.data,taskConfig:t.taskConfig})}},{key:"textSummarization",value:function(t){return this._http.post(this.serverBaseUrl+"/api/v2/textAnalysis/textSummarization",{data:t.data,taskConfig:t.taskConfig})}},{key:"wordFrequency",value:function(t){return this._http.post(this.serverBaseUrl+"/api/v2/textAnalysis/wordFrequency",{data:t})}},{key:"wordEmbedding",value:function(t){return this._http.post(this.serverBaseUrl+"/api/v2/textAnalysis/wordEmbedding",{data:t.data,taskConfig:t.taskConfig})}},{key:"ruleBasedMatch",value:function(t,e,n){return this._http.post(this.serverBaseUrl+"/api/v2/textAnalysis/ruleBasedMatch",{data:t,taskConfig:e,renderType:n})}},{key:"saveTextAnalysis",value:function(t){return this._http.post(this.serverBaseUrl+"/api/v2/textAnalysis/saveAnalysis",Object.assign({},t))}},{key:"saveApplyTextAnalysis",value:function(t){return this._http.post(this.serverBaseUrl+"/api/v2/textAnalysis/apply/saveAnalysis",Object.assign({},t))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Xb(s.b))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},wNA8:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var i=a("fXoL"),r=a("9PQl"),s=function(){var t=function(){function t(e){n(this,t),this.element=e,this.defaultOptions={barColor:"#ef1e25",trackColor:"#f9f9f9",scaleColor:"#dfe0e0",scaleLength:5,lineCap:"round",lineWidth:3,size:110,rotate:0,animate:{duration:1e3,enabled:!0}},this.percent=this.percent||0,this.options=$.extend({},this.defaultOptions,this.options)}return o(t,[{key:"ngOnInit",value:function(){r&&(this.pieChart=new r(this.element.nativeElement,this.options),this.pieChart.update(this.percent))}},{key:"ngOnChanges",value:function(t){this.pieChart&&t.percent&&this.pieChart.update(this.percent)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Nb(i.l))},t.\u0275dir=i.Ib({type:t,selectors:[["","easypiechart",""]],inputs:{percent:"percent",options:"options"},features:[i.zb]}),t}()}}])}();
//# sourceMappingURL=12-es5.27d246420a9815c12562.js.map